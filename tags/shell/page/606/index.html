<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell | 开发者问答集锦</title>
    <meta property="og:title" content="shell - 开发者问答集锦">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/tags/shell/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+xml" href="https://zaina.newban.cn/tags/shell/index.xml" title="开发者问答集锦" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <h3 class="archive-title">
        包含标签
        <span class="keyword">shell</span>
        的文章
    </h3>
    

    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADbash%E7%9A%84%E9%83%A8%E5%88%86%E7%89%B9%E6%80%A7/">SHELL中bash的部分特性</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADbash%E7%9A%84%E9%83%A8%E5%88%86%E7%89%B9%E6%80%A7/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADbinbashmbadinterpreternosuchfileordirectory%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">shell中binbashMbadinterpreterNosuchfileordirectory解决方法</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            今天我执行一个shell脚本报此错误：/bin/bash^M: bad interpreter: No such file or directory，如下图

问题原因：
shell脚本文件是dos格式，即每一行结尾以\r\n来标识，而unix格式的文件行尾则以\n来标识
查看文件格式的方法：
1、cat -A filename 从显示结果可以判断，dos格式的文件行尾为^M$，unix格式的文件行尾为$。
2、od -t x1 filename 如果看到输出内容中存在0d 0a的字符，那么文件是dos格式，如果只有0a，则是unix格式。
3、vi filename打开文件，执行 : set ff，如果文件为dos格式在显示为fileformat=dos，如果是unxi则显示为fileformat=unix。
解决方法：
1、使用linux命令dos2unix filename，直接把文件转换为unix格式
2、使用sed命令sed -i &ldquo;s/\r//&rdquo; filename 或者 sed -i &ldquo;s/^M//&rdquo; filename直接替换结尾符为unix格式
3、vi filename打开文件，执行 : set ff=unix 设置文件为unix，然后执行:wq，保存成unix格式。……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADbinbashmbadinterpreternosuchfileordirectory%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcase%E5%88%A4%E6%96%AD%E7%BB%93%E6%9E%84%E7%9A%84%E7%94%A8%E6%B3%95%E7%AC%94%E8%AE%B0/">Shell中case判断结构的用法笔记</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            Shell中case判断结构的用法
case判断的用法和if/elif/else结构的用法等价，case判断结构也用于多种可能情况下的分支选择。
语法结构如下：
case var in
var1) command1 ;;
var2) command2 ;;
var3) command3 ;;
&hellip;
*) command ;;
esac
原理：从上到下依次比较var和var1、var2、var3的值是否相等，如果匹配相对则执行后面的命令语句，在武艺匹配的情况下匹配最后的默认*，并执行后面的默认命令。
注意：var1、var2等对应的值只能是常量或者是正则表达式。
示例：
cat system.sh
内容如下：
#!/bin/sh
SYSTEM=uname -s
case $SYSTEM in
Linux)
echo &ldquo;My system is Linux&rdquo;
echo &ldquo;Do Linux stuff here&hellip;&rdquo;
;;
FreeBSD)
echo &ldquo;My system is FreeBSD&rdquo;
echo &ldquo;Do FreeBSD stuff here&hellip;&rdquo;
;;
*)
echo &ldquo;Unknown system : $SYSTEM&rdquo;
echo &ldquo;I don&rsquo;t what to do&hellip;&rdquo;
;;……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcase%E5%88%A4%E6%96%AD%E7%BB%93%E6%9E%84%E7%9A%84%E7%94%A8%E6%B3%95%E7%AC%94%E8%AE%B0/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcontinue%E5%92%8Cbreak%E5%8C%BA%E5%88%AB/">shell中continue和break区别</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcontinue%E5%92%8Cbreak%E5%8C%BA%E5%88%AB/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcp%E5%91%BD%E4%BB%A4/">shell中cp命令</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            Shell 中cp命令
功能: 复制文件或目录
说明: cp指令用于复制文件或目录，如同时指定两个以上的文件或目录，且最后的目的地是一个已经存在的目录，则它会把前面指定的所有文件或目录复制到此目录中。若同时指定多个文件或目录，而最后的目的地并非一个已存在的目录，则会出现错误信息
参数:
-a 或 &ndash;archive 此参数的效果和同时指定&rdquo;-dpR&rdquo;参数相同
-b 或 &ndash;backup 删除、覆盖目的文件先备份，备份的文件或目录亦建立为符号链接，并指向源文件或目录链接的源文件或目录。假如没有加上这个参数，在复制过程中若遇到符号链接，则会直接复制源文件或目录
-f 或 &ndash;force 强行复制文件或目录， 不论目的文件或目录是否已经存在
-i 或 &ndash;interactive 覆盖文件之前先询问用户
-l 或 &ndash;link 对源文件建立硬链接，而非复制文件
-p 或 &ndash;preserve 保留源文件或目录的属性，包括所有者、所属组、权限与时间
-P 或 &ndash;parents 保留源文件或目录的路径，此路径可以是绝对路径或相对路径，且目的目录必须已经丰在
-r 递归处理，将指定目录下的文件与子目录一并处理。若源文件或目录的形态，不属于目录或符号链接，则一律视为普通文件处理
-R 或 &ndash;recursive 递归处理，将指定目录下的文件及子目录一并处理
-s 或 &ndash;symbolic-link 对源文件建立符号链接，而非复制文件
-S 或 &ndash;suffix= 用&rdquo;-b&rdquo;参数备份目的文件后，备份文件的字尾会被加上一个备份字符串。默认的备份字尾符串是符号&rdquo;~&rdquo;
-u 或 &ndash;update 使用这项参数之后，只会在源文件的修改时间(Modification Time)较目的文件更新时，或是名称相互对应的目的文件并不存在，才复制文件
-v 或 &ndash;verbose 显示执行过程
-V 或 &ndash;version-control= 指定当备份文件时，备份文件名的命名方式，有以下3种:
1.numbered或t, 将使用备份编号，会在字尾加上~1~字符串，其数字编号依次递增
2.simple或never 将使用简单备份，默认的备份字尾字符串是~, 也可通过-S来指定
3.existing或nil将使用当前方式，程序会先检查是否存在着备份编号，若有则采用备份编号，若无则采用简单备份
-x 或 &ndash;one-file-system 复制的文件或目录存放的文件系统，必须与cp指令执行时所处的文件系统相同，否则不复制，亦不处理位于其他分区的文件……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcp%E5%91%BD%E4%BB%A4/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcrontab%E8%AF%A6%E8%A7%A3shell%E7%BC%96%E7%A8%8B/">Shell中crontab详解shell编程</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcrontab%E8%AF%A6%E8%A7%A3shell%E7%BC%96%E7%A8%8B/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcurl%E7%94%A8%E6%88%B7%E8%AF%A6%E8%A7%A3/">shell中curl用户详解</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcurl%E7%94%A8%E6%88%B7%E8%AF%A6%E8%A7%A3/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcut%E7%94%A8%E6%B3%95%E7%AE%80%E4%BB%8B/">shell中cut用法简介</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            shell中的cut命令 (2010-03-30 17:05:31)
转载 ▼
标签：
shell cut 杂谈 | 分类： shell
&mdash;|&mdash;
cut是以每一行为一个处理对象的，这种机制和sed是一样的。（关于sed的入门文章将在近期发布）
2 cut一般以什么为依据呢? 也就是说，我怎么告诉cut我想定位到的剪切内容呢?
cut命令主要是接受三个定位方法：
第一，字节（bytes），用选项-b
第二，字符（characters），用选项-c
第三，域（fields），用选项-f
3 以“字节”定位，给个最简单的例子?
举个例子吧，当你执行ps命令时，会输出类似如下的内容：
[rocrocket@rocrocket programming]$ who
rocrocket :0 2009-01-08 11:07
rocrocket pts/0 2009-01-08 11:23 (:0.0)
rocrocket pts/1 2009-01-08 14:15 (:0.0)
如果我们想提取每一行的第3个字节，就这样：
[rocrocket@rocrocket programming]$ who|cut -b 3
c
c
c
看明白了吧，-b后面可以设定要提取哪一个字节，其实-b和3之间没有空格也是可以的，但推荐有空格:)
4 如果“字节”定位中，我想提取第3，第4、第5和第8个字节，怎么办?
-b支持形如3-5的写法，而且多个定位之间用逗号隔开就成了。看看例子吧：
[rocrocket@rocrocket programming]$ who|cut -b 3-5,8
croe
croe
croe
但有一点要注意，cut命令如果使用了-b选项，那么执行此命令时，cut会先把- b后面所有的定位进行从小到大排序，然后再提取。可不能颠倒定位的顺序哦。这个例子就可以说明这个问题：
[rocrocket@rocrocket programming]$ who|cut -b 8,3-5……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADcut%E7%94%A8%E6%B3%95%E7%AE%80%E4%BB%8B/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADdate%E5%81%9A%E5%BE%AA%E7%8E%AF%E5%8F%98%E9%87%8F%E4%BB%A5%E5%8F%8Adate%E7%AE%80%E5%8D%95%E8%A7%A3%E6%9E%90/">shell中date做循环变量以及date简单解析</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADdate%E5%81%9A%E5%BE%AA%E7%8E%AF%E5%8F%98%E9%87%8F%E4%BB%A5%E5%8F%8Adate%E7%AE%80%E5%8D%95%E8%A7%A3%E6%9E%90/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%ADdate%E5%91%BD%E4%BB%A4%E5%AF%B9month%E8%BF%9B%E8%A1%8C%E5%8A%A0%E5%87%8F%E6%93%8D%E4%BD%9C%E7%9A%84bug/">shell中date命令对month进行加减操作的bug</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            shell脚本中如何取上个月的月份呢？很容易能想到下面的命令：
 date +%Y%m -d &lsquo;-1 month&rsquo;
 或者
 date +%Y%m -d &lsquo;last month&rsquo;
 在大部分情况下这个命令运行正确。但是有些情况下这个命令会出现问题，比如当前日期是3月30、3月31、5月31等的时候，上面的命令得到的结果还是当月，而不是我们期望的上月。
这个问题是怎么产生的呢？比如当当前日期是5月31时，-1 month它只是将月份-1，就得到4月31，但是实际上4月只有30天，所以4月31就被转为5月1号，导致得到的结果还是当前月份。
为了解决这个问题，可以这么写（先转到当月1号的日期再减）：
 date +%Y%m -d &ldquo;date +%Y%m01 -1 month&rdquo;
 或者
 date +%Y%m -d &ldquo;date +%Y%m01 -1 day&rdquo;
 ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%ADdate%E5%91%BD%E4%BB%A4%E5%AF%B9month%E8%BF%9B%E8%A1%8C%E5%8A%A0%E5%87%8F%E6%93%8D%E4%BD%9C%E7%9A%84bug/">阅读全文</a></p>
        </div>
    </article>
    

    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://zaina.newban.cn/tags/shell/page/605/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/604/">604</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/605/">605</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://zaina.newban.cn/tags/shell/page/606/">606</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/607/">607</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/608/">608</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/1621/">1621</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://zaina.newban.cn/tags/shell/page/607/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>