<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell | 开发者问答集锦</title>
    <meta property="og:title" content="shell - 开发者问答集锦">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/tags/shell/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+xml" href="https://zaina.newban.cn/tags/shell/index.xml" title="开发者问答集锦" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <h3 class="archive-title">
        包含标签
        <span class="keyword">shell</span>
        的文章
    </h3>
    

    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A6%82%E8%BF%B0/">Shell概述</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A6%82%E8%BF%B0/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A6%82%E8%BF%B0%E5%8F%98%E9%87%8F%E5%8F%8A%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%BF%90%E7%AE%97%E5%92%8C%E6%AF%94%E8%BE%83/">shell概述变量及输入输出运算和比较</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            当前主流的操作系统shell 1.shell 概念：
是 操作系统内核与用户交互的接口 。
2.每类操作系统都会有相应的shell ,不论windows,linux ,还是unix 。
1）windows家族系列：
windows shell: 如windows 的dos 系统 （使用dos 命令可以编写批处理）。
2）linux 家族系列：
linux shell ： Linux默认 的shell为Bourne Again shell ，简称 bash 。
REDHAT ENTERPRISE 5/6/7
20REDHAT CENOS 社区版5/6/7
Fedora
SUSE 9/10/11
3） unix家族 系列Unix 默认使用的shell，根据操作系统的不同而不同，其中：
FreeBSD缺省的是C shell
HP-UX缺省的是POSIX shell
IBM AIX缺省的是Korn Shell
HP UNIX
FREE BSD
IBM AIX
编写shell程序的步骤 1.创建以.sh为扩展名的文件
创建方法： 用vi编辑器创建。如:
vi hello.sh
2.编辑脚本文件
编辑脚本文件需要注意的内容：
1） 第一行以“#!” 开头，声明所使用的shell的全路径。
2）脚本中适量增加注释内容。
注释的语法以“# ” 开头，”#”之后的内容不被执行。如：……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A6%82%E8%BF%B0%E5%8F%98%E9%87%8F%E5%8F%8A%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%BF%90%E7%AE%97%E5%92%8C%E6%AF%94%E8%BE%83/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A6%82%E8%BF%B0%E7%BC%96%E5%86%99%E5%8F%8A%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%ACshell%E5%8F%98%E9%87%8F/">Shell概述编写及执行脚本Shell变量</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            NSD SHELL DAY01
案例1：Shell基础应用
案例2：简单Shell脚本的设计
案例3：使用Shell变量
案例4：变量的扩展应用
1 案例1：Shell基础应用
先了解shell



1.1 问题
本案例要求熟悉Linux Shell环境的特点，主要练习以下操作：
切换用户的Shell环境
练习命令历史、命令别名
重定向标准输入/输出/错误输出
管道操作实践
1.2 步骤
实现此案例需要按照如下步骤进行。
步骤一：切换用户的Shell环境
什么是shell？
Shell是在Linux内核与用户之间的解释器程序，通常指的是bash，负责向内核翻译及传达用户/程序指令，如图-1所示。

shell的使用方式：
1.交互执行指令：人工干预，执行效率底。
2.非交互执行指令：安静地在后台执行，执行效率高，方便写脚本。
若需要临时使用另一种Shell环境，可以直接执行对应的Shell解释器程序，比如只要执行ksh可以切换到ksh命令行环境。
[root@svr5 ~]# yum -y install ksh //若缺少ksh请先安装ksh包
.. ..
[root@svr5 ~]# cat /etc/shells
/bin/sh
/bin/bash
/sbin/nologin
/bin/tcsh
/bin/csh
/bin/ksh //确认当前系统已识别ksh
[root@svr5 ~]# ksh //进入ksh环境
[root@svr5]~# exit //返回到切换前的bash环境
若希望修改用户的登录Shell，管理员可以直接通过usermod（或useradd）命令设置。比如，以下操作可将用户zhangsan的登录Shell改为/bin/ksh：
[root@svr5 ~]# usermod -s /bin/ksh zhangsan //执行修改操作
[root@svr5 ~]# grep ‘zhangsan’ /etc/passwd……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A6%82%E8%BF%B0%E7%BC%96%E5%86%99%E5%8F%8A%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%ACshell%E5%8F%98%E9%87%8F/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9Fseq%E5%8A%9F%E8%83%BD%E5%8F%8Ashellfor%E5%BE%AA%E7%8E%AF%E6%80%BB%E7%BB%93/">shell模拟seq功能及shellfor循环总结</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            今天浏览网页的时候突然看到一个shell程序，里面有一个命令叫做seq,它的作用是用于产生从某个数到另外一个数之间的所有整数，Seq命令说明如下：
-s 指定分隔符，默认是换行
-w 等位补全，就是宽度相等，不足的前面补 0
-f 格式化输出，就是指定打印的格式
可以不指定起始数值，则默认为 1，见第 1行例子
另外，不用 seq的话还可以这样：
for i in {1..10} do echo $i done
但是我把1和10分别用$1,$2来代替，使用外部输入，只能输出{1..10}
另外我想了一下用for循环来产生数字做到seq的部分效果，才发现我linuxshell的for循环结构忘了，我就自己google了一下，以下为简要解决方案：
在shell用for循环做数字递增的时候发现问题，特列出shell下for循环的几种方法:
1.
for i in seq 11000000
do
echo $i
done
用seq 1 10000000做递增，之前用这种方法的时候没遇到问题，因为之前的i根本就没用到百万(1000000),因为项目需要我这个数字远大于百万，发现用seq数值到 1000000时转换为1e+06,根本无法作为数字进行其他运算,或者将$i有效、正确的取用，遂求其他方法解决，如下
2.
for((i=1;i&lt;10000000;i++))
do
echo $i
done
3.
i=1
while(($i&lt;10000000))
do
echo $i
i=expr $i + 1
done
因为本方法调用expr故运行速度会比第1，第2种慢不少不过可稍作改进，将i=expr $i + 1改为i=$(($i+1))即可稍作速度的提升,不过具体得看相应shell环境是否支持
4.
for i in{1..10000000}
do
echo $i
done
缺陷：无法使用参数输入的数字。……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9Fseq%E5%8A%9F%E8%83%BD%E5%8F%8Ashellfor%E5%BE%AA%E7%8E%AF%E6%80%BB%E7%BB%93/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E5%8F%8C%E8%89%B2%E7%90%83%E5%BC%80%E5%A5%96/">shell模拟双色球开奖</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            #!/bin/bash
echo &ldquo;彩民朋友们，福彩双色球摇奖开始了，请拿好手中的彩票。本期摇奖嘉宾&mdash;蒙瑞文!!!!!&rdquo;
###红球###
echo -n &ldquo;红球:&rdquo;
for i in $(seq 6)
do
sleep 2
echo -n &ldquo; $[$RANDOM%33+1]&rdquo;
done
echo
###蓝球####
echo -n &ldquo;蓝球:&rdquo;
for i in $(seq 1)
do
sleep 2
echo -n &ldquo; $[$RANDOM%16+1]&rdquo;
done
sleep 2
echo
echo &ldquo;经公证人员公证，本次摇奖真实有效&mdash;&ndash;北京方圆公证处!!!!!&rdquo;……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E5%8F%8C%E8%89%B2%E7%90%83%E5%BC%80%E5%A5%96/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%84%9A%E6%9C%AC%E7%9A%84%E8%AF%A6%E7%BB%86%E6%B3%A8%E8%A7%A3/">SHELL模拟多线程脚本的详细注解</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%84%9A%E6%9C%AC%E7%9A%84%E8%AF%A6%E7%BB%86%E6%B3%A8%E8%A7%A3/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5/">Shell模拟密码输入</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E5%B9%B6%E5%8F%91%E6%89%A7%E8%A1%8C/">shell模拟并发执行</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E5%B9%B6%E5%8F%91%E6%89%A7%E8%A1%8C/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E7%A8%8B%E5%BA%8F%E6%B6%88%E8%80%97cpu%E8%B5%84%E6%BA%90/">shell模拟程序消耗CPU资源</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            背景： 应急方案预演：在做分布式系统的时候，部分系统资源比较空闲（性能好）。在测试高可用场景中想摸底整个系统在全部在高负载的情况下：系统的容灾、主备切换、冗余服务器拉起等，需要将服务器短板资源全部达到预警值附近。
方案一： 根据测试情况，起停对应集群的节点
优缺点：该方案操作繁琐，且破坏了场景的完整性；在停止不当的情况下可能造成业务失败
方案二： 模拟消耗资源
程序：多线程模拟，需要根据服务器的配置动态能够调整
优缺点：不动程序，只消耗资源；当然操作也会造成司机，可能会全部占满计算资源，导致计算机无法工作（可以稍作修改：将入参做个判断使它最大保持90这样就不会因为误操作导致沾满计算资源）
shell实现 #!/bin/bash #定义生成的c文件名称和可执行程序名称 fileName=&quot;cpu_use&quot; #定义使用方法说明 usage(){ echo &quot;./`basename $0` [sleeptime/worktime] [adjustRange]&quot; echo &quot;&quot; echo &quot;start:按照核的数量启动 $fileName&quot; echo &quot;stop:停止所有 $fileName&quot; echo &quot;adjust:自动调整占用CPU的使用率&quot; echo &quot;CPU_Rate:占用cpu比率&quot; echo &quot;sleeptime/worktime:CPU空闲和工作时间的占比 可以通过该参数调整&quot; echo &quot;adjustRange:允许CPU的波动范围 即curentCPU-adjustRange CPU_Rate curentCPU+adjustRange就不再调整&quot; echo &quot;&quot; exit } #判定参数的个数，参数不能少于1个，且必须为限定参数:start,stop,adjust if [ $# -lt 1 ] then usage fi #设置需要占用的CPU比率，默认为50% if [ &quot;$2&quot; == &quot;&quot; ] then CPU_Rate=50 else CPU_Rate=$2 fi #设置允许的波动范围，默认为5 if [ &quot;$4&quot; == &quot;&quot; ] then adjustRange=5 else adjustRange=$4 fi #停止 #没有参数 stop_thread(){ if [ `ps -ef|grep $fileName|grep -v grep|awk '{print $2}'|wc -l` -ne 0 ] then ps -ef|grep $fileName|grep -v grep|awk '{print $2}'|xargs kill -9 fi } #创建 #参数一个:cpu空闲时间和工作时间的比率，默认是1，对应脚本入参的第三个参数[sleeptime/worktime] start_thread(){ if [ &quot;$1&quot; == &quot;&quot; ] then rate=1 else rate=$1 fi cat &lt; $fileName.……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E7%A8%8B%E5%BA%8F%E6%B6%88%E8%80%97cpu%E8%B5%84%E6%BA%90/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E8%BF%9B%E7%A8%8B%E6%B1%A0/">shell模拟进程池</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E6%A8%A1%E6%8B%9F%E8%BF%9B%E7%A8%8B%E6%B1%A0/">阅读全文</a></p>
        </div>
    </article>
    

    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://zaina.newban.cn/tags/shell/page/872/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/871/">871</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/872/">872</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://zaina.newban.cn/tags/shell/page/873/">873</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/874/">874</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/875/">875</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/1621/">1621</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://zaina.newban.cn/tags/shell/page/874/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>