<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell | 开发者问答集锦</title>
    <meta property="og:title" content="shell - 开发者问答集锦">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/tags/shell/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+xml" href="https://zaina.newban.cn/tags/shell/index.xml" title="开发者问答集锦" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <h3 class="archive-title">
        包含标签
        <span class="keyword">shell</span>
        的文章
    </h3>
    

    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E4%BD%BF%E7%94%A8shell%E5%8F%98%E9%87%8Fshell%E8%8E%B7%E5%8F%96awk%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F%E5%80%BC/">awk使用shell变量shell获取awk中的变量值</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E4%BD%BF%E7%94%A8shell%E5%8F%98%E9%87%8Fshell%E8%8E%B7%E5%8F%96awk%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F%E5%80%BC/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E4%BD%BF%E7%94%A8shell%E5%8F%98%E9%87%8F%E5%8F%8Ashell%E4%BD%BF%E7%94%A8awk%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F/">awk使用shell变量及shell使用awk中的变量</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            在写shell脚本时，经常会使用到awk程序。但是有些复杂的逻辑，可能需要在awk中使用在shell中定义的变量，而且awk程序处理之后，产生的中间变量，还需要在shell中继续处理。
一、那如何在awk中使用在shell中定义的变量呢？
方法一： 使用&rdquo;&lsquo;把shell变量包起来，即&rdquo;&rsquo;$var&rsquo;&ldquo;；注意是“双引号+单引号+shell变量+单引号+双引号”的格式。
这种写法大家无需改变用&rsquo;括起awk程序的习惯,是老外常用的写法；这种写法其实际是双括号变为单括号的常量,传递给了awk.
例如：
var=&ldquo;abc&rdquo;
awk &lsquo;BEGIN{print &ldquo;&rsquo;$var&rsquo;&rdquo;}&rsquo;
方法二： 和方法一类似，但使用&rdquo;&lsquo;&ldquo;把shell变量包起来，即&rdquo;&rsquo;&ldquo;$var&rdquo;&lsquo;&ldquo;；注意是“双引号+单引号+双引号+shell变量+双引号+单引号+双引号”的格式。
如果变量的值中包含空格，为了shell不把空格作为分隔符，则应使用方法二。
例如：
var=&ldquo;this a test&rdquo;
awk &lsquo;BEGIN{print &ldquo;&rsquo;&rdquo;$var&rdquo;&lsquo;&ldquo;}&rsquo;
方法三： export变量，然后在awk中使用ENVIRON[&ldquo;var&rdquo;]形式获取环境变量的值
例如：
var=&ldquo;this a test&rdquo;; export var;
awk &lsquo;BEGIN{print ENVIRON[&ldquo;var&rdquo;]}&rsquo;
方法四： 使用awk -v选项；
当变量不是很多时，建议使用这种方式。
例如：
var=&ldquo;this a test&rdquo;
awk -v awkVar=&ldquo;$var&rdquo; &lsquo;BEGIN{print awkVar}&rsquo;
二、那shell中如何使用awk程序中定义的变量呢？
“由awk向shell传递变量”，其思想无非是用awk(sed/perl等也是一样)输出若干条shell命令，然后再用shell去执行这些命令。 **
**
**例如：
**
eval $(awk &lsquo;BEGIN{print &ldquo;var1=&lsquo;str1&rsquo;;var2=&lsquo;str2&rsquo;&rdquo;}&lsquo;)
或者eval $(awk &lsquo;{printf(&ldquo;var1=%s; var2=%s; var3=%s;&rdquo;,$1,$2,$3)}&rsquo; abc.txt)
之后可以在当前shell中使用var1,var2等变量了。
echo &ldquo;var1=$var1 &mdash;&ndash; var2=$var2&rdquo;
三、一个检测磁盘空间使用情况的脚本的例子
****#!/bin/sh
#文件系统名字
FILE_SYSTEM_NAME=&ldquo;rootfs&rdquo;……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E4%BD%BF%E7%94%A8shell%E5%8F%98%E9%87%8F%E5%8F%8Ashell%E4%BD%BF%E7%94%A8awk%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8shell%E5%8F%98%E9%87%8F%E7%9A%84%E4%B8%89%E4%B8%AA%E6%96%B9%E6%B3%95/">awk内部使用shell变量的三个方法</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8shell%E5%8F%98%E9%87%8F%E7%9A%84%E4%B8%89%E4%B8%AA%E6%96%B9%E6%B3%95/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E5%86%85%E9%83%A8%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8shell%E5%91%BD%E4%BB%A4/">awk内部调用外部shell命令</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            Reference:http://www.computing.net/answers/unix/awk-command/6949.html
awk uses the system function to execute any OS command, and the return code can be captured and checked, as shown below. You can also read in all the output of a system call (very handy).
When I check the code returned from the OS, zero means success. But within awk, a zero expression means false and non-zero means true. If you run the code below, you will see that &ldquo;one means true&rdquo;.……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E5%86%85%E9%83%A8%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8shell%E5%91%BD%E4%BB%A4/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E5%87%BD%E6%95%B0%E4%B8%AD%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8Cshell%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0/">awk函数中如何执行shell中的函数</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E5%87%BD%E6%95%B0%E4%B8%AD%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8Cshell%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E5%90%88%E5%B9%B6%E8%A1%8Clinuxshell%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9Csed%E5%AD%97%E7%AC%A6%E6%9B%BF%E6%8D%A2/">awk合并行linuxshell字符串操作sed字符替换</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E5%90%88%E5%B9%B6%E8%A1%8Clinuxshell%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9Csed%E5%AD%97%E7%AC%A6%E6%9B%BF%E6%8D%A2/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E5%91%BD%E4%BB%A4%E4%B9%8B%E7%BB%9F%E8%AE%A1etcpasswd%E6%96%87%E4%BB%B6%E4%B8%AD%E5%90%84%E7%94%A8%E6%88%B7%E6%89%80%E4%BD%BF%E7%94%A8%E7%9A%84shell%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0/">awk命令之统计etcpasswd文件中各用户所使用的shell类型及出现次数</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            统计/etc/passwd文件中各用户所使用的shell类型及出现次数
awk -F: &lsquo;BEGIN{printf&rdquo;%-15s\t%s\n&rdquo;,&ldquo;ShellType&rdquo;,&ldquo;Count&rdquo;}{shellType[$NF]++}END{for(i in shellType)printf&rdquo;%-15s\t%d\n&rdquo;,i,shellType[i]}&rsquo; /etc/passwd
转载于:https://blog.51cto.com/wyjs6/1941271……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E5%91%BD%E4%BB%A4%E4%B9%8B%E7%BB%9F%E8%AE%A1etcpasswd%E6%96%87%E4%BB%B6%E4%B8%AD%E5%90%84%E7%94%A8%E6%88%B7%E6%89%80%E4%BD%BF%E7%94%A8%E7%9A%84shell%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E5%A4%84%E7%90%86shell/">awk命令基本处理shell</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            awk 逐行扫描输入 ( 可以是文件或管道等 )
awk 将读入的记录分割成数个字段：
 1、$0 表示整条记录，第一个字段放入发量 $1 中，第二个放入发量 $2 中。
2、字段分隔符可以通过选项 -F 指定，否则使用缺省的分隔符,通常为空格或Tab。
 ARGC：命令行参数个数 ( 实际就是输入文件的数目加 1 )
ARGIND：当前被处理的文件在数组 ARGV 内的索引
ARGV：命令行参数数组
FILENAME：当前输入文件的文件名
FNR：已经被 awk 读叏过的记录(行)的总数目
FS：输入记录的字段分隔符 (缺省是空格和制表符 )
NF：当前行或记录的字段数
NR：对当前输入文件而言，已被 awk 读取过的记录 ( 行 ) 的数目
OFMT：数字的输出格式 ( 缺省是 %.6g )
OFS：输出记录的字段分隔符 (缺省是空格 )
ORS：输出记录间的分隔符 (缺省是 NEWLINE )
RS：输入记录间的分隔符 (缺省是 NEWLINE )
用亍存储 awk 工作时的各种参数, 这些发量的值会随着 awk 程序的运行而劢态的发化，常见的有：
awk 用法：awk &lsquo; pattern {action} &rsquo;……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E5%A4%84%E7%90%86shell/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E5%92%8Csed%E5%BA%94%E7%94%A8shell%E8%84%9A%E6%9C%AC%E5%8F%98%E9%87%8F/">awk和sed应用shell脚本变量</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E5%92%8Csed%E5%BA%94%E7%94%A8shell%E8%84%9A%E6%9C%AC%E5%8F%98%E9%87%8F/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/awk%E5%AD%98%E5%85%A5shell%E6%95%B0%E7%BB%84/">awk存入shell数组</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            http://www.xxlinux.com/newxxlinux/development/shell/2011-11-28/472.html
ORDER=&ldquo;0e 31 00 22 00 04 02 04 02 &ldquo;
awk &lsquo;BEGIN{split(&rsquo;&ldquo;&rdquo;$ORDER&rdquo;&ldquo;&lsquo;,START,&rdquo; &ldquo;);print START[6]}&rsquo;
eval $(awk &lsquo;BEGIN{split(&rsquo;&ldquo;&rdquo;$ORDER&rdquo;&ldquo;&lsquo;,a,&rdquo; &ldquo;);for(i in a)print &ldquo;START[&ldquo;i&rdquo;]=&ldquo;a[i]}&lsquo;)
cat file
0e 31 00 22 00 04 02 04 02
必须要用圆括号括起来
B=($(awk &lsquo;{print $0}&rsquo; file))
A=(awk '{print $0}' file)
echo ${A[4]}
00
list=&ldquo;0e 31 00 22 00 04 02 04 02 &rdquo;
START=$(awk &lsquo;BEGIN{print &ldquo;&rsquo;&rdquo;$list&rdquo;&lsquo;&ldquo;}&rsquo;)
echo ${START[0]}
0e 31 00 22 00 04 02 04 02
awk从文件与从变量中读取不同……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/awk%E5%AD%98%E5%85%A5shell%E6%95%B0%E7%BB%84/">阅读全文</a></p>
        </div>
    </article>
    

    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://zaina.newban.cn/tags/shell/page/65/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/64/">64</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/65/">65</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://zaina.newban.cn/tags/shell/page/66/">66</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/67/">67</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/68/">68</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/1621/">1621</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://zaina.newban.cn/tags/shell/page/67/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>