<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell | 开发者问答集锦</title>
    <meta property="og:title" content="shell - 开发者问答集锦">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/tags/shell/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+xml" href="https://zaina.newban.cn/tags/shell/index.xml" title="开发者问答集锦" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <h3 class="archive-title">
        包含标签
        <span class="keyword">shell</span>
        的文章
    </h3>
    

    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%89%A7%E8%A1%8C%E5%A4%9A%E4%B8%AA%E5%91%BD%E4%BB%A4%E7%9A%84%E6%96%B9%E6%B3%95/">linuxshell执行多个命令的方法</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%89%A7%E8%A1%8C%E5%A4%9A%E4%B8%AA%E5%91%BD%E4%BB%A4%E7%9A%84%E6%96%B9%E6%B3%95/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%89%A7%E8%A1%8C%E9%95%BF%E6%97%B6%E9%97%B4%E7%A8%8B%E5%BA%8F%E6%8C%82%E5%88%B0%E5%90%8E%E5%8F%B0/">linuxshell执行长时间程序挂到后台</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            2019独角兽企业重金招聘Python工程师标准&gt;&gt;&gt; shell 执行运行时间很长的程序时，尤其是使用云服务器的时候，如果不小心断开了ssh，可能正在进行的程序就直接结束了。
运行了个很长时间的脚本。我这个大概需要20个小时。
$ php copy.php  这时候我们不想结束这个脚本，但是也不想在这里傻等。 可以在这个 shell 按 Ctrl z，这个时候这个正在运行的程序就挂起到后台了。但是现在关闭 ssh 肯定会杀死它的。
^Z [1]+ 已停止 php copy.php  这时候我们可以在后台先让它运行着。 % 后面的数字就是 [ ] 里面的数字。jobs 可以看一看挂起的程序
$ bg %1 [1]+ php copy.php &amp; $ jobs [1]+ 运行中 php copy.php &amp;  之后用 disown 就可以把它给系统的后台了。
$ disown -h %1  之后用 top 或 htop 观察它吧。
PS: bg 相对的还有 fg，就是 挂起到后台的程序显示到前台。
转载于:https://my.oschina.net/guodapeng/blog/3017750……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%89%A7%E8%A1%8C%E9%95%BF%E6%97%B6%E9%97%B4%E7%A8%8B%E5%BA%8F%E6%8C%82%E5%88%B0%E5%90%8E%E5%8F%B0/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%89%A9%E5%B1%95%E7%94%A8%E6%B3%95/">Linuxshell扩展用法</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%89%A9%E5%B1%95%E7%94%A8%E6%B3%95/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E7%9B%AE%E5%BD%95%E7%9A%84%E7%BC%96%E7%A8%8B%E6%80%9D%E8%B7%AF/">Linuxshell批量删除指定目录下的所有目录的编程思路</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            应用场景：某个目录中存放着许多软件的源码压缩包，在部署完这些软件后，一定会生成许多没用的临时目录，可以通过脚本的方式删除该目录下所有的目录。当这 个目录中存在着一些特殊名字的目录时，例如这些目录中有Linux系统所不支持的特殊字符“/”（这些文件通常有可能是Windows系统所支持的）或有 目录名中有空格，那批量删除这些目录就会变得困难。
问题分析与解决办法： 问题1.当前工作目录中有一些重要的目录可能不想被删除
解决办法：排除这些目录即可
问题2.需要考虑一些特殊的目录名称，诸如“test dir”，“2015/03/11-log”，“下载”
解决办法：利用inode消除用户命名空间所带来的特殊性
背景知识： inode是index node或information node的缩写，是一种特殊的结构用于存放文件的基本信息，这些信息包括文件的所有者、类型、访问权限和存放在磁盘中实际数据的位置。inode存放在每 一个文件系统的inode表（inode table）中。
Index or Information Node. This is a structure containing the basic information about a file such as owner, type, access permissions and pointers to the actual data on the disk. Inodes are stored in the per filesystem inode table and are referenced through inode numbers. &ndash; http://www.linux- tutorial.info/modules.php?name=MContent&amp;obj=glossary&amp;term=inode
如果Linux系统经常与Windows系统中的磁盘或文件进行交互，建议安装mtools，此工具能在不挂载Windows磁盘格式磁盘的情况下，进行读写等操作。
Summary : Programs for accessing MS-DOS disks without mounting the disks……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E7%9B%AE%E5%BD%95%E7%9A%84%E7%BC%96%E7%A8%8B%E6%80%9D%E8%B7%AF/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%89%B9%E9%87%8F%E5%8E%8B%E7%BC%A9%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%9B%BE%E7%89%87%E5%A4%A7%E5%B0%8F/">linuxshell批量压缩某个目录下图片大小</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            linux shell批量压缩某个目录下图片大小
#！/bin/sh read -p &quot;Input Path:&quot; SPATH maxsize=$((1024*200)) FILELIST () { filelist=`ls $SPATH` for filename in $filelist; do fname=$(basename &quot;$filename&quot;) ex=&quot;${fname##*.}&quot; if [ -f $filename ] &amp;&amp; [ $ex = 'jpg' -o $ex = 'jpeg' -o $ex = 'png' -o $ex = 'JPG' -o $ex = 'JPEG' -o $ex = 'PNG' ] ;then #echo $filename COMPRESS $filename elif [ -d $filename ];then cd $filename SPATH=`pwd` FILELIST cd .. fi done } COMPRESS () { imgpath=$1 filesize=`ls -l $imgpath | awk '{ print $5 }'` if [ $filesize -ge $maxsize ]; then #convert -quality 85% $imgpath $imgpath echo $imgpath fi } cd $SPATH FILELIST echo &quot;Done.……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%89%B9%E9%87%8F%E5%8E%8B%E7%BC%A9%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%9B%BE%E7%89%87%E5%A4%A7%E5%B0%8F/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%89%B9%E9%87%8F%E9%87%8D%E5%90%8D%E4%BA%86java%E7%B1%BB/">linuxshell批量重名了java类</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%89%B9%E9%87%8F%E9%87%8D%E5%90%8D%E4%BA%86java%E7%B1%BB/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%8A%80%E5%B7%A7/">linuxSHELL技巧</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%8A%80%E5%B7%A7/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%8A%93%E5%8F%96%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E8%84%9A%E6%9C%AC/">LINUXSHELL抓取错误日志脚本</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            背景 任何程序运行起来免不了产生很多日志，其中错误日志需要最为关心的。在某些时候会将错误日志和正常日志分开，但我们的系统却没有这么做。更麻烦的是，每个小时存储一个日志文件，所以每次为了查找当天是否有错误信息需要打开N个文件，而且不能用grep因为需要把整个堆栈抓取下来。
SHELL 本人对shell完全是初学，磕磕碰碰写了个脚本。主要逻辑是判断ERROR的日志级别的那一行开始记录，直到碰到下一个INFO或者DEBUG的日志级别行。
[html] view plain copy
 #!/bin/bash 3. isInErrorBlock=false 5. strArray=() count=1 8. 9. while read line 11. do 13. #echo &ldquo;Line $count:&rdquo; 15. arrayIdx=$count%10 strArray[$count]=&ldquo;$line&rdquo; 18. 19. idx=$(expr match &ldquo;${strArray[$count]}&rdquo; &ldquo;.*ERROR&rdquo;) 21. if [ $idx -le 0 ]; then idx=$(expr match &ldquo;${strArray[$count]}&rdquo; &ldquo;.Exception&rdquo;) fi 26. 27. idx2=$(expr match &ldquo;${strArray[$count]}&rdquo; &ldquo;.*DEBUG&rdquo;) idx3=$(expr match &ldquo;${strArray[$count]}&rdquo; &ldquo;.*INFO&rdquo;) 30. 31. if [ $idx -gt 0 ] ; then if !……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%8A%93%E5%8F%96%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E8%84%9A%E6%9C%AC/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%8B%86%E5%88%86%E6%96%87%E4%BB%B6%E5%A4%9A%E8%BF%9B%E7%A8%8B%E8%84%9A%E6%9C%AC/">linuxshell拆分文件多进程脚本</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%8B%86%E5%88%86%E6%96%87%E4%BB%B6%E5%A4%9A%E8%BF%9B%E7%A8%8B%E8%84%9A%E6%9C%AC/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/linuxshell%E6%8C%87%E4%BB%A4/">linuxshell指令</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/linuxshell%E6%8C%87%E4%BB%A4/">阅读全文</a></p>
        </div>
    </article>
    

    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://zaina.newban.cn/tags/shell/page/266/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/265/">265</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/266/">266</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://zaina.newban.cn/tags/shell/page/267/">267</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/268/">268</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/269/">269</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/1621/">1621</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://zaina.newban.cn/tags/shell/page/268/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>