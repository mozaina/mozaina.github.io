<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell | 开发者问答集锦</title>
    <meta property="og:title" content="shell - 开发者问答集锦">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/tags/shell/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+xml" href="https://zaina.newban.cn/tags/shell/index.xml" title="开发者问答集锦" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <h3 class="archive-title">
        包含标签
        <span class="keyword">shell</span>
        的文章
    </h3>
    

    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0%E8%8E%B7%E5%BE%97%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%8F%8A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E5%A4%A7%E5%B0%8F/">SHELL编程练习获得指定目录下的所有文件及文件夹的大小</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            一、目的
编写一个脚本，可以获得指定目录下的所有文件及文件夹的大小。输出的样式与 ls -lh 命令相同。
命令执行示例，其中和 ls -lh 命令输出的唯一区别是目录的大小：
1.1、ls -lh命令的输出 （注意目录大小）
[root@reedoracle ~]# ls -lh /root/dir1/ total 24M drwxr-xr-x 3 root root 4.0K Feb 6 13:54 dir2 drwxr-xr-x 2 root root 4.0K Feb 6 13:55 dir3 -rw-r--r-- 2 root root 0 Feb 6 13:53 file1 -rw-r--r-- 1 root root 23M Feb 6 13:54 file1-1 -rw-r--r-- 2 root root 0 Feb 6 13:53 lfile1 lrwxrwxrwx 1 root root 7 Feb 6 15:03 lfile2 -&gt; file1-1  1.……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0%E8%8E%B7%E5%BE%97%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%8F%8A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E5%A4%A7%E5%B0%8F/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0%E9%A2%98%E7%B2%BE%E9%80%89%E5%8F%8A%E7%AD%94%E6%A1%88/">Shell编程练习题精选及答案</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            这里四道shell的面试题，学习shell的童鞋用来练手很不错。
前三道比较简单，都是对文件内容进行，按要求输出结果。用sed，awk，while-read以及here document和regex即可实现。
难点和重点在第四道题，算法性比较强。可以使用多个循环实现的很简单，但效率会很低。环的数字很多时，要很长时间才能运算完成。这里通过一步步的改进算法，做到了性能最优。代码改进过程中用到了shell调试的一些技能，如shell x选项，trap， PS4等。
========== 题目一 =============
文件内容：
100
a 100
b -50
c -20
d -30
要求输出：
100
a 100
200
b -50
150
c -20
130
d -30
代码:
#!/usr/bin/env bash # author: liguo # sumary: ex01.sh awk -F$'\t' '{ if(NR==1){ sum=$1; next; } print sum; print $0; sum+=$2; }' &lt;&lt; EOF 100 a 100 b -50 c -20 d -30 EOF  ========== 题目二 =============……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0%E9%A2%98%E7%B2%BE%E9%80%89%E5%8F%8A%E7%AD%94%E6%A1%88/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BB%93%E6%9E%84%E5%8C%96%E5%91%BD%E4%BB%A4%E5%92%8C%E5%BE%AA%E7%8E%AF/">shell编程结构化命令和循环</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            1. 流程控制语句 case 语法格式： case 变量或表达式 in 变量或表达式1） 命令序列1 ;; 变量或表达式2） 命令序列2 ;; …… *） 默认命令序列 easc  执行流程：  首先使用“变量或表达式”的值与值1进行比较，若取值相同则执行值1后的命令序列，直到遇到双分号“;;”后跳转至 esca，表示分支结束；若与值1不相匹配，则继续与值2进行比较，若取值相同则执行值2的命令序列，直到遇到双分号“;;”后跳转至 esca，表示分支结束；依次类推，若找不到任何匹配的值，则执行默认模式“*）”后的命令序列，直到遇到 esac 后结束分支。
 实例： 自动启动 apache 服务：


2. for 循环 语法格式： for var in list do commands done  执行流程： 
实例： 批量解压缩：

3. while 循环 语法格式： while 测试命令 do commands done  执行流程： 
实例： 监测 http 服务启动状态并记录：……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BB%93%E6%9E%84%E5%8C%96%E5%91%BD%E4%BB%A4%E5%92%8C%E5%BE%AA%E7%8E%AF/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD/">Shell编程综合实训</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            【实验十一】 1.下面给出了一个SHELL程序，试对其行后有#（n）形式的语句进行解释，并说明程序完成的功能。运行结果截图
#!/bin/bash #（1） dir=$1 #（2） if [ -d $dir ] #（3） then cd $dir #（4） for file in * do if [-f $file ] #（5） then cat $file #（6） echo “end of file $file” fi done else echo “bad directory name $dir” fi   #（1）指出由那个解释器来执行内容
#（2）变量1赋值给dir
#（3）如果dir是所指目录
#（4）从当前目录进入dir目录
#（5）如果变量file是普通文件
#（6）显示file里的内容 程序功能：如果参数是一个合法的目录，就显示目录下面的所有的普通文件，如果不是就显示错误的目录信息。
 2.试编写一个SHELL程序，该程序能接收用户从键盘输入的5个整数，然后求出其总和、最大值及最小值。
#!/bin/bash read max min=$max sum=$max i=1 while [ $i -lt 5 ] do read x sum=`expr $sum + $x` if [ $max -lt $x ] then max=$x fi if [ $min -gt $x ] then min=$x fi i=`expr $i + 1` done echo &quot;最小值是：$min &quot; echo &quot;总和是：$sum&quot; echo &quot;最大值是：$i&quot;  执行……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BC%96%E8%BE%91%E5%B7%A5%E5%85%B7awk/">Shell编程编辑工具awk</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E7%BC%96%E8%BE%91%E5%B7%A5%E5%85%B7awk/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%84%9A%E6%9C%AC%E7%BB%83%E4%B9%A0%E9%A2%98/">shell编程脚本练习题</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%84%9A%E6%9C%AC%E7%BB%83%E4%B9%A0%E9%A2%98/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%87%AA%E5%8A%A8%E5%88%A0%E9%99%A4%E6%B8%85%E7%90%86%E8%BF%87%E6%9C%9F%E6%97%A5%E5%BF%97/">Shell编程自动删除清理过期日志</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            要求：根据文件最后修改时间删除清理指定目录下面的文件，并在/var/log/deletelog下面生成按月的删除清理日志 分析：  在查找文件时要想不受文件名限制 我们采用文件最后修改时间mtime进行查找，而且还适用于删除过期备份。 find 目录 -type f 查找文件时会根据换行来输出查找的文件，而我们希望给xargs的参数是按照空格输出的，否则直接结合xargs使用会有一定的影响。（可以增加 -print0 用null来作为边界符号，然后结合xargs -0 来格式化输入） 切记在使用find的时候，一定要遵循最小结果集原则；find解析式从左到右，所以我们要确保在最左边的过滤符号能够过滤最大数据  解答： 命令行测试 [root@myhost yuki]# pwd /yuki [root@myhost yuki]# ll total 8 -rw-r--r-- 1 root root 91 Nov 19 16:52 testdel.sh -rw-r--r-- 1 root root 248 Nov 19 16:52 test.sh [root@myhost yuki]# find /yuki/ -type f -mtime 0 /yuki/testdel.sh /yuki/test.sh [root@myhost yuki]# find /yuki/ -type f -mtime 0 -print0 /yuki/testdel.sh/yuki/test.sh [root@myhost yuki]# find /yuki/ -type f -mtime 0 -print0 |xargs -0 /yuki/testdel.……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%87%AA%E5%8A%A8%E5%88%A0%E9%99%A4%E6%B8%85%E7%90%86%E8%BF%87%E6%9C%9F%E6%97%A5%E5%BF%97/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%87%AA%E5%8A%A8%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%A1%AC%E7%9B%98%E5%B9%B6%E6%8C%82%E8%BD%BD/">shell编程自动格式化硬盘并挂载</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%87%AA%E5%8A%A8%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%A1%AC%E7%9B%98%E5%B9%B6%E6%8C%82%E8%BD%BD/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%8C%83%E4%BE%8B%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C/">shell编程范例之字符串操作</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%8C%83%E4%BE%8B%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C/">阅读全文</a></p>
        </div>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%8C%83%E4%BE%8B%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C%E8%BD%AC/">shell编程范例之字符串操作转</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
            <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%8C%83%E4%BE%8B%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C%E8%BD%AC/">阅读全文</a></p>
        </div>
    </article>
    

    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://zaina.newban.cn/tags/shell/page/986/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/985/">985</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/986/">986</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://zaina.newban.cn/tags/shell/page/987/">987</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/988/">988</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/989/">989</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/tags/shell/page/1621/">1621</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://zaina.newban.cn/tags/shell/page/988/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>