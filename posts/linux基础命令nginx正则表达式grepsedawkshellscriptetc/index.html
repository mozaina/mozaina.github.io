<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Linux基础命令Nginx正则表达式grepsedawkShellScriptetc | 开发者问答集锦</title>
    <meta property="og:title" content="Linux基础命令Nginx正则表达式grepsedawkShellScriptetc - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Linux基础命令Nginx正则表达式grepsedawkShellScriptetc">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4nginx%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fgrepsedawkshellscriptetc/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Linux基础命令Nginx正则表达式grepsedawkShellScriptetc</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h2 id="linux基础使用">Linux基础使用</h2>

<p>学习内容博客</p>

<h2 id="内存">内存</h2>

<ul>
<li>查看swap分区信息 &gt; <code>swapon -s</code></li>
<li>添加swap分区 &gt; <code>mkswap /dev/sdb2</code> &gt; 激活 <code>swapon -a /dev/sdb2</code> 即可</li>
<li>移除swap分区 &gt; <code>swapoff /dev/sdb2</code></li>
<li>查看系统版本 &gt; <code>cat /etc/redhat-release</code> &gt; <code>more /etc/*release</code> 可以看到更多信息</li>
<li><em>buffer</em> A buffer is something that has yet to be &ldquo;written&rdquo; to disk</li>
<li><em>cache</em> A cache is something that has been &ldquo;read&rdquo; from the disk and stored for late use</li>
<li>清理cache &gt; <code>echo 3 &gt; /proc/sys/vm/drop_caches</code></li>
<li><code>echo $[88316+8764]</code> 进行简单的计算（+-*/）</li>
<li>total-used=free+buff/cache 内存就是用来分buffer和cache的</li>
<li><code>dd if=/dev/zero of=/root/test bs=50M count=1</code> 测试磁盘速度，zero为空文件</li>
</ul>

<h2 id="进程管理">进程管理</h2>

<ul>
<li><code>ps aux</code> 查看所有进程 &gt; <code>grep</code>过滤的意思</li>
<li>查看特定的进程 &gt; <code>ps aux | grep firefox</code></li>
<li>杀死进程 &gt; <code>kill -9 3489</code> ( 9表示强制杀) 或者 <code>pkill -9 firefox</code></li>
<li><code>firefox &amp;</code> 即命令后接<code>&amp;</code>在后台启动，在当前终端使用<code>jobs</code>可以查看工作号 &gt; <code>kill -9 %1</code>使用工作号杀</li>
<li>centos7最小化安装没有ptree (树型显示当前运行的进程)，需要安装<code>yum install psmisc</code></li>
<li>pgrep sshd 直接显示包含sshd的进程的PID号</li>
</ul>

<h2 id="软件包管理">软件包管理</h2>

<ul>
<li><p><code>rpm -ivh rpm文件名</code> i 安装， v 显示安装信息， h显示进度条 后接<code>--nodeps</code>忽略以来，<code>--force</code>覆盖安装</p></li>

<li><p><code>rpm -qi 软件名</code> 查看软件的详细信息 ，q 表示查询， i information</p></li>

<li><p><code>rpm -ql 软件名</code> 查看软件位置， l 表示位置</p></li>

<li><p><code>rpm -qf 文件名</code> 查看该文件是由哪个软件包产生的</p></li>

<li><p>查看命令对应的文件的真实位置 <code>which ls</code></p></li>

<li><p><code>rpm -qa</code> 显示全部安装的rpm包，跟grep结合验证是否安装了某个包，<code>rpm -qa | grep vsftp</code> 或者 <code>rpm -q vsftpd</code> 必须知道软件包全名</p></li>

<li><p>ls &mdash;-&gt; /etc/usr/ls &ndash;color=auto 这是流程 ，<code>alias s='ls'</code> 为ls命令起别名, 永久的话修改<code>vim /etc/bashrc</code> 或者<code>vim /etc/profile</code></p></li>

<li><p><code>rpm -e 软件包名</code> 卸载软件</p></li>

<li><p><code>rpm -e</code>rpm -qa \grep vsftp` 这里反引号的作用是把后面的结果看作变量作为前面的输入</p></li>

<li><p>rpm安装对依赖性问题不好解决，需要先手动安装依赖包，yum自动解决依赖性</p></li>

<li><p>手动配置yum源，事先将完整的光盘挂载到<code>/opt</code>，移走原有的repo,然后 <code>vi /etc/yum.repos.d/loal.repo</code></p>

<pre><code>[local]
</code></pre>

<p>name=local.repo
baseurl=file:///opt   #可以本地也可以网上
enable=1
gpgcheck=0</p></li>
</ul>

<p><code>yum clean all</code>清除缓存后就可以用自己配置的yum源安装<code>yum -y install xxxxx</code></p>

<ul>
<li><p><code>yum erase xxx</code>删除已经安装的软件 或 <code>yum remove xxx</code></p></li>

<li><p><code>yum install epel-*</code>安装扩展源</p></li>

<li><p><code>yum makecache</code>创建缓存提高下次装软件的速度</p></li>

<li><p>要想保留yum下载的rpm包，需要更改设置<code>vim /etc/yum.conf</code></p>

<pre><code>cachedir=/root/rpm_bak   #路径自己设置
</code></pre>

<p>keepcache=1   #0改为1</p></li>

<li><p>部署自己的yum仓库</p>

<ol>
<li>新建仓库文件夹<code>mkdir /repo_httpd</code></li>
<li>将所有依赖包和该rpm包放在这个文件夹中，方法如上一条所示</li>
<li>创建依赖关系<code>createrepo /repo_httpd</code>, 之后在该文件夹中生成repodata文件夹</li>
<li>手动配置yum源，如之前所示， 其中<code>baseurl=file:///repo_httpd</code></li>
<li>同理修改<code>baseurl=http://xxxxx</code>可以自定义网络yum源</li>
</ol></li>

<li><p><code>yum grouplist</code>列出有哪些软件包组， <code>yum groupinstall &quot;开发工具&quot;</code>安装开发工具</p></li>

<li><p><code>wget --no-check-certificate https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tgz</code>下载，<code>tar xvf Python-3.6.1.tgz</code>解压，进入目录，configure为安装配置文件，为了生成makefile文件，<code>./configure --prefix=/usr/local/python3.6</code> ， 然后 <code>make &amp;&amp; make install</code> 编译并安装，报错的话缺啥装啥<code>yum install zlib*</code></p></li>

<li><p><code>PATH=/usr/local/python3.6/bin:$PATH</code> 设置临时的环境变量, 永久的话<code>vim /etc/profile</code>在末尾加上</p>

<pre><code>PATH=/usr/local/python3.6/bin:$PATH
</code></pre>

<p>export PATH</p></li>

<li><p><code>yum update</code>全部更新包括配置和内核，<code>yum upgrade</code>只更新软件包</p></li>

<li><p>安装<code>yum install sysstat*</code>里面有查看运行信息的软件<code>vmstat</code> <code>iostat</code></p></li>

<li><p>安装<code>yum install net-tools</code> ，执行<code>netstat -tunalp</code> 查看端口详细信息 可以<code>netstat -tunalp | grep 22</code>查看目的端口 。另外<code>sar</code>啥也能看</p></li>
</ul>

<h2 id="n-g-i-n-x">n g i n x</h2>

<ul>
<li><p><code>yum install nginx</code> 安装</p></li>

<li><p>写配置 <code>vim /etc/nginx/nginx.conf</code> 摘取部分如下</p>

<pre><code>worker_processes auto;  #自动检测CPU数目，几个CPU开几个进程
</code></pre>

<p>error_log /var/log/nginx/error.log;  #错误日志
include /usr/share/nginx/modules/*.conf;  #包含的模块
events {  #一个进程开多少线程
    worker_connections 1024;
}
http {
    log_format  main  &lsquo;$remote_addr - $remote_user [$time_local] &ldquo;$request&rdquo; &lsquo;
                      &lsquo;$status $body_bytes_sent &ldquo;$http_referer&rdquo; &lsquo;
                      &lsquo;&ldquo;$http_user_agent&rdquo; &ldquo;$http_x_forwarded_for&rdquo;&lsquo;;
    #日志格式
    access_log  /var/log/nginx/access.log  main;
    #访问日志，以main格式写入
    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;</p>

<pre><code>include             /etc/nginx/mime.types;
default_type        application/octet-stream;

# Load modular configuration files from the /etc/nginx/conf.d directory.
# See http://nginx.org/en/docs/ngx_core_module.html#include
# for more information.
include /etc/nginx/conf.d/*.conf;
#包含的配配置文件
server {  #核心配置
    listen       80 default_server;  #监听端口号
    listen       [::]:80 default_server;
    server_name  _;
    root         /usr/share/nginx/html;  #Web根目录

    # Load configuration files for the default server block.
    include /etc/nginx/default.d/*.conf;

    location / {  #匹配/a/b/c/d.txt，若以/开头则匹配这个配置，没有内容则按全局配置

    }
}
</code></pre></li>

<li><p>URL 统一资源定位符 11.12.13.14:80 找到唯一的一个软件</p></li>

<li><p>URI 统一资源标识符 /a/b/c/d.txt 找到唯一的一个文件 /usr/share/nginx/html/a/b/c/d.txt</p></li>

<li><p><code>systemctl start nginx</code> 启动nginx status查看状态</p></li>

<li><p><code>systemctl stop firewalld</code> 关闭防火墙，<code>systemctl disable firewalld</code>开机不启动,enable开机启动， <code>iptables -F</code> 清除防火墙配置</p></li>

<li><p><code>tail -f /var/log/nginx/access.log</code>动态查看日志文件</p></li>
</ul>

<h3 id="反向代理">反向代理</h3>

<ol>
<li><p>将虚拟机拷贝3个提供Web功能，原虚拟机提供反向代理</p></li>

<li><p>按照官网的手册 Using nginx as HTTP load balancer 配置提供反向代理的机器</p></li>

<li><p>为实现数据的一致，给几台Web服务器提供共享存储 如 <strong>NFS</strong> ，文件存储</p></li>
</ol>

<p>对象存储&mdash;&gt;像网盘一样，下载下来修改再上传覆盖，通过URI定位。 块存储 &mdash;&gt; 类似一整块磁盘</p>

<ol>
<li><p>可以给NFS服务器专门挂载一块硬盘</p></li>

<li><p>临时配置IP地址 <code>ifconfig 网卡名 IP地址</code></p></li>

<li><p>##服务端配置
[root@localhost ~]# mkdir /share   #新建文件夹
[root@localhost ~]# mount /dev/sdb1 /share/^C    #挂载一块硬盘
[root@localhost ~]# touch /share/share.txt<br />
[root@localhost ~]# echo &lsquo;hello share&rsquo; &gt; /share/share.txt
[root@localhost ~]# vim /etc/exports #编辑配置文件
[root@localhost ~]# cat /etc/exports
/share 192.168.58.0/24(rw,sync,fsid=0)  #配置文件内容
[root@localhost ~]# chmod -R o+w /share #为文件夹添加权限
[root@localhost ~]# systemctl start rpcbind.service  #先开启RPC服务
[root@localhost ~]# systemctl start nfs-server.service  #再开启NFS服务
[root@localhost ~]# systemctl enable nfs-server.service  #设置开机启动
Created symlink from /etc/systemd/system/multi-user.target.wants/nfs-server.service to /usr/lib/systemd/system/nfs-server.service.
[root@localhost ~]# systemctl enable rpcbind.service</p></li>

<li><p>##客户端配置
[root@localhost ~]# systemctl enable rpcbind.service &amp;&amp; systemctl enable nfs-server.service
Created symlink from /etc/systemd/system/multi-user.target.wants/nfs-server.service to /usr/lib/systemd/system/nfs-server.service.  #开机启动
[root@localhost ~]# showmount -e 192.168.58.129 #查看共享服务
Export list for 192.168.58.129:
/share 192.168.58.0/24
[root@localhost ~]# mount -t nfs 192.168.58.129:/share /usr/share/nginx/html/ #挂载
[root@localhost ~]# ls /usr/share/nginx/html/ #查看挂载后文件内容
share.txt
[root@localhost ~]# df |grep 129 #查看磁盘信息
192.168.58.129:/share 18351104 2376448 15974656   13% /usr/share/nginx/html</p></li>

<li></li>
</ol>

<h2 id="网络配置">网络配置</h2>

<pre><code>ifconfig
ens33: flags=4163#功能#  mtu 1500#最大传输单元，字节单位#
        inet 192.168.58.129  netmask 255.255.255.0  broadcast 192.168.58.255
        inet6 fe80::c00d:cb8b:4aed:6cc7  prefixlen 64  scopeid 0x20
        ether 00:0c:29:1c:9a:5a#MAC地址#  txqueuelen 1000  (Ethernet)
        RX packets 3422  bytes 444096 (433.6 KiB) #收了多少包#
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 2374  bytes 418819 (409.0 KiB) #传了多少包#
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10
        loop  txqueuelen 1  (Local Loopback)
        RX packets 20  bytes 1524 (1.4 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 20  bytes 1524 (1.4 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</code></pre>

<ul>
<li><p><code>ifconfig ens33 192.168.58.200/24</code>手动配置IP地址， 24表示子网掩码255.255.255.0</p></li>

<li><p><code>vim /etc/resolv.conf</code> 修改DNS信息 <code>nameserver 192.168.58.2</code></p></li>

<li><p><code>route add default gw 192.168.58.254 netmask 255.255.255.0</code>添加网关，<code>route -n</code>查看路由信息， del为删除</p>

<pre><code>[root@localhost share]# route -n
</code></pre>

<p>Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.58.2    0.0.0.0         UG    100    0        0 ens33  #不一个子网
192.168.58.0    0.0.0.0         255.255.255.0   U     100    0        0 ens33  #同一个自网内</p></li>

<li><p>要想永久修改 <code>cd /etc/sysconfig/network-scripts/</code> 该目录下有很多配置信息 <code>vim ifcfg-ens33</code></p>

<pre><code>TYPE=Ethernet
</code></pre>

<p>BOOTPROTO=static
IPADDR=192.168.58.200
NETMASK=255.255.255.0
GATEWAY=192.168.58.254
DNS1=192.168.58.254
DNS2=114.114.114.114
DEFROUTE=yes
PEERDNS=yes
PEERROUTES=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_PEERDNS=yes
IPV6_PEERROUTES=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=2ceec922-bd48-4fcb-8c96-56a288ddb680
DEVICE=ens33
ONBOOT=yes #开机激活网卡</p></li>
</ul>

<p>重启网络服务<code>systemctl restart network</code> 即可</p>

<ul>
<li><p><code>vim /etc/hosts</code> 修改hosts</p></li>

<li><p>[root@localhost network-scripts]# hostnamectl set-hostname centostest #设置hostname
[root@localhost network-scripts]# hostname #查看hostname
centostest</p></li>
</ul>

<h2 id="ssh">SSH</h2>

<ul>
<li><p>[root@localhost ~]# ssh 192.168.58.129  #登录默认root  实际ssh root@192.168.58.129
The authenticity of host &lsquo;192.168.58.129 (192.168.58.129)&rsquo; can&rsquo;t be established.
ECDSA key fingerprint is 82:68:11:05:e9:98:f9:bb:df:a1:02:e2:72:59:cb:0e.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &lsquo;192.168.58.129&rsquo; (ECDSA) to the list of known hosts.
root@192.168.58.129&rsquo;s password:    #输入密码
Last login: Mon Apr  3 22:48:51 2017 from 192.168.58.1
[root@centostest ~]#    #SSH登录成功，前后主机名不一样</p></li>

<li><p>scp远程复制文件</p>

<pre><code>[root@centostest ~]# scp /etc/hosts 192.168.58.131:/tmp  #远程复制,也可用域名,前后位置可换 -r目录
</code></pre>

<p>The authenticity of host &lsquo;192.168.58.131 (192.168.58.131)&rsquo; can&rsquo;t be established.
ECDSA key fingerprint is 82:68:11:05:e9:98:f9:bb:df:a1:02:e2:72:59:cb:0e.
Are you sure you want to continue connecting (yes/no)? y
Please type &lsquo;yes&rsquo; or &lsquo;no&rsquo;: yes
Warning: Permanently added &lsquo;192.168.58.131&rsquo; (ECDSA) to the list of known hosts.
root@192.168.58.131&rsquo;s password:  #输入密码
hosts                                                  100%  159     0.2KB/s   00:00 #复制成功</p></li>

<li><p>在客户端把SSH密钥生成 <code>ssh-keygen</code> 之后在<code>/root/.ssh/</code>目录下有生成的信息<code>id_rsa.pub</code></p></li>

<li><p>把密钥等发给服务端 <code>ssh-copy-id -i 192.168.58.131</code> 之后在服务端的相同路径下会找到相关文件<code>authorized_keys</code> ， 即发给了root用户目录下，如发给其他用户可以在该用户目录下找到公钥</p></li>

<li><p>之后客户端直接<code>ssh 192.168.58.131</code>不需要输入密码即可登陆成功</p></li>

<li><p>配置文件在<code>vim /etc/ssh/sshd_config</code> 。若服务端更改端口为8888，以上发送密钥时需要<code>ssh-copy-id -i id_rsa.pub 192.168.58.131 -p 8888</code> ，连接时<code>ssh 192.168.58.131 -p 8888</code> 即可</p></li>
</ul>

<h2 id="bash">bash</h2>

<p>学习内容博客</p>

<ul>
<li><p><code>source a.sh</code>没加权限也可以执行</p></li>

<li><p>命令优先级</p>

<pre><code>1. alias #alias查看当前的别名 alias ppp='ls -l'设置 unalias ppp取消
</code></pre>

<ol>
<li>compound commands #if for while</li>
<li>function #function ppp() { echo hello;echo bash; }定义 ppp执行 set查看当前函数 unset ppp清除</li>
<li>build_in #内建 如cd</li>
<li>hash #hash查看 hash -r清除</li>
<li>$PATH #路径</li>
<li>error：command not found</li>
</ol></li>

<li><p>通配符</p>

<pre><code>$[] #运算 同$(())
</code></pre>

<p>$()  #同``一样
${}  #
% 取余
^  ! #取反
&amp;  #后台运行
&amp;&amp; 与
| 管道
|| 或</p>

<ul>
<li>任意
? 任意一个
= 赋值
== 判断是否相等
[ $x == $y ]  &mdash;&gt; test
echo $? 取上一条命令的执行结果
\  &mdash;&gt; &ldquo;$x&rdquo;软引用，取值  &lsquo;$x&rsquo;硬引用，$没有其他意义</li>
<li>永远为真，常与while连用
; 命令分割
/ 路径分割符
&gt;&gt; 追加
&gt; 覆盖​</li>
</ul></li>
</ul>

<h2 id="固化命令的方式">固化命令的方式</h2>

<pre><code>#以登录的方式加载顺序
/etc/profile
/etc/profile.d/a.sh
/root/.bash_profile
/root/.bashrc
/etc/bashrc

#不登录的方式加载顺序
/root/.bashrc
/etc/bashrc
/etc/profile.d/a.sh
</code></pre>

<h2 id="正则表达式">正则表达式</h2>

<p>学习内容博客</p>

<h3 id="grep">grep &mdash;-</h3>

<ol>
<li><p>常用参数</p>

<pre><code>-n  :显示行号
</code></pre>

<p>-e  :指定多个规则
-o  :只显示匹配的内容
-q  :静默模式，没有任何输出，得用echo $?来判断执行成功(0)没有，即有没有过滤到想要的内容
-l  ：如果匹配成功，则只将文件名打印出来，失败则不打印，通常-rl一起用，grep -rl &lsquo;root&rsquo; /etc
-A  :如果匹配成功，则将匹配行及其后n行一起打印出来 如 grep -A 2 &lsquo;root&rsquo; test.txt
-B  :如果匹配成功，则将匹配行及其前n行一起打印出来
-C  :如果匹配成功，则将匹配行及其前后n行一起打印出来
&ndash;color
-c  :如果匹配成功，则将匹配到的行数打印出来
-E  :等于egrep，扩展
-i  ：忽略大小写
-v  :取反，不匹配
-w：匹配单词</p>

<p>例：过滤掉无用的行，包括注释和空格
grep -v &lsquo;^#&rsquo; /etc/ssh/sshd_config | grep -v &lsquo;^ *$&rsquo;</p></li>

<li><p><strong>正则表达式</strong></p>

<pre><code>^    行首
</code></pre>

<p>$    行尾
.    除了换行符以外的任意单个字符</p>

<ul>
<li>前导字符的零个或多个
.*   所有字符
[]   字符组内的任一字符  #若要匹配-需要放在最后-
[^]  对字符组内的每个字符取反(不匹配字符组内的每个字符)
^[^] 非字符组内的字符开头的行
[a-z] 小写字母<br />
[A-Z] 大写字母
[a-Z] 小写和大写字母
[0-9] 数字
&lt;   单词头 单词一般以空格或特殊字符做分隔,连续的字符串被当做单词
&gt;   单词尾
? 前导字符零个或一个</li>
<li>前导字符一个或多个
abc|def abc或def
a(bc|de)f abcf 或 adef
x{m} x出现m次     #egrep不加<br />
x{m,} x出现m次至多次(至少m次)
x{m,n} x出现m次至n次</li>
</ul></li>
</ol>

<h3 id="sed-流编辑器-stream-editer-是以行为单位的处理程序">sed &mdash;- 流编辑器 stream editer,是以行为单位的处理程序</h3>

<pre><code>sed [options] 'command' in_file[s]
options 部分
-n  静默模式，不显示默认输出
-e  指定多个规则
-i  直接修改原文件
-f  指定匹配规则文件
command 部分
'[地址1,地址2] [函数] [参数(标记)]'
//里面正则表达式定址
例： sed -r '1 s/()()()/\1\2\3/g' passwdbk  1表示定位第几行，g表示把这一行的所有匹配的都修改了,括号表示第几部分，后面的\1表示第一部分显示的位置
</code></pre>

<h3 id="awk-处理有格式的文件">awk &mdash;- 处理有格式的文件 !!!!!!</h3>

<pre><code>awk [options] 'commands' files
option
-F 定义字段分隔符,默认的分隔符是连续的空格或制表符
使用option中的-F参数定义间隔符号
用$1,$2,$3等的顺序表示files中每行以间隔符号分隔的各列不同域 例：awk -F: '{print $1,$4}' passwdbk $0所有
NF变量表示当前记录的字段数  可用 $NF 取最后一段
NR表示行号 例： awk -F: 'NR&gt;=3 &amp;&amp; NR&lt;=5{print NR,&quot;----&quot;,$1}' passwdbk   ||或
//里面正则表达式定址 例 awk -F: '/nologin$/{print $1}' passwdbk
让某一部分匹配正则 awk -F: '$1~/^r.*t$/{print $NF}' passwdbk
-v 定义变量并赋值 也可以借用次方式从shell变量中引入
例：
count=7
awk -v x=$count -F: '$3 &gt;= x{print $1}' passwdbk

addr=`ifconfig |awk 'NR==2{print $2}'` 取IP地址
</code></pre>

<h3 id="其他命令">其他命令</h3>

<pre><code>du -sh /boot/   #统计目录大小
cat test |sort |uniq -c #排序去重,c显示重复的行数
cat /etc/passwd |cut -d: -f2,3 #d表示以什么分割 f指定取第几部分 可作为awk的简单模式
dd if=/dev/zero of=/test.ha bs=20M count=1 #新建一个指定大小的文件
find / -size +10M -size -30M -type f -name \*.ha #在/目录下寻找文件大小&gt;10M且&lt;30M，类型为普通文件，后缀名为ha的文件
grep -rl 'root' /etc #在/etc目录下寻找文件内含有'root'的文件并把文件名输出，r表示递归，l表示显示文件名
</code></pre>

<h2 id="shell-script">shell script</h2>

<p>学习内容博客</p>

<pre><code>中括号 [] 相当于 test

获取当前内存使用率：
mem_per=`echo &quot;scale=2;$mem_used/$mem_total&quot; | bc -l | cut -d. -f2` #scale保留几位小数，bc浮点运算
echo ${mem_per}%

$$ 进程PID
$* 所有参数
$# 参数个数

当nginx关闭时开启nginx
#!/bin/bash
var=`systemctl status nginx| awk 'NR==3{print $2}'`
if [ $var = inactive ]
    then
        systemctl start nginx
fi

将x.sh文件移动到/usr/bin/目录下可以在任何位置使用x执行改脚本
</code></pre>

<h3 id="计划任务">计划任务</h3>

<p>学习内容博客</p>

<pre><code>rondtab -e -u root  #e表示编辑 u表示用户
在计划任务中所有命令都使用绝对路径！！！
</code></pre>

<p>-&mdash;&mdash;&mdash;&ndash;本地有md文件备份&mdash;&mdash;&mdash;-</p>

<p>-&mdash;&mdash;&mdash;&mdash;&mdash;-end&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</p>

<p>转载于:<a href="https://www.cnblogs.com/freelandun/p/6754782.html">https://www.cnblogs.com/freelandun/p/6754782.html</a></p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>