<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>如何通过adbshellam播放音视频文件 | 开发者问答集锦</title>
    <meta property="og:title" content="如何通过adbshellam播放音视频文件 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="如何通过adbshellam播放音视频文件">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87adbshellam%E6%92%AD%E6%94%BE%E9%9F%B3%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">如何通过adbshellam播放音视频文件</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>如何通過ａｍ 啓動一個電話：</p>

<p>am start -a android.intent.action.CALL -d tel:10010</p>

<p>如何使用alsa_aplay 播放一個本地ｒａｗ文件．</p>

<p>alsa_aplay -C -Dhw:2,0 -r 8000 -c 1 -f S16 -t raw /d.raw</p>

<p>一、如果想通过adb shell播放一个mp3文件，可以通过以下的命令完成：</p>

<p>（1）通过am 播放音频文件</p>

<p>mp3 file located at /storage/sdcard0/Music/hello.mp3</p>

<p>adb shell am start -a &ldquo;android.intent.action.VIEW&rdquo; -t &ldquo;audio/mp3&rdquo; -d
&ldquo;file:///storage/sdcard0/Music/hello.mp3&rdquo;</p>

<p>（2）通过am 播放视频文件：</p>

<p>For video playback, you can try this:</p>

<pre><code>adb shell am start -a android.intent.action.VIEW -d   &quot;file:///mnt/sdcard/DCIM/Camera/test.3gp&quot; -t &quot;video/*&quot; 
</code></pre>

<p>gives you a prompt of all <strong>capable</strong> players that can play this file.</p>

<pre><code>adb shell am start -a android.intent.action.VIEW -d &quot;file:///mnt/sdcard/DCIM/Camera/test.3gp&quot; -t &quot;video/*&quot; -n &quot;com.alensw.PicFolder/.PlayerActivity&quot; 
</code></pre>

<p>二、也可以通过编译一个可执行文件来在终端运行，以下是一个例子：</p>

<p><a href="http://stackoverflow.com/questions/26298306/android-adb-shell-command-to-play-">http://stackoverflow.com/questions/26298306/android-adb-shell-command-to-play-</a>
sound-from-the-command-line/26329605#26329605</p>

<h1 id="android-adb-shell-command-to-play-sound-from-the-command-line">Android adb shell command to play sound from the command line</h1>

<p><img src="https://img.it610.com/image/info8/d741b524a0a14d9ca69547d07c3d7617.jpg" alt="" /></p>

<p><img src="http://engine.adzerk.net/i.gif?e=eyJhdiI6NDE0LCJhdCI6NCwiYnQiOjAsImNtIjoxODY2MjQsImNoIjoxMTc4LCJjciI6Njk1NzEzLCJkaSI6IjNiNWY1YTU5NjE4ZjRhMzk5OWVjN2M5ZTlkZGYzYjhiIiwiZG0iOjEsImZjIjo3MjE4MDcsImZsIjo0MzE3ODAsImlwIjoiMjEwLjEzLjgzLjk5Iiwia3ciOiJhbmRyb2lkLGFkYiIsIm53IjoyMiwicGMiOjAsInByIjoxNjA0LCJydCI6MSwic3QiOjgyNzcsInVrIjoidWUxLTlkZjFiOTdhZWZiYTRiMGRiYzdiZjkxYmUxNTU0ZDE3Iiwiem4iOjQzLCJ0cyI6MTQyMDcwNzk0MDM0NSwiYmYiOnRydWV9&amp;s=oNoA_N-
rmp__brEGhqmoVN_fPUg" alt="" /></p>

<p>up vote0down vote favorite</p>

<p>|</p>

<p>I have a set of rooted android devices I can access through adb over tcp/ip.I
am trying to identify a specific one by playing a sound from the command line
(one of the .ogg files from /system/media/audio).</p>

<p>I know I could probably build an app for this but it feels like an overkill to
use an APK, and I&rsquo;m hoping there is a more native way. I already know how to
start intents from the command line.</p>

<p>Things I have tried :</p>

<ul>
<li>Investigated using <code>service call media.player</code> but could not find any useful reference about the syntax. I can see with<code>dumpsys media.player</code> references about AwesomePlayer but couln&rsquo;t get anything going.</li>
<li>Tried to find a compiled version of &ldquo;/system/bin/media&rdquo; from the android source code, as it is missing from the device, but without any luck so far.</li>
<li>Tried to build a command line java app to call android.media.MediaPlayer with<code>dalvikvm</code> but my knowledge of Android and java is too limited (class compiled but complained about missing dependencies at runtime)</li>
</ul>

<p>Any ideas?</p>

<p>androidadb</p>

<p>|</p>

<p>share|improve this question</p>

<p>|</p>

<p>editedOct 10 &lsquo;14 at 12:00</p>

<p>|</p>

<p>asked  Oct 10 &lsquo;14 at 11:25</p>

<p><img src="https://img.it610.com/image/info8/79b8f70d67fd4bb0bff20aeb15148348.jpg" alt="" /></p>

<p>Benjamin<br />
12615</p>

<p>&mdash;|&mdash;|&mdash;</p>

<p>|</p>

<p>|  |<br />
|</p>

<p>&mdash;|&mdash;</p>

<p>Hope this can be helpful for you:stackoverflow.com/questions/2203495/… –
krossovochkin Oct 10 &lsquo;14 at 11:38</p>

<p>| 1 |</p>

<p>&mdash;|&mdash;</p>

<p>Thanks for the quick reply. Actually I&rsquo;m trying to avoid launching a user app
and looking for a more system native solution if possible. – BenjaminOct 10
&lsquo;14 at 11:53</p>

<p>| 1 |</p>

<p>&mdash;|&mdash;</p>

<p>I found this article: a3nm.net/blog/android_cli.html There &lsquo;stagefright&rsquo; is
mentioned. In the AOSP &lsquo;stagefried&rsquo; is mentioned
too:source.android.com/devices/media.html May be you can try to look in this
direction. Hope it helps – krossovochkinOct 11 &lsquo;14 at 7:09</p>

<p>|<br />
|</p>

<p>&mdash;|&mdash;</p>

<p>Thanks, just posted the solution I&rsquo;m currently using. – BenjaminOct 12 &lsquo;14 at
20:26</p>

<p>add a comment</p>

<h2 id="1-answer">1 Answer</h2>

<p>activeoldestvotes</p>

<p>up vote1down voteaccepted</p>

<p>|</p>

<p>After some trial and error, I will answer what is now working for me.</p>

<p>Based on other threads, I found the following java code to be the bare minimum
to play some sound through the speaker. The MediaPlayer class seems the only
one that will play with no user interaction, as others need a real activity
context&hellip;</p>

<pre><code>public class Beep {

    public static void main(String[] a) {

        MediaPlayer mp = new MediaPlayer();

        try {
            mp.setDataSource(&quot;/system/media/audio/alarms/Ticktac.ogg&quot;);
            mp.prepare();
            mp.start();
        }
        catch (IOException e) {
            Log.w(&quot;Beep&quot;, &quot;IOException&quot;, e);
        }
}
</code></pre>

<p>(actual working example is here)</p>

<p>This must then be compiled as a dex file, linked to android.jar,<br />
and can finally be run from the adb shell command line using <code>app_process</code>
(not dalvikvm) :</p>

<pre><code>export CLASSPATH=./Beep.dex
app_process /system/bin Beep /system/media/audio/ringtones/Beep-beep.ogg
</code></pre>

<p>It is not the one-liner I was hoping for but does what I needed&hellip;</p>

<p>&mdash;|&mdash;</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>