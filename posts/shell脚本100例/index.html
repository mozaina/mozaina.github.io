<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell脚本100例 | 开发者问答集锦</title>
    <meta property="og:title" content="shell脚本100例 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell脚本100例">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC100%E4%BE%8B/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">shell脚本100例</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>Shell 脚本 100 例<br />
融汇 Shell 脚本知识点,集大成之作。<br />
本书实在是学习、进修、面试、居家旅行必备精品!<br />
达内Linux 云计算学院<br />
2017 年 9 月<br />
交流 QQ:86198501<br />
交流 QQ:86198501 达内Linux 云计算学院<br />
1. 编写 helloworld 脚本<br />
#!/bin/bash<br />
echo &ldquo;hello world&rdquo;</p>

<p>2. 通过位置变量创建 Linux 系统账户及密码<br />
#!/bin/bash<br />
#$1 是执行脚本的第一个参数,$2 是执行脚本的第二个参数<br />
useradd &ldquo;$!&rdquo;<br />
echo &ldquo;$2&rdquo; | passwd ‐‐stdin &ldquo;$2&rdquo;</p>

<p>3. 每周 5 使用 tar 命令备份/var/log 下的所有日志文件<br />
#vim /root/logbak.sh<br />
#编写备份脚本,备份后的文件名包含日期标签,防止后面的备份将前面的备份数据覆盖<br />
#注意 date 命令需要使用反引号括起来,反引号在键盘键上面<br />
tar -czf log-<code>date +%Y%m%d</code>.tar.gz /var/log</p>

<h1 id="crontab-e-编写计划任务-执行备份脚本">crontab ‐e #编写计划任务,执行备份脚本</h1>

<p>00 03 * * 5 /root/logbak.sh</p>

<p>4. 一键部署 LNMP(RPM 包版本)<br />
#!/bin/bash<br />
#使用 yum 安装部署 LNMP,需要提前配置好 yum 源,否则该脚本会失败<br />
#本脚本使用于 centos7.2 或 RHEL7.2<br />
yum ‐y install httpd<br />
yum ‐y install mariadb mariadb‐devel mariadb‐server<br />
yum ‐y install php php‐mysql</p>

<p>systemctl start httpd mariadb<br />
systemctl enable httpd mariadb</p>

<p>5. 实时监控本机内存和硬盘剩余空间,剩余内存小于 500M、根分区剩余空间小于 1000M<br />
时,发送报警邮件给 root 管理员<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#提取根分区剩余空间<br />
disk_size=$(df / |awk &lsquo;/\//{print $4}&lsquo;)<br />
2 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
#提取内存剩余空间<br />
mem_size=$(free |awk &lsquo;/Mem/{print $4}&rsquo;)<br />
while :<br />
do<br />
#注意内存和磁盘提取的空间大小都是以 Kb 为单位<br />
if [ $disk_size ‐le 512000 ‐a $mem_size ‐le 1024000 ];then<br />
mail ‐s Warning root &lt; Insufficient resources,资源不足<br />
EOF<br />
fi<br />
done</p>

<p>6. 脚本生成一个 100 以内的随机数,提示用户猜数字,根据用户的输入,提示用户猜对了,<br />
猜小了或猜大了,直至用户猜对脚本结束。<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#RANDOM 为系统自带的系统变量,值为 0‐32767 的随机数<br />
#使用取余算法将随机数变为 1‐100 的随机数<br />
num=$[RANDOM%100+1]</p>

<p>#使用 read 提示用户猜数字<br />
#使用 if 判断用户猜数字的大小关系:‐eq(等于),‐ne(不等于),‐gt(大于),‐ge(大于等于),‐lt(小于),‐le(小<br />
于等于)<br />
while :<br />
do<br />
read ‐p &ldquo;计算机生成了一个 1‐100 的随机数,你猜: &ldquo; cai<br />
if [ $cai ‐eq $num ];then<br />
echo &ldquo;恭喜,猜对了&rdquo;<br />
exit<br />
elif [ $cai ‐gt $num ];then<br />
echo &ldquo;Oops,猜大了&rdquo;<br />
else<br />
echo &ldquo;Oops,猜小了&rdquo;<br />
fi<br />
done</p>

<p>7. 检测本机当前用户是否为超级管理员,如果是管理员,则使用 yum 安装 vsftpd,如果不<br />
是,则提示您非管理员(使用字串对比版本)<br />
#!/bin/bash<br />
if [ $USER == &ldquo;root&rdquo; ];then<br />
yum ‐y install vsftpd<br />
else<br />
echo &ldquo;您不是管理员,没有权限安装软件&rdquo;<br />
fi</p>

<p>8. 检测本机当前用户是否为超级管理员,如果是管理员,则使用 yum 安装 vsftpd,如果不<br />
是,则提示您非管理员(使用 UID 数字对比版本)<br />
3 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
#!/bin/bash<br />
if [ $UID ‐eq 0 ];then<br />
yum ‐y install vsftpd<br />
else<br />
echo &ldquo;您不是管理员,没有权限安装软件&rdquo;<br />
fi</p>

<p>9. 编写脚本:提示用户输入用户名和密码,脚本自动创建相应的账户及配置密码。如果用户<br />
不输入账户名,则提示必须输入账户名并退出脚本;如果用户不输入密码,则统一使用默<br />
认的 123456 作为默认密码。<br />
#!/bin/bash<br />
read ‐p &ldquo;请输入用户名: &ldquo; user<br />
#使用‐z 可以判断一个变量是否为空,如果为空,提示用户必须输入账户名,并退出脚本,退出码为 2<br />
#没有输入用户名脚本退出后,使用$?查看的返回码为 2<br />
if [ ‐z $user ];then<br />
echo &ldquo;您不需输入账户名&rdquo;<br />
exit 2<br />
fi<br />
#使用 stty ‐echo 关闭 shell 的回显功能<br />
#使用 stty echo 打开 shell 的回显功能<br />
stty ‐echo<br />
read ‐p &ldquo;请输入密码: &ldquo; pass<br />
stty echo<br />
pass=${pass:‐123456}<br />
useradd &ldquo;$user&rdquo;<br />
echo &ldquo;$pass&rdquo; | passwd ‐‐stdin &ldquo;$user&rdquo;</p>

<p>10. 依次提示用户输入 3 个整数,脚本根据数字大小依次排序输出 3 个数字<br />
#!/bin/bash<br />
read ‐p &ldquo;请输入一个整数:&rdquo; num1<br />
read ‐p &ldquo;请输入一个整数:&rdquo; num2<br />
read ‐p &ldquo;请输入一个整数:&rdquo; num3<br />
#不管谁大谁小,最后都打印 echo &ldquo;$num1,$num2,$num3&rdquo;<br />
#num1 中永远存最小的值,num2 中永远存中间值,num3 永远存最大值<br />
#如果输入的不是这样的顺序,则改变数的存储顺序,如:可以将 num1 和 num2 的值对调<br />
tmp=0<br />
#如果 num1 大于 num2,就把 num1 和和 num2 的值对调,确保 num1 变量中存的是最小值<br />
if [ $num1 ‐gt $num2 ];then</p>

<p>tmp=$num1<br />
num1=$num2<br />
num2=$tmp<br />
fi<br />
#如果 num1 大于 num3,就把 num1 和 num3 对调,确保 num1 变量中存的是最小值<br />
if [ $num1 ‐gt $num3 ];then</p>

<p>tmp=$num1<br />
num1=$num3<br />
num3=$tmp<br />
fi<br />
#如果 num2 大于 num3,就把 num2 和 num3 对标,确保 num2 变量中存的是小一点的值<br />
4 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a><br />
交流 QQ:86198501 达内Linux 云计算学院</p>

<p>if [ $num2 ‐gt $num3 ];then<br />
tmp=$num2<br />
num2=$num3<br />
num3=$tmp<br />
fi</p>

<p>echo &ldquo;排序后数据为:$num1,$num2,$num3&rdquo;</p>

<p>11. 编写脚本,实现人机游戏<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
game=(石头 剪刀 布)<br />
num=$[RANDOM%3]<br />
computer=${game[$num]}<br />
#通过随机数获取计算机的出拳<br />
#出拳的可能性保存在一个数组中,game[0],game[1],game[2]分别是 3 中不同的可能</p>

<p>echo &ldquo;请根据下列提示选择您的出拳手势&rdquo;<br />
echo &ldquo;1.石头&rdquo;<br />
echo &ldquo;2.剪刀&rdquo;<br />
echo &ldquo;3.布&rdquo;</p>

<p>read ‐p &ldquo;请选择 1‐3:&rdquo; person<br />
case $person in<br />
1)<br />
if [ $num ‐eq 0 ];then</p>

<p>echo &ldquo;平局&rdquo;<br />
elif [ $num ‐eq 1 ];then</p>

<p>echo &ldquo;你赢&rdquo;<br />
else</p>

<p>echo &ldquo;计算机赢&rdquo;<br />
fi;;<br />
2)<br />
if [ $num ‐eq 0 ];then</p>

<p>echo &ldquo;计算机赢&rdquo;<br />
elif [ $num ‐eq 1 ];then</p>

<p>echo &ldquo;平局&rdquo;<br />
else</p>

<p>echo &ldquo;你赢&rdquo;<br />
fi;;<br />
3)<br />
if [ $num ‐eq 0 ];then</p>

<p>echo &ldquo;你赢&rdquo;<br />
elif [ $num ‐eq 1 ];then</p>

<p>echo &ldquo;计算机赢&rdquo;<br />
else</p>

<p>echo &ldquo;平局&rdquo;<br />
fi;;<br />
*)<br />
echo &ldquo;必须输入 1‐3 的数字&rdquo;<br />
esac</p>

<p>5 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
12. 编写脚本测试 192.168.4.0/24 整个网段中哪些主机处于开机状态,哪些主机处于关机<br />
状态(for 版本)<br />
#!/bin/bash<br />
for i in {1..254}<br />
do<br />
ping ‐c2 ‐i0.3 ‐W1 192.168.4.$i &amp;&gt;/dev/null<br />
if [ $? –eq 0 ];then<br />
echo &ldquo;192.168.4.$i is up&rdquo;<br />
else<br />
echo &ldquo;192.168.4.$i is down&rdquo;<br />
fi<br />
done</p>

<p>13. 编写脚本测试 192.168.4.0/24 整个网段中哪些主机处于开机状态,哪些主机处于关机<br />
状态(while 版本)<br />
#!/bin/bash<br />
i=1<br />
while [ $i ‐le 254 ]<br />
do<br />
ping ‐c2 ‐i0.3 ‐W1 192.168.4.$i &amp;&gt;/dev/null<br />
if [ $? –eq 0 ];then<br />
echo &ldquo;192.168.4.$i is up&rdquo;<br />
else<br />
echo &ldquo;192.168.4.$i is down&rdquo;<br />
fi<br />
let i++<br />
done</p>

<p>14. 编写脚本测试 192.168.4.0/24 整个网段中哪些主机处于开机状态,哪些主机处于关机<br />
状态(多进程版)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#定义一个函数,ping 某一台主机,并检测主机的存活状态<br />
myping(){<br />
ping ‐c2 ‐i0.3 ‐W1 $1 &amp;&gt;/dev/null<br />
if [ $? ‐eq 0 ];then<br />
echo &ldquo;$1 is up&rdquo;<br />
else<br />
echo &ldquo;$1 is down&rdquo;<br />
fi<br />
}<br />
for i in {1..254}<br />
do<br />
myping 192.168.4.$i &amp;<br />
done<br />
#使用&amp;符号,将执行的函数放入后台执行<br />
#这样做的好处是不需要等待 ping 第一台主机的回应,就可以继续并发 ping 第二台主机,依次类推。<br />
6 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院</p>

<p>15. 编写脚本,显示进度条<br />
#!/bin/bash<br />
jindu(){<br />
while :<br />
do<br />
echo ‐n &lsquo;#&rsquo;<br />
sleep 0.2<br />
done<br />
}<br />
jindu &amp;<br />
cp ‐a $1 $2<br />
killall $!<br />
echo &ldquo;拷贝完成&rdquo;</p>

<p>16. 进度条,动态时针版本<br />
#!/bin/bash<br />
#定义一个显示进度的函数,屏幕快速显示| / ‐ \<br />
rotate_line(){<br />
INTERVAL=0.1 #设置间隔时间<br />
COUNT=&ldquo;0&rdquo; #设置 4 个形状的编号,默认编号为 0(不代表任何图像)<br />
while :<br />
do<br />
COUNT=<code>expr $COUNT + 1</code> #执行循环,COUNT 每次循环加 1,(分别代表 4 中不同的形状)<br />
case $COUNT in #判断 COUNT 的值,值不一样显示的形状就不一样<br />
&ldquo;1&rdquo;) #值为 1 显示‐<br />
echo ‐e &lsquo;‐&rsquo;&rdquo;\b\c&rdquo;<br />
sleep $INTERVAL<br />
;;<br />
&ldquo;2&rdquo;) #值为 2 显示\\,第一个\是转义<br />
echo ‐e &lsquo;\\&lsquo;&rdquo;\b\c&rdquo;<br />
sleep $INTERVAL<br />
;;<br />
&ldquo;3&rdquo;) #值为 3 显示|<br />
echo ‐e &ldquo;|\b\c&rdquo;<br />
sleep $INTERVAL<br />
;;<br />
&ldquo;4&rdquo;) #值为 4 显示/<br />
echo ‐e &ldquo;/\b\c&rdquo;<br />
sleep $INTERVAL<br />
;;<br />
*) #值为其他时,将 COUNT 重置为 0<br />
COUNT=&ldquo;0&rdquo;;;<br />
esac<br />
done<br />
}<br />
rotate_line</p>

<p>17. 9*9 乘法表(编写 shell 脚本,打印 9*9 乘法表)<br />
#!/bin/bash<br />
7 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
for i in <code>seq 9</code><br />
do<br />
for j in <code>seq $i</code><br />
do<br />
echo ‐n &ldquo;$i*$j=$[i*j] &ldquo;<br />
done<br />
echo<br />
done</p>

<p>18. 使用死循环实时显示 eth0 网卡发送的数据包流量<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
while :<br />
do<br />
echo &lsquo;本地网卡 eth0 流量信息如下: &lsquo;<br />
ifconfig eth0 | grep &ldquo;RX pack&rdquo; | awk &lsquo;{print $5}&rsquo;<br />
ifconfig eth0 | grep &ldquo;TX pack&rdquo; | awk &lsquo;{print $5}&rsquo;<br />
sleep 1<br />
done</p>

<p>19. 使用 user.txt 文件中的人员名单,在计算机中自动创建对应的账户并配置初始密码<br />
#!/bin/bash<br />
#本脚本执行,需要提前准备一个 user.txt 文件,该文件中包含有若干用户名信息<br />
for i in <code>cat user.txt</code><br />
do<br />
useradd $i<br />
echo &ldquo;123456&rdquo; | passwd ‐‐stdin $i<br />
done</p>

<p>20. 编写批量修改扩展名脚本,如批量将 txt 文件修改为 doc 文件<br />
#!/bin/bash<br />
#执行脚本时,需要给脚本添加位置参数<br />
#脚本名 txt doc(可以将 txt 的扩展名修改为 doc)<br />
#脚本名 doc jpg(可以将 doc 的扩展名修改为 jpg)</p>

<p>for i in &ldquo;ls <em>.$1&rdquo;<br />
do<br />
mv $i ${i%.</em>}.$2<br />
done</p>

<p>21. 使用 expect 工具自动交互密码远程其他主机安装 httpd 软件<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#删除~/.ssh/known_hosts 后,ssh 远程任何主机都会询问是否确认要连接该主机<br />
rm ‐rf ~/.ssh/known_hosts<br />
expect &lt; spawn ssh 192.168.4.254<br />
8 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
expect &ldquo;yes/no&rdquo; {send &ldquo;yes\r&rdquo;}<br />
#根据自己的实际情况将密码修改为真实的密码字串<br />
expect &ldquo;password&rdquo; {send &ldquo;密码\r&rdquo;}<br />
expect &ldquo;#&rdquo; {send &ldquo;yum ‐y install httpd\r&rdquo;}<br />
expect &ldquo;#&rdquo; {send &ldquo;exit\r&rdquo;}<br />
EOF</p>

<p>22. 一键部署 LNMP(源码安装版本)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
menu(){<br />
clear<br />
echo &ldquo; ##############‐‐‐‐Menu‐‐‐‐##############&rdquo;<br />
echo &ldquo;# 1. Install Nginx&rdquo;<br />
echo &ldquo;# 2. Install MySQL&rdquo;<br />
echo &ldquo;# 3. Install PHP&rdquo;<br />
echo &ldquo;# 4. Exit Program&rdquo;<br />
echo &ldquo; ########################################&rdquo;<br />
}</p>

<p>choice(){<br />
read ‐p &ldquo;Please choice a menu[1‐9]:&rdquo; select<br />
}</p>

<p>install_nginx(){<br />
id nginx &amp;&gt;/dev/null<br />
if [ $? ‐ne 0 ];then<br />
useradd ‐s /sbin/nologin nginx<br />
fi<br />
if [ ‐f nginx‐1.8.0.tar.gz ];then</p>

<p>tar ‐xf nginx‐1.8.0.tar.gz</p>

<p>cd nginx‐1.8.0</p>

<p>yum ‐y install gcc pcre‐devel openssl‐devel zlib‐devel make</p>

<p>./configure ‐‐prefix=/usr/local/nginx ‐‐with‐http_ssl_module</p>

<p>make</p>

<p>make install</p>

<p>ln ‐s /usr/local/nginx/sbin/nginx /usr/sbin/</p>

<p>cd ..<br />
else</p>

<p>echo &ldquo;没有 Nginx 源码包&rdquo;<br />
fi<br />
}</p>

<p>install_mysql(){<br />
yum ‐y install gcc gcc‐c++ cmake ncurses‐devel perl<br />
id mysql &amp;&gt;/dev/null<br />
if [ $? ‐ne 0 ];then</p>

<p>useradd ‐s /sbin/nologin mysql<br />
fi<br />
if [ ‐f mysql‐5.6.25.tar.gz ];then</p>

<p>tar ‐xf mysql‐5.6.25.tar.gz</p>

<p>cd mysql‐5.6.25</p>

<p>cmake .</p>

<p>make</p>

<p>make install</p>

<p>/usr/local/mysql/scripts/mysql_install_db ‐‐user=mysql
‐‐datadir=/usr/local/mysql/data/<br />
‐‐basedir=/usr/local/mysql/</p>

<p>chown ‐R root.mysql /usr/local/mysql</p>

<p>chown ‐R mysql /usr/local/mysql/data</p>

<p>/bin/cp ‐f /usr/local/mysql/support‐files/mysql.server /etc/init.d/mysqld</p>

<p>chmod +x /etc/init.d/mysqld</p>

<p>/bin/cp ‐f /usr/local/mysql/support‐files/my‐default.cnf /etc/my.cnf<br />
9 / 38<br />
交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院</p>

<p>echo &ldquo;/usr/local/mysql/lib/&rdquo; &gt;&gt; /etc/ld.so.conf</p>

<p>ldconfig</p>

<p>echo &lsquo;PATH=\$PATH:/usr/local/mysql/bin/&rsquo; &gt;&gt; /etc/profile</p>

<p>export PATH<br />
else<br />
echo &ldquo;没有 mysql 源码包&rdquo;</p>

<p>exit<br />
fi<br />
}</p>

<p>install_php(){<br />
#安装 php 时没有指定启动哪些模块功能,如果的用户可以根据实际情况自行添加额外功能如‐‐with‐gd 等<br />
yum ‐y install gcc libxml2‐devel<br />
if [ ‐f mhash‐0.9.9.9.tar.gz ];then</p>

<p>tar ‐xf mhash‐0.9.9.9.tar.gz</p>

<p>cd mhash‐0.9.9.9</p>

<p>./configure</p>

<p>make</p>

<p>make install</p>

<p>cd ..</p>

<p>if [ ! ‐f /usr/lib/libmhash.so ];then</p>

<p>ln ‐s /usr/local/lib/libmhash.so /usr/lib/</p>

<p>fi</p>

<p>ldconfig<br />
else</p>

<p>echo &ldquo;没有 mhash 源码包文件&rdquo;</p>

<p>exit<br />
fi</p>

<p>if [ ‐f libmcrypt‐2.5.8.tar.gz ];then</p>

<p>tar ‐xf libmcrypt‐2.5.8.tar.gz</p>

<p>cd libmcrypt‐2.5.8</p>

<p>./configure</p>

<p>make</p>

<p>make install</p>

<p>cd ..</p>

<p>if [ ! ‐f /usr/lib/libmcrypt.so ];then</p>

<p>ln ‐s /usr/local/lib/libmcrypt.so /usr/lib/</p>

<p>fi</p>

<p>ldconfig<br />
else</p>

<p>echo &ldquo;没有 libmcrypt 源码包文件&rdquo;</p>

<p>exit<br />
fi</p>

<p>if [ ‐f php‐5.4.24.tar.gz ];then</p>

<p>tar ‐xf php‐5.4.24.tar.gz</p>

<p>cd php‐5.4.24</p>

<p>./configure ‐‐prefix=/usr/local/php5 ‐‐with‐mysql=/usr/local/mysql
‐‐enable‐fpm ‐‐<br />
enable‐mbstring ‐‐with‐mcrypt ‐‐with‐mhash
‐‐with‐config‐file‐path=/usr/local/php5/etc ‐‐with‐<br />
mysqli=/usr/local/mysql/bin/mysql_config</p>

<p>make &amp;&amp; make install</p>

<p>/bin/cp ‐f php.ini‐production /usr/local/php5/etc/php.ini</p>

<p>/bin/cp ‐f /usr/local/php5/etc/php‐fpm.conf.default
/usr/local/php5/etc/php‐fpm.conf</p>

<p>cd ..<br />
else</p>

<p>echo &ldquo;没有 php 源码包文件&rdquo;</p>

<p>exit<br />
fi</p>

<p>}</p>

<p>while :<br />
do<br />
10 / 38<br />
交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
menu<br />
choice<br />
case $select in<br />
1)<br />
install_nginx<br />
;;<br />
2)<br />
install_mysql<br />
;;<br />
3)<br />
install_php<br />
;;<br />
4)<br />
exit<br />
;;<br />
*)<br />
echo Sorry!<br />
esac<br />
done</p>

<p>23. 编写脚本快速克隆 KVM 虚拟机<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#本脚本针对 RHEL7.2 或 Centos7.2<br />
#本脚本需要提前准备一个 qcow2 格式的虚拟机模板,名称为/var/lib/libvirt/images /.rh7_template 的虚<br />
拟机模板<br />
#该脚本使用 qemu‐img 命令快速创建快照虚拟机<br />
#脚本使用 sed 修改模板虚拟机的配置文件,将虚拟机名称、UUID、磁盘文件名、MAC 地址</p>

<h1 id="exit-code">exit code:</h1>

<h1 id="65-user-input-nothing">65 ‐&gt; user input nothing</h1>

<h1 id="66-user-input-is-not-a-number">66 ‐&gt; user input is not a number</h1>

<h1 id="67-user-input-out-of-range">67 ‐&gt; user input out of range</h1>

<h1 id="68-vm-disk-image-exists">68 ‐&gt; vm disk image exists</h1>

<p>IMG_DIR=/var/lib/libvirt/images<br />
BASEVM=rh7_template<br />
read ‐p &ldquo;Enter VM number: &ldquo; VMNUM<br />
if [ $VMNUM ‐le 9 ];then<br />
VMNUM=0$VMNUM<br />
fi</p>

<p>if [ ‐z &ldquo;${VMNUM}&rdquo; ]; then<br />
echo &ldquo;You must input a number.&rdquo;<br />
exit 65<br />
elif [[ ${VMNUM} =~ [a‐z] ]; then<br />
echo &ldquo;You must input a number.&rdquo;<br />
exit 66<br />
elif [ ${VMNUM} ‐lt 1 ‐o ${VMNUM} ‐gt 99 ]; then<br />
echo &ldquo;Input out of range&rdquo;<br />
exit 67<br />
fi</p>

<p>NEWVM=rh7_node${VMNUM}</p>

<p>if [ ‐e $IMG_DIR/${NEWVM}.img ]; then<br />
echo &ldquo;File exists.&rdquo;<br />
exit 68<br />
fi</p>

<p>echo ‐en &ldquo;Creating Virtual Machine disk image&hellip;&hellip;\t&rdquo;<br />
qemu‐img create ‐f qcow2 ‐b $IMG_DIR/.${BASEVM}.img $IMG_DIR/${NEWVM}.img &amp;&gt;
/dev/null<br />
11 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
echo ‐e &ldquo;\e[32;1m[OK]\e[0m&rdquo;</p>

<p>#virsh dumpxml ${BASEVM} &gt; /tmp/myvm.xml<br />
cat /var/lib/libvirt/images/.rhel7.xml &gt; /tmp/myvm.xml<br />
sed ‐i &ldquo;/${BASEVM}/s/${BASEVM}/${NEWVM}/&rdquo; /tmp/myvm.xml<br />
sed ‐i &ldquo;/uuid/s/.*/$(uuidgen)/&rdquo; /tmp/myvm.xml<br />
sed ‐i &ldquo;/${BASEVM}\.img/s/${BASEVM}/${NEWVM}/&rdquo; /tmp/myvm.xml</p>

<p>#修改 MAC 地址,本例使用的是常量,每位使用该脚本的用户需要根据实际情况修改这些值<br />
#最好这里可以使用便利,这样更适合于批量操作,可以克隆更多虚拟机<br />
sed ‐i &ldquo;/mac /s/a1/0c/&rdquo; /tmp/myvm.xml</p>

<p>echo ‐en &ldquo;Defining new virtual machine&hellip;&hellip;\t\t&rdquo;<br />
virsh define /tmp/myvm.xml &amp;&gt; /dev/null<br />
echo ‐e &ldquo;\e[32;1m[OK]\e[0m&rdquo;</p>

<p>24. 编写一个点名器脚本<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#该脚本,需要提前准备一个 user.txt 文件<br />
#该文件中需要包含所有姓名的信息,一行一个姓名,脚本每次随机显示一个姓名<br />
while :<br />
do<br />
#统计 user 文件中有多少用户<br />
line=<code>cat user.txt |wc ‐l</code><br />
num=$[RANDOM%line+1]<br />
sed ‐n &ldquo;${num}p&rdquo; user.txt<br />
sleep 0.2<br />
clear<br />
done</p>

<p>25. 查看有多少远程的 IP 在连接本机(不管是通过 ssh 还是 web 还是 ftp 都统计)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#使用 netstat ‐atn 可以查看本机所有连接的状态,‐a 查看所有,‐t 仅显示 tcp 连接的信息,‐n 数字格式显示</p>

<h1 id="local-address-第四列是本机的-ip-和端口信息">Local Address(第四列是本机的 IP 和端口信息)</h1>

<p>#Foreign Address(第五列是远程主机的 IP 和端口信息)<br />
#使用 awk 命令仅显示第 5 列数据,再显示第 1 列 IP 地址的信息<br />
#sort 可以按数字大小排序,最后使用 uniq 将多余重复的删除,并统计重复的次数<br />
netstat ‐atn | awk &lsquo;{print $5}&rsquo; | awk &lsquo;{print $1}&rsquo; | sort ‐nr | uniq ‐c</p>

<p>26. 对 100 以内的所有正整数相加求和(1+2+3+4&hellip;+100)<br />
#!/bin/bash<br />
#seq 100 可以快速自动生成 100 个整数<br />
sum=0<br />
for i in <code>seq 100</code><br />
do<br />
12 / 38<br />
交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a><br />
交流 QQ:86198501 达内Linux 云计算学院</p>

<p>sum=$[sum+i]<br />
done<br />
echo &ldquo;总和是:$sum&rdquo;</p>

<p>27. 统计 13:30 到 14:30 所有访问 apache 服务器的请求有多少个<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#awk 使用‐F 选项指定文件内容的分隔符是/或者:<br />
#条件判断$7:$8 大于等于 13:30,并且要求,$7:$8 小于等于 14:30<br />
#最后使用 wc ‐l 统计这样的数据有多少行,即多少个<br />
awk ‐F &ldquo;[ /:]&rdquo; &lsquo;$7&rdquo;:&ldquo;$8&gt;=&ldquo;13:30&rdquo; &amp;&amp; $7&rdquo;:&ldquo;$8&lt;=&ldquo;14:30&rdquo;&rsquo;
/var/log/httpd/access_log |wc ‐l</p>

<p>28. 统计 13:30 到 14:30 所有访问本机 Aapche 服务器的远程 IP 地址是什么<br />
#!/bin/bash<br />
#awk 使用‐F 选项指定文件内容的分隔符是/或者:<br />
#条件判断$7:$8 大于等于 13:30,并且要求,$7:$8 小于等于 14:30<br />
#日志文档内容里面,第 1 列是远程主机的 IP 地址,使用 awk 单独显示第 1 列即可<br />
awk ‐F &ldquo;[ /:]&rdquo; &lsquo;$7&rdquo;:&ldquo;$8&gt;=&ldquo;13:30&rdquo; &amp;&amp; $7&rdquo;:&ldquo;$8&lt;=&ldquo;14:30&rdquo;{print $1}&rsquo;
/var/log/httpd/access_log</p>

<p>29. 打印国际象棋棋盘,效果如下图:</p>

<p>#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#设置两个变量,i 和 j,一个代表行,一个代表列,国际象棋为 8*8 棋盘<br />
#i=1 是代表准备打印第一行棋盘,第 1 行棋盘有灰色和蓝色间隔输出,总共为 8 列<br />
#i=1,j=1 代表第 1 行的第 1 列;i=2,j=3 代表第 2 行的第 3 列<br />
#棋盘的规律是 i+j 如果是偶数,就打印蓝色色块,如果是奇数就打印灰色色块<br />
#使用 echo ‐ne 打印色块,并且打印完成色块后不自动换行,在同一行继续输出其他色块<br />
for i in {1..8}<br />
do<br />
for j in {1..8}<br />
do</p>

<p>sum=$[i+j]</p>

<p>if [ $[sum%2] ‐eq 0 ];then</p>

<p>echo ‐ne &ldquo;\033[46m \033[0m&rdquo;<br />
13 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a><br />
交流 QQ:86198501 达内Linux 云计算学院</p>

<p>else</p>

<p>echo ‐ne &ldquo;\033[47m \033[0m&rdquo;</p>

<p>fi<br />
done<br />
echo<br />
done</p>

<p>30. 统计每个远程 IP 访问了本机 apache 几次?<br />
#!/bin/bash<br />
awk &lsquo;{ip[$1]++}END{for(i in ip){print ip[i],i}}&rsquo; /var/log/httpd/access_log</p>

<p>31. 统计当前 Linux 系统中可以登录计算机的账户有多少个<br />
#!/bin/bash<br />
#方法 1:<br />
grep &ldquo;bash$&rdquo; /etc/passwd | wc ‐l<br />
#方法 2:<br />
awk ‐f: &lsquo;/bash$/{x++}end{print x}&rsquo; /etc/passwd</p>

<p>32. 统计/var/log 有多少个文件,并显示这些文件名<br />
#!/bin/bash<br />
#使用 ls 递归显示所有,再判断是否为文件,如果是文件则计数器加 1<br />
cd /var/log<br />
sum=0<br />
for i in <code>ls ‐r *</code><br />
do<br />
if [ ‐f $i ];then<br />
let sum++<br />
echo &ldquo;文件名:$i&rdquo;<br />
fi<br />
done<br />
echo &ldquo;总文件数量为:$sum&rdquo;</p>

<p>33. 自动为其他脚本添加解释器信息#!/bin/bash,如脚本名为 test.sh 则效果如下:<br />
#./test.sh abc.sh 自动为 abc.sh 添加解释器信息<br />
#./test.sh user.sh<br />
#!/bin/bash 自动为 user.sh 添加解释器信息<br />
#先使用 grep 判断对象脚本是否已经有解释器信息,如果没有则使用 sed 添加解释器以及描述信息<br />
if ! grep ‐q &ldquo;^#!&rdquo; $1; then<br />
sed &lsquo;1i #!/bin/bash&rsquo; $1<br />
sed &lsquo;2i #Description: &lsquo;<br />
fi<br />
#因为每个脚本的功能不同,作用不同,所以在给对象脚本添加完解释器信息,以及 Description 后还希望<br />
#继续编辑具体的脚本功能的描述信息,这里直接使用 vim 把对象脚本打开,并且光标跳转到该文件的第 2 行<br />
vim +2 $1</p>

<p>14 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
34. 自动化部署 varnish 源码包软件<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#本脚本需要提前下载 varnish‐3.0.6.tar.gz 这样一个源码包软件,该脚本即可用自动源码安装部署软件</p>

<p>yum ‐y install gcc readline‐devel pcre‐devel<br />
useradd ‐s /sbin/nologin varnish<br />
tar ‐xf varnish‐3.0.6.tar.gz<br />
cd varnish‐3.0.6</p>

<p>#使用 configure,make,make install 源码安装软件包<br />
./configure ‐‐prefix=/usr/local/varnish<br />
make &amp;&amp; make install</p>

<p>#在源码包目录下,将相应的配置文件拷贝到 Linux 系统文件系统中<br />
#默认安装完成后,不会自动拷贝或安装配置文件到 Linux 系统,所以需要手动 cp 复制配置文件<br />
#并使用 uuidgen 生成一个随机密钥的配置文件</p>

<p>cp redhat/varnish.initrc /etc/init.d/varnish<br />
cp redhat/varnish.sysconfig /etc/sysconfig/varnish<br />
cp redhat/varnish_reload_vcl /usr/bin/<br />
ln ‐s /usr/local/varnish/sbin/varnishd /usr/sbin/<br />
ln ‐s /usr/local/varnish/bin/* /usr/bin<br />
mkdir /etc/varnish<br />
cp /usr/local/varnish/etc/varnish/default.vcl /etc/varnish/<br />
uuidgen &gt; /etc/varnish/secret</p>

<p>35. 编写 nginx 启动脚本<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#本脚本编写完成后,放置在/etc/init.d/目录下,就可以被 Linux 系统自动识别到该脚本<br />
#如果本脚本名为/etc/init.d/nginx,则 service nginx start 就可以启动该服务<br />
#service nginx stop 就可以关闭服务<br />
#service nginx restart 可以重启服务<br />
#service nginx status 可以查看服务状态</p>

<p>program=/usr/local/nginx/sbin/nginx<br />
pid=/usr/local/nginx/logs/nginx.pid<br />
start(){<br />
if [ ‐f $pid ];then<br />
echo &ldquo;nginx 服务已经处于开启状态&rdquo;<br />
else<br />
$program<br />
fi<br />
stop(){<br />
if [ ‐! ‐f $pid ];then<br />
echo &ldquo;nginx 服务已经关闭&rdquo;<br />
else<br />
$program ‐s stop<br />
echo &ldquo;关闭服务 ok&rdquo;<br />
fi<br />
}<br />
status(){<br />
if [ ‐f $pid ];then<br />
15 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
echo &ldquo;服务正在运行&hellip;&rdquo;<br />
else<br />
echo &ldquo;服务已经关闭&rdquo;<br />
fi<br />
}</p>

<p>case $1 in<br />
start)<br />
start;;<br />
stop)<br />
stop;;<br />
restart)<br />
stop<br />
sleep 1<br />
start;;<br />
status)<br />
status;;<br />
*)<br />
echo &ldquo;你输入的语法格式错误&rdquo;<br />
esac</p>

<p>36. 自动对磁盘分区、格式化、挂载<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#对虚拟机的 vdb 磁盘进行分区格式化,使用&lt; #n(新建分区),p(创建主分区),1(分区编号为 1),两个空白行(两个回车,相当于将整个磁盘分一个区)<br />
#注意:1 后面的两个回车(空白行)是必须的!<br />
fdisk /dev/vdb &lt;&lt; EOF<br />
n<br />
p<br />
1</p>

<p>wq<br />
EOF</p>

<p>#格式化刚刚创建好的分区<br />
mkfs.xfs /dev/vdb1</p>

<p>#创建挂载点目录<br />
if [ ‐e /data ]; then<br />
exit<br />
fi<br />
mkdir /data</p>

<p>#自动挂载刚刚创建的分区,并设置开机自动挂载该分区<br />
echo &lsquo;/dev/vdb1 /data xfs defaults 1 2&rsquo; &gt;&gt; /etc/fstab<br />
mount ‐a</p>

<p>37. 自动优化 Linux 内核参数<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
16 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
#脚本针对 RHEL7<br />
cat &gt;&gt; /usr/lib/sysctl.d/00‐system.conf &lt; fs.file‐max=65535<br />
net.ipv4.tcp_timestamps = 0<br />
net.ipv4.tcp_synack_retries = 5<br />
net.ipv4.tcp_syn_retries = 5<br />
net.ipv4.tcp_tw_recycle = 1<br />
net.ipv4.tcp_tw_reuse = 1<br />
net.ipv4.tcp_fin_timeout = 30<br />
#net.ipv4.tcp_keepalive_time = 120<br />
net.ipv4.ip_local_port_range = 1024 65535<br />
kernel.shmall = 2097152<br />
kernel.shmmax = 2147483648<br />
kernel.shmmni = 4096<br />
kernel.sem = 5010 641280 5010 128<br />
net.core.wmem_default=262144<br />
net.core.wmem_max=262144<br />
net.core.rmem_default=4194304<br />
net.core.rmem_max=4194304<br />
net.ipv4.tcp_fin_timeout = 10<br />
net.ipv4.tcp_keepalive_time = 30<br />
net.ipv4.tcp_window_scaling = 0<br />
net.ipv4.tcp_sack = 0<br />
EOF</p>

<p>sysctl –p</p>

<p>38. 切割 Nginx 日志文件(防止单个文件过大,后期处理很困难)<br />
#mkdir /data/scripts<br />
#vim /data/scripts/nginx_log.sh<br />
#!/bin/bash<br />
logs_path=&ldquo;/usr/local/nginx/logs/&rdquo;<br />
mv ${logs_path}access.log ${logs<em>path}access</em>$(date ‐d &ldquo;yesterday&rdquo;
+&ldquo;%Y%m%d&rdquo;).log<br />
kill ‐USR1 <code>cat /usr/local/nginx/logs/nginx.pid</code></p>

<h1 id="chmod-x-data-scripts-nginx-log-sh">chmod +x /data/scripts/nginx_log.sh</h1>

<p>#crontab ‐e #脚本写完后,将脚本放入计划任务每天执行一次脚本<br />
0 1 * * * /data/scripts/nginx_log.sh</p>

<p>39. 检测 MySQL 数据库连接数量<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#本脚本每 2 秒检测一次 MySQL 并发连接数,可以将本脚本设置为开机启动脚本,或在特定时间段执行<br />
#以满足对 MySQL 数据库的监控需求,查看 MySQL 连接是否正常<br />
#本案例中的用户名和密码需要根据实际情况修改后方可使用<br />
log_file=/var/log/mysql_count.log<br />
user=root<br />
passwd=123456<br />
while :<br />
do<br />
sleep 2<br />
count=<code>mysqladmin ‐u &quot;$user&quot; ‐p &quot;$passwd&quot; status | awk '{print $4}'</code><br />
echo &ldquo;<code>date +%Y‐%m‐%d</code> 并发连接数为:$count&rdquo; &gt;&gt; $log_file<br />
17 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
done</p>

<p>40. 根据 md5 校验码,检测文件是否被修改<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#本示例脚本检测的是/etc 目录下所有的 conf 结尾的文件,根据实际情况,您可以修改为其他目录或文件<br />
#本脚本在目标数据没有被修改时执行一次,当怀疑数据被人篡改,再执行一次<br />
#将两次执行的结果做对比,MD5 码发生改变的文件,就是被人篡改的文件<br />
for i in $(ls /etc/*.conf)<br />
do<br />
md5sum &ldquo;$i&rdquo; &gt;&gt; /var/log/conf_file.log<br />
done</p>

<p>41. 检测 MySQL 服务是否存活<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#host 为你需要检测的 MySQL 主机的 IP 地址,user 为 MySQL 账户名,passwd 为密码<br />
#这些信息需要根据实际情况修改后方可使用<br />
host=127.0.0.1<br />
user=root<br />
passwd=123456<br />
mysqladmin ‐h 127.0.0.1 ‐u root ‐p&rsquo;$passwd&rsquo; ping &amp;&gt;/dev/null<br />
if [ $? ‐eq 0 ];then<br />
echo &ldquo;MySQL is UP&rdquo;<br />
else<br />
echo &ldquo;MySQL is down&rdquo;<br />
fi<br />
42. 备份 MySQL 的 shell 脚本(mysqldump 版本)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#定义变量 user(数据库用户名),passwd(数据库密码),date(备份的时间标签)<br />
#dbname(需要备份的数据库名称,根据实际需求需要修改该变量的值,默认备份 mysql 数据库)</p>

<p>user=root<br />
passwd=123456<br />
dbname=mysql<br />
date=$(date +%Y%m%d)</p>

<p>#测试备份目录是否存在,不存在则自动创建该目录<br />
[ ! ‐d /mysqlbackup ] &amp;&amp; mkdir /mysqlbackup<br />
#使用 mysqldump 命令备份数据库<br />
mysqldump ‐u&rdquo;$user&rdquo; ‐p&rdquo;$passwd&rdquo; &ldquo;$dbname&rdquo; &gt; /mysqlbackup/&ldquo;$dbname&rdquo;‐${date}.sql</p>

<p>43. 将文件中所有的小写字母转换为大写字母<br />
#!/bin/bash<br />
18 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
#$1 是位置参数,是你需要转换大小写字母的文件名称<br />
#执行脚本,给定一个文件名作为参数,脚本就会将该文件中所有的小写字母转换为大写字母<br />
tr &ldquo;[a‐z]&rdquo; &ldquo;[A‐Z]&rdquo; &lt; $1</p>

<p>44. 非交互自动生成 SSH 密钥文件<br />
#!/bin/bash<br />
#‐t 指定 SSH 密钥的算法为 RSA 算法;‐N 设置密钥的密码为空;‐f 指定生成的密钥文件存放在哪里<br />
rm ‐rf ~/.ssh/{known_hosts,id_rsa*}<br />
ssh‐keygen ‐t RSA ‐N &ldquo; ‐f ~/.ssh/id_rsa</p>

<p>45. 检查特定的软件包是否已经安装<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
if [ $# ‐eq 0 ];then<br />
echo &ldquo;你需要制定一个软件包名称作为脚本参数&rdquo;<br />
echo &ldquo;用法:$0 软件包名称 &hellip;&rdquo;<br />
fi<br />
#$@提取所有的位置变量的值,相当于$*<br />
for package in &ldquo;$@&rdquo;<br />
do<br />
if rpm ‐q ${package} &amp;&gt;/dev/null ;then</p>

<p>echo ‐e &ldquo;${package}\033[32m 已经安装\033[0m&rdquo;<br />
else</p>

<p>echo ‐e &ldquo;${package}\033[34;1m 未安装\033[0m&rdquo;<br />
fi<br />
done</p>

<p>46. 监控 HTTP 服务器的状态(测试返回码)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#设置变量,url 为你需要检测的目标网站的网址(IP 或域名)<br />
url=<a href="http://192.168.4.5/index.html">http://192.168.4.5/index.html</a></p>

<p>#定义函数 check_http:<br />
#使用 curl 命令检查 http 服务器的状态<br />
#‐m 设置 curl 不管访问成功或失败,最大消耗的时间为 5 秒,5 秒连接服务为相应则视为无法连接<br />
#‐s 设置静默连接,不显示连接时的连接速度、时间消耗等信息<br />
#‐o 将 curl 下载的页面内容导出到/dev/null(默认会在屏幕显示页面内容)<br />
#‐w 设置 curl 命令需要显示的内容%{http_code},指定 curl 返回服务器的状态码<br />
check_http(){<br />
status_code=$(curl ‐m 5 ‐s ‐o /dev/null ‐w %{http_code} $url)<br />
}</p>

<p>while :<br />
do<br />
check_http<br />
date=$(date +%Y%m%d‐%H:%M:%S)<br />
19 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
#生成报警邮件的内容<br />
echo &ldquo;当前时间为:$date<br />
$url 服务器异常,状态码为${status_code}.<br />
请尽快排查异常.&rdquo; &gt; /tmp/http$$.pid</p>

<p>#指定测试服务器状态的函数,并根据返回码决定是发送邮件报警还是将正常信息写入日志<br />
if [ $status_code ‐ne 200 ];then</p>

<p>mail ‐s Warning root &lt; /tmp/http$$.pid<br />
else</p>

<p>echo &ldquo;$url 连接正常&rdquo; &gt;&gt; /var/log/http.log<br />
fi<br />
sleep 5<br />
done</p>

<p>47. 自动添加防火墙规则,开启某些服务或端口(适用于 RHEL7)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#设置变量定义需要添加到防火墙规则的服务和端口号<br />
#使用 firewall‐cmd ‐‐get‐services 可以查看 firewall 支持哪些服务<br />
service=&ldquo;nfs http ssh&rdquo;<br />
port=&ldquo;80 22 8080&rdquo;</p>

<p>#循环将每个服务添加到防火墙规则中<br />
for i in $service<br />
do<br />
echo &ldquo;Adding $i service to firewall&rdquo;<br />
firewall‐cmd ‐‐add‐service=${i}<br />
done</p>

<p>#循环将每个端口添加到防火墙规则中<br />
for i in $port<br />
do<br />
echo &ldquo;Adding $i Port to firewall&rdquo;<br />
firewall‐cmd ‐‐add‐port=${i}/tcp<br />
done<br />
#将以上设置的临时防火墙规则,转换为永久有效的规则(确保重启后有效)<br />
firewall‐cmd ‐‐runtime‐to‐permanent</p>

<p>48. 使用脚本自动创建逻辑卷<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#清屏,显示警告信息,创建将磁盘转换为逻辑卷会删除数据<br />
clear<br />
echo ‐e &ldquo;\033[32m !!!!!!警告(Warning)!!!!!!\033[0m&rdquo;<br />
echo<br />
echo &ldquo;+++++++++++++++++++++++++++++++++++++++++++++++++&rdquo;<br />
echo &ldquo;脚本会将整个磁盘转换为 PV,并删除磁盘上所有数据!!!&rdquo;<br />
echo &ldquo;This Script will destroy all data on the Disk&rdquo;<br />
echo &ldquo;+++++++++++++++++++++++++++++++++++++++++++++++++&rdquo;<br />
echo<br />
read ‐p &ldquo;请问是否继续 y/n?:&rdquo; sure<br />
20 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
#测试用户输入的是否为 y,如果不是则退出脚本<br />
[ $sure != y ] &amp;&amp; exit</p>

<p>#提示用户输入相关参数(磁盘、卷组名称等数据),并测试用户是否输入了这些值,如果没有输入,则脚本退出<br />
read ‐p &ldquo;请输入磁盘名称,如/dev/vdb:&rdquo; disk<br />
[ ‐z $disk ] &amp;&amp; echo &ldquo;没有输入磁盘名称&rdquo; &amp;&amp; exit<br />
read ‐p &ldquo;请输入卷组名称:&rdquo; vg_name<br />
[ ‐z $vg_name ] &amp;&amp; echo &ldquo;没有输入卷组名称&rdquo; &amp;&amp; exit<br />
read ‐p &ldquo;请输入逻辑卷名称:&rdquo; lv_name<br />
[ ‐z $lv_name ] &amp;&amp; echo &ldquo;没有输入逻辑卷名称&rdquo; &amp;&amp; exit<br />
read ‐p &ldquo;请输入逻辑卷大小:&rdquo; lv_size<br />
[ ‐z $lv_size ] &amp;&amp; echo &ldquo;没有输入逻辑卷大小&rdquo; &amp;&amp; exit</p>

<p>#使用命令创建逻辑卷<br />
pvcreate $disk<br />
vgcreate $vg_name $disk<br />
lvcreate ‐L ${lv_size}M ‐n ${lv_name} ${vg_name}</p>

<p>49. 显示 CPU 厂商信息<br />
#!/bin/bash<br />
awk &lsquo;/vendor_id/{print $3}&rsquo; /proc/cpuinfo |uniq</p>

<p>50. 删除某个目录下大小为 0 的文件<br />
#!/bin/bash<br />
#/var/www/html 为测试目录,脚本会清空该目录下所有 0 字节的文件<br />
dir=&ldquo;/var/www/html&rdquo;<br />
find $dir ‐type f ‐size 0 ‐exec rm ‐rf {} \;</p>

<p>51. 查找 Linux 系统中的僵尸进程<br />
#!/bin/bash<br />
#awk 判断 ps 命令输出的第 8 列为 Z 是,显示该进程的 PID 和进程命令<br />
ps aux |awk &lsquo;{if($8 == &ldquo;Z&rdquo;){print $2,$11}}&rsquo;</p>

<p>52. 提示用户输入年份后测试判断是否为闰年<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#能被 4 整除并且并 100 整除的年是闰年<br />
#能被 400 整除的年也是闰年<br />
read ‐p &ldquo;请输入一个年份:&rdquo; year</p>

<p>if [ &ldquo;$year&rdquo; = &ldquo;&rdquo; ];then<br />
echo &ldquo;没有输入年份&rdquo;<br />
21 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
exit<br />
fi<br />
#使用正则测试变量 year 中是否包含大小写字母<br />
if [[ &ldquo;$year&rdquo; =~ [a‐Z] ]];then<br />
echo &ldquo;你输入的不是数字&rdquo;<br />
exit<br />
fi<br />
if [ $[year % 4] ‐eq 0 ] &amp;&amp; [ $[year % 100] ‐ne 0 ];then<br />
echo &ldquo;$year 是闰年&rdquo;<br />
elif [ $[year % 400] ‐eq 0 ];then<br />
echo &ldquo;$year 是闰年&rdquo;<br />
else<br />
echo &ldquo;$year 不是闰年&rdquo;<br />
fi</p>

<p>53. 生成随机密码(urandom 版本)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#/dev/urandom 文件是 Linux 内置的随机设备文件<br />
#cat /dev/urandom 可以看看里面的内容,ctrl+c 退出查看<br />
#查看该文件内容后,发现内容有些太随机,包括很多特殊符号,我们需要的密码不希望使用这些符号<br />
#tr ‐dc &lsquo;_A‐Za‐z0‐9&rsquo; #该命令可以将随机文件中其他的字符删除,仅保留大小写字母,数字,下划线,但是内容还是太多<br />
#我们可以继续将优化好的内容通过管道传递给 head 命令,在大量数据中仅显示头 10 个字节<br />
#注意 A 前面有个下划线<br />
tr ‐dc &lsquo;_A‐Za‐z0‐9&rsquo;</p>

<p>54. 生成随机密码(字串截取版本)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#设置变量 key,存储密码的所有可能性(密码库),如果还需要其他字符请自行添加其他密码字符<br />
#使用$#统计密码库的长度<br />
key=&ldquo;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&rdquo;<br />
num=${#key}<br />
#设置初始密码为空<br />
pass=&rdquo;<br />
#循环 8 次,生成 8 为随机密码<br />
#每次都是随机数对密码库的长度取余,确保提取的密码字符不超过密码库的长度<br />
#每次循环提取一位随机密码,并将该随机密码追加到 pass 变量的最后<br />
for i in {1..8}<br />
do<br />
index=$[RANDOM%num]<br />
pass=$pass${key:$index:1}<br />
done<br />
echo $pass</p>

<p>22 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
55. 生成随机密码(UUID 版本,16 进制密码)<br />
#!/bin/bash<br />
uuidgen</p>

<p>56. 生成随机密码(进程 ID 版本,数字密码)<br />
#!/bin/bash<br />
echo $$</p>

<p>57. 测试用户名与密码是否正确<br />
#!/bin/bash<br />
#用户名为 tom 并且密码为 123456,则提示登录成功,否则提示登录失败<br />
read ‐p &ldquo;请输入用户名:&rdquo; user<br />
read ‐p &ldquo;请输入密码:&rdquo; pass<br />
if [ &ldquo;$user&rdquo; == &lsquo;tom&rsquo; ‐a &ldquo;$pass&rdquo; == &lsquo;123456&rsquo; ];then<br />
echo &ldquo;Login successful&rdquo;<br />
else<br />
echo &ldquo;Login Failed&rdquo;<br />
fi</p>

<p>58. 循环测试用户名与密码是否正确<br />
#!/bin/bash<br />
#循环测试用户的账户名和密码,最大测试 3 次,输入正确提示登录成功,否则提示登录失败<br />
#用户名为 tom 并且密码为 123456<br />
for i in {1..3}<br />
do<br />
read -p &ldquo;请输入用户名:&rdquo; user<br />
read -p &ldquo;请输入密码:&rdquo; pass<br />
if [ &ldquo;$user&rdquo; == &lsquo;tom&rsquo; -a &ldquo;$pass&rdquo; == &lsquo;123456&rsquo; ];then<br />
echo &ldquo;Login successful&rdquo;<br />
exit<br />
fi<br />
done<br />
echo &ldquo;Login Failed&rdquo;</p>

<p>59. Shell 脚本的 fork 炸弹<br />
#!/bin/bash<br />
#快速消耗计算机资源,致使计算机死机<br />
#定义函数名为.(点), 函数中递归调用自己并放入后台执行<br />
.() { .|.&amp; };.</p>

<p>23 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
60. 批量下载有序文件(pdf、图片、视频等等)<br />
#!/bin/bash<br />
#本脚本准备有序的网络资料进行批量下载操作(如 01.jpg,02.jpg,03.jpg)<br />
#设置资源来源的域名连接<br />
url=&ldquo;<a href="http://www.test.com/&quot;">http://www.test.com/&quot;</a></p>

<p>echo &ldquo;开始下载&hellip;&rdquo;<br />
sleep 2<br />
type=jpg<br />
for i in <code>seq 100</code><br />
echo &ldquo;正在下载$i.$type&rdquo;<br />
curl $url/$i.$type ‐o /tmp/${i}$type<br />
sleep 1<br />
done<br />
#curl 使用‐o 选项指定下载文件另存到哪里.</p>

<p>61. 显示当前计算机中所有账户的用户名称<br />
#!/bin/bash<br />
#下面使用 3 中不同的方式列出计算机中所有账户的用户名<br />
#指定以:为分隔符,打印/etc/passwd 文件的第 1 列<br />
awk ‐F: &lsquo;{print $1}&rsquo; /etc/passwd</p>

<p>#指定以:为分隔符,打印/etc/passwd 文件的第 1 列<br />
cut ‐d: ‐f1 /etc/passwd</p>

<p>#使用 sed 的替换功能,将/etc/passwd 文件中:后面的所有内容替换为空(仅显示用户名)<br />
sed &rsquo;s/:.*//&rsquo; /etc/passwd</p>

<p>62. 制定目录路径,脚本自动将该目录使用 tar 命令打包备份到/data 目录<br />
#!/bin/bash<br />
[ ! ‐d /data ] &amp;&amp; mkdir /data<br />
[ ‐z $1 ] &amp;&amp; exit<br />
if [ ‐d $1 ];then<br />
tar ‐czf /data/$1.‐<code>date +%Y%m%d</code>.tar.gz $1<br />
else<br />
echo &ldquo;该目录不存在&rdquo;<br />
fi</p>

<p>63. 显示进度条(回旋镖版)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
while :<br />
do<br />
clear<br />
for i in {1..20}<br />
do</p>

<p>echo ‐e &ldquo;\033[3;${i}H*&rdquo;<br />
24 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院</p>

<p>sleep 0.1<br />
done<br />
clear<br />
for i in {20..1}<br />
do</p>

<p>echo ‐e &ldquo;\033[3;${i}H*&rdquo;</p>

<p>sleep 0.1<br />
done<br />
clear<br />
done</p>

<p>64. 安装 LAMP 环境(yum 版本)<br />
#!/bin/bash<br />
#本脚本适用于 RHEL7(RHEL6 中数据库为 mysql)<br />
yum makecache &amp;&gt;/dev/null<br />
num=$(yum repolist |awk &lsquo;/repolist/{print $2}&rsquo; |sed &rsquo;s/,//&lsquo;)<br />
if [ $num ‐lt 0 ];then<br />
yum -y install httpd<br />
yum -y install mariadb mariadb-server mariadb-devel<br />
yum -y install php php-mysql<br />
else<br />
echo &ldquo;未配置 yum 源&hellip;&rdquo;<br />
fi</p>

<p>65. 循环关闭局域网中所有主机<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#假设本机为 192.168.4.100,编写脚本关闭除自己外的其他所有主机<br />
#脚本执行,需要提前给所有其他主机传递 ssh 密钥,满足无密码连接<br />
for i in {1..254}<br />
do<br />
[ $i -eq 100 ] &amp;&amp; continue<br />
echo &ldquo;正在关闭 192.168.4.$i&hellip;&rdquo;<br />
ssh 192.168.4.$i poweroff<br />
done</p>

<p>66. 获取本机 MAC 地址<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
ip a s |awk &lsquo;BEGIN{print &ldquo; 本 机 MAC 地 址 信 息 如 下 :&ldquo;}/<sup class="footnote-ref" id="fnref:0-9"><a href="#fn:0-9">1</a></sup>/{print<br />
$2;getline;if($0~/link\/ether/){print $2}}&rsquo; |grep ‐v lo:</p>

<p>#awk 读取 ip 命令的输出,输出结果中如果有以数字开始的行,先显示该行的地 2 列(网卡名称),<br />
#接着使用 getline 再读取它的下一行数据,判断是否包含 link/ether<br />
#如果保护该关键词,就显示该行的第 2 列(MAC 地址)<br />
#lo 回环设备没有 MAC,因此将其屏蔽,不显示<br />
25 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院</p>

<p>67. 自动配置 rsynd 服务器的配置文件 rsyncd.conf<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)</p>

<h1 id="see-rsyncd-conf-man-page-for-more-options">See rsyncd.conf man page for more options.</h1>

<p>[ ! ‐d /home/ftp ] &amp;&amp; mkdir /home/ftp<br />
echo &lsquo;uid = nobody<br />
gid = nobody<br />
use chroot = yes<br />
max connections = 4<br />
pid file = /var/run/rsyncd.pid<br />
exclude = lost+found/<br />
transfer logging = yes<br />
timeout = 900<br />
ignore nonreadable = yes<br />
dont compress = *.gz *.tgz *.zip *.z *.Z *.rpm *.deb *.bz2<br />
[ftp]<br />
path = /home/ftp<br />
comment = share&rsquo; &gt; /etc/rsyncd.conf</p>

<p>68. 修改 Linux 系统的最大打开文件数量<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#往/etc/security/limits.conf 文件的末尾追加两行配置参数,修改最大打开文件数量为 65536<br />
cat &gt;&gt; /etc/security/limits.conf &lt; * soft nofile 65536<br />
* hard nofile 65536<br />
EOF</p>

<p>69. 设置 Python 支持自动命令补齐功能<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#Summary:Enable tab complete for python<br />
#Description:</p>

<p>Needs import readline and rlcompleter module</p>

<p>import readline</p>

<p>import rlcompleter</p>

<p>help(rlcompleter) display detail: readline.parse_and_bind(&lsquo;tab: complete&rsquo;)</p>

<p>man python display detail: PYTHONSTARTUP variable</p>

<p>if [ ! ‐f /usr/bin/tab.py ];then<br />
cat &gt;&gt; /usr/bin/tab.py &lt; import readline<br />
import rlcompleter<br />
readline.parse_and_bind(&lsquo;tab: complete&rsquo;)<br />
EOF<br />
fi<br />
sed ‐i &lsquo;$a export PYTHONSTARTUP=/usr/bin/tab.py&rsquo; /etc/profile<br />
source /etc/profile</p>

<p>26 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
70. 自动修改计划任务配置文件<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
read ‐p &ldquo;请输入分钟信息(00‐59):&rdquo; min<br />
read ‐p &ldquo;请输入小时信息(00‐24):&rdquo; hour<br />
read ‐p &ldquo;请输入日期信息(01‐31):&rdquo; date<br />
read ‐p &ldquo;请输入月份信息(01‐12):&rdquo; month<br />
read ‐p &ldquo;请输入星期信息(00‐06):&rdquo; weak<br />
read ‐p &ldquo;请输入计划任务需要执行的命令或脚本:&rdquo; program<br />
echo &ldquo;$min $hour $date $month $weak $program&rdquo; &gt;&gt; /etc/crontab</p>

<p>71. 使用脚本循环创建三位数字的文本文件(111-999 的文件)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
for i in {1..9}<br />
do<br />
for j in {1..9}<br />
do</p>

<p>for k in {1..9}</p>

<p>do</p>

<p>touch /tmp/$i$j$k.txt</p>

<p>done<br />
done<br />
done</p>

<p>72. 找出/etc/passwd 中能登录的用户,并将对应在/etc/shadow 中第二列密码提出处理<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
user=$(awk ‐F: &lsquo;/bash$/{print $1}&rsquo; /etc/passwd)<br />
for i in $user<br />
do<br />
awk ‐F: ‐v x=$i &lsquo;$1==x{print $1,$2}&rsquo; /etc/shadow<br />
done</p>

<p>73. 统计/etc/passwd 中 root 出现的次数<br />
#!/bin/bash<br />
#每读取一行文件内容,即从第 1 列循环到最后 1 列,依次判断是否包含 root 关键词,如果包含则 x++<br />
awk ‐F: &lsquo;{i=1;while(i&lt;=NF){if($i~/root/){x++};i++}} END{print &ldquo;root 出现次数为&rdquo;x}&rsquo;
/etc/passwd</p>

<p>74. 统计 Linux 进程相关数量信息<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
27 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a><br />
交流 QQ:86198501 达内Linux 云计算学院</p>

<p>running=0<br />
sleeping=0<br />
stoped=0<br />
zombie=0<br />
#在 proc 目录下所有以数字开始的都是当前计算机正在运行的进程的进程 PID<br />
#每个 PID 编号的目录下记录有该进程相关的信息<br />
for pid in /proc/[1‐9]*<br />
do<br />
procs=$[procs+1]<br />
stat=$(awk &lsquo;{print $3}&rsquo; $pid/stat)<br />
#每个 pid 目录下都有一个 stat 文件,该文件的第 3 列是该进程的状态信息<br />
case $stat in<br />
R)</p>

<p>running=$[running+1];;<br />
T)</p>

<p>stoped=$[stoped+1];;<br />
S)</p>

<p>sleeping=$[sleeping+1];;<br />
Z)</p>

<p>zombie=$[zombie+1];;<br />
esac<br />
done<br />
echo &ldquo;进程统计信息如下&rdquo;<br />
echo &ldquo;总进程数量为:$procs&rdquo;<br />
echo &ldquo;Running 进程数为:$running&rdquo;<br />
echo &ldquo;Stoped 进程数为:$stoped&rdquo;<br />
echo &ldquo;Sleeping 进程数为:$sleeping&rdquo;<br />
echo &ldquo;Zombie 进程数为:$zombie&rdquo;</p>

<p>75. 从键盘读取一个论坛积分,判断论坛用户等级<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#等级分类如下:</p>

<h1 id="大于等于-90">大于等于 90</h1>

<p>神功绝世</p>

<h1 id="大于等于-80-小于-90-登峰造极"># 大于等于 80,小于 90 登峰造极</h1>

<p>大于等于 70,小于 80 炉火纯青</p>

<h1 id="大于等于-60-小于-70-略有小成">大于等于 60,小于 70 略有小成</h1>

<h1 id="小于-60-初学乍练">小于 60 初学乍练</h1>

<p>read ‐p &ldquo;请输入积分(0‐100):&rdquo; JF<br />
if [ $JF ‐ge 90 ] ; then<br />
echo &ldquo;$JF 分,神功绝世&rdquo;<br />
elif [ $JF ‐ge 80 ] ; then<br />
echo &ldquo;$JF 分,登峰造极&rdquo;<br />
elif [ $JF ‐ge 70 ] ; then<br />
echo &ldquo;$JF 分,炉火纯青&rdquo;<br />
elif [ $JF ‐lt 60 ] ; then<br />
echo &ldquo;$JF 分,略有小成&rdquo;<br />
else<br />
echo &ldquo;$JF 分,初学乍练&rdquo;<br />
fi</p>

<p>28 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
76. 判断用户输入的数据类型(字母、数字或其他)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
read ‐p &ldquo;请输入一个字符:&rdquo; KEY<br />
case &ldquo;$KEY&rdquo; in<br />
[a‐z]|[A‐Z])<br />
echo &ldquo;字母&rdquo; ;;<br />
[0‐9])<br />
echo &ldquo;数字&rdquo; ;;<br />
*)<br />
echo &ldquo;空格、功能键或其他控制字符&rdquo;<br />
esac</p>

<p>77. 显示进度条(数字版)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#echo 使用‐e 选项后,在打印参数中可以指定 H,设置需要打印内容的 x,y 轴的定位坐标<br />
#设置需要打印内容在第几行,第几列<br />
for i in {1..100}<br />
do<br />
echo ‐e &ldquo;\033[6;8H[&rdquo;<br />
echo ‐e &ldquo;\033[6;9H$i%&rdquo;<br />
echo ‐e &ldquo;\033[6;13H]&rdquo;<br />
sleep 0.1<br />
done</p>

<p>78. 打印斐波那契数列(该数列的特点是后一个数字,永远都是前 2 个数字之和)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#斐波那契数列后一个数字永远是前 2 个数字之和<br />
#如:0 1 1 2 3 5 8 13 &hellip; &hellip;<br />
list=(0 1)<br />
for i in <code>seq 2 11</code><br />
do<br />
list[$i]=<code>expr ${list[‐1]} + ${list[‐2]}</code><br />
done<br />
echo ${list[@]}</p>

<p>79. 判断用户输入的是 Yes 或 NO<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
read ‐p &ldquo;Are you sure?[y/n]:&rdquo; sure<br />
case $sure in<br />
y|Y|Yes|YES)<br />
echo &ldquo;you enter $a&rdquo;;;<br />
n|N|NO|no)<br />
echo &ldquo;you enter $a&rdquo;;;<br />
29 / 38<br />
交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
*)<br />
echo &ldquo;error&rdquo;;;<br />
esac</p>

<p>80. 显示本机 Linux 系统上所有开放的端口列表<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#从端口列表中观测有没有没用的端口,有的话可以将该端口对应的服务关闭,防止意外的攻击可能性<br />
ss ‐nutlp |awk &lsquo;{print $1,$5}&rsquo; |awk ‐F&rdquo;[: ]&rdquo; &lsquo;{print &ldquo;协议:&ldquo;$1,&ldquo;端口号:&ldquo;$NF}&rsquo; |grep
&ldquo;[0‐9]&rdquo;<br />
|uniq</p>

<p>81. 将 Linux 系统中 UID 大于等于 1000 的普通用户都删除<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#先用 awk 提取所有 uid 大于等于 1000 的普通用户名称<br />
#再使用 for 循环逐个将每个用户删除即可<br />
user=$(awk ‐F: &lsquo;$3&gt;=1000{print $1}&rsquo; /etc/passwd)<br />
for i in $user<br />
do<br />
userdel ‐r $i<br />
done</p>

<p>82. 使用脚本开启关闭虚拟机<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#脚本通过调用 virsh 命令实现对虚拟机的管理,如果没有该命令,需要安装 libvirt‐client 软件包<br />
#$1 是脚本的第 1 个参数,$2 是脚本的第 2 个参数<br />
#第 1 个参数是你希望对虚拟机进行的操作指令,第 2 个参数是虚拟机名称<br />
case $1 in<br />
list)<br />
virsh list ‐‐all;;<br />
start)<br />
virsh start $2;;<br />
stop)<br />
virsh destroy $2;;<br />
enable)<br />
virsh autostart $2;;<br />
disable)<br />
virsh autostart ‐‐disable $2;;<br />
*)<br />
echo &ldquo;Usage:$0 list&rdquo;<br />
echo &ldquo;Usage:$0 [start|stop|enable|disable] VM_name&rdquo;<br />
cat &lt;&lt; EOF<br />
list 显示虚拟机列表<br />
start<br />
启动虚拟机<br />
stop 关闭虚拟机<br />
enable 设置虚拟机为开机自启<br />
disable 关闭虚拟机开机自启功能<br />
30 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
EOF<br />
;;<br />
esac</p>

<p>83. 调整虚拟机内存参数的 shell 脚本<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#脚本通过调用 virsh 命令实现对虚拟机的管理,如果没有该命令,需要安装 libvirt‐client 软件包<br />
cat &lt;&lt; EOF<br />
1.调整虚拟机最大内存数值<br />
2.调整实际分配给虚拟机的内存数值<br />
EOF<br />
read ‐p &ldquo;请选择[1‐2]:&rdquo; select<br />
case $select in<br />
1)<br />
read ‐p &ldquo;请输入虚拟机名称&rdquo; name<br />
read ‐p &ldquo;请输入最大内存数值(单位:k):&rdquo; size<br />
virsh setmaxmem $name ‐‐size $size ‐‐config;;<br />
2)<br />
read ‐p &ldquo;请输入虚拟机名称&rdquo; name<br />
read ‐p &ldquo;请输入实际分配内存数值(单位:k):&rdquo; size<br />
virsh setmem $name $size;;<br />
*)<br />
echo &ldquo;Error&rdquo;;;<br />
esac</p>

<p>84. 查看 KVM 虚拟机中的网卡信息(不需要进入启动或进入虚拟机)<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#该脚本使用 guestmount 工具,可以将虚拟机的磁盘系统挂载到真实机文件系统中<br />
#Centos7.2 中安装 libguestfs‐tools‐c 可以获得 guestmount 工具<br />
#虚拟机可以启动或者不启动都不影响该脚本的使用<br />
#将虚拟机磁盘文件挂载到文件系统后,就可以直接读取磁盘文件中的网卡配置文件中的数据<br />
clear<br />
mountpoint=&ldquo;/media/virtimage&rdquo;<br />
[ ! ‐d $mountpoint ]&amp;&amp; mkdir $mountpoint<br />
read ‐p &ldquo;输入虚拟机名称:&rdquo; name<br />
echo &ldquo;请稍后&hellip;&rdquo;<br />
#如果有设备挂载到该挂载点,则先 umount 卸载<br />
if mount | grep ‐q &ldquo;$mountpoint&rdquo; ;then<br />
umount $mountpoint<br />
fi<br />
#只读的方式,将虚拟机的磁盘文件挂载到特定的目录下,这里是/media/virtimage 目录<br />
guestmount ‐r ‐d $name ‐i $mountpoint<br />
echo<br />
echo &ldquo;‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐&rdquo;<br />
echo ‐e &ldquo;\033[32m$name 虚拟机中网卡列表如下:\033[0m&rdquo;<br />
dev=$(ls /media/virtimage/etc/sysconfig/network‐scripts/ifcfg‐* |awk ‐F&rdquo;[/‐]&rdquo;
&lsquo;{print $9}&rsquo;)<br />
echo $dev<br />
echo &ldquo;‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐&rdquo;<br />
31 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院</p>

<p>echo<br />
echo<br />
echo &ldquo;+++++++++++++++++++++++++++++++++++++++++++&rdquo;<br />
echo ‐e &ldquo;\033[32m 网卡 IP 地址信息如下:\033[0m&rdquo;<br />
for i in $dev<br />
do<br />
echo ‐n &ldquo;$i:&rdquo;<br />
grep ‐q &ldquo;IPADDR&rdquo; /media/virtimage/etc/sysconfig/network‐scripts/ifcfg‐$i ||
echo &ldquo;未配置 IP<br />
地址&rdquo;<br />
awk ‐F= &lsquo;/IPADDR/{print $2}&rsquo;
/media/virtimage/etc/sysconfig/network‐scripts/ifcfg‐$i<br />
done<br />
echo &ldquo;+++++++++++++++++++++++++++++++++++++++++++&rdquo;</p>

<p>85. 不登陆虚拟机,修改虚拟机网卡 IP 地址<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#该脚本使用 guestmount 工具,Centos7.2 中安装 libguestfs‐tools‐c 可以获得 guestmount 工具<br />
#脚本在不登陆虚拟机的情况下,修改虚拟机的 IP 地址信息<br />
#在某些环境下,虚拟机没有 IP 或 IP 地址与真实主机不在一个网段<br />
#真实主机在没有 virt‐manger 图形的情况下,远程连接虚拟机很麻烦<br />
#该脚本可以解决类似的问题<br />
read ‐p &ldquo;请输入虚拟机名称:&rdquo; name<br />
if virsh domstate $name |grep ‐q running ;then<br />
echo &ldquo;修改虚拟机网卡数据,需要关闭虚拟机&rdquo;<br />
virsh destroy $name<br />
fi<br />
mountpoint=&ldquo;/media/virtimage&rdquo;<br />
[ ! ‐d $mountpoint ]&amp;&amp; mkdir $mountpoint<br />
echo &ldquo;请稍后&hellip;&rdquo;<br />
if mount | grep ‐q &ldquo;$mountpoint&rdquo; ;then<br />
umount $mountpoint<br />
fi<br />
guestmount ‐d $name ‐i $mountpoint<br />
read ‐p &ldquo;请输入需要修改的网卡名称:&rdquo; dev<br />
read ‐p &ldquo;请输入 IP 地址:&rdquo; addr<br />
#判断原本网卡配置文件中是否有 IP 地址,有,就修改该 IP,没有,就添加一个新的 IP 地址<br />
if grep ‐q &ldquo;IPADDR&rdquo; $mountpoint/etc/sysconfig/network‐scripts/ifcfg‐$dev ;then<br />
sed ‐i &ldquo;/IPADDR/s/=.*/=$addr/&rdquo;
$mountpoint/etc/sysconfig/network‐scripts/ifcfg‐$dev<br />
else<br />
echo &ldquo;IPADDR=$addr&rdquo; &gt;&gt; $mountpoint/etc/sysconfig/network‐scripts/ifcfg‐$dev<br />
fi<br />
#如果网卡配置文件中有客户配置的 IP 地址,则脚本提示修改 IP 完成<br />
awk ‐F= ‐v x=$addr &lsquo;$2==x{print &ldquo;完成&hellip;&rdquo;}&rsquo;
$mountpoint/etc/sysconfig/network‐scripts/ifcfg‐<br />
$dev</p>

<p>86. 破解虚拟机密码,无密码登陆虚拟机系统<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#该脚本使用 guestmount 工具,Centos7.2 中安装 libguestfs‐tools‐c 可以获得 guestmount 工具<br />
32 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院</p>

<p>read ‐p &ldquo;请输入虚拟机名称:&rdquo; name<br />
if virsh domstate $name |grep ‐q running ;then<br />
echo &ldquo;破解,需要关闭虚拟机&rdquo;<br />
virsh destroy $name<br />
fi<br />
mountpoint=&ldquo;/media/virtimage&rdquo;<br />
[ ! ‐d $mountpoint ]&amp;&amp; mkdir $mountpoint<br />
echo &ldquo;请稍后&hellip;&rdquo;<br />
if mount | grep ‐q &ldquo;$mountpoint&rdquo; ;then<br />
umount $mountpoint<br />
fi<br />
guestmount ‐d $name ‐i $mountpoint<br />
#将 passwd 中密码占位符号 x 删除,该账户即可实现无密码登陆系统<br />
sed ‐i &ldquo;/^root/s/x//&rdquo; $mountpoint/etc/passwd</p>

<p>87. Shell 脚本对信号的处理,执行脚本后,按键盘 Ctrl+C 无法终止的脚本<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#使用 trap 命令可以拦截用户通过键盘或 kill 命令发送过来的信号<br />
#使用 kill ‐l 可以查看 Linux 系统中所有的信号列表,其中 2 代表 Ctrl+C<br />
#trap 当发现有用户 ctrl+C 希望终端脚本时,就执行 echo &ldquo;暂停 10s&rdquo;;sleep 10 这两条命令<br />
#另外用户使用命令:[ kill ‐2 脚本的 PID ] 也可以中断脚本和 Ctrl+C 一样的效果,都会被 trap 拦截<br />
trap &lsquo;echo &ldquo;暂停 10s&rdquo;;sleep 10&rsquo; 2<br />
while :<br />
do<br />
echo &ldquo;go go go&rdquo;<br />
done</p>

<p>88. 一键部署 memcached<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#脚本用来源码安装 memcached 服务器<br />
#注意:如果软件的下载链接过期了,请更新 memcached 的下载链接<br />
wget <a href="http://www.memcached.org/files/memcached‐1.5.1.tar.gz">http://www.memcached.org/files/memcached‐1.5.1.tar.gz</a><br />
yum ‐y install gcc<br />
tar ‐xf memcached‐1.5.1.tar.gz<br />
cd memcached‐1.5.1<br />
./configure<br />
make<br />
make install</p>

<dl>
<dt>89. 一键配置 VNC 远程桌面服务器(无密码版本)<br /></dt>
<dd>
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#脚本配置的 VNC 服务器,客户端无需密码即可连接<br />
#客户端仅有查看远程桌面的权限,没有鼠标和键盘的操作权限<br />
33 / 38<br />
<br /></dd>
</dl>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
rpm ‐‐quiet ‐q tigervnc‐server<br />
if [ $? ‐ne 0 ];then<br />
yum ‐y tigervnc‐server<br />
fi<br />
x0vncserver AcceptKeyEvents=0 AlwaysShared=1 \<br />
AcceptPointerEvents=0 SecurityTypes=None rfbport=5908</p>

<p>90. 关闭 SELinux<br />
#!/bin/bash<br />
sed ‐i &lsquo;/^SELINUX/s/=.*/=disabled/&rsquo; /etc/selinux/config<br />
setenforce 0</p>

<p>91. 查看所有虚拟机磁盘使用量以及 CPU 使用量信息<br />
#!/bin/bash<br />
virt‐df<br />
read ‐n1 &ldquo;按任意键继续&rdquo; key<br />
virt‐top</p>

<p>92. 使用 shell 脚本打印如下图形:</p>

<p>#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#打印第一组图片<br />
#for(())为类 C 语言的语法格式,也可以使用 for i in;do ;done 的格式替换<br />
#for((i=1;i&lt;=9;i++))循环会执行 9 次,i 从 1 开始到 9,每循环一次 i 自加 1<br />
clear<br />
for (( i=1; i&lt;=9; i++ ))<br />
do<br />
for (( j=1; j&lt;=i; j++ ))<br />
do<br />
echo ‐n &ldquo;$i&rdquo;<br />
done<br />
echo &ldquo;&rdquo;<br />
done<br />
read ‐n1 &ldquo;按任意键继续&rdquo; key<br />
#打印第二组图片<br />
clear<br />
for (( i=1; i&lt;=5; i++ ))<br />
34 / 38<br />
交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
do<br />
for (( j=1; j&lt;=i; j++ ))<br />
do<br />
echo ‐n &ldquo; |&rdquo;<br />
done<br />
echo &ldquo;_ &ldquo;<br />
done<br />
read ‐n1 &ldquo;按任意键继续&rdquo; key<br />
#打印第三组图片<br />
clear<br />
for (( i=1; i&lt;=5; i++ ))<br />
do<br />
for (( j=1; j&lt;=i; j++ ))<br />
do<br />
echo ‐n &ldquo; *&rdquo;<br />
done<br />
echo &ldquo;&rdquo;<br />
done</p>

<p>for (( i=5; i&gt;=1; i‐‐ ))<br />
do<br />
for (( j=1; j&lt;=i; j++ ))<br />
do<br />
echo ‐n &ldquo; *&rdquo;<br />
done<br />
echo &ldquo;&rdquo;<br />
done</p>

<p>93. 根据计算机当前时间,返回问候语,可以将该脚本设置为开机启动<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#00‐12 点为早晨,12‐18 点为下午,18‐24 点为晚上<br />
#使用 date 命令获取时间后,if 判断时间的区间,确定问候语内容<br />
tm=$(date +%H)<br />
if [ $tm ‐le 12 ];then<br />
msg=&ldquo;Good Morning $USER&rdquo;<br />
elif [ $tm ‐gt 12 ‐a $tm ‐le 18 ];then<br />
msg=&ldquo;Good Afternoon $USER&rdquo;<br />
else<br />
msg=&ldquo;Good Night $USER&rdquo;<br />
fi<br />
echo &ldquo;当前时间是:$(date +&ldquo;%Y‐%m‐%d %H:%M:%S&rdquo;)&rdquo;<br />
echo ‐e &ldquo;\033[34m$msg\033[0m&rdquo;</p>

<p>94. 读取用户输入的账户名称,将账户名写入到数组保存<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#定义数组名称为 name,数组的下标为 i,小标从 0 开始,每输入一个账户名,下标加 1,继续存下一个账户<br />
#最后,输入 over,脚本输出总结性信息后脚本退出<br />
i=0<br />
while :<br />
do<br />
read ‐p &ldquo;请输入账户名,输入 over 结束:&rdquo; key<br />
if [ $key == &ldquo;over&rdquo; ];then<br />
35 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院</p>

<p>break<br />
else</p>

<p>name[$i]=$key</p>

<p>let i++<br />
fi<br />
done<br />
echo &ldquo;总账户名数量:${#name[*]}&rdquo;<br />
echo &ldquo;${name[@]}&rdquo;</p>

<p>95. 判断文件或目录是否存在<br />
#!/bin/bash<br />
if [ $# ‐eq 0 ] ;then<br />
echo &ldquo;未输入任何参数,请输入参数&rdquo;<br />
echo &ldquo;用法:$0 [文件名|目录名]&rdquo;<br />
fi<br />
if [ ‐f $1 ];then<br />
echo &ldquo;该文件,存在&rdquo;<br />
ls -l $1<br />
else<br />
echo &ldquo;没有该文件&rdquo;<br />
fi<br />
if [ ‐d $1 ];then<br />
echo &ldquo;该目录,存在&rdquo;<br />
ls ‐ld $2<br />
else<br />
echo &ldquo;没有该目录&rdquo;<br />
fi</p>

<p>96. 打印各种时间格式<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
echo &ldquo;显示星期简称(如:Sun)&rdquo;<br />
date +%a<br />
echo &ldquo;显示星期全称(如:Sunday)&rdquo;<br />
date +%A<br />
echo &ldquo;显示月份简称(如:Jan)&rdquo;<br />
date +%b<br />
echo &ldquo;显示月份全称(如:January)&rdquo;<br />
date +%B<br />
echo &ldquo;显示数字月份(如:12)&rdquo;<br />
date +%m<br />
echo &ldquo;显示数字日期(如:01 号)&rdquo;<br />
date +%d<br />
echo &ldquo;显示数字年(如:01 号)&rdquo;<br />
date +%Y<br />
36 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
echo &ldquo;显示年‐月‐日&rdquo;<br />
date +%F<br />
echo &ldquo;显示小时(24 小时制)&rdquo;<br />
date +%H<br />
echo &ldquo;显示分钟(00..59)&rdquo;<br />
date +%M<br />
echo &ldquo;显示秒&rdquo;<br />
date +%S<br />
echo &ldquo;显示纳秒&rdquo;<br />
date +%N<br />
echo &ldquo;组合显示&rdquo;<br />
date +&ldquo;%Y%m%d %H:%M:%S&rdquo;</p>

<p>97. 使用 egrep 过滤 MAC 地址<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#MAC 地址由 16 进制组成,如 AA:BB:CC:DD:EE:FF<br />
#[0‐9a‐fA‐F]{2}表示一段十六进制数值,{5}表示连续出现 5 组前置:的十六进制<br />
egrep &ldquo;[0‐9a‐fA‐F]{2}(:[0‐9a‐fA‐F]{2}){5}&rdquo; $1</p>

<p>98. 统计双色球各个数字的中奖概率<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
#往期双色球中奖号码如下:<br />
#01 04 11 28 31 32 16<br />
#04 07 08 18 23 24 02<br />
#02 05 06 16 28 29 04<br />
#04 19 22 27 30 33 01<br />
#05 10 18 19 30 31 03<br />
#02 06 11 12 19 29 06<br />
#统计篮球和红球数据出现的概率次数(篮球不分顺序,统计所有篮球混合在一起的概率)<br />
awk &lsquo;{print $1&rdquo;\n&rdquo;$2&rdquo;\n&rdquo;$3&rdquo;\n&rdquo;$4&rdquo;\n&rdquo;$5&rdquo;\n&rdquo;$6}&rsquo; 1.txt |sort |uniq ‐c | sort<br />
awk &lsquo;{print $7}&rsquo; 1.txt |sort |uniq ‐c | sort</p>

<p>99. 生成自签名私钥和证书<br />
#!/bin/bash<br />
#Author:丁丁历险(Jacob)<br />
read ‐p &ldquo;请输入存放证书的目录:&rdquo; dir<br />
if [ ! ‐d $dir ];then<br />
echo &ldquo;该目录不存在&rdquo;<br />
exit<br />
fi<br />
read ‐p &ldquo;请输入密钥名称:&rdquo; name<br />
#使用 openssl 生成私钥<br />
openssl genrsa ‐out ${dir}/${name}.key<br />
#使用 openssl 生成证书<br />
37 / 38</p>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>

<p>交流 QQ:86198501 达内Linux 云计算学院<br />
#subj 选项可以在生成证书时,非交互自动填写 Common Name 信息<br />
openssl req ‐new ‐x509 ‐key ${dir}/${name}.key ‐subj &ldquo;/CN=common&rdquo; ‐out
${dir}/${name}.crt</p>

<ol>
<li>
使用 awk 编写的 wc 程序<br />
#!/bin/bash<br />
#自定义变量 chars 变量存储字符个数,自定义变量 words 变量存储单词个数<br />
#awk 内置变量 NR 存储行数<br />
#length()为 awk 内置函数,用来统计每行的字符数量,因为每行都会有一个隐藏的$,所以每次统计后都+1<br />
#wc 程序会把文件结尾符$也统计在内,可以使用 cat ‐A 文件名,查看该隐藏字符<br />
awk &lsquo;{chars+=length($0)+1;words+=NF} END{print NR,words,chars}&rsquo; $1<br />
38 / 38<br />
<br /></li>
</ol>

<p>交流 QQ:86198501 <a href="http://bj.linux.tedu.cn/">http://bj.linux.tedu.cn/</a></p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:0-9">0‐9 <a class="footnote-return" href="#fnref:0-9"><sup>[return]</sup></a></li>
</ol>
</div>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>