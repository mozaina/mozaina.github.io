<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Shell语句 | 开发者问答集锦</title>
    <meta property="og:title" content="Shell语句 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Shell语句">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E8%AF%AD%E5%8F%A5/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Shell语句</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h2 id="exit-break-continue">exit、break、continue</h2>

<p>exit退出当前的循环，脚本整体退出<br />
break只管当前的退出<br />
continue结束当前的，但不退出循环<br />
为了更清楚的了解这几个的区别进行以下实验：</p>

<pre><code>[root@node1 mnt]# vim file.sh 
</code></pre>

<p>文件内容如下：<br />
<a href="https://img.it610.com/image/info8/01a5cc3286424b80941f04d5539b4780.jpg"><img src="https://img.it610.com/image/info8/01a5cc3286424b80941f04d5539b4780.jpg" alt="Shell语句_第1张图片" /></a><br />
执行脚本：</p>

<pre><code>[root@node1 mnt]# sh file.sh  //正常执行
1
2
3
4
5
hello world!
[root@node1 mnt]# sh file.sh exit  //exit退出当前的循环，脚本整体退出
1
2
[root@node1 mnt]# sh file.sh break  //break只管当前的退出
1
2
hello world!
[root@node1 mnt]# sh file.sh continue  //continue结束当前的，但不退出循环
1
2
4
5
hello world!
</code></pre>

<h2 id="题目-执行脚本输出1-10没有4">题目：执行脚本输出1-10没有4</h2>

<p>操作如下：</p>

<pre><code>[root@node1 mnt]# vim number_input.sh
</code></pre>

<p>内容如下：<br />
<a href="https://img.it610.com/image/info8/27178a8e48be49e689939c55d23fdbc8.png"><img src="https://img.it610.com/image/info8/27178a8e48be49e689939c55d23fdbc8.png" alt="Shell语句_第2张图片" /></a><br />
执行如下：<br />
<a href="https://img.it610.com/image/info8/c788ffd6c45348ef84923126d60add86.jpg"><img src="https://img.it610.com/image/info8/c788ffd6c45348ef84923126d60add86.jpg" alt="Shell语句_第3张图片" /></a></p>

<h2 id="1-5-和-seq-1-5">{1…5}和<code>seq 1 5</code></h2>

<p>{1…5}是1到5，<code>seq 1 5</code>也是1到5，seq可以设定步长<br />
为了更清楚的了解进行以下实验：</p>

<pre><code>[root@node1 mnt]# vim num.sh
</code></pre>

<p>文件内容：<br />
<a href="https://img.it610.com/image/info8/f22b627ed03f464e84516fa7ef30948d.jpg"><img src="https://img.it610.com/image/info8/f22b627ed03f464e84516fa7ef30948d.jpg" alt="Shell语句_第4张图片" /></a><br />
执行如下：</p>

<pre><code>[root@node1 mnt]# sh num.sh
1
2
3
4
5
[root@node1 mnt]# vim num.sh //重新编写
</code></pre>

<p>文件内容如下：<br />
<a href="https://img.it610.com/image/info8/5f721952b20a4ffa8603c5a34ff20d5d.jpg"><img src="https://img.it610.com/image/info8/5f721952b20a4ffa8603c5a34ff20d5d.jpg" alt="Shell语句_第5张图片" /></a><br />
执行如下：</p>

<pre><code>[root@node1 mnt]# sh num.sh
1
2
3
4
5
[root@node1 mnt]# vim num.sh  //重新编写文件内容，seq设定步长为2
</code></pre>

<p>文件内容如下：<br />
<a href="https://img.it610.com/image/info8/3b80f64544034e15bd645148516aee9a.jpg"><img src="https://img.it610.com/image/info8/3b80f64544034e15bd645148516aee9a.jpg" alt="Shell语句_第6张图片" /></a><br />
执行如下：</p>

<pre><code>[root@node1 mnt]# sh num.sh  
1
3
5
</code></pre>

<h2 id="for语句">for语句</h2>

<p>for做的是批处理<br />
for<br />
do<br />
done</p>

<h2 id="题目-建立一个数据库-写脚本对所有数据库进行备份操作-每个数据库备份一个文件-以-sql结尾备份到-mnt-mysql-dump">题目：建立一个数据库，写脚本对所有数据库进行备份操作，每个数据库备份一个文件，以.sql结尾备份到/mnt/mysql_dump</h2>

<p>操作如下： 1、建立数据库：</p>

<pre><code>下载数据库mariadb-server
[root@node1 mnt]# systemctl start mariadb
[root@node1 mnt]# mysql -uroot
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 2
Server version: 5.5.35-MariaDB MariaDB Server

Copyright (c) 2000, 2013, Oracle, Monty Program Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]&gt; create database linux;
Query OK, 1 row affected (0.10 sec)

MariaDB [(none)]&gt; use linux
Database changed
MariaDB [linux]&gt; create table linux_user(
    -&gt; username varchar(50) not null,
    -&gt; password varchar(50) not null);
Query OK, 0 rows affected (0.14 sec)

MariaDB [linux]&gt; insert into linux_user values(&quot;user1&quot;,&quot;123&quot;);
Query OK, 1 row affected (0.11 sec)

MariaDB [linux]&gt; insert into linux_user values(&quot;user2&quot;,&quot;234&quot;);
Query OK, 1 row affected (0.10 sec)

MariaDB [linux]&gt; select * from linux_user;
+----------+----------+
| username | password |
+----------+----------+
| user1    | 123      |
| user2    | 234      |
+----------+----------+
2 rows in set (0.00 sec)

MariaDB [linux]&gt; quit
Bye
</code></pre>

<p>2、编写脚本</p>

<pre><code>[root@node1 mnt]# vim mysql_dump.sh
</code></pre>

<p>内容如下：<br />
<a href="https://img.it610.com/image/info8/47682d174c964b6182547cbd22b9d0f5.jpg"><img src="https://img.it610.com/image/info8/47682d174c964b6182547cbd22b9d0f5.jpg" alt="Shell语句_第7张图片" /></a><br />
3、执行脚本<br />
<a href="https://img.it610.com/image/info8/f0ebeefa3d8445199d8418b921c8a255.jpg"><img src="https://img.it610.com/image/info8/f0ebeefa3d8445199d8418b921c8a255.jpg" alt="这里写图片描述" /></a></p>

<h2 id="while语句">while语句</h2>

<p>格式（当条件为真时执行do）：<br />
while true<br />
do<br />
done</p>

<h2 id="题目-编写脚本-实时监控根分区的使用情况-超过80-就给超级用户发送一封警告邮件">题目：编写脚本，实时监控根分区的使用情况，超过80%就给超级用户发送一封警告邮件</h2>

<p>操作如下：</p>

<p>1、编写脚本</p>

<pre><code>[root@node1 mnt]# vim test.sh
</code></pre>

<p>内容如下：<br />
<a href="https://img.it610.com/image/info8/e4be7cc3649143efb98862a872d0c1df.jpg"><img src="https://img.it610.com/image/info8/e4be7cc3649143efb98862a872d0c1df.jpg" alt="Shell语句_第8张图片" /></a><br />
2、执行</p>

<pre><code>[root@node1 mnt]# df  //查看根分区使用情况
Filesystem         1K-blocks    Used Available Use% Mounted on
/dev/vda1           10473900 9488536    985364  29% /
devtmpfs              469344       0    469344   0% /dev
tmpfs                 484932      84    484848   1% /dev/shm
tmpfs                 484932   12784    472148   3% /run
tmpfs                 484932       0    484932   0% /sys/fs/cgroup
/dev/mapper/vg0-vo    483670    2368    451811   1% /home
[root@node1 mnt]# sh test.sh &amp;  //执行脚本，并打入后台
[3] 4151
[root@node1 mnt]# mail  //查看没有邮件
No mail for root
[root@node1 mnt]# dd if=/dev/zero of=/bigfile bs=1M count=6000
//截取6000M的内存使根分区使用率变成80%以上
[root@node1 mnt]# df
Filesystem         1K-blocks    Used Available Use% Mounted on
/dev/vda1           10473900 9488536    985364  91% /
devtmpfs              469344       0    469344   0% /dev
tmpfs                 484932      84    484848   1% /dev/shm
tmpfs                 484932   12784    472148   3% /run
tmpfs                 484932       0    484932   0% /sys/fs/cgroup
/dev/mapper/vg0-vo    483670    2368    451811   1% /home
[root@node1 mnt]# sh test.sh &amp;  //执行脚本并打入后台
[3] 4151
[root@node1 mnt]# mail  //可以查到邮件
Heirloom Mail version 12.5 7/5/10.  Type ? for help.
&quot;/var/spool/mail/root&quot;: 23 messages 23 new
&gt;N  1 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N  2 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N  3 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N  4 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N  5 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N  6 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N  7 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N  8 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N  9 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N 10 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
 N 11 root                  Thu Jun 21 02:11  18/590   &quot;warning&quot;
</code></pre>

<h2 id="if语句">if语句</h2>

<p>if then 可以做无限次条件判断<br />
格式：<br />
if<br />
then<br />
elif<br />
then<br />
…<br />
else<br />
fi</p>

<h2 id="题目-用if语句编写一个脚本-用来判断文件类型">题目：用if语句编写一个脚本，用来判断文件类型</h2>

<p>操作如下：</p>

<pre><code>[root@localhost mnt]# vim check_file.sh
</code></pre>

<p>文件内容如下：</p>

<pre><code>#!/bin/bash
if
[ -z &quot;$1&quot; ]
then
        echo -e &quot;\033[31merror:please input filename!\033[0m&quot;
elif
[ -L &quot;$1&quot; ]
then
        echo the file is link
elif
[ -f &quot;$1&quot; ]
then
        echo the file is oridary file
elif
[ -S &quot;$1&quot; ]
then
        echo the file is sock
elif
[ -b &quot;$1&quot; ]
then
        echo the file is block
elif
[ -d &quot;$1&quot; ]
then
        echo the file is dirctory
elif
[ -c &quot;$1&quot; ]
then
        echo the file is char
else
        echo unknow the file
fi
</code></pre>

<p>执行脚本进行测试：<br />
<a href="https://img.it610.com/image/info8/14d8e91184bd4b8c8a6787348f6be4b6.png"><img src="https://img.it610.com/image/info8/14d8e91184bd4b8c8a6787348f6be4b6.png" alt="Shell语句_第9张图片" /></a></p>

<p>脚本实验：建立用户 1、文件数量不对报错 2、文件不存在报错 3、文件行数差异报错 4、用户存在显示用户存在，但不修改密码</p>

<h2 id="5-当用户不存在-建立用户并设定相应密码">5、当用户不存在，建立用户并设定相应密码</h2>

<p>操作如下：</p>

<pre><code>[root@desktop mnt]# vim user_create.sh  #下面为脚本内容
#!/bin/bash
if
[ &quot;$#&quot; -ne &quot;2&quot; ]     #判断脚本后面是否跟两个内容
then
        echo please input two file!
        exit 0
elif
[ ! -e &quot;$1&quot; ]   #判断第一个文件是否存在
then
        echo the &quot;$1&quot; in not exist!
        exit 0
elif
[ ! -e &quot;$2&quot; ]   #判断第二个文件是否存在
then 
        echo the &quot;$2&quot; in not exist!
        exit 0
elif   #当脚本后面跟两个内容，且文件存在
num1=`awk 'BEGIN{N=0}{N++}END{print N}' $1`
num2=`awk 'BEGIN{N=0}{N++}END{print N}' $2`
[ &quot;$num1&quot; -ne &quot;$num2&quot; ]
then
        echo the file hangshu is no equal
        exit 0
else
        for i in `seq 1 $num1`
        do
                username=`sed -n &quot;${i}p&quot; $1`
                password=`sed -n &quot;${i}p&quot; $2`
                [ -e &quot;/home/$username&quot; ]&amp;&amp;{
                echo the $username is exist
        }||{
                useradd $username
                echo $password | passwd --stdin $username
        }
        done
fi
</code></pre>

<p>存放用户名的文件内容：<br />
<a href="https://img.it610.com/image/info8/1019b784533748a788cdb901a051e03e.png"><img src="https://img.it610.com/image/info8/1019b784533748a788cdb901a051e03e.png" alt="这里写图片描述" /></a><br />
存放密码的文件内容：<br />
<a href="https://img.it610.com/image/info8/a7702cbf30f2472bbf031d71de4f0a34.png"><img src="https://img.it610.com/image/info8/a7702cbf30f2472bbf031d71de4f0a34.png" alt="这里写图片描述" /></a><br />
执行脚本如下：<br />
<a href="https://img.it610.com/image/info8/54086b9b578d416c9ce87b145d6e792b.png"><img src="https://img.it610.com/image/info8/54086b9b578d416c9ce87b145d6e792b.png" alt="Shell语句_第10张图片" /></a></p>

<h2 id="case语句">case语句</h2>

<p>格式：<br />
case $1 in<br />
字符)<br />
echo<br />
;;<br />
esac<br />
在字符匹配时比if快速。<br />
实验如下：<br />
如下分别为if语句和case语句的内容（根据文件后面所跟字符，输出内容）：<br />
<a href="https://img.it610.com/image/info8/5c75ae2c49684c08805b0aba96caa827.jpg"><img src="https://img.it610.com/image/info8/5c75ae2c49684c08805b0aba96caa827.jpg" alt="Shell语句_第11张图片" /></a><br />
<a href="https://img.it610.com/image/info8/1d35c1616d454c6cbb8e4b81ed162a38.jpg"><img src="https://img.it610.com/image/info8/1d35c1616d454c6cbb8e4b81ed162a38.jpg" alt="Shell语句_第12张图片" /></a><br />
执行结果：<br />
<a href="https://img.it610.com/image/info8/cb1ffabba99c4d56ba47c1d34cdd3734.png"><img src="https://img.it610.com/image/info8/cb1ffabba99c4d56ba47c1d34cdd3734.png" alt="Shell语句_第13张图片" /></a></p>

<h2 id="脚本实验-在脚本后输入create-userfile-passfile时建立用户-输入delete-userfile时删除用户">脚本实验：在脚本后输入create userfile passfile时建立用户，输入delete userfile时删除用户</h2>

<p>执行如下：</p>

<pre><code>[root@desktop mnt]# vim user.sh
</code></pre>

<p>文件内容如下：<br />
<a href="https://img.it610.com/image/info8/928e10883ea44720955c0887ed8fab97.jpg"><img src="https://img.it610.com/image/info8/928e10883ea44720955c0887ed8fab97.jpg" alt="Shell语句_第14张图片" /></a><br />
执行如下：<br />
<a href="https://img.it610.com/image/info8/821563443f8c49a8b8338b352ee45bbc.jpg"><img src="https://img.it610.com/image/info8/821563443f8c49a8b8338b352ee45bbc.jpg" alt="Shell语句_第15张图片" /></a></p>

<h2 id="expect">expect</h2>

<p>自动应达工具<br />
spawn 监控<br />
expect eof 回答完问题后退出<br />
interact 保留环境不退出，例如：ssh<br />
exp_continue 继续<br />
set NAME [ lindex $argv 0 ] 代表expect后跟的第一串字符赋值给NAME<br />
set OBJ [ lindex $argv 1 ] 代表expect后跟的第二串字符赋值给OBJ<br />
实验：</p>

<pre><code>[root@desktop mnt]# vim question.sh
</code></pre>

<p>内容如下：<br />
<a href="https://img.it610.com/image/info8/55c4112329424114bccbbdeac908deba.jpg"><img src="https://img.it610.com/image/info8/55c4112329424114bccbbdeac908deba.jpg" alt="Shell语句_第16张图片" /></a><br />
第一种自动应答脚本：</p>

<pre><code>[root@desktop mnt]# vim answer.sh  
</code></pre>

<p>内容如下：<br />
<a href="https://img.it610.com/image/info8/c112e06e59b14db785c6b41d7656d230.jpg"><img src="https://img.it610.com/image/info8/c112e06e59b14db785c6b41d7656d230.jpg" alt="Shell语句_第17张图片" /></a><br />
执行如下：<br />
<a href="https://img.it610.com/image/info8/ca791184d2df45a58c64594b56a38ce5.jpg"><img src="https://img.it610.com/image/info8/ca791184d2df45a58c64594b56a38ce5.jpg" alt="Shell语句_第18张图片" /></a><br />
第二种自动应答脚本：</p>

<pre><code>[root@desktop mnt]# vim answer1.sh  
</code></pre>

<p>内容如下：<br />
<a href="https://img.it610.com/image/info8/3d3ae61fd2144323b95a7d287b49a3f0.jpg"><img src="https://img.it610.com/image/info8/3d3ae61fd2144323b95a7d287b49a3f0.jpg" alt="Shell语句_第19张图片" /></a><br />
执行如下：<br />
<a href="https://img.it610.com/image/info8/fcd72d372e114dd495ab726ff7554926.jpg"><img src="https://img.it610.com/image/info8/fcd72d372e114dd495ab726ff7554926.jpg" alt="Shell语句_第20张图片" /></a></p>

<h2 id="题目-编写脚本后面跟ip和密码会直接连接其他主机">题目：编写脚本后面跟ip和密码会直接连接其他主机</h2>

<p>执行如下：</p>

<pre><code>[root@localhost mnt]# vim auto_connect.sh
</code></pre>

<p>文件内容如下：<br />
<a href="https://img.it610.com/image/info8/f145b61f43ec41f389e0a165d2c3728d.jpg"><img src="https://img.it610.com/image/info8/f145b61f43ec41f389e0a165d2c3728d.jpg" alt="Shell语句_第21张图片" /></a><br />
执行如下：<br />
<a href="https://img.it610.com/image/info8/cdc3ae334f0e4bb09b8a83a830f16931.jpg"><img src="https://img.it610.com/image/info8/cdc3ae334f0e4bb09b8a83a830f16931.jpg" alt="这里写图片描述" /></a></p>

<h2 id="算法">算法</h2>

<p><a href="https://img.it610.com/image/info8/7791be657017461694cf0507913f3591.jpg"><img src="https://img.it610.com/image/info8/7791be657017461694cf0507913f3591.jpg" alt="Shell语句_第22张图片" /></a><br />
<a href="https://img.it610.com/image/info8/d6a18f7df9684644adf16859f5cf022d.jpg"><img src="https://img.it610.com/image/info8/d6a18f7df9684644adf16859f5cf022d.jpg" alt="Shell语句_第23张图片" /></a><br />
实验如下：<br />
<a href="https://img.it610.com/image/info8/b707fae4541e4601a7a15568b97e1a3f.jpg"><img src="https://img.it610.com/image/info8/b707fae4541e4601a7a15568b97e1a3f.jpg" alt="Shell语句_第24张图片" /></a></p>

<h2 id="批处理脚本">批处理脚本</h2>

<h2 id="题目-脚本实验将1-10主机号的主机名导入到文件中">题目：脚本实验将1-10主机号的主机名导入到文件中</h2>

<p>操作如下：</p>

<pre><code>[root@localhost mnt]# vim hostname.sh
</code></pre>

<p>文件内容如下：<br />
<a href="https://img.it610.com/image/info8/d5fb124b64744c50b4a70b083f3536c0.jpg"><img src="https://img.it610.com/image/info8/d5fb124b64744c50b4a70b083f3536c0.jpg" alt="Shell语句_第25张图片" /></a><br />
注释：<br />
导入文件后，里面的内容有一行M将其全文替换时用ctrl+和ctrl+M打出^M才可找到<br />
linux系统后面会加\n<br />
windouws会加\n\r<br />
unix后面会加\r<br />
这里出现\r是因为使用的工具grep是unix的（系统兼容性有问题），故有\r</p>

<h2 id="操作如下-题目-给多个主机批量建立用户">操作如下：  题目：给多个主机批量建立用户</h2>

<pre><code>[root@localhost mnt]# vim user_create.sh
</code></pre>

<p>文件内容如下：<br />
第一种：<br />
<a href="https://img.it610.com/image/info8/7a1b1125dee6475ca9b03e0b66fa0a26.jpg"><img src="https://img.it610.com/image/info8/7a1b1125dee6475ca9b03e0b66fa0a26.jpg" alt="Shell语句_第26张图片" /></a><br />
第二种：<br />
<a href="https://img.it610.com/image/info8/b11cf436759d4e84916b7ff84da0a6fb.jpg"><img src="https://img.it610.com/image/info8/b11cf436759d4e84916b7ff84da0a6fb.jpg" alt="Shell语句_第27张图片" /></a><br />
执行如下脚本后查询建立用户主机的用户是否建立：</p>

<pre><code>[root@localhost mnt]# sh user_create.sh userfile passfile 68 70
#执行脚本方式如上，脚本后跟的第一个是含有用户名的文件，第二个是含有用户密码的文件
68 70 代表的是给172.25.254.68到172.25.254.70的主机建立用户
</code></pre>

<p>执行脚本时显示68和70主机 is down只有69主机建立，下面是查询只有69建立的用户是否存在:<br />
<a href="https://img.it610.com/image/info8/0fa26838451749d4aa76df73b8eabe5f.png"><img src="https://img.it610.com/image/info8/0fa26838451749d4aa76df73b8eabe5f.png" alt="Shell语句_第28张图片" /></a></p>

<h2 id="题目-用脚本写一个10秒倒计时">题目：用脚本写一个10秒倒计时</h2>

<p>操作如下：</p>

<pre><code>[root@localhost mnt]# vim time.sh
</code></pre>

<p>脚本内容如下：<br />
<a href="https://img.it610.com/image/info8/cddd0c7bcaeb4e7ebb1de2c25dd947ad.png"><img src="https://img.it610.com/image/info8/cddd0c7bcaeb4e7ebb1de2c25dd947ad.png" alt="Shell语句_第29张图片" /></a><br />
执行如下：<br />
<a href="https://img.it610.com/image/info8/6769df1d18194437bcd2ba013e8812b8.jpg"><img src="https://img.it610.com/image/info8/6769df1d18194437bcd2ba013e8812b8.jpg" alt="这里写图片描述" /></a><br />
这里的时间是变化的</p>

<h2 id="题目-用脚本写一个分钟-秒的倒计时">题目：用脚本写一个分钟：秒的倒计时</h2>

<p>操作如下：</p>

<pre><code>[root@localhost mnt]# vim time1.sh
</code></pre>

<p>内容如下：</p>

<pre><code>#!/bin/bash
read -p &quot;please input the min: &quot; min  #提示输入分钟
read -p &quot;please input the s: &quot; ss  #提示输入秒
for ((NUM=$min;NUM&gt;=0;NUM--))
do
        [ &quot;$NUM&quot; -ne $min ]&amp;&amp;{
        for ((NUM1=59;NUM1&gt;=0;NUM1--))   #正常倒计时应该是60秒，所以应该有一个关于设置起始秒的循环
        do
                echo -n &quot;after $NUM:$NUM1 is end&quot;
                echo -ne &quot;\r    \r&quot;
                sleep 1
        done
        }||{
        for ((NUM1=$ss;NUM1&gt;=0;NUM1--))  #从输入的每秒开始循环
        do
                echo -n &quot;after $NUM:$NUM1 is end&quot;
                echo -ne &quot;\r    \r&quot;
                sleep 1
        done
        }
done
</code></pre>

<p>执行如下：<br />
<a href="https://img.it610.com/image/info8/b65348d0eff148b7b46a675f9e086450.png"><img src="https://img.it610.com/image/info8/b65348d0eff148b7b46a675f9e086450.png" alt="这里写图片描述" /></a></p>

<p>题目： 备份数据库 执行db_dump.sh XXX数据库密码) 脚本执行后会备份数据库中的所有库到/mnt/mysqldump目录中</p>

<h2 id="备份文件名称为-库名称-sql-为此文件存在时报错并询问动作-输入-s-跳过备份-当输入-b-时备份-库名称-sql-文件为-库名称-backup-sql-当输入-o-时覆盖源文件">备份文件名称为“库名称.sql”为此文件存在时报错并询问动作：输入“S”跳过备份，当输入&rdquo;B&rdquo;时备份&rdquo;库名称.sql&rdquo;文件为&rdquo;库名称_backup.sql&rdquo;，当输入&rdquo;O&rdquo;时覆盖源文件</h2>

<p>操作如下：</p>

<pre><code>[root@localhost mnt]# vim mysqldump.sh
</code></pre>

<p>内容如下：<br />
1、基本内容<br />
<a href="https://img.it610.com/image/info8/107a7f94805a47efa841dfb9142a5359.jpg"><img src="https://img.it610.com/image/info8/107a7f94805a47efa841dfb9142a5359.jpg" alt="Shell语句_第30张图片" /></a><br />
2、优化后内容<br />
<a href="https://img.it610.com/image/info8/9a4d03a98b494f7b8823d99d736a29c8.jpg"><img src="https://img.it610.com/image/info8/9a4d03a98b494f7b8823d99d736a29c8.jpg" alt="Shell语句_第31张图片" /></a><br />
执行如下：<br />
<a href="https://img.it610.com/image/info8/2d49ced502674d1fae23d559505aa9b3.jpg"><img src="https://img.it610.com/image/info8/2d49ced502674d1fae23d559505aa9b3.jpg" alt="Shell语句_第32张图片" /></a></p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>