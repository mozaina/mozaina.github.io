<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Shell脚本自动化部署实战一 | 开发者问答集锦</title>
    <meta property="og:title" content="Shell脚本自动化部署实战一 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Shell脚本自动化部署实战一">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98%E4%B8%80/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Shell脚本自动化部署实战一</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>说明：该篇博客是博主一字一码编写的，实属不易，请尊重原创，谢谢大家！</p>

<p><strong>目录</strong></p>

<p>一丶shell介绍</p>

<p>二丶shell脚本规范</p>

<p>三丶shell语法</p>

<p>1.变量的使用</p>

<p>2.参数传递</p>

<p>3.重定向</p>

<p>4.程序结构</p>

<p>5.总结</p>

<hr />

<h1 id="一丶shell介绍">一丶shell介绍</h1>

<p>在计算机科学中，Shell俗称壳（用来区别于核），是指“为使用者提供操作界面”的软件（命令解析器）。它类似于DOS下的command.com和后来的cmd.exe。它接收用户命令，然后调用相应的应用程序</p>

<p><strong>基本上shell分两大类：</strong></p>

<p><strong>1.图形界面shell（Graphical User Interface shell 即 GUI shell）</strong></p>

<p>例如：应用最为广泛的 Windows Explorer （微软的windows系列操作系统），还有也包括广为人知的 Linux shell，其中linux
shell 包括 X window manager (BlackBox和FluxBox），以及功能更强大的CDE、GNOME、KDE、 XFCE。</p>

<p><strong>2.命令行式shell（Command Line Interface shell ，即CLI shell）</strong></p>

<p>例如：</p>

<p>bash / sh / ksh / csh（Unix/linux 系统）</p>

<p>（MS-DOS系统）</p>

<p>cmd.exe/ 命令提示字符（Windows NT 系统）</p>

<p>Windows PowerShell（支持 .NET Framework 技术的 Windows NT 系统）</p>

<p>传统意义上的shell指的是命令行式的shell，以后如果不特别注明，shell是指命令行式的shell。</p>

<p>文字操作系统与外部最主要的接口就叫做shell。shell是操作系统最外面的一层。shell管理你与操作系统之间的交互：等待你输入，向操作系统解释你的输入，并且处理各种各样的操作系统的输出结果。</p>

<p>shell提供了你与操作系统之间通讯的方式。这种通讯可以以交互方式（从键盘输入，并且可以立即得到响应），或者以shell
script(非交互）方式执行。shell script是放在文件中的一串shell和操作系统命令，它们可以被重复使用。本质上，shell
script是命令行命令简单的组合到一个文件里面。</p>

<p>Shell基本上是一个命令解释器，类似于DOS下的command。它接收用户命令（如ls等），然后调用相应的应用程序。较为通用的shell有标准的Bourne
shell (sh）和C shell (csh）。</p>

<p>交互式shell和非交互式shell</p>

<p>交互式模式就是shell等待你的输入，并且执行你提交的命令。这种模式被称作交互式是因为shell与用户进行交互。这种模式也是大多数用户非常熟悉的：登录、执行一些命令、签退。当你签退后，shell也终止了。</p>

<p>shell也可以运行在另外一种模式：非交互式模式。在这种模式下，shell不与你进行交互，而是读取存放在文件中的命令，并且执行它们。当它读到文件的结尾，shell也就终止了</p>

<p>shell是一段应用程序，是用户和操作系统交互的一个桥梁，shell通常就是shell脚本</p>

<p>shell弱类型语言，在定义变量不需要指定变量的类型</p>

<h1 id="二丶shell脚本规范">二丶shell脚本规范</h1>

<p><strong>1.shell脚本是以.sh结尾的文件</strong></p>

<p><strong>2..sh文件的第一行内容为#!/bin/bash&mdash;- &gt;表示使用shell进行编程</strong></p>

<p><strong>3.shell中的注释：#</strong></p>

<h1 id="三丶shell语法">三丶shell语法</h1>

<h3 id="1-变量的使用">1.变量的使用</h3>

<p><strong>1.变量名=变量值</strong></p>

<p><a href="https://img.it610.com/image/info8/dd9aeeec19c0486996aedbc7e7ccf43b.jpg"><img src="https://img.it610.com/image/info8/dd9aeeec19c0486996aedbc7e7ccf43b.jpg" alt="Shell脚本自动化部署实战（一）_第1张图片" /></a></p>

<ul>
<li>等于号两边没有空格</li>
</ul>

<p><a href="https://img.it610.com/image/info8/4deb13495a5f43939ae3ea49a7f2cec9.jpg"><img src="https://img.it610.com/image/info8/4deb13495a5f43939ae3ea49a7f2cec9.jpg" alt="Shell脚本自动化部署实战（一）_第2张图片" /></a></p>

<ul>
<li>输出变量</li>
</ul>

<p><a href="https://img.it610.com/image/info8/607d31c81bd04d18aede47271c6ee1fb.jpg"><img src="https://img.it610.com/image/info8/607d31c81bd04d18aede47271c6ee1fb.jpg" alt="Shell脚本自动化部署实战（一）_第3张图片" /></a></p>

<p><strong>2.变量命名规范</strong></p>

<ul>
<li>不能以数字开头，由字母、数字、下划线组成</li>
</ul>

<p><a href="https://img.it610.com/image/info8/ff2cc4f4130543f0bdca4d5286a84a63.jpg"><img src="https://img.it610.com/image/info8/ff2cc4f4130543f0bdca4d5286a84a63.jpg" alt="Shell脚本自动化部署实战（一）_第4张图片" /></a></p>

<p><strong>3.变量的释放</strong></p>

<ul>
<li>unset 变量名</li>
</ul>

<p><a href="https://img.it610.com/image/info8/8ac3df3444a8460f96309dac4211746d.jpg"><img src="https://img.it610.com/image/info8/8ac3df3444a8460f96309dac4211746d.jpg" alt="Shell脚本自动化部署实战（一）_第5张图片" /></a></p>

<p><strong>4.特殊的变量，带有空格的变量定义</strong></p>

<ul>
<li>变量值用双引号&rdquo;&ldquo;括起来</li>
</ul>

<p><a href="https://img.it610.com/image/info8/ae958e3364ba402293054eb13f807b61.jpg"><img src="https://img.it610.com/image/info8/ae958e3364ba402293054eb13f807b61.jpg" alt="Shell脚本自动化部署实战（一）_第6张图片" /></a></p>

<ul>
<li>变量值用单引号&rdquo;括起来</li>
</ul>

<p><a href="https://img.it610.com/image/info8/2596cf40c4514ca7a05edbaa5f2a176c.jpg"><img src="https://img.it610.com/image/info8/2596cf40c4514ca7a05edbaa5f2a176c.jpg" alt="Shell脚本自动化部署实战（一）_第7张图片" /></a></p>

<ul>
<li>双引号和单引号的区别</li>
<li>双引号：如果变量值中存在$变量名的话，那么输出结果将会是变量名对应的变量值</li>
<li>单引号：如果变量值中存在$变量名，那么将原样输出</li>
</ul>

<p><a href="https://img.it610.com/image/info8/9c7b0312cafc485999ad90a49f43aab4.jpg"><img src="https://img.it610.com/image/info8/9c7b0312cafc485999ad90a49f43aab4.jpg" alt="Shell脚本自动化部署实战（一）_第8张图片" /></a></p>

<ul>
<li>双引号：如果想原样输出内容，可以在$变量名前面加转义字符<br /></li>
</ul>

<p><a href="https://img.it610.com/image/info8/fda0392d2d9b4460bfb5800e59f99aaf.jpg"><img src="https://img.it610.com/image/info8/fda0392d2d9b4460bfb5800e59f99aaf.jpg" alt="Shell脚本自动化部署实战（一）_第9张图片" /></a></p>

<ul>
<li>反单引号``，存放的是命令</li>
</ul>

<p><a href="https://img.it610.com/image/info8/a942b9ce7757409b91bd82ef8b01343a.jpg"><img src="https://img.it610.com/image/info8/a942b9ce7757409b91bd82ef8b01343a.jpg" alt="Shell脚本自动化部署实战（一）_第10张图片" /></a></p>

<p><strong>5.练习</strong></p>

<p><strong>练习1 ：</strong>使用shell脚本，输出当前所在的目录</p>

<ul>
<li>首先博主先在桌面上创建一个data的文件夹，在文件夹中再创建2个文件夹分别是1和2，把本博客所有shell脚本文件全部在1这个目录下进行编写</li>
</ul>

<p><a href="https://img.it610.com/image/info8/2de0cb665d494fb28053e627cad93a1f.jpg"><img src="https://img.it610.com/image/info8/2de0cb665d494fb28053e627cad93a1f.jpg" alt="Shell脚本自动化部署实战（一）_第11张图片" /></a></p>

<ul>
<li>使用vi命令创建script_01.sh文件，在文件中进行如下编写（不会vim的就只能自己去补充一下命令了，博主都会）</li>
</ul>

<p><a href="https://img.it610.com/image/info8/f6c93c9aa00a4b3486487f5cad840a14.jpg"><img src="https://img.it610.com/image/info8/f6c93c9aa00a4b3486487f5cad840a14.jpg" alt="Shell脚本自动化部署实战（一）_第12张图片" /></a></p>

<ul>
<li>执行script_01.sh脚本时，提示权限不足，那么要么更改文件权限要么切换到root用户再执行，如果两个都不想的话，就可以通过sh命令来执行</li>
</ul>

<p><a href="https://img.it610.com/image/info8/2c327bcd35464418802254cfefcc3767.jpg"><img src="https://img.it610.com/image/info8/2c327bcd35464418802254cfefcc3767.jpg" alt="Shell脚本自动化部署实战（一）_第13张图片" /></a></p>

<ul>
<li>修改脚本权限增加x执行权限</li>
</ul>

<p><a href="https://img.it610.com/image/info8/29ce40a277d949ae9f76b568bce138aa.jpg"><img src="https://img.it610.com/image/info8/29ce40a277d949ae9f76b568bce138aa.jpg" alt="Shell脚本自动化部署实战（一）_第14张图片" /></a></p>

<p><strong>练习2 ：计算/etc目录下有多少个文件，用shell脚本实现</strong></p>

<ul>
<li>shell脚本命令中有一个wc -l的命令是获取文件的数目，所以编写脚本时需要使用管道|将ls -l查询到的文件通过wc -l命令进行统计</li>
</ul>

<p><a href="https://img.it610.com/image/info8/9dd9a211dcec4507972f954f65054ce2.jpg"><img src="https://img.it610.com/image/info8/9dd9a211dcec4507972f954f65054ce2.jpg" alt="Shell脚本自动化部署实战（一）_第15张图片" /></a></p>

<ul>
<li>执行脚本，成功输出etc下的文件数目</li>
</ul>

<p><a href="https://img.it610.com/image/info8/83247a2af08c4a5eb0a9426a00a5592d.jpg"><img src="https://img.it610.com/image/info8/83247a2af08c4a5eb0a9426a00a5592d.jpg" alt="Shell脚本自动化部署实战（一）_第16张图片" /></a></p>

<p><strong>练习3 ：实现统计任何指定目录下的文件个数</strong></p>

<ul>
<li>需要执行目录而实现统计该该目录下的文件个数，那么则需要使用read命令（等待输入，有点类似python中的input），如下所示输入read a回车后，则出现以下等待输入</li>
</ul>

<p><a href="https://img.it610.com/image/info8/e4ba2b04d9cc4e28ad6d1d994740fd63.jpg"><img src="https://img.it610.com/image/info8/e4ba2b04d9cc4e28ad6d1d994740fd63.jpg" alt="Shell脚本自动化部署实战（一）_第17张图片" /></a></p>

<ul>
<li>read除了可以执行输入一个变量还可以指定多个变量，变量之间用空格隔开</li>
</ul>

<p><a href="https://img.it610.com/image/info8/99e1e3b8313643c793c0b1186a15ee8c.jpg"><img src="https://img.it610.com/image/info8/99e1e3b8313643c793c0b1186a15ee8c.jpg" alt="Shell脚本自动化部署实战（一）_第18张图片" /></a></p>

<ul>
<li>同样的释放变量时，unset也可以指定一次性释放多个变量</li>
</ul>

<p><a href="https://img.it610.com/image/info8/c223391869b94b2ebf1f47e1f7446074.jpg"><img src="https://img.it610.com/image/info8/c223391869b94b2ebf1f47e1f7446074.jpg" alt="Shell脚本自动化部署实战（一）_第19张图片" /></a></p>

<ul>
<li>当使用read命令输入变量值时，变量值多于变量名，那么就会将多出的变量值一起赋给最后一个变量</li>
</ul>

<p><a href="https://img.it610.com/image/info8/e555ebe225684f12bf782912fcb9df80.jpg"><img src="https://img.it610.com/image/info8/e555ebe225684f12bf782912fcb9df80.jpg" alt="Shell脚本自动化部署实战（一）_第20张图片" /></a></p>

<ul>
<li>复制script_02.sh脚本，命名为script_03.sh，进行如下修改，需要注意的是表示变量时需要在前面加$</li>
</ul>

<p><a href="https://img.it610.com/image/info8/0fa1414eaebb4745a920e055ec006a7b.jpg"><img src="https://img.it610.com/image/info8/0fa1414eaebb4745a920e055ec006a7b.jpg" alt="Shell脚本自动化部署实战（一）_第21张图片" /></a></p>

<ul>
<li>运行脚本，输入目录统计文件数量成功</li>
</ul>

<p><a href="https://img.it610.com/image/info8/c9e8437c30a647f18e833bd28895f67e.jpg"><img src="https://img.it610.com/image/info8/c9e8437c30a647f18e833bd28895f67e.jpg" alt="Shell脚本自动化部署实战（一）_第22张图片" /></a></p>

<ul>
<li>通过上面的read命令获取用户输入，但是并不友好，因为没有提示用户输入什么，所以可以添加提示信息：read -p &ldquo;提示的内容&rdquo; 变量名</li>
</ul>

<p><a href="https://img.it610.com/image/info8/faace6dabf2643528bb1f99c6851f2f9.jpg"><img src="https://img.it610.com/image/info8/faace6dabf2643528bb1f99c6851f2f9.jpg" alt="Shell脚本自动化部署实战（一）_第23张图片" /></a></p>

<ul>
<li>再次执行脚本，就显得很友好，用户体验不错</li>
</ul>

<p><a href="https://img.it610.com/image/info8/edc5a33bcdc3445da3599e81d86f4402.jpg"><img src="https://img.it610.com/image/info8/edc5a33bcdc3445da3599e81d86f4402.jpg" alt="Shell脚本自动化部署实战（一）_第24张图片" /></a></p>

<h3 id="2-参数传递">2.参数传递</h3>

<p><strong>1.向.sh文件中传递数据</strong></p>

<ul>
<li>复制一份script_03.sh命令为script_04.sh，要实现sh script_04.sh /etc将要统计的目录以这种方式进行传递（命令 文件名 参数）</li>
</ul>

<p><a href="https://img.it610.com/image/info8/6d0cec1afe27431fb7079db2375af721.jpg"><img src="https://img.it610.com/image/info8/6d0cec1afe27431fb7079db2375af721.jpg" alt="Shell脚本自动化部署实战（一）_第25张图片" /></a></p>

<ul>
<li>执行sh script_04.sh /etc命令传递要统计的目录/etc，成功统计数目</li>
</ul>

<p><a href="https://img.it610.com/image/info8/9ceb6b718d1940779c60b09ac9d76682.jpg"><img src="https://img.it610.com/image/info8/9ceb6b718d1940779c60b09ac9d76682.jpg" alt="Shell脚本自动化部署实战（一）_第26张图片" /></a></p>

<p><strong>2.格式</strong></p>

<p>文件中接收参数的方式</p>

<p>$1:表示第一个参数</p>

<p>$2:表示第二个参数</p>

<p>$3:第三个参数</p>

<p>$n:表示第n个参数</p>

<p>$0:代表文件名</p>

<p>$@:显示全部参数</p>

<p>$#:显示参数的个数</p>

<p><strong>示例1：</strong></p>

<ul>
<li>使用$1来接收传递的第一个参数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/95e123f45c784075b0994f21bcf7e512.jpg"><img src="https://img.it610.com/image/info8/95e123f45c784075b0994f21bcf7e512.jpg" alt="Shell脚本自动化部署实战（一）_第27张图片" /></a></p>

<ul>
<li>运行脚本，打印出传递的第一个参数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/3473bbe103704fc1991a558adf3d9546.jpg"><img src="https://img.it610.com/image/info8/3473bbe103704fc1991a558adf3d9546.jpg" alt="Shell脚本自动化部署实战（一）_第28张图片" /></a></p>

<p><strong>示例2：</strong></p>

<ul>
<li>使用$2来接收传递的第二个参数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/06bdfdefc9244c609e4c072d6c4e87d5.jpg"><img src="https://img.it610.com/image/info8/06bdfdefc9244c609e4c072d6c4e87d5.jpg" alt="Shell脚本自动化部署实战（一）_第29张图片" /></a></p>

<ul>
<li>当传递一个参数时，那么这个参数会给$1，传递两个参数时，则第二个参数会给$2</li>
</ul>

<p><a href="https://img.it610.com/image/info8/c1b5897852324d2097093f81431f5866.jpg"><img src="https://img.it610.com/image/info8/c1b5897852324d2097093f81431f5866.jpg" alt="Shell脚本自动化部署实战（一）_第30张图片" /></a></p>

<ul>
<li>根据以上两种示例可以得出$几表示接收第几个传递的参数，现在在脚本中使用$4则表示的只接收第四个参数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/df364012ad364d728b2c5acc7db89d95.jpg"><img src="https://img.it610.com/image/info8/df364012ad364d728b2c5acc7db89d95.jpg" alt="Shell脚本自动化部署实战（一）_第31张图片" /></a></p>

<ul>
<li>运行脚本，根据传递的第几个参数，对应$几</li>
</ul>

<p><a href="https://img.it610.com/image/info8/2876cc4134fe4ce293366a59a83cd42a.jpg"><img src="https://img.it610.com/image/info8/2876cc4134fe4ce293366a59a83cd42a.jpg" alt="Shell脚本自动化部署实战（一）_第32张图片" /></a></p>

<p><strong>示例3：</strong></p>

<ul>
<li>使用$0来打印出文件名</li>
</ul>

<p><a href="https://img.it610.com/image/info8/8f1d804870d241188eddc8682d2b716d.jpg"><img src="https://img.it610.com/image/info8/8f1d804870d241188eddc8682d2b716d.jpg" alt="Shell脚本自动化部署实战（一）_第33张图片" /></a></p>

<ul>
<li>运行脚本成功打印出当前脚本文件的名字</li>
</ul>

<p><a href="https://img.it610.com/image/info8/8bba9fdcfeff4088ba0e592aa60ccbf8.jpg"><img src="https://img.it610.com/image/info8/8bba9fdcfeff4088ba0e592aa60ccbf8.jpg" alt="Shell脚本自动化部署实战（一）_第34张图片" /></a></p>

<p><strong>示例4：</strong></p>

<ul>
<li>使用$@显示命令传递的全部参数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/bb08e9681e8f4576ae3e0820aa3b0621.jpg"><img src="https://img.it610.com/image/info8/bb08e9681e8f4576ae3e0820aa3b0621.jpg" alt="Shell脚本自动化部署实战（一）_第35张图片" /></a></p>

<ul>
<li>运行脚本，显示出所有的传递的参数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/fc480bd65f554d5785f423bd57bc2b14.jpg"><img src="https://img.it610.com/image/info8/fc480bd65f554d5785f423bd57bc2b14.jpg" alt="Shell脚本自动化部署实战（一）_第36张图片" /></a></p>

<p><strong>示例5：</strong></p>

<ul>
<li>使用$#显示传递参数的个数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/83adba00fd4a4b5ab7faca0f6fd37bb2.jpg"><img src="https://img.it610.com/image/info8/83adba00fd4a4b5ab7faca0f6fd37bb2.jpg" alt="Shell脚本自动化部署实战（一）_第37张图片" /></a></p>

<ul>
<li>运行脚本，成功显示出传递参数的个数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/220d9c000a294c9cb9c47dd80f66bb50.jpg"><img src="https://img.it610.com/image/info8/220d9c000a294c9cb9c47dd80f66bb50.jpg" alt="Shell脚本自动化部署实战（一）_第38张图片" /></a></p>

<h3 id="3-重定向">3.重定向</h3>

<p><strong>把命令的内容输出到文件中</strong></p>

<p><strong>1.正确的命令（数字1表示）</strong></p>

<ul>
<li>覆盖（将当前目录下的查询到的文件重定向到a.txt中）</li>
</ul>

<p><a href="https://img.it610.com/image/info8/8e406497c41343759cef55be8ef62490.jpg"><img src="https://img.it610.com/image/info8/8e406497c41343759cef55be8ef62490.jpg" alt="Shell脚本自动化部署实战（一）_第39张图片" /></a></p>

<ul>
<li>查询tmp目录下的文件并重定向到a.txt中，结果发现之前a.txt文件中内容被覆盖了</li>
</ul>

<p><a href="https://img.it610.com/image/info8/68efb55d851c46d9850aebe68304113f.jpg"><img src="https://img.it610.com/image/info8/68efb55d851c46d9850aebe68304113f.jpg" alt="Shell脚本自动化部署实战（一）_第40张图片" /></a></p>

<ul>
<li>追加（对重定向文件中的内容进行保留，也就是在存在内容的情况下进行内容的追加，使用&gt;&gt;）</li>
</ul>

<p><a href="https://img.it610.com/image/info8/ffbc868ccd1943c8892f9c992e47e74d.jpg"><img src="https://img.it610.com/image/info8/ffbc868ccd1943c8892f9c992e47e74d.jpg" alt="Shell脚本自动化部署实战（一）_第41张图片" /></a></p>

<p><strong>2.错误的命令（数字2表示）</strong></p>

<ul>
<li>覆盖（如在输入命令时，输入错误的命令那么就需要使用2来重定向到文件中）</li>
</ul>

<p><a href="https://img.it610.com/image/info8/375d472559594d5ebb3aeaf554c6df10.jpg"><img src="https://img.it610.com/image/info8/375d472559594d5ebb3aeaf554c6df10.jpg" alt="Shell脚本自动化部署实战（一）_第42张图片" /></a></p>

<ul>
<li>追加</li>
</ul>

<p><a href="https://img.it610.com/image/info8/3c9a1f6357b34dc3b24f29a9ac5c2222.jpg"><img src="https://img.it610.com/image/info8/3c9a1f6357b34dc3b24f29a9ac5c2222.jpg" alt="Shell脚本自动化部署实战（一）_第43张图片" /></a></p>

<h3 id="4-程序结构">4.程序结构</h3>

<p><strong>1.分支结构</strong></p>

<p><strong>if&hellip;elif&hellip;else分支</strong></p>

<p>a)格式</p>

<p>if [ 条件 ]<br />
then<br />
语句<br />
else<br />
语句<br />
fi</p>

<p>if [ 条件 ];then<br />
语句<br />
else<br />
语句<br />
fi</p>

<p>b)注意</p>

<p>1.条件两边要有空格</p>

<p>2.多个条件间要有空格</p>

<p>3.if后面要有空格</p>

<p>4.条件中如果存在变量，那么变量的两边要有双引号,如：name=&ldquo;cdtaogang&rdquo;&mdash;-&gt;echo $name, N=&ldquo;cdtaogang&rdquo;</p>

<p><strong>示例1：</strong></p>

<ul>
<li>判断 /root目录是否为空（字符串的比较：==判断是否相等，!=判断是否不相等）</li>
</ul>

<p><a href="https://img.it610.com/image/info8/e009afb44b604e5f80d504bc4dd599c3.jpg"><img src="https://img.it610.com/image/info8/e009afb44b604e5f80d504bc4dd599c3.jpg" alt="Shell脚本自动化部署实战（一）_第44张图片" /></a></p>

<ul>
<li>执行脚本后，输出结果</li>
</ul>

<p><a href="https://img.it610.com/image/info8/80aa508f82ac4c379285dc37f2e0ad69.jpg"><img src="https://img.it610.com/image/info8/80aa508f82ac4c379285dc37f2e0ad69.jpg" alt="Shell脚本自动化部署实战（一）_第45张图片" /></a></p>

<ul>
<li>将then和if判断语句写在一行也是可以的，但是必须加;</li>
</ul>

<p><a href="https://img.it610.com/image/info8/f36a651c2a0d4708b826016e6a807dab.jpg"><img src="https://img.it610.com/image/info8/f36a651c2a0d4708b826016e6a807dab.jpg" alt="Shell脚本自动化部署实战（一）_第46张图片" /></a></p>

<ul>
<li>运行脚本成功</li>
</ul>

<p><a href="https://img.it610.com/image/info8/703273aba2d44764a2ee684e99d39aa4.jpg"><img src="https://img.it610.com/image/info8/703273aba2d44764a2ee684e99d39aa4.jpg" alt="Shell脚本自动化部署实战（一）_第47张图片" /></a></p>

<p><strong>示例2：</strong></p>

<ul>
<li>通过用户输入任意目录判断是否为空</li>
</ul>

<p><a href="https://img.it610.com/image/info8/190e1e3ef43946dc91d8ee8d50a61c1d.jpg"><img src="https://img.it610.com/image/info8/190e1e3ef43946dc91d8ee8d50a61c1d.jpg" alt="Shell脚本自动化部署实战（一）_第48张图片" /></a></p>

<ul>
<li>运行脚本，输入目标目录，成输出结果</li>
</ul>

<p><a href="https://img.it610.com/image/info8/840d5132b03c4a57b293f0e5174adb68.jpg"><img src="https://img.it610.com/image/info8/840d5132b03c4a57b293f0e5174adb68.jpg" alt="Shell脚本自动化部署实战（一）_第49张图片" /></a></p>

<p><strong>示例3：逻辑运算符</strong></p>

<ul>
<li>判断用户输入的用户名和密码是否为admin 123456,如果是则提示登录成功，否则提示失败（且：-a，或者: -o，非: !）</li>
</ul>

<p><a href="https://img.it610.com/image/info8/3b4a44f994e7436590f91dccd1d4ea1d.jpg"><img src="https://img.it610.com/image/info8/3b4a44f994e7436590f91dccd1d4ea1d.jpg" alt="Shell脚本自动化部署实战（一）_第50张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/38f5c95a65f645ee89843b738cf9e3f8.jpg"><img src="https://img.it610.com/image/info8/38f5c95a65f645ee89843b738cf9e3f8.jpg" alt="Shell脚本自动化部署实战（一）_第51张图片" /></a></p>

<p><strong>示例4：数字间比较&mdash; &gt;比较运算符</strong></p>

<p>知识点：-eq：判断是否相等，-ne：判断是否不相等，-gt：判断是否大于，-ge：判断是否大于等于，-lt：判断是否小于，-le：判断是否小于等于</p>

<p>数字变量操作：((i++)) ((i+=1)) i=$[$i+1] let i=i+1 i=$(($i+1))</p>

<ul>
<li>输入数字，判断是否大于0，如果大于0则将该数字-1并输出，否则+1输出</li>
</ul>

<p><a href="https://img.it610.com/image/info8/9286e4e903ea4f24a58faf4ec2457c86.jpg"><img src="https://img.it610.com/image/info8/9286e4e903ea4f24a58faf4ec2457c86.jpg" alt="Shell脚本自动化部署实战（一）_第52张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/06f8f8dfc3d64a6db5d6bc4b4bfdaacf.jpg"><img src="https://img.it610.com/image/info8/06f8f8dfc3d64a6db5d6bc4b4bfdaacf.jpg" alt="Shell脚本自动化部署实战（一）_第53张图片" /></a></p>

<p><strong>示例5：</strong></p>

<p>知识点：测试文件的状态test 参数 变量名</p>

<p>参数：-e表示文件是否存在，-f表示文件是否存在且为文件，-d表示文件名是否存在且为目录，-r 可读，-w 可写，-x 可执行</p>

<ul>
<li>判断用户输入的目录是否存在，如果存在则统计目录下的文件个数，否则提示用户该目录不存在</li>
</ul>

<p><a href="https://img.it610.com/image/info8/b4b0f3456f3b4f15a56c2c94b816450f.jpg"><img src="https://img.it610.com/image/info8/b4b0f3456f3b4f15a56c2c94b816450f.jpg" alt="Shell脚本自动化部署实战（一）_第54张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/a1d31378793745daae374429cc72d158.jpg"><img src="https://img.it610.com/image/info8/a1d31378793745daae374429cc72d158.jpg" alt="Shell脚本自动化部署实战（一）_第55张图片" /></a></p>

<p><strong>if&hellip;elif&hellip;else分支</strong></p>

<p>a)格式</p>

<p>if [ 条件 ]<br />
then<br />
语句<br />
elif [ 条件 ]<br />
then<br />
语句<br />
elif [ 条件 ]<br />
then<br />
语句<br />
&hellip;.<br />
else<br />
语句<br />
fi</p>

<p><strong>示例1：</strong></p>

<ul>
<li>判断学生的成绩，范围在90-100提示优秀，80-90之间提示良好,70-80之间则提示一般，60-70之间提示及格。其他则提示不及格</li>
</ul>

<p><a href="https://img.it610.com/image/info8/fe9ba7f13db94c418e56543609883129.jpg"><img src="https://img.it610.com/image/info8/fe9ba7f13db94c418e56543609883129.jpg" alt="Shell脚本自动化部署实战（一）_第56张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/e59ef895d9984e8b8ce97bf4932a7faf.jpg"><img src="https://img.it610.com/image/info8/e59ef895d9984e8b8ce97bf4932a7faf.jpg" alt="Shell脚本自动化部署实战（一）_第57张图片" /></a></p>

<p><strong>示例2：文件判断</strong></p>

<p>涉及知识点：-r filename 文件是否存在且可读，-w filename 文件是否存在且可写， -x filename文件是否存在且可执行，-f
filename 文件是否存在且是普通文件，-d filename 文件是否存在且是一个目录，-e filename 文件是否存在，-n str1
字符串长度是否不等于0，-z str2 字符串长度是否等于0</p>

<ul>
<li>判断用户输入的内容是否为空，为空则提示，不为空则判断是否为目录，不为目录则判断是否为文件，否则提示错误信息</li>
</ul>

<p><a href="https://img.it610.com/image/info8/941e9e57a760439a9836ef1afd58c6f8.jpg"><img src="https://img.it610.com/image/info8/941e9e57a760439a9836ef1afd58c6f8.jpg" alt="Shell脚本自动化部署实战（一）_第58张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/6513556c004e4e54a23063ea55c7bd4f.jpg"><img src="https://img.it610.com/image/info8/6513556c004e4e54a23063ea55c7bd4f.jpg" alt="Shell脚本自动化部署实战（一）_第59张图片" /></a></p>

<p><strong>case分支</strong></p>

<p>a)格式</p>

<p>case $变量名 in<br />
&ldquo;值&rdquo;)<br />
语句;;<br />
&ldquo;值&rdquo;)<br />
语句;;<br />
&ldquo;值&rdquo;)<br />
语句;;<br />
&hellip;..<br />
*)<br />
语句;;<br />
esac</p>

<p>b)注意</p>

<p>1.case这一行最后必须为in</p>

<p>2. ;;&mdash;-&gt;结束语句</p>

<p>3.*&mdash;-&gt;默认</p>

<p>4.esac&mdash;&gt;case语句的结束</p>

<p>5.值可以是字符串也可以是数字</p>

<p>6.“值”还可以是区间范围,范围[0-9]</p>

<p><strong>示例1：</strong></p>

<ul>
<li>输入一个字母，判断该用户选择哪款产品，A：笔记本 B：电饭煲 C：小台灯</li>
</ul>

<p><a href="https://img.it610.com/image/info8/ab26a79c250e43f89ae32ad4d4a85fa6.jpg"><img src="https://img.it610.com/image/info8/ab26a79c250e43f89ae32ad4d4a85fa6.jpg" alt="Shell脚本自动化部署实战（一）_第60张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/4bb31b15578c4a72a244e126948a8529.jpg"><img src="https://img.it610.com/image/info8/4bb31b15578c4a72a244e126948a8529.jpg" alt="Shell脚本自动化部署实战（一）_第61张图片" /></a></p>

<p><strong>示例2：</strong></p>

<ul>
<li>请输入对客服的满意度，【0-3】不满意，【4-6】满意，【7-9】非常满意</li>
</ul>

<p><a href="https://img.it610.com/image/info8/783a3a971b09473b95147e1f62ac2ebd.jpg"><img src="https://img.it610.com/image/info8/783a3a971b09473b95147e1f62ac2ebd.jpg" alt="Shell脚本自动化部署实战（一）_第62张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/506eb94d33ba4c578fa52b097d16866f.jpg"><img src="https://img.it610.com/image/info8/506eb94d33ba4c578fa52b097d16866f.jpg" alt="Shell脚本自动化部署实战（一）_第63张图片" /></a></p>

<p><strong>2.循环结构</strong></p>

<p>a)for循环</p>

<p>b)格式</p>

<p>for 变量名 in 列表<br />
do<br />
语句<br />
done</p>

<p><strong>示例1：</strong></p>

<ul>
<li>输出1-10之间的数</li>
</ul>

<p><a href="https://img.it610.com/image/info8/2578f9ced1dd4eb0a0bf1080cf341e2d.jpg"><img src="https://img.it610.com/image/info8/2578f9ced1dd4eb0a0bf1080cf341e2d.jpg" alt="Shell脚本自动化部署实战（一）_第64张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/53314b7cf9c84ae284244525cee8187d.jpg"><img src="https://img.it610.com/image/info8/53314b7cf9c84ae284244525cee8187d.jpg" alt="Shell脚本自动化部署实战（一）_第65张图片" /></a></p>

<p><strong>示例2：改进版</strong></p>

<ul>
<li>seq start size max（start:开始点，size:间隔，max:结束点，注意：如果size的值为1，则可以省略）</li>
</ul>

<p><a href="https://img.it610.com/image/info8/1856b357a6b64c5997f21040293bb5fc.jpg"><img src="https://img.it610.com/image/info8/1856b357a6b64c5997f21040293bb5fc.jpg" alt="Shell脚本自动化部署实战（一）_第66张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/2438d204e0f24000be94faf8878ff235.jpg"><img src="https://img.it610.com/image/info8/2438d204e0f24000be94faf8878ff235.jpg" alt="Shell脚本自动化部署实战（一）_第67张图片" /></a></p>

<p><strong>示例3：</strong></p>

<ul>
<li>输出1到10之间的奇数，只需要将步长间隔改为2即可</li>
</ul>

<p><a href="https://img.it610.com/image/info8/963846bfe87544b5a8a301b9e5bea911.jpg"><img src="https://img.it610.com/image/info8/963846bfe87544b5a8a301b9e5bea911.jpg" alt="Shell脚本自动化部署实战（一）_第68张图片" /></a></p>

<ul>
<li>运行脚本进行测试</li>
</ul>

<p><a href="https://img.it610.com/image/info8/16d121a9f2a24f2bb66d9fb711f1ec34.jpg"><img src="https://img.it610.com/image/info8/16d121a9f2a24f2bb66d9fb711f1ec34.jpg" alt="Shell脚本自动化部署实战（一）_第69张图片" /></a></p>

<h3 id="5-总结">5.总结</h3>

<p><a href="https://img.it610.com/image/info8/3fe197c7310a42908869426036608560.jpg"><img src="https://img.it610.com/image/info8/3fe197c7310a42908869426036608560.jpg" alt="Shell脚本自动化部署实战（一）_第70张图片" /></a></p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>