<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell编程echo语句运算方法循环语句与函数 | 开发者问答集锦</title>
    <meta property="og:title" content="shell编程echo语句运算方法循环语句与函数 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell编程echo语句运算方法循环语句与函数">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8Becho%E8%AF%AD%E5%8F%A5%E8%BF%90%E7%AE%97%E6%96%B9%E6%B3%95%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E4%B8%8E%E5%87%BD%E6%95%B0/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">shell编程echo语句运算方法循环语句与函数</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h3 id="shell编程循环语句与函数">shell编程循环语句与函数</h3>

<ul>
<li>一 echo语句

<ul>
<li>1.1 echo常用转义字符</li>
<li>1.2 运算方法</li>
</ul></li>
<li>二 循环语句

<ul>
<li>2.1 for循环

<ul>
<li>2.1.1 for循环格式</li>
<li>2.1.2 循环中断（break、continue）</li>
<li>2.1.3 for循环三种方法</li>
</ul></li>
<li>2.2 while循环</li>
<li>2.3 until循环</li>
</ul></li>
<li>三 函数

<ul>
<li>3.1 函数返回值</li>
<li>3.2 递归函数</li>
<li>3.3 函数库的创建与调用</li>
</ul></li>
<li>四 for循环输出九九乘法表、菱形

<ul>
<li>4.1 乘法表</li>
<li>4.2 菱形</li>
</ul></li>
</ul>

<h1 id="一-echo语句">一 echo语句</h1>

<h2 id="1-1-echo常用转义字符">1.1 echo常用转义字符</h2>

<p>echo -n表示不换行输出<br />
echo -e输出转义字符，将转义后的内容输出到屏幕上</p>

<table>
<thead>
<tr>
<th>常用转义字符</th>
<th>释义</th>
</tr>
</thead>

<tbody>
<tr>
<td>\b</td>
<td>转义后相当于按退格键(backspace) ，但前提是&rdquo;\b&rdquo;后面存在字符; “\b&rdquo;表示删除前一个字符，”\b\b&rdquo;表示删除前两个字符。</td>
</tr>

<tr>
<td>\c</td>
<td>不换行输出，在&rdquo;\c&rdquo;后面不存在字符的情况下，作用相当于echo -n; 但是当&rdquo;\c&rdquo;后面仍然存在字符时，&rdquo;\c&rdquo;后面的字符将不会被输出。</td>
</tr>

<tr>
<td>\n</td>
<td>换行，被输出的字符从&rdquo;\n&rdquo;处开始另起一行。</td>
</tr>

<tr>
<td>\v或\f</td>
<td>换行，但是换行后的新行的开头位置连接着上一行的行尾</td>
</tr>

<tr>
<td>\t</td>
<td>表示插入tab，即横向制表符;</td>
</tr>

<tr>
<td>\r</td>
<td>光标移至行首，但不换行，相当于使用&rdquo;\r&rdquo;以后的字符覆盖&rdquo;\r&rdquo;之前同等长度的字符,但是当&rdquo;\r&rdquo;后面不存在任何字符时，&rdquo;\r&rdquo;</td>
</tr>
</tbody>
</table>

<p>前面的字符不会被覆盖<br />
\\ | 表示插入“\”本身</p>

<p>操作实例<br />
<a href="https://img.it610.com/image/info8/6f7738f588f24a66a0e8d400cd13cdb4.jpg"><img src="https://img.it610.com/image/info8/6f7738f588f24a66a0e8d400cd13cdb4.jpg" alt="shell编程echo语句、运算方法、循环语句与函数_第1张图片" /></a></p>

<h2 id="1-2-运算方法">1.2 运算方法</h2>

<p>shell脚本中有4种运算方法</p>

<pre><code>1. i=$(expr 12 \* 5)
2. i=$((12*5))
3. i=$[12*5]
4. let i= 12*5

i++相当于i=$[$i+1]
i--相当于i=$[$i-1]
i+=2相当于i=$[$i+2]
</code></pre>

<h1 id="二-循环语句">二 循环语句</h1>

<h2 id="2-1-for循环">2.1 for循环</h2>

<p>使用for循环语句时，需要指定一个变量及可能的取值列表，针对每一个不同的取值重复执行相同的命令序列，直到变量值用完完全退出循环。在这里，取值列表是for语句的执行条件，其中包括多个属性相同的对象，需要预先指定。</p>

<h3 id="2-1-1-for循环格式">2.1.1 for循环格式</h3>

<p><a href="https://img.it610.com/image/info8/f9da767186554909ac99ae1c872d96c3.jpg"><img src="https://img.it610.com/image/info8/f9da767186554909ac99ae1c872d96c3.jpg" alt="shell编程echo语句、运算方法、循环语句与函数_第2张图片" /></a></p>

<pre><code>for 变量名 in 取值列表 
do
    命令序列
done
</code></pre>

<p>例：添加用户和删除用户</p>

<pre><code>#!/bin/bash添加用户
ULIST=$(cat /root/user.txt)
for UNAME in $ULIST
do
useradd $UNAME
echo &quot;123456&quot; | passwd --stdin $UNAME &amp;&gt; /dev/null  //把输出信息丢弃
done



#!/bin/bash删除用户
$ULIST=$(cat /root/user.txt)
for UNAME in $ULIST
do
userdel -r $UNAME
[$? -eq 0] &amp;&amp; [echo &quot;已删除用户$UNAME&quot;]
done
</code></pre>

<h3 id="2-1-2-循环中断-break-continue">2.1.2 循环中断（break、continue）</h3>

<p>break默认跳出单个循环，break 2跳出两个循环，以此类推，break n跳出n个循环。<br />
continue终止某次循环中的命令，但不会完全终止整个循环</p>

<h3 id="2-1-3-for循环三种方法">2.1.3 for循环三种方法</h3>

<pre><code>方法1
[root@localhost ~]#for i in {1..10};do echo $i;done     //按序输出1到10
[root@localhost ~]#for i in {1..10..2};do echo $i;done      //输出1到10，步长为2

方法2
[root@localhost ~]#for i in $(seq 1 10);do echo $i;done     //按序输出1到10
[root@localhost ~]#for i in $(seq 1  2 10);do echo $i;done      //输出1到10，步长为2

方法3
[root@localhost ~]#for ((i=1;i&lt;=10;i++));do echo $i;done
</code></pre>

<h2 id="2-2-while循环">2.2 while循环</h2>

<p><a href="https://img.it610.com/image/info8/17de36c7aa0b4290abd1f6a763a4f3b8.jpg"><img src="https://img.it610.com/image/info8/17de36c7aa0b4290abd1f6a763a4f3b8.jpg" alt="shell编程echo语句、运算方法、循环语句与函数_第3张图片" /></a></p>

<pre><code>while 条件测试操作
do
    命令序列
done
</code></pre>

<p>例：竞猜商品价格</p>

<pre><code>PRICE=$(expr $RANDOM % 1000)
TIMES=0
echo &quot;good's price between 0-999,how much?&quot;
while true
do
    read -p &quot;please input the price you guessed:&quot; INT
    let TIMES++
if [ $INT -eq $PRICE ];then
    echo &quot;You're right.The price is $PRICE&quot;
    echo &quot;You have guessed $TIMES times.&quot;
    exit 0
elif [ $INT -gt $PRICE ];then
    echo &quot;Too high!&quot;
else echo &quot;Too low!&quot;
fi
done
</code></pre>

<h2 id="2-3-until循环">2.3 until循环</h2>

<p>重复测试某个条件，只要条件不成立就反复执行<br />
<a href="https://img.it610.com/image/info8/f7455f36d52846ac8cea4249128b5ae9.jpg"><img src="https://img.it610.com/image/info8/f7455f36d52846ac8cea4249128b5ae9.jpg" alt="shell编程echo语句、运算方法、循环语句与函数_第4张图片" /></a></p>

<pre><code>until 条件测试操作
do
    命令序列
done
</code></pre>

<p>例：从1开始累加</p>

<pre><code>#!/bin/bash
read -p &quot;从1加到几？&quot; num
i=0;s=0
until [ $i -eq $num ]
do
    let &quot;i++&quot;;let &quot;s=$s+$i&quot;
done
echo &quot;sum(1...$num)=&quot;$s
</code></pre>

<h1 id="三-函数">三 函数</h1>

<p>函数定义</p>

<pre><code>[function] 函数名 ()
{
    命令序列
    [return x]
}
</code></pre>

<p>调用函数</p>

<pre><code>函数名 [参数1] [参数2]
</code></pre>

<h2 id="3-1-函数返回值">3.1 函数返回值</h2>

<p>return表示退出函数并返回一个退出值，脚本中可以用 ? 变 量 显 示 该 值 使 用 原 则 ： 1 函 数 一 结 束 就 取 返 回 值 ， 因
为 ?变量显示该值 使用原则： 1 函数一结束就取返回值，因为
?变量显示该值使用原则：1函数一结束就取返回值，因为?变量只返回执行的最后一条命令的退出状态码<br />
2 退出状态码必须是0-255，超出时将除以256取余</p>

<pre><code>db() 
{
read -p &quot;input:&quot; value
return $[$value * 2]
}
db
echo $?
</code></pre>

<h2 id="3-2-递归函数">3.2 递归函数</h2>

<p>递归函数调用自己本身，在分析函数时可以先跳过函数调用，再对该部分进行分析。<br />
例：递归遍历环境变量中的目录和可执行文件</p>

<pre><code>#!/bin/bash
//递归函数部分
file_list() {
for f in $1/*       // $1/*表示取值列表，读取PATH下目录
do
        if [ -d $f ];then       //对$f进行判断，-d表示是否为目录
        echo &quot;$2$f&quot;
        file_list &quot;$f&quot; &quot; $2&quot;        //调用函数自身，把$f下的所有目录和文件作为取值列表，再次进行判断

        elif [ -x $f ];then     //对$f进行判断，-x表示是否为可执行文件
        echo &quot;$2$f&quot;     //输出空格接该文件
        fi
done
}
//主程序部分
IFS=$IFS':'     //IFS字段分隔符，默认包含空格，换行，制表符，加入':'对冒号也可以识别并进行分隔
for folder in $PATH
do
  echo &quot;$folder:&quot;
  file_list &quot;$folder&quot; &quot; &quot;       //调用函数，加入位参1，2
done
</code></pre>

<h2 id="3-3-函数库的创建与调用">3.3 函数库的创建与调用</h2>

<p>例：加减乘除函数库</p>

<pre><code>创建函数库
[root@localhost ~]#vim myfuncs.sh
jiafa() 
{
echo $[$1+$2]
}

jianfa()
{
echo $[$1-$2]
}

chengfa()
{
echo $[$1*$2]
}

chufa()
{
if [ $2 -ne 0 ];then
echo $[$1/$2]
else 
echo '$2不能为0'
fi
}

//调用函数库
. myfuncs.sh

value1=10
value2=5
result1=`jiafa $value1 $value2`
result2=`jianfa $value1 $value2`
result3=`chengfa $value1 $value2`
result4=`chufa $value1 $value2`
echo &quot;加法结果为$result1&quot;
echo &quot;减法结果为$result2&quot;
echo &quot;乘法结果为$result3&quot;
echo &quot;除法结果为$result4&quot;
</code></pre>

<h1 id="四-for循环输出九九乘法表-菱形">四 for循环输出九九乘法表、菱形</h1>

<h2 id="4-1-乘法表">4.1 乘法表</h2>

<pre><code>#!/bin/bash
for ((i=1;i&lt;=9;i++))        //外循环控制行数
do
        for ((j=1;j&lt;=i;j++))        //内循环控制列数
        do
                echo -n -e &quot;$i x $j = $((i * j))\t&quot;
        done
        echo -e &quot;\n&quot;
done
</code></pre>

<p><a href="https://img.it610.com/image/info8/8fb71fb916834205b7c30a6038aa9168.jpg"><img src="https://img.it610.com/image/info8/8fb71fb916834205b7c30a6038aa9168.jpg" alt="shell编程echo语句、运算方法、循环语句与函数_第5张图片" /></a></p>

<h2 id="4-2-菱形">4.2 菱形</h2>

<pre><code>#!/bin/bash
#菱形上半部分
for ((i=9;i&gt;=1;i--))            #控制行数
do
  for ((a=1;a&lt;=$i;a++))         #控制第i行第一段输出
  do
  echo -n &quot; &quot;
  done
  for ((b=9;b&gt;=$i;b--))         #控制第i行第二段输出
  do
  echo -n &quot;*&quot;
  done
  for ((c=8;c&gt;=$i;c--))         #控制第i行第三段输出
  do
  echo -n &quot;*&quot;
  done
  echo &quot;&quot;
done

#菱形下半部分
for ((h=2;h&lt;=9;h++))
do
  for ((d=1;d&lt;=$h;d++))
  do
  echo -n &quot; &quot;
  done

  for ((e=9;e&gt;=$h;e--))
  do
  echo -n &quot;*&quot;
  done

  for ((f=8;f&gt;=$h;f--))
  do
  echo -n &quot;*&quot;
  done

  echo &quot;&quot;
done
</code></pre>

<p><a href="https://img.it610.com/image/info8/ce63e494c35a472a81304eec4f84e9f9.jpg"><img src="https://img.it610.com/image/info8/ce63e494c35a472a81304eec4f84e9f9.jpg" alt="shell编程echo语句、运算方法、循环语句与函数_第6张图片" /></a></p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>