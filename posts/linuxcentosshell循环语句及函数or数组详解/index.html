<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>linuxcentosshell循环语句及函数OR数组详解 | 开发者问答集锦</title>
    <meta property="og:title" content="linuxcentosshell循环语句及函数OR数组详解 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="linuxcentosshell循环语句及函数OR数组详解">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/linuxcentosshell%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E5%8F%8A%E5%87%BD%E6%95%B0or%E6%95%B0%E7%BB%84%E8%AF%A6%E8%A7%A3/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">linuxcentosshell循环语句及函数OR数组详解</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h3 id="文章目录">文章目录</h3>

<ul>
<li>前言</li>
<li>一 循环语句

<ul>
<li>1.1：for循环语句

<ul>
<li>1.1.1：for语句结构</li>
<li>1.1.2：使用for批量添加用户</li>
<li>1.1.3：示例–根据IP地址检查主机状态</li>
<li>1.1.4：用循环语句输出1-10的数字的四种办法</li>
<li>1.1.5：shell中let命令</li>
<li>1.1.6：计算1-10偶数/奇数的和</li>
</ul></li>
<li>1.2：while循环语句

<ul>
<li>1.2.1：while语句结构</li>
<li>1.2.3：while死循环</li>
<li>1.2.4：使用while批量添加用户</li>
<li>1.2.5：猜商品价格游戏</li>
</ul></li>
<li>1.3：continue和break

<ul>
<li>1.3.1：continue</li>
<li>1.3.2：break</li>
<li>1.3.3：break和continue的区别</li>
</ul></li>
<li>1.4:九九乘法表</li>
<li>1.5：幸运抽奖</li>
<li>1.6：untli循环语句

<ul>
<li>1.6.1：until语句的结构</li>
<li>1.6.2：until语句应用1</li>
<li>1.6.3：until语句应用2</li>
</ul></li>
</ul></li>
<li>二：shell函数

<ul>
<li>2.1：shell函数概述</li>
<li>2.2：shell函数定义</li>
<li>2.3：调用函数的方法</li>
<li>2.4：shell函数应用1</li>
<li>2.5：shell函数应用2</li>
<li>2.6 递归查找文件下的子文件</li>
<li>2.7 函数的作用范围local命令</li>
<li>三：shell数组</li>
<li>3.1：数组应用场景</li>
<li>3.2：数组定义方法（推荐方法一）</li>
<li>3.3：数组包括的数据类型与数组操作

<ul>
<li>3.3.1：数组包括的数据类型</li>
<li>3.3.2：数组操作</li>
</ul></li>
<li>3.5创建任意数字及长度的数组，根据客户要求加入元素</li>
<li>3.6创建存放（1-100）奇数的数组</li>
<li>3.7判断数组内元素是否大于60，未满足60直接赋予60</li>
<li>3.8 自动输入创建数组，自动从小到大排序</li>
<li>3.9 删除数组中小于60的数字</li>
<li>4.0 数组由大到小排序</li>
</ul></li>
</ul>

<h1 id="前言">前言</h1>

<p>在不少实际问题中有许多具有规律性的重复操作，因此在程序中就需要重复执行某些语句。一组被重复执行的语句称之为循环体，能否继续重复，决定循环的终止条件。循环结构是在一定条件下反复执行某段程序的流程结构，被反复执行的程序被称为循环体。
[1] 循环语句是由循环体及循环的终止条件两部分组成的。<br />
函数也是具有和别名类似的功能。函数的作用就是把程序里多次调研相同的代码部分定义成一份，然后为这一份代码起个名字，其它所有的重复调用这部分代码都只用调用这个名字就可以。当需要修改这部分重复代码时，只需要改变函数体内的一份代码即可实现调用修改。</p>

<p>使用函数的优势：</p>

<p>1、把相同的程序段定义成函数，可以减少整个程序的代码量。</p>

<p>2、增加程序的可读性，以及便于管理。</p>

<p>3、可实现程序功能模块化，不同的程序使用函数模块化。</p>

<p>4、让程序代码结构更清晰。</p>

<h1 id="一-循环语句">一 循环语句</h1>

<h2 id="1-1-for循环语句">1.1：for循环语句</h2>

<h3 id="1-1-1-for语句结构">1.1.1：for语句结构</h3>

<p>读取不同的变量值，用来逐个执行同一组命令</p>

<p>语句结构</p>

<pre><code>for 变量名 in 取值列表
do
    命令序列
done
</code></pre>

<p><a href="https://img.it610.com/image/info8/f238e0736fb24b4c8a293055616a55ca.jpg"><img src="https://img.it610.com/image/info8/f238e0736fb24b4c8a293055616a55ca.jpg" alt="linux-centos-
shell循环语句及函数OR数组详解_第1张图片" /></a></p>

<p>语句结构举例</p>

<pre><code>for 收件人 in 邮件地址列表
do
    发送邮件
done
</code></pre>

<h3 id="1-1-2-使用for批量添加用户">1.1.2：使用for批量添加用户</h3>

<p>用户名存放在users.txt文件中，每行一个</p>

<pre><code>初始密码均设为123456

 cd test
[root@shanan test]# vim users.txt
W1
W2
W3
W4
W5
~   
[root@shanan test]# vim user.sh
#!/bin/bash
users=`cat /test/users.txt`
for user in $users
do
  useradd $user &gt; /dev/null
  echo &quot;123456&quot; | passwd --stdin $user &gt; /dev/null
done
list=` cat /etc/passwd | awk -F: '{print $1}'   `
echo &quot;所有用户列表如下 $list&quot;

[root@shanan test]# sh user.sh
所有用户列表如下 
.........省略
W1
W2
W3
W4
W5
</code></pre>

<h3 id="1-1-3-示例-根据ip地址检查主机状态">1.1.3：示例–根据IP地址检查主机状态</h3>

<p>检测IP地址192.168.100.0-192.168.100.10段落</p>

<p>使用ping命令检测各主机的连通性</p>

<pre><code>[root@localhost opt]# vim ping.sh 
#!/bin/bash
for ((i=1;i&lt;=10;i++))
do
  ping -c 3 -i 0.2 -W 3 &quot;192.168.100.$i&quot; &amp;&gt; /dev/null
  if [ $? -eq 0 ]
        then
        echo &quot;Host 192.168.100.$i is up&quot;
  else
        echo &quot;Host 192.168.100.$i is down&quot;
  fi
done
~                            
[root@shanan test]# vi ping.sh
[root@shanan test]# sh ping.sh 
Host 192.168.100.1 is up
Host 192.168.100.2 is up
Host 192.168.100.3 is down
Host 192.168.100.4 is down
Host 192.168.100.5 is down
Host 192.168.100.6 is down
Host 192.168.100.7 is down
Host 192.168.100.8 is down
Host 192.168.100.9 is down
Host 192.168.100.10 is down
</code></pre>

<h3 id="1-1-4-用循环语句输出1-10的数字的四种办法">1.1.4：用循环语句输出1-10的数字的四种办法</h3>

<p>方式一：</p>

<pre><code>#!/bin/bash
for ((i=1;i&lt;=10;i++))
do
        echo &quot;$i&quot;
done


方式二：

#!/bin/bash
i=1
for ((;i&lt;=10;i++))
do
        echo &quot;$i&quot;
done


方式三：

#!/bin/bash
i=1
for ((;i&lt;=10;))
do
        echo &quot;$i&quot;
        let i++
done

方式四：

#!/bin/bash
i=1
for ((;;))
do
  if [ $i -le 10 ]
        then
        echo &quot;$i&quot;
        let i++
  else
        exit 0
  fi
done

输出结果
[root@shanan test]# sh shi.sh
1
2
3
4
5
6
7
8
9
10
</code></pre>

<h3 id="1-1-5-shell中let命令">1.1.5：shell中let命令</h3>

<p>let 对整数进行数学运算</p>

<pre><code>let和双小括号 (( )) 一样，let 命令也只能进行整数运算，不能对小数（浮点数）或者字符串进行运算。

语法格式
let 表达式
或
let &quot;表达式&quot;
或
let '表达式'
以上方式都等价于 ((表达式))
</code></pre>

<p>当表达式中含有 Shell 特殊字符（例如 |）时，需要用双引号&rdquo; &ldquo;或者单引号’ &lsquo;将表达式包围起来。</p>

<p>和 (( )) 类似，let 命令也支持一次性计算多个表达式，并且以最后一个表达式的值作为整个 let 命令的执行结果。</p>

<h3 id="1-1-6-计算1-10偶数-奇数的和">1.1.6：计算1-10偶数/奇数的和</h3>

<p>方式一：计算偶数的和</p>

<pre><code>#!/bin/bash
sum=0
for((i=0;i&lt;=10;i+=2))
  do
        let sum+=$i
  done
        echo &quot;总和为：$sum&quot;
</code></pre>

<p>方式一：计算奇数的和</p>

<pre><code>#!/bin/bash
sum=0
for((i=1;i&lt;=10;i+=2))
  do
        let sum+=$i
  done
        echo &quot;总和为：$sum&quot;
</code></pre>

<p>方式二：求偶数和</p>

<pre><code>#!/bin/bash
sum=0
for((i=0;i&lt;=10;i+=2))
  do
        if [ `expr $i % 2` -eq 0 ]
         then
           let sum+=$i
        fi
  done
        echo &quot;总和为：$sum&quot;
</code></pre>

<p>方式二：求奇数和</p>

<pre><code>#!/bin/bash
sum=0
for((i=1;i&lt;=10;i+=2))
  do
        if [ `expr $i % 2` -eq 1 ]
         then
           let sum+=$i
        fi
  done
        echo &quot;总和为：$sum&quot;
</code></pre>

<h2 id="1-2-while循环语句">1.2：while循环语句</h2>

<h3 id="1-2-1-while语句结构">1.2.1：while语句结构</h3>

<p>重复测试某个条件，只要条件成立则反复执行</p>

<p>语句结构<br />
while 条件测试操作<br />
do<br />
命令序列<br />
done</p>

<p>语句结构示例<br />
while 未猜中正确的价格<br />
do<br />
反复猜测商品价格<br />
done</p>

<pre><code>### 1.2.2：while语句应用示例
使用while循环语句输出1-10数字

#!/bin/bash
i=0
while [ $i -le 10 ]
do
  echo &quot;$i&quot;
  let i++
done

运行结果
0
1
2
3
4
5
6
7
8
9
10
</code></pre>

<h3 id="1-2-3-while死循环">1.2.3：while死循环</h3>

<p>while true：死循环有时候也有奇效，可与用户交互</p>

<pre><code>#!/bin/bash
while true
do
  read -p &quot;请输入yes退出：&quot; KEY
  if [ $KEY = yes ]
        then
          break
  fi
done
echo &quot;正常退出&quot;


 运行结果：

请输入yes退出：no
请输入yes退出：1
请输入yes退出：d
请输入yes退出：！
请输入yes退出：a
请输入yes退出：yes
正常退出
</code></pre>

<h3 id="1-2-4-使用while批量添加用户">1.2.4：使用while批量添加用户</h3>

<p>用户名称以stu开头，按数字顺序进行编号</p>

<p>一共添加20个用户，即stu1，stu2…stu20</p>

<p>初始密码设置为123456</p>

<pre><code>#!/bin/bash
i=0
while [ $i -le 19 ]
do
  let i++
  useradd stu$i
  echo &quot;123456&quot; | passwd --stdin stu$i &amp;&gt; /dev/null
  echo &quot;stu$i添加成功&quot;
done
echo &quot;添加完毕&quot;

运行结果
.......省略
stu15添加成功
stu16添加成功
stu17添加成功
stu18添加成功
stu19添加成功
stu20添加成功
添加完毕
</code></pre>

<h3 id="1-2-5-猜商品价格游戏">1.2.5：猜商品价格游戏</h3>

<p>通过变量RANDOM获得随机数<br />
提示用户猜测并记录次数，猜中后退出循环</p>

<pre><code>#!/bin/bash
A=`expr $RANDOM % 1000`
i=0
echo &quot;商品的实际价格为0-999之间，猜猜看是多少？&quot;
read -p &quot;请输入你猜测的价格数目：&quot; num
while [ $num -le 999 ] &amp;&amp; [ $num -ge 1 ] 
do
        let i++
     if [ $num -eq $A ]
        then
        echo &quot;恭喜你答对了，实际价格是$A&quot;
        echo &quot;你一共猜测了$i 次&quot;
        exit 0
     elif [ $num -lt $A ]
        then
        echo &quot;太低了&quot;
        read -p &quot;请输入你猜测的价格数目：&quot; num
     else
        echo &quot;太高了&quot;
        read -p &quot;请输入你猜测的价格数目：&quot; num
     fi
  done
[root@ shanan ~]# sh jiage.sh
商品的实际价格为0-999之间，猜猜看是多少？
请输入你猜测的价格数目：500
太高了
请输入你猜测的价格数目：250
太高了
请输入你猜测的价格数目：125
太低了
请输入你猜测的价格数目：200
太高了
请输入你猜测的价格数目：160
太高了
请输入你猜测的价格数目：140
太高了
请输入你猜测的价格数目：130
太低了
请输入你猜测的价格数目：135
太低了
请输入你猜测的价格数目：137
太低了
请输入你猜测的价格数目：138
恭喜你答对了，实际价格是138
你一共猜测了10 次
</code></pre>

<h2 id="1-3-continue和break">1.3：continue和break</h2>

<h3 id="1-3-1-continue">1.3.1：continue</h3>

<p>命令格式<br />
continue n<br />
n 表示循环的层数：<br />
如果省略 n，则表示 continue 只对当前层次的循环语句有效，遇到 continue 会跳过本次循环，忽略本次循环的剩余代码，直接进入下一次循环。<br />
如果带上 n，比如 n 的值为 2，那么 continue
对内层和外层循环语句都有效，不但内层会跳过本次循环，外层也会跳过本次循环，其效果相当于内层循环和外层循环同时执行了不带 n 的
continue。这么说可能有点难以理解，稍后我们通过代码来演示。<br />
continue 关键字也通常和 if 语句一起使用，即满足条件时便跳出循环。<br />
<a href="https://img.it610.com/image/info8/bdfa205d25544b608c815469e5828165.jpg"><img src="https://img.it610.com/image/info8/bdfa205d25544b608c815469e5828165.jpg" alt="linux-centos-
shell循环语句及函数OR数组详解_第2张图片" /></a></p>

<h3 id="1-3-2-break">1.3.2：break</h3>

<p>命令格式<br />
break n<br />
n 表示跳出循环的层数，如果省略 n，则表示跳出当前的整个循环。<br />
break 关键字通常和 if 语句一起使用，即满足条件时便跳出循环。</p>

<p><a href="https://img.it610.com/image/info8/eed419f19f854875a9a73893520fb993.jpg"><img src="https://img.it610.com/image/info8/eed419f19f854875a9a73893520fb993.jpg" alt="linux-centos-
shell循环语句及函数OR数组详解_第3张图片" /></a></p>

<h3 id="1-3-3-break和continue的区别">1.3.3：break和continue的区别</h3>

<p>break 用来结束所有循环，循环语句不再有执行的机会；continue 用来结束本次循环，直接跳到下一次循环，如果循环条件成立，还会继续循环。</p>

<h2 id="1-4-九九乘法表">1.4:九九乘法表</h2>

<pre><code>#!/bin/bash
i=1
while [ $i -le 9 ]
do
  for ((j=1;j&lt;=$i;j++))
  do
  echo -en &quot;\t $j x $i = `expr $j \* $i`&quot;
  done
  let i++
  echo &quot;  &quot;
done
~        
[root@shanan ~]# sh cfb.sh 
     1 x 1 = 1  
     1 x 2 = 2   2 x 2 = 4  
     1 x 3 = 3   2 x 3 = 6   3 x 3 = 9  
     1 x 4 = 4   2 x 4 = 8   3 x 4 = 12  4 x 4 = 16  
     1 x 5 = 5   2 x 5 = 10  3 x 5 = 15  4 x 5 = 20  5 x 5 = 25  
     1 x 6 = 6   2 x 6 = 12  3 x 6 = 18  4 x 6 = 24  5 x 6 = 30  6 x 6 = 36  
     1 x 7 = 7   2 x 7 = 14  3 x 7 = 21  4 x 7 = 28  5 x 7 = 35  6 x 7 = 42  7 x 7 = 49  
     1 x 8 = 8   2 x 8 = 16  3 x 8 = 24  4 x 8 = 32  5 x 8 = 40  6 x 8 = 48  7 x 8 = 56  8 x 8 = 64  
     1 x 9 = 9   2 x 9 = 18  3 x 9 = 27  4 x 9 = 36  5 x 9 = 45  6 x 9 = 54  7 x 9 = 63  8 x 9 = 72  9 x 9 = 81  
</code></pre>

<h2 id="1-5-幸运抽奖">1.5：幸运抽奖</h2>

<p>奖池观众：</p>

<pre><code>奖池观众名单在name.txt中
GONE:H:P
共10次投票，使用随机数的方法挑选幸运观众，票数最多获胜
#!/bin/bash
B=0
C=0
D=0
for ((i=1;i&lt;=10;i++))
do
 #A=$( expr $[RANDOM%3+1])
 A=$[$RANDOM%3+1]
 list=$(cut -d ':' -f$A /test/name.txt  )
 case $list in

  GONE)

        let B++
 ;;
 [H])
        let C++
 ;;
 *)
        let D++
  esac
done
  echo &quot;  GONE的票数是  $B&quot;
  echo &quot;  H 的票数是  $C&quot;
  echo &quot;  P 的票数是 $D&quot;
[root@ shanan ~]# sh luck.sh 
  GONE的票数是  4
  H 的票数是  5
  P 的票数是 1
</code></pre>

<h2 id="1-6-untli循环语句">1.6：untli循环语句</h2>

<h3 id="1-6-1-until语句的结构">1.6.1：until语句的结构</h3>

<p>重复测试某个条件，只要条件不成立则反复执行</p>

<pre><code>until 条件测试操作
do
 命令序列
done

while 未超过10
do
 数字依次增加
done
</code></pre>

<p><a href="https://img.it610.com/image/info8/dbbd9822b31a4a928fa597f52e6e3c8a.jpg"><img src="https://img.it610.com/image/info8/dbbd9822b31a4a928fa597f52e6e3c8a.jpg" alt="linux-centos-
shell循环语句及函数OR数组详解_第4张图片" /></a></p>

<h3 id="1-6-2-until语句应用1">1.6.2：until语句应用1</h3>

<p>计算1–50的和</p>

<p>通过循环累加的方式计算1–50的和</p>

<pre><code>#!/bin/bash
i=1
S=0
until [ $i -eq 51 ]
do
 let S+=$i
 let i++

done
echo &quot;$S&quot;

运算结果
1275
</code></pre>

<h3 id="1-6-3-until语句应用2">1.6.3：until语句应用2</h3>

<p>为指定用户发送在线消息</p>

<p>若指定用户不在线（未登陆系统），则每10分钟（实验中为了测试效果，可改为3s）试一次，直至用户登录系统后再发送信息<br />
用户名与消息通过为止参数传递给脚本</p>

<pre><code>[root@ shanan test]# vi yonghu.sh
#!/bin/bash
username=$1
#判断格式参数是否为空
if [ $# -lt 1 ]
 then
 echo &quot;Usage:`basename $0`  []&quot;
 exit 1
fi
#判断账号是属于系统用户
if grep &quot;^$username:&quot; /etc/passwd &amp;&gt; /dev/null;then :
  else
        echo &quot;用户不存在&quot;
        exit 2
fi
#判断用户是否在线，若不在线每3秒联系一次
until who | grep &quot;$username&quot; &amp;&gt; /dev/null
do
        echo &quot;用户不在线,正在尝试连接&quot;
        sleep 3
done
#发送消息
echo &quot;$2&quot; | write &quot;$username&quot;
echo &quot;${username}发送成功&quot;

运行脚本：
[root@ shanan test]# sh yonghu.sh 
Usage:yonghu.sh &lt;username&gt; [&lt;message&gt;]
[root@ shanan test]# yonghu.sh lucy
-bash: yonghu.sh: 未找到命令
[root@ shanan test]# sh yonghu.sh lucy hello
lucy发送成功
[root@ shanan test]# sh yonghu.sh stu20 hello
用户不在线,正在尝试连接
用户不在线,正在尝试连接
用户不在线,正在尝试连接



[lucy@ shanan ~]$ 
Message from root@ shanan on pts/1 at 19:07 ...
hello
EOF
</code></pre>

<h1 id="二-shell函数">二：shell函数</h1>

<h2 id="2-1-shell函数概述">2.1：shell函数概述</h2>

<p>shell一个非常重要的特性是它可作为一种编程语言来使用。<br />
因为shell是一个解释器，所以它不能对为它编写的程序进行编译，而是在每次从磁盘加载这些程序时对它们进行解释。而程序的加载和解释都是非常耗时的。<br />
针对此问题，许多shell（如BourneAgainShell）都包含shell函数，shell把这些函数放在内存中，这样每次需要执行它们时就不必再从磁盘读入。<br />
shell还以一种内部格式来存放这些函数，这样就不必耗费大量的时间来解释它们<br />
shell函数将命令序列按格式写在一起<br />
可以方便重复使用命令序列</p>

<h2 id="2-2-shell函数定义">2.2：shell函数定义</h2>

<p><a href="https://img.it610.com/image/info8/9e945d2e4b254964910044cf192c6cb0.jpg"><img src="https://img.it610.com/image/info8/9e945d2e4b254964910044cf192c6cb0.jpg" alt="linux-centos-
shell循环语句及函数OR数组详解_第5张图片" /></a></p>

<p>其中，return返回的是状态码，需要使用$?调取</p>

<p>echo 返回的是值，使用变量调用</p>

<p>传参：指位置变量</p>

<p>可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</p>

<p>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255</p>

<h2 id="2-3-调用函数的方法">2.3：调用函数的方法</h2>

<p>函数名 [参数1($1)] [参数2($2)]<br />
在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值，例如，$1表示第一个参数， 2 表 示 第 二 个 参 数 …
10 不 能 获 取 第 十 个 参 数 ， 获 取 第 十 个 参 数 需 要 10 不 能 获 取 第 十 个 参 数 ， 获 取 第 十 个 参 数
需 要 10 不 能 获 取 第 十 个 参 数 ， 获 取 第 十 个 参 数 需 要 10 。 当 n &gt; = 10 时 ， 需 要 使 用
2表示第二个参数… 10不能获取第十个参数，获取第十个参数需要 10
不能获取第十个参数，获取第十个参数需要10不能获取第十个参数，获取第十个参数需要{10}。当n&gt;=10时，需要使用
2表示第二个参数…10不能获取第十个参数，获取第十个参数需要10不能获取第十个参数，获取第十个参数需要10不能获取第十个参数，获取第十个参数需要10。当n&gt;=10时，需要使用{n}来获取参数。</p>

<h2 id="2-4-shell函数应用1">2.4：shell函数应用1</h2>

<p>两个数字求个</p>

<p>通过sum(){}定义函数<br />
使用read命令交互输入两个数并求和</p>

<pre><code>#!/bin/bash
#sum=0
 function  A (){
  read -p &quot;请输入第一个数字：&quot; B
  read -p &quot;请输入第二个数字：&quot; C
  sum=`expr $B + $C`
  echo &quot;$B + $C = $sum&quot;
  return 3
}
#echo $sum
A $B $C

运行结果
请输入第一个数字：4
请输入第二个数字：2
4 + 2 = 6
</code></pre>

<h2 id="2-5-shell函数应用2">2.5：shell函数应用2</h2>

<p>编写登录系统后便可使用的自定义函数<br />
编辑用户自定义函数文件/root/function<br />
在当前shell中加载可执行的函数文件/root/function<br />
在~/.bashrc文件中添加source /root/function命令</p>

<h2 id="2-6-递归查找文件下的子文件">2.6 递归查找文件下的子文件</h2>

<pre><code>#!/bin/bash
function list_file(){
    for f in ` ls $1 `
    do
    #判断是不是目录
    if [ -d &quot;$1/$f&quot;  ];then
    echo  &quot;$2$f&quot;
    #递归调用
    list_file &quot;$1/$f&quot; &quot;   $2&quot;
    else  
         echo &quot;$2$f &quot;
      fi 
     done
} 
list_file &quot;/var/log&quot;   &quot;&quot;
运行结果
[root@ shanan test]# sh digui.sh 
anaconda
   anaconda.log 
   ifcfg.log 
   journal.log 
   ks-script-Sp6XrL.log 
   packaging.log 
   program.log 
   storage.log 
   syslog 
   X.log 
audit
   audit.log 
boot.log 
boot.log-20200713 
boot.log-20200714 
boot.log-20200715 
boot.log-20200716 
boot.log-20200717 
boot.log-20200718 
boot.log-20200723 
........省略若干
</code></pre>

<h2 id="2-7-函数的作用范围local命令">2.7 函数的作用范围local命令</h2>

<p>函数在Shell脚本中仅在当前Shell环境中有效<br />
Shell脚本中变量默认全局有效<br />
将变量限定在函数内部使用local命令<br />
示例</p>

<p>函数内部变量通过local来实现</p>

<p>通过定义score函数，在期内部设置局部变量i<br />
函数内部和外部分别赋值，进行结果验证</p>

<pre><code>#!/bin/bash
#求和函数体
function sum(){
  #命令序列
  read -p &quot;请输入第一个整数：&quot; num1
  read -p &quot;请输入第二个整数：&quot; num2
  SUM=$(($num1+$num2))
  #echo 返回的是处理结果值
  local score=100
  echo &quot;函数内$score&quot;
  echo &quot;和：$SUM&quot;
}
sum
echo &quot;函数外$score&quot;
</code></pre>

<h2 id="三-shell数组">三：shell数组</h2>

<h2 id="3-1-数组应用场景">3.1：数组应用场景</h2>

<p>获取数组长度</p>

<p>使用for循环获取具体信息，使用下标或索引标记数组中数据的位置</p>

<p>可以存放多种数据，如：整型，长整形，浮点型（单精度，双精度），字符串等</p>

<p>获取元素长度</p>

<p>遍历元素</p>

<p>元素切片</p>

<p>元素替换</p>

<p>元素删除</p>

<p>…</p>

<p>注意，忌讳数组越界，</p>

<p>数组下标从0开始算</p>

<p>数组长度从1开始算</p>

<p>长度为4，数组长度表示为1,2,3,4；数组下标表示为0,1,2,3</p>

<p>shell中数组是可变长的</p>

<h2 id="3-2-数组定义方法-推荐方法一">3.2：数组定义方法（推荐方法一）</h2>

<pre><code>方法一：

基本格式
数组名=（value0 value1 value2...）
1
2
例如
ABC=（11 22 33...）
1
2
方法二：

基本格式
数组名=（[0]=value [1]=value [2]=value...）
1
2
例如
ABC=（[0]=11 [1]=22 [2]=33...)
1
2
方法三：数组元素之间使用空格隔开

基本格式
列表名=“value0 value1 value2”
数组名=（$列表名）
1
2
3
例如
AAA=“11 22 33...”
ABC=($列表名)
1
2
3
方法四：

基本格式
数组名[0]=“value”
数组名[1]=“value”
数组名[2]=“value”
...

例如
AAA[0]=“11”
AAA[1]=“22”
AAA[2]=“33”
...
</code></pre>

<h2 id="3-3-数组包括的数据类型与数组操作">3.3：数组包括的数据类型与数组操作</h2>

<h3 id="3-3-1-数组包括的数据类型">3.3.1：数组包括的数据类型</h3>

<p>数值类型</p>

<p>字符类型</p>

<p>使用“”或‘’定义<br />
数组只可存放数值或字符</p>

<h3 id="3-3-2-数组操作">3.3.2：数组操作</h3>

<p>获取数组长度</p>

<pre><code>基本格式
${#数组名[@/*]}
例如
[root@localhost opt]# abc=(10 20 30)
[root@localhost opt]# echo ${abc[*]}
10 20 30
[root@localhost opt]# echo ${#abc[*]}


读取某下标赋值

基本格式
${数组名[下标]}
例如
[root@localhost opt]# echo ${abc[1]}
20
[root@localhost opt]# echo ${abc[0]}
10
[root@localhost opt]# echo ${abc[1]}
20
[root@localhost opt]# echo ${abc[2]}
30

## 3.4：求数组最大值
#!/bin/bash
score=(34 88 99 54 76)
temp=0
for ((i=0;i
</code></pre>

<h2 id="3-5创建任意数字及长度的数组-根据客户要求加入元素">3.5创建任意数字及长度的数组，根据客户要求加入元素</h2>

<pre><code>[root@ shanan ~]# vi chuangjian.sh
#!/bin/bash
#创建任意数字及长度的数组，根据客户需求加入元素
i=0
#数组下标
while true
#保持为真，死循环
do
  read -p &quot;是否加入元素 （yes/no）: &quot; doing
  if [ $doing == &quot;no&quot; ]; then
    break
  fi
  read -p &quot;请存入第$[$i+1]个元素： &quot; key
   arr[$i]=$key
   let i++
done
echo ${arr[*]}

运行结果
[root@ shanan ~]# sh chuangjian.sh 
是否加入元素 （yes/no）: yes
请存入第1个元素： 1
是否加入元素 （yes/no）: yes
请存入第2个元素： 2
是否加入元素 （yes/no）: yes
请存入第3个元素： 3
是否加入元素 （yes/no）: yes
请存入第4个元素： 4
是否加入元素 （yes/no）: yes
请存入第5个元素： 5
是否加入元素 （yes/no）: no
1 2 3 4 5
</code></pre>

<h2 id="3-6创建存放-1-100-奇数的数组">3.6创建存放（1-100）奇数的数组</h2>

<pre><code>[root@ shanan ~]# vi c100.sh
#!/bin/bash
#创建存放（1-100）奇数的数组
k=0
j=1
for ((i=0;i&lt;=99;i++));do
    k=$[$i+$j]
    let j++
#最大元素不能超过100
 if [ $k -le 100 ];then
     arr[$i]=$k
   fi
done
echo ${arr[*]}
运行结果：
[root@ shanan ~]# sh c100.sh 
1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
</code></pre>

<h2 id="3-7判断数组内元素是否大于60-未满足60直接赋予60">3.7判断数组内元素是否大于60，未满足60直接赋予60</h2>

<pre><code>[root@ shanan ~]# vi s60.sh
#!/bin/bash
#原始数组
score=( 50 98 56 87 43 )
#遍历数组
for ((i=0;i&lt;${#score[*]};i++ ));do
#判断是否大于60，未满足60直接赋予60
  if [ ${score[$i]} -lt 60 ];then
   new[$i]=60
  else
    new[$i]=${score[$i]}
   fi
done
echo ${new[*]}
~               
运行结果：
[root@ shanan ~]# sh s60.sh 
60 98 60 87 60

从小到大，冒泡排序
[root@ shanan ~]# vi paixu.sh
#!/bin/bash
score=(72 63 88 91 45)
#外层一轮
for ((i=1;i&lt;${#score[*]};i++));do
#内层一次
for ((j=0;j&lt;${#score[*]}-i;j++));do
#两数交换
   if [ ${score[$j]} -gt ${score[`expr $j + 1`]} ];then
   tmp=${score[`expr $j + 1`]}
   score[`expr $j + 1`]=${score[$j]}
   score[$j]=$tmp
   fi
   done
done
 echo ${score[*]}
运行结果：
[root@ shanan ~]# sh paixu.sh
45 63 72 88 91
</code></pre>

<h2 id="3-8-自动输入创建数组-自动从小到大排序">3.8 自动输入创建数组，自动从小到大排序</h2>

<pre><code>#!/bin/bash
#创建任意数字及长度的数组，根据客户需求加入元素
i=0
#数组下标
while true
#保持为真，死循环
do
  read -p &quot;是否加入元素 （yes/no）: &quot; doing
  if [ $doing == &quot;no&quot; ]; then
    break
  fi
  read -p &quot;请存入第$[$i+1]个元素： &quot; key
   score[$i]=$key
   let i++
done
for ((i=1;i&lt;${#score[*]};i++));do
#内层一次
for ((j=0;j&lt;${#score[*]}-i;j++));do
#两数交换
   if [ ${score[$j]} -gt ${score[`expr $j + 1`]} ];then
   tmp=${score[`expr $j + 1`]}
   score[`expr $j + 1`]=${score[$j]}
   score[$j]=$tmp
   fi
   done
done
 echo ${score[*]}
运行结果：
[root@ shanan ~]# vi chuangjian.sh 
[root@ shanan ~]# sh chuangjian.sh 
是否加入元素 （yes/no）: yes
请存入第1个元素： 4
是否加入元素 （yes/no）: yes
请存入第2个元素： 6
是否加入元素 （yes/no）: yes
请存入第3个元素： 8
是否加入元素 （yes/no）: yes
请存入第4个元素： 2
是否加入元素 （yes/no）: no
2 4 6 8
</code></pre>

<h2 id="3-9-删除数组中小于60的数字">3.9 删除数组中小于60的数字</h2>

<pre><code>[root@ shanan ~]# vi shanchu.sh
#!/bin/bash
arr=(67 44 88 52 93 55 59)
i=0
for v in ${arr[*]};do
    if [ $v -lt 60 ]; then
    unset arr[$i]
    fi
    let i++
    #echo ${#arr[*]}
done
echo ${arr[*]} 
运行结果
[root@ shanan ~]# sh shanchu.sh 
67 88 93
</code></pre>

<h2 id="4-0-数组由大到小排序">4.0 数组由大到小排序</h2>

<pre><code>[root@ shanan ~]# vi daxiao.sh

#!/bin/bash
num=(10 60 100 90 80 70 65 59 89 56)
#temp=0
for ((i=0;i&lt;${#num[*]};i++))
do
   for  ((j=$i+1;j&lt;${#num[*]};j++))
   do
      if [ ${num[$i]} -gt ${num[$j]} ];then
      temp=${num[$i]}
      let num[$i]=${num[$j]}
      let num[$j]=temp
      #else
      #temp=${num[$i]}
      fi
   done
done
echo ${num[*]}

运行结果》：
[root@ shanan ~]# sh daxiao.sh 
10 56 59 60 65 70 80 89 90 100
</code></pre>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>