<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell编程规范与变量shell编程规范管道重定向用法shell脚本变量 | 开发者问答集锦</title>
    <meta property="og:title" content="shell编程规范与变量shell编程规范管道重定向用法shell脚本变量 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell编程规范与变量shell编程规范管道重定向用法shell脚本变量">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83%E4%B8%8E%E5%8F%98%E9%87%8Fshell%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83%E7%AE%A1%E9%81%93%E9%87%8D%E5%AE%9A%E5%90%91%E7%94%A8%E6%B3%95shell%E8%84%9A%E6%9C%AC%E5%8F%98%E9%87%8F/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">shell编程规范与变量shell编程规范管道重定向用法shell脚本变量</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h3 id="文章目录">文章目录</h3>

<ul>
<li>一、 shell脚本与编程规范

<ul>
<li>1.1 shell脚本</li>
<li>1.2 shell编程规范</li>
<li>1.3 shell脚本的执行</li>
</ul></li>
<li>二、 管道与重定向

<ul>
<li>2.1 管道操作

<ul>
<li>2.1.1 管道符号与正则表达式的应用实例</li>
</ul></li>
<li>2.2 重定向操作

<ul>
<li>2.2.1 重定向输入</li>
<li>2.2.2 重定向输出</li>
<li>2.2.3 错误重定向</li>
</ul></li>
</ul></li>
<li>三、 shell脚本变量

<ul>
<li>3.1 自定义变量</li>
<li>3.2 变量复制的特殊操作

<ul>
<li>3.2.1 双引号（&rdquo;）</li>
<li>3.2.2 单引号(&lsquo;)</li>
<li>3.2.3 反撇号（`）</li>
<li>3.2.4 read命令</li>
<li>3.2.5 设置变量作用范围</li>
<li>3.2.6 数值变量的简单运算</li>
</ul></li>
</ul></li>
<li>三、 特殊变量

<ul>
<li>3.1 环境变量</li>
<li>3.2 位置变量</li>
<li>3.3 预定义变量</li>
</ul></li>
</ul>

<h1 id="一-shell脚本与编程规范">一、 shell脚本与编程规范</h1>

<p>在一些复杂Linux维护工作中，会有大量的重复性工作和交互操作，如果一直用人工的方式操作，不但费时费力，还容易出错，而编写一个shell脚本程序就可以很好的解决这个问题。</p>

<h2 id="1-1-shell脚本">1.1 shell脚本</h2>

<p>shell脚本（Shell Script）就是将一个要执行的命令按顺序保存在一个文本文件中，并给该文件一个可执行权限，方便一次性执行的一个程序文件。<br />
shell脚本主要是方便管理员进行设置或者管理用的。但是它比Windows下的批处理更强大，比用其他编程程序编辑的程序效率更高，它使用了Linux/Unix下的命令。</p>

<h2 id="1-2-shell编程规范">1.2 shell编程规范</h2>

<p>shell介于操作系统内核与用户之间，充当这“翻译官”的角色，负责接收用户输入的操作指令并进行解释，传递给内核执行，执行输出结果。<br />
我们可以通过查看/etc/shells可以了解当前系统所支持的shell脚本种类。<br />
<a href="https://img.it610.com/image/info8/0f4b38c0e7c046ed9589b40e262564fb.jpg"><img src="https://img.it610.com/image/info8/0f4b38c0e7c046ed9589b40e262564fb.jpg" alt="shell编程--
规范与变量（shell编程规范，管道、重定向用法，shell脚本变量）_第1张图片" /></a><br />
/bin/bash是目前大多数Linux版本默认的shell脚本。<br />
一个合格的shell脚本程序应该遵循标准的脚本结构，而且能够输出友好的提示信息、更容易让人读懂。<br />
shell脚本的第一行是“#！/bin/bash”，这是一行特殊的脚本声明，表明此后的语句都是用/bin/bash程序来执行；以“#”开头的语句表示注释信息；echo命令用于输出字符串，让脚本更容易让人读懂。</p>

<pre><code>没有经过优化的简单shell脚本
[root@localhost ~]# vi first.sh 
#!/bin/bash     声明环境变量
cd /etc         到/etc目录下
pwd             打印当前位置
grep &quot;bash&quot; /etc/passwd | wc -l          筛选出 /etc/passwd文件中含bash的行数
</code></pre>

<p>执行结果如下<br />
<a href="https://img.it610.com/image/info8/fc848f99720a4b8ea1616cdbf95b223d.png"><img src="https://img.it610.com/image/info8/fc848f99720a4b8ea1616cdbf95b223d.png" alt="在这里插入图片描述" /></a><br />
优化过后</p>

<pre><code>[root@localhost ~]# vi first.sh 
#!/bin/bash
cd /etc
echo &quot;当前目录位于：&quot;
pwd
echo &quot;/etc/passwd文件中含有bash的行数为：&quot;
grep &quot;bash&quot; /etc/passwd | wc -l                              
</code></pre>

<p>优化后的结果<br />
<a href="https://img.it610.com/image/info8/22d08663baa14802905e0f0475028478.png"><img src="https://img.it610.com/image/info8/22d08663baa14802905e0f0475028478.png" alt="shell编程--
规范与变量（shell编程规范，管道、重定向用法，shell脚本变量）_第2张图片" /></a></p>

<h2 id="1-3-shell脚本的执行">1.3 shell脚本的执行</h2>

<p>执行的方式有三种，我以first.sh脚本文件为例，这里脚本文件的绝对路径与相对路径都可以使用。</p>

<ul>
<li>第一种方法：./ first.sh</li>
<li>第二种方法：sh first.sh</li>
<li>第三种方法：source first.sh 或者 . first.sh</li>
</ul>

<p>三种方法的不同点在于：</p>

<ul>
<li>第一种方法需要被赋予可执行权，也就是x权限。</li>
<li>第二种方法可以不需要执行权限</li>
<li>第三种方法也可以不需要执行权限，但是环境会随着脚本中的内容而变化。</li>
</ul>

<h1 id="二-管道与重定向">二、 管道与重定向</h1>

<p>管道与重定向主要是帮助我们对信息进行提取与过滤。</p>

<h2 id="2-1-管道操作">2.1 管道操作</h2>

<p>对于已经接触脚本的朋友，管道符号一定不会陌生，管道符号“<br />
|”在我们键盘enter的上方。位于管道符号左侧的命令输出的结果作为右侧命令的输入（处理对象），就拿上面写好的脚本&rdquo;grep “bash”
/etc/passwd | wc -l &ldquo;的管道符号为例子。<br />
管道符号左边的grep “bash” /etc/passwd就是筛选出/etc/passwd中含有&rdquo;bash&rdquo;字符串的文件，这些文件作为&rdquo;wc
-l&rdquo;命令的作用对象，也就是将前面输出的文件的行数统计出来。</p>

<pre><code>管道符号的基本使用格式
command命令1 | command命令2 | command命令3 ...|command命令n
</code></pre>

<p>管道符号不限使用的次数，从左往右按顺序依次执行过去。</p>

<h3 id="2-1-1-管道符号与正则表达式的应用实例">2.1.1 管道符号与正则表达式的应用实例</h3>

<p>我们在排错的过程中，通常只是想看到关键的信息，对于那些很长的内容，我们就可以将管道符号与正则表达式结合在一起使用，可以更方便我们过滤关键信息。</p>

<pre><code>[root@localhost ~]# grep &quot;bash$&quot; /etc/passwd    查找/etc/passwd文件中以&quot;bash&quot;结尾的文件
root:x:0:0:root:/root:/bin/bash
shi:x:1000:1000:shi:/home/shi:/bin/bash
</code></pre>

<p>我们只需要看筛选出文件中的第一列和第七列的内容</p>

<pre><code>[root@localhost ~]# grep &quot;bash$&quot; /etc/passwd | awk -F: '{print $1,$7}'   awk为正则表达式，作用是以”：“作为分隔，输出第一和第七区域的字符串，-F是指定分隔符号（未指定时表示以空格和制表符分隔）
root /bin/bash
shi /bin/bash
</code></pre>

<p>如果我们想要查看挂载的/dev/cdrom已用空间所占的百分比，我们同样可以使用正则表达式与管道符号</p>

<pre><code>[root@localhost ~]# df -Th
文件系统       类型      容量  已用  可用 已用% 挂载点
/dev/sda3      xfs       295G  8.5G  287G    3% /
devtmpfs       devtmpfs  1.9G     0  1.9G    0% /dev
tmpfs          tmpfs     1.9G     0  1.9G    0% /dev/shm
tmpfs          tmpfs     1.9G   13M  1.9G    1% /run
tmpfs          tmpfs     1.9G     0  1.9G    0% /sys/fs/cgroup
/dev/sr0       iso9660   4.3G  4.3G     0  100% /mnt
/dev/sda1      xfs      1014M  174M  841M   18% /boot
tmpfs          tmpfs     378M  4.0K  378M    1% /run/user/42
tmpfs          tmpfs     378M   40K  378M    1% /run/user/0
[root@localhost ~]# df -Th |grep &quot;sr0&quot;| awk '{print $6}'   
100%
</code></pre>

<h2 id="2-2-重定向操作">2.2 重定向操作</h2>

<p>用户通过操作系统处理信息的过程中，包括以下几类交互设备文件：</p>

<ul>
<li>标准输入（STDIN）：默认的设备是键盘，文件编号是0，命令将从标准输入文件中读取在执行过程中需要的输入数据。</li>
<li>标准输出（STDOUT）：默认的设备是显示器，文件编号为1，命令将执行后的输出结果发送到标准输出文件。</li>
<li>标准错误（STDERR）：默认的设备是显示器，文件编号为2，命令将执行期间的各种错误信息发送到标准错误文件。</li>
<li>在实际的Linux系统维护中，可以改变输入、输出内容的方向，而不使用默认的标准输入、输出设备（键盘和显示器），这种操作叫做”重定向“。</li>
</ul>

<h3 id="2-2-1-重定向输入">2.2.1 重定向输入</h3>

<p>重定向输入指的是将命令中接受输入的途径由默认的键盘改为指定的文件，而不是等待从键盘输入。<br />
重定向输入使用” 重定向符号可以用来为用户设置密码。</p>

<pre><code>[root@localhost ~]# vi passwd.txt
Abc123
[root@localhost ~]# passwd --stdin shi &lt; passwd.txt 
更改用户 shi 的密码 。
passwd：所有的身份验证令牌已经成功更新。
</code></pre>

<p>这种设置密码的方式免去了之前用”passwd“命令的两次输入密码的过程，减少了交互过程，提高了脚本的执行效率。</p>

<h3 id="2-2-2-重定向输出">2.2.2 重定向输出</h3>

<p>重定向输出是指将命令输出的结果保存到指定的文件中，不会显示在显示器的屏幕上。重定向输出使用“&gt;”或“&gt;&gt;”符号，分别表示覆盖文件、追加文件。<br />
当重定向输出的目标文件存在时，使用“&gt;”会覆盖原文件，“&gt;&gt;”就会追加到文件的尾部；如果目标文件不存在，就会新建一个文件，将输出的结果写入新文件。</p>

<pre><code>[root@localhost opt]# ls
httpd-2.4.25  httpd-2.4.25.tar.gz  rh
[root@localhost opt]# df -Th | grep sr0 | awk '{print $6}'
100%
[root@localhost opt]# df -Th | grep sr0 | awk '{print $6}' &gt; new.txt   创建了一个新文件，并将输出结果写进去
[root@localhost opt]# cat new.txt 
100%
[root@localhost opt]# df -Th | grep sda1 | awk '{print $7}'  
/boot
[root@localhost opt]# df -Th | grep sda1 | awk '{print $7}' &gt; new.txt   覆盖了原来的文件
[root@localhost opt]# cat new.txt 
/boot
[root@localhost opt]# df -Th | grep sr0 | awk '{print $7}' &gt;&gt; new.txt    追加到文件的底部
[root@localhost opt]# cat new.txt 
/boot
/mnt
</code></pre>

<h3 id="2-2-3-错误重定向">2.2.3 错误重定向</h3>

<p>错误重定向是指将执行命令过程中出现的错误信息保存到指定的文件中，不显示在屏幕上。错误重定向符是“2&gt;”，2是指错误文件的编号。也就是标准错误（STDERR）。<br />
<strong>错误重定向符“2 &gt;”与重定向输出符号“&gt;”用法相似，都会覆盖原来文件，如果要追加到文件中，可以使用“2&gt;&gt;”操作符。</strong><br />
在我们工作中，一般用这个来收集程序执行的错误信息，以便于排错；对于shell脚本，我们也可以将无关紧要的消息放到/dev/null中，保持清洁。/dev/null就像是一个黑洞，任何文件进去都会被消化掉。</p>

<pre><code>[root@localhost opt]# ls
httpd-2.4.25  httpd-2.4.25.tar.gz  rh
[root@localhost opt]# tar jcf /httpd-2.4.25    故意输错的命令，得到下面的报错信息
tar: 谨慎地拒绝创建空归档文件
请用“tar --help”或“tar --usage”获得更多信息。
[root@localhost opt]# tar jcf /httpd-2.4.25 2&gt; error.txt   将报错信息保存到error.txt中
[root@localhost opt]# cat error.txt     查看保存的错误信息
tar: 谨慎地拒绝创建空归档文件
请用“tar --help”或“tar --usage”获得更多信息。
[root@localhost opt]# cd /error.txt  
-bash: cd: /error.txt: 没有那个文件或目录
[root@localhost opt]# cd /error.txt 2&gt;&gt; error.txt      将报错信息追加到error.txt文件中
[root@localhost opt]# cat error.txt 
tar: 谨慎地拒绝创建空归档文件
请用“tar --help”或“tar --usage”获得更多信息。
-bash: cd: /error.txt: 没有那个文件或目录
</code></pre>

<h1 id="三-shell脚本变量">三、 shell脚本变量</h1>

<p>shell变量用来存放系统和用户需要使用的特定参数，这些参数随着用户的设定或系统环境的变化而变化，shell变量的使用能够提供更强的适应性与功能。</p>

<h2 id="3-1-自定义变量">3.1 自定义变量</h2>

<p>就像字面意思一样，自己定义的变量，只在自己的shell环境有用，又叫做本地变量。相比于其他高级编程语言（C语言、JAVA语言等）来说，Bash中的环境变量相对简单了很多，不需要提前声明，直接指定变量名并赋值就行。</p>

<pre><code>bash环境定义变量的基本格式
变量名=变量值   
其中“=”是赋值符号，变量名需要以字母或者下划线开头，不能包含特殊字符。
</code></pre>

<p>我们定义后的变量会保存在内存中，直到我们关机，变量才会失效。查看我们已经定义的变量时，要在我们已经定义的变量前加上“$”符号，用“echo”命令。</p>

<pre><code>[root@localhost ~]# variable=study    定义变量variable，并赋值为study
[root@localhost ~]# days=10            定义变量days，并复制为10
[root@localhost ~]# echo $variable      查看变量variable
study
[root@localhost ~]# echo $variabledays   查看变量variabledays，我们并没有定义这个变量，所以结果为空

[root@localhost ~]# echo $variable days   每一个不同的变量，都要在前面加上一个“$”符号
study days
[root@localhost ~]# echo $variable$days  查看变量variable与变量days
study10
</code></pre>

<h2 id="3-2-变量复制的特殊操作">3.2 变量复制的特殊操作</h2>

<h3 id="3-2-1-双引号">3.2.1 双引号（&rdquo;）</h3>

<p>双引号主要是起界定字符串的作用，当要赋值的内容含有空格的时候，必须以双引号括起来，否则会出现赋值不成功的情况。</p>

<pre><code>[root@localhost ~]# weixin=nice days     错误赋值
bash: days: 未找到命令...
[root@localhost ~]# weixin=&quot;nice days&quot;   正确赋值
[root@localhost ~]# echo weixin
weixin
</code></pre>

<p>双引号的另外一种用法就是，在双引号的范围内可以引用其他的变量，也就是调用其他的变量的值赋予给新的变量。</p>

<pre><code>[root@localhost ~]# weixin=&quot;nice days&quot;      赋予$weixin值
[root@localhost ~]# echo $weixin
nice days
[root@localhost ~]# QQ=&quot;$weixin is today&quot;   将$weixin的值赋予给QQ
[root@localhost ~]# echo $QQ
nice days is today
</code></pre>

<h3 id="3-2-2-单引号">3.2.2 单引号(’)</h3>

<p>当我们想要赋予给变量的值含有特殊字符，比如“$”、“\”等特殊字符时，就可以使用单引号。在单引号的范围内，无法引用任何变量的值，所有的特殊符号都将被看做普通字符。<br />
如果我们想要赋值的内容含有单引号，要与转义字符搭配使用“’”。<br />
就将上面的例子用单引号演示。</p>

<pre><code>[root@localhost ~]# echo $weixin
nice days
[root@localhost ~]# qq='$weixin is today'   赋值给qq，但是单引号内不能引用其他变量值
[root@localhost ~]# echo $qq
$weixin is today
</code></pre>

<h3 id="3-2-3-反撇号">3.2.3 反撇号（`）</h3>

<p>反撇号主要是用于命令替换，允许将某个命令执行的结果赋值给变量。反撇号范围内必须是可以执行的命令行。反撇号在键盘“tab”键的上方。<br />
反撇号的作用可以用“$()”代替，“ $()”还可以实现嵌套命令，这个在之后的博客中会由体现。</p>

<pre><code>[root@localhost ~]# num=`ps -aux | wc -l`
[root@localhost ~]# echo $num
225
[root@localhost ~]# num=$(ps -aux | wc -l)
[root@localhost ~]# echo $num
225
</code></pre>

<h3 id="3-2-4-read命令">3.2.4 read命令</h3>

<p>read命令同样可以给变量赋值，read命令用来提示用户输入信息，实现简单的交互过程。</p>

<pre><code>[root@localhost ~]# read num1
hello word      输入read命令后，在键盘输入赋予变量num1的内容
[root@localhost ~]# echo $num1
hello word
[root@localhost ~]# read num num1     read命令以空格为分隔符
hello word                            赋予的值分别赋予两个变量
[root@localhost ~]# echo $num 
hello
[root@localhost ~]# echo $num1
word
</code></pre>

<p>read命令可以结合“-p”、“-t”选项来设置提示信息与输入等待时间（默认是秒）。</p>

<pre><code>[root@localhost ~]# read -p &quot;请输入赋予的值:&quot; num3   设置要提示的信息是&quot;请输入赋予的值:&quot;
请输入赋予的值:17  出现提示信息，并输入赋值
[root@localhost ~]# echo $num3
17
[root@localhost ~]# read -t &quot;5&quot; num4   等待5秒后不输入，自动结束
[root@localhost ~]# echo $num4   查看不到任何赋值
</code></pre>

<h3 id="3-2-5-设置变量作用范围">3.2.5 设置变量作用范围</h3>

<p>默认情况下，设置的变量只在当前shell环境有效，也可以成为局部变量。我们可以使用内部命令“export”来声明变量为全局；同样的，export也可以为变量赋值。</p>

<pre><code>[root@localhost ~]# echo $QQ    查看变量QQ的赋值
nice days is today
[root@localhost ~]# bash        切换一个子bash环境
[root@localhost ~]# echo $QQ    查看变量QQ的赋值，在这个子bash环境中我们没有定义QQ这个变量 
[root@localhost ~]# exit        退出当前子bash环境，返回原来的bash环境
exit
[root@localhost ~]# echo $QQ    查看变量QQ的赋值
nice days is today
[root@localhost ~]# export QQ   全局声明变量QQ
[root@localhost ~]# bash        切换到子bash环境
[root@localhost ~]# echo $QQ    查看变量QQ的赋值
nice days is today
</code></pre>

<h3 id="3-2-6-数值变量的简单运算">3.2.6 数值变量的简单运算</h3>

<table>
<thead>
<tr>
<th>+</th>
<th>加法</th>
</tr>
</thead>

<tbody>
<tr>
<td>_</td>
<td>减法</td>
</tr>

<tr>
<td>*</td>
<td>乘法</td>
</tr>

<tr>
<td>/</td>
<td>除法</td>
</tr>

<tr>
<td>%</td>
<td>取余</td>
</tr>

<tr>
<td>==</td>
<td>等于</td>
</tr>

<tr>
<td>！=</td>
<td>不等于</td>
</tr>
</tbody>
</table>

<p>expr表示整数变量的运算，也可以用(())、let等。</p>

<pre><code>[root@localhost ~]# expr 1 + 2   运算之间一定要加空格
3
[root@localhost ~]# num1=`expr 1 \* 7`   
[root@localhost ~]# echo $num1
7
[root@localhost ~]# num2=$((2**3*2))   表示赋予的值是2的3次方乘2
[root@localhost ~]# echo $num2
16
</code></pre>

<h1 id="三-特殊变量">三、 特殊变量</h1>

<h2 id="3-1-环境变量">3.1 环境变量</h2>

<p>Linux系统里的env命令可以显示当前用户的环境变量，还可以用来在指定环境变量下执行其他命令。</p>

<pre><code>[root@localhost ~]# env    查看当前环境的环境变量
XDG_SESSION_ID=120
HOSTNAME=localhost.localdomain
SELINUX_ROLE_REQUESTED=
SHELL=/bin/bash
TERM=xterm
HISTSIZE=1000
SSH_CLIENT=14.0.0.1 4757 22
SELINUX_USE_CURRENT_RANGE=
SSH_TTY=/dev/pts/2
USER=root
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:
QQ=nice days is today
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
MAIL=/var/spool/mail/root
PWD=/root
LANG=zh_CN.UTF-8
SELINUX_LEVEL_REQUESTED=
HISTCONTROL=ignoredups
HOME=/root
SHLVL=2
LOGNAME=root
SSH_CONNECTION=14.0.0.1 4757 14.0.0.14 22
XDG_DATA_DIRS=/root/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share:/usr/share
LESSOPEN=||/usr/bin/lesspipe.sh %s
DISPLAY=localhost:11.0
XDG_RUNTIME_DIR=/run/user/0
_=/usr/bin/env
</code></pre>

<p>我们熟悉的变量有USER（表示用户名称）、HOME(表示用户的宿主目录)、LANG(表示语言个字符集)、PWD（表示当前所在工作目录）、PATH(表示命令搜索路径)等等。</p>

<pre><code>[root@localhost ~]# ls -lh ~/first.sh     查看脚本文件的位置
-rwxrwxrwx. 1 root root 138 7月  15 19:43 /root/first.sh
[root@localhost ~]# first.sh             不能以文件名运行脚本文件
bash: first.sh: 未找到命令...
[root@localhost ~]# PATH=&quot;$PATH:/root&quot;   将/rrot添加到PATH的搜索路径
[root@localhost ~]# first.sh             可以直接以文件名运行脚本
当前目录位于：
/etc
/etc/passwd文件中含有bash的行数为：
2
</code></pre>

<p>还有一种方法可以永久对环境变量进行修改，当然就是修改配置文件。环境变量的全局配置文件在/etc/profile中，作用于全局；每个用户还有属于自己的环境变量配置文件~/.bash_profile中。通过修改配置文件，也可以达到修改环境变量的目的。</p>

<h2 id="3-2-位置变量">3.2 位置变量</h2>

<p>为了我们在执行shell脚本程序时，方便通过命令行为程序提供操作参数，bash引入了位置变量。当我们在执行一条命令时，第一个字段通常是命令名或脚本程序名，这个字段就是我们预定义变量$0，虽然格式与位置变量相同，但是
$0是预定义变量，这一点要区分开。接下来从左到右依次用$1、$2、$3…$9表示。</p>

<pre><code>[root@localhost ~]# vi second.sh
#!/bin/bash
sum=`expr $1 + $2`
echo $sum
[root@localhost ~]# chmod +x second.sh 
[root@localhost ~]# ./second.sh  12 34     $1=12、$2=34
46
[root@localhost ~]# ./second.sh 34 56      $1=34、$2=56
90
</code></pre>

<h2 id="3-3-预定义变量">3.3 预定义变量</h2>

<p>预定义变量是bash程序预先定义好的一类特殊变量，用户只能使用，不能创建，也不能直接为预定义变量赋值，常见的几个预定义变量如下：</p>

<ol>
<li>$#：命令行中位置变量的个数</li>
<li>$*：所有位置变量的内容</li>
<li>$?：上一条命令执行后返回的状态，当返回状态值为0时表示正常，非0值表示执行异常或出错</li>

<li><p>$0：当前执行的进程/程序名<br />
我们在上一个shell脚本中进行修改，这里的简单应用就是属于预定义变量的使用，你仔细品。</p>

<p>[root@localhost ~]# vi second.sh
#!/bin/bash
sum=<code>expr $1 + $2</code>
echo $sum
echo &ldquo;共执行$0脚本&rdquo;
echo &ldquo;共完成$#个对象的计算&rdquo;
echo &ldquo;具体内容包括:$*&rdquo;
[root@localhost ~]# ./second.sh 34 56
90
共执行./second.sh脚本
共完成2个对象的计算
具体内容包括:34 56</p>

<p>[root@localhost ~]# vi second.sh
#!/bin/bash
sum=<code>expr $1 + $2 + $3</code>
echo $sum
echo &ldquo;共执行$0脚本&rdquo;
echo &ldquo;共完成$#个对象的计算&rdquo;
echo &ldquo;具体内容包括:$*&rdquo;
[root@localhost ~]# ./second.sh 34 56 10
100
共执行./second.sh脚本
共完成3个对象的计算
具体内容包括:34 56 10
[root@localhost ~]#</p></li>
</ol>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>