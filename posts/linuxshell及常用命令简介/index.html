<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>LinuxShell及常用命令简介 | 开发者问答集锦</title>
    <meta property="og:title" content="LinuxShell及常用命令简介 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="LinuxShell及常用命令简介">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/linuxshell%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%AE%80%E4%BB%8B/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">LinuxShell及常用命令简介</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>转自：<a href="http://lovechance.ellechina.com/forums/posts/624390.aspx">http://lovechance.ellechina.com/forums/posts/624390.aspx</a></p>

<p>一、文件目录类命令<br />
1、 查看联机帮助信息<br />
man 命令 如：#man ls<br />
info 命令 如：#info cd<br />
2、列出当前目录或指定目录的文件名和目录名<br />
ls [选项] 文件或目录<br />
常用[选项]如下：<br />
-a:显示所有的文件，包括以“.”开头的隐含文件。<br />
-l:长格式输出</p>

<p>-m:宽行输出<br />
-F:以各种符号表示不同的文件类型<br />
--color:彩色输出<br />
-R:递归输出<br />
3、touch<br />
功能：修改文件的创建日期或以当前系统日期创建一个空文件。<br />
-d:修改文件的日期。<br />
#touch –d 20030123 test.txt</p>

<p>4、cp<br />
功能：复制文件<br />
用法：cp [选项] 源文件或目录 目标文件或目录<br />
选项：<br />
a： 该选项通常在拷贝目录时使用。它保留链接、文件属性，并递归地拷贝目录，其作用等于dpR选项的组合。<br />
- d 拷贝时保留链接。<br />
- f 删除已经存在的目标文件而不提示。<br />
- i 和f选项相反，在覆盖目标文件之前将给出提示要求用户确认。回答y时目标文件将被覆盖，是交互式拷贝。<br />
- p 此时cp除复制源文件的内容外，还将把其修改时间和访问权限也复制到新文件中。<br />
- r 若给出的源文件是一目录文件，此时cp将递归复制该目录下所有的子目录和文件。此时目标文件必须为一个目录名。</p>

<p>5、mv<br />
功能：给文件或目录改名或将一个文件或目录移到另一个目录<br />
用法：mv [选项] 源文件或目录 目标文件或目录<br />
-i 交互方式操作。如果mv操作将导致对已存在的目标文件的覆盖，此时系统询问是否重写，要求用户回答y或n，这样可以避免误覆盖文件。<br />
- f 禁止交互操作。在mv操作要覆盖某已有的目标文件时不给任何指示，指定此选项后，i选项将不再起作用。</p>

<p>6、rm<br />
功能：删除文件或目录<br />
用法：rm [选项] 文件…<br />
- f 强制删除<br />
- r 指示rm将参数中列出的全部目录和子目录均递归地删除。<br />
- i 进行交互式删除</p>

<p>7、cd<br />
功能：改变工作目录。<br />
语法：cd [directory]<br />
用法：<br />
#cd ..返回上一层目录<br />
#cd ~进入自家目录<br />
8、pwd<br />
功能：显示当前工作目录<br />
用法：#pwd</p>

<p>9、mkdir<br />
功能：创建一个目录（类似MSDOS下的md命令）。<br />
语法：mkdir [选项] dir-name<br />
- m 对新建目录设置存取权限。也可以用chmod命令设置。<br />
- p 可以是一个路径名称。此时若路径中的某些目录尚不存在， 加上此选项后， 系统将自动建立好那些尚不存在的目录，即一次可以建立多个目录。<br />
#mkdir –m a=rwx test<br />
#mkdir –m u=rwx,g=rx,o=rx test1<br />
#mkdir –m 755 test2<br />
#mkdir –p test3/test4(test3和test4均为新目录）</p>

<p>10、rmdir<br />
功能：删除空目录。<br />
语法：rmdir [选项] dir-name<br />
- p 递归删除目录dirname，当子目录删除后其父目录为空时，也一同被删除。<br />
11、file<br />
功能：查看文件类型<br />
语法：file 文件名</p>

<p>12、cat<br />
功能：查看文本文件的内容<br />
语法：cat 文件名<br />
13、more<br />
功能：分屏显示文本文件的内容。<br />
14、less<br />
功能：显示文本文件的内容，可使用pageup和pagedown上翻页下翻页。</p>

<p>15、head<br />
功能：查看文件的开头部分内容<br />
语法：head [行数] 文件名<br />
用法：#head test.txt:显示前10行内容<br />
#head -20 test.txt 显示前20行内容。<br />
16、tail<br />
功能：查看文件的结尾部分内容。<br />
语法：tail [行数] 文件名<br />
默认的行数为10行。</p>

<p>17、sort<br />
功能：对文本文件中的各行进行排序<br />
用法：sort 文件名<br />
例：#sort 123.txt &gt;456.txt 将123.txt排序后重定向到456.txt文件中。<br />
18、uniq<br />
功能：将重复行从输出文件中删除，只留下每条记录的唯一样本<br />
语法： uniq 文件名<br />
#uniq 456.txt文件中的重复行删除后输出</p>

<p>19、pr<br />
功能：处理文件以便打印，输出到标准输出<br />
语法：pr [参数] 文件名列表<br />
[参数]<br />
-d:将输出的每一行后加一新的空白行<br />
-n:输出行号<br />
如：#pr –n 123.txt</p>

<p>20、ln<br />
功能：建立链接文件<br />
语法：ls [-s] 源文件名 目标文件名<br />
说 明：链接文件分为硬连接和软连接，硬连接相当于一个数据源有两个文件名，删除一个文件另一个文件不变，修改一个文件的内容另一个文件的内容也跟着改变。硬
连接不能和另一个目录链接，也不能和其他文件系统的文件进行链接。软链接相当于快捷方式，没有上面的限制，加-s参数创建软链接。</p>

<p>21、wc<br />
功能：统计文件的行数、字符数和单词数。<br />
语法：wc [-lwc] 文件名<br />
-l: 只显示行数，-w：只显示单词数，-c：只显示字符总数。<br />
22、whatis<br />
功能：可以用一行内容显示对命令行后输入的关键词的说明。<br />
语法：whatis 关键词<br />
用法：#whatis find whereis</p>

<p>23、Whereis<br />
功能：确定指定文件的源程序/二进制程序和手册部分的位置。<br />
用法：#whereis ls<br />
24、which<br />
功能：显示可执行命令的路径和它的别名。<br />
用法：#which ls<br />
25、locate<br />
功能：可以查找具体文件或命令的路径，可以查找具体的字符串或子串<br />
用法：locate 文件名或关键字</p>

<p>26、du<br />
功能：统计文件和目录所占用的磁盘空间<br />
语法：du [-ask] 文件名或目录名<br />
-a:显示对涉及到的所有文件的统计，而不仅仅统计目录<br />
-s:只打印出合计数<br />
-k:以kB字节数显示</p>

<p>Find使用范例<br />
find . -name ls.txt<br />
find . -name ls.txt –print<br />
find / -name &lsquo;c??’ –print<br />
find / -name &lsquo;f*’ –print<br />
find . -name &lsquo;f<em>’ –exec ls –l {} /;<br />
find . -name f/</em> –ok rm {} /; （交互式提问）<br />
find . -perm 644 –mtime 4<br />
find . -name &lsquo;c??’ –o -name &rsquo;d??’</p>

<p>28、grep<br />
功能：在文件中搜寻匹配的行并进行输出<br />
语法：grep [参数]<br />
-num:输出匹配行前后各num行的内容<br />
-A num:输出匹配行后num行的内容<br />
-B num:输出匹配行前num行的内容<br />
-i：忽略大小写的区别<br />
-v:只显示出那些不包括某字串的行和文件，和默认的相反</p>

<p>二、文件压缩和归档类命令<br />
1、gzip<br />
功能：是一种压缩程序，特点是可以得到最佳的压缩率，但速度较慢。<br />
语法：gzip [-vd9] 文件名<br />
-v:冗长型选项，可以显示每个文件的大小等<br />
-d：解压<br />
-9：产生最佳压缩效果，但速度较慢。</p>

<p>2、gunzip<br />
功能：可以把压缩的文件解压成原始文件状态，可以解压扩展名为.gz,.z,.Z和.tgz等类型的压缩文件<br />
语法：gunzip [-v] 文件名<br />
-v:显示解压缩文件的冗长结果</p>

<p>3、tar<br />
功能：可以归档多个文件和目录到一个.tar文件下，还可以从一个归档文件中抽取一个文件和目录。<br />
语法：tar [-c][-r][-t][-x][-v][-z][f 文件名] 文件和目录名<br />
-c:创建归档文件<br />
-r:增加文件到归档文件中<br />
-t:查看归档文件中的文件<br />
-x：解开归档文件<br />
-v:显示冗长信息<br />
-z：进行压缩和解压</p>

<p>如： #tar –cvf back.tar 文件1 目录1 文件2<br />
#tar –rvf back.tar 文件3<br />
#tar –tf back.tar<br />
#tar –xvf back.tar<br />
#tar –czvf back.tar.gz 文件1 目录1 文件2<br />
#tar –xzvf back.tar.gz</p>

<p>4、安装以rpm方式提供的软件<br />
Rpm(the red hat package manager)是一个开放的软件包管理系统。<br />
功能：可以安装和卸载RPM包的软件<br />
#rpm –ivh *.rpm 安装RPM包；<br />
#rpm –ivh –force *.rpm 在原先安装的基础上再强行安装一次；<br />
#rpm –Uvh *.rpm 升级rpm包<br />
#rpm –qa 查找列出系统中所有安装的rpm包<br />
#rpm –q sendmail：查看sendmail包的情况<br />
#rpm –ql sendmail:查看sendmail安装的位置<br />
#rpm –e *.rpm 卸载rpm包<br />
#rpm - qlp name.rpm 查看name.rpm有哪些文件<br />
#rpm - qf name.rpm 查看已经装好的文件属于哪个rpm包<br />
#rpm2cpio filename.rpm 使用“rpm2cpio”来从RPM文档中提取文件</p>

<p>5、安装以源代码方式提供的软件<br />
（1）、解包解压：<br />
#tar –xzvf *.tar.gz 解包解压后会在当前目录下建立一个子目录,如xxxx<br />
（2）、#cd xxxx<br />
（3）、#./configure<br />
（4）、#make<br />
（5）、#make install</p>

<p>三、系统状态类命令<br />
1、dmesg<br />
功能：显示引导时内核显示的状态信息<br />
#dmesg |grep -4 “eth0”显示状态信息中与eth0相关的前后4行内容<br />
2、uname<br />
功能：显示当前的系统信息<br />
#uname -a</p>

<p>3、uptime<br />
功能：显示当前时间，自从上次重新引导之后系统运行的时间，服务器和多少用户链接以及系统前1、5、15分钟的负载信息。<br />
4、who（后面详讲）<br />
功能：显示当前登录在系统上的用户信息。<br />
-r:查看系统运行等级<br />
-w，在登录帐号后面显示一个字符来表示用户的信息状态：<br />
+：允许写信息； -：不允许写信息； ?：不能找到终端设备</p>

<p>5、w<br />
功能：查看其他登录的用户（who增强版）<br />
第一行输出内容：当前时间，系统启动到现在的时间，登录用户的数目，系统在最近1秒、5秒和15秒的平均负载<br />
第二行输出内容：登录帐号、终端名称、远程主机名、登录时间、空闲时间、JCPU、PCPU、当前正在运行进程的命令行。<br />
*JCPU时间指的是和该终端（tty）连接的所有进程占用的时间<br />
*PCPU时间则是指当前进程（即在WHAT项中显示的进程）所占用的时间</p>

<p>6、whoami<br />
功能：显示当前用户名<br />
7、hostname<br />
功能：显示系统的主机名<br />
8、cal [月份] [年份]<br />
功能：显示日历<br />
9、bc<br />
功能：计算器，使用quit退出<br />
10、date<br />
功能：显示或修改日期时间。</p>

<p>11、df<br />
功能：报告文件系统磁盘空间的使用情况<br />
语法：df[参数]<br />
[参数]<br />
-h：用常见的格式显示出大小（例如：1K,23M,2G等）<br />
-t：只显示指定类型的文件系统<br />
12、free<br />
功能：查看当前内存和交换空间的使用情况</p>

<p>四、网络类命令<br />
1、write<br />
功能：向另外一个用户发信息，以Ctrl+D作为结束，普通用户发信息受到mesg状态影响。<br />
语法：write<br />
2、wall<br />
功能：向所有用户广播信息，普通用户受到mesg状态影响。<br />
语法：wall [message]</p>

<p>3、mesg<br />
功能：显示或设置是否接受其他用户发来的信息。<br />
语法：mesg [参数]<br />
[参数]<br />
y:接受从其他用户发来的信息<br />
n：不接受从其他用户发来的信息<br />
#mesg<br />
显示当前是否接受其他用户发来的信息</p>

<p>4、ping<br />
功能：通过检查网络中其他主机的应答信息，来确认网络的连通性。<br />
语法：ping [参数] 主机名（或ip地址）<br />
参数：<br />
-c count：共发出count次信息。<br />
-R：显示路由表的详细信息</p>

<p>5、telnet<br />
功能：远程登录<br />
语法：telnet [][：端口号]<br />
6、ifconfig<br />
功能：配置网络接口<br />
语法：<br />
ifconfig [interface] [up][down][netmask mask]<br />
#ifconfig<br />
#ifconfig eth0 192.168.0.3 netmask 255.255.255.0 up</p>

<p>7、netstat<br />
功能：显示本地系统的网络连接状态<br />
语法：netstat [-a][-r][-c][-i]<br />
-a：显示所有本地系统中的网络连接<br />
-r：显示路由表<br />
-c：显示连续的网络连接状态<br />
-i：显示全部网络接口信息。</p>

<p>8、ftp<br />
功能：文件传输<br />
语法：ftp []<br />
子命令：<br />
?：列出所有的FTP命令；<br />
pwd:显示远程主机的当前目录<br />
lcd：切换和显示本机主机的当前目录<br />
ls：列出远程主机当前目录下的内容<br />
!dir:列出本机主机的当前目录下的内容<br />
cd:切换远程主机的目录</p>

<p>get:下载一个文件<br />
mget：成批下载文件<br />
put：上传一个文件<br />
mput：成批上传文件<br />
prompt：使用mget和mput时是否采用交互式询问<br />
bye：中止一个FTP连接<br />
open：打开一个FTP连接<br />
close：关闭一个FTP连接<br />
binary：采用二进制模式传输<br />
ascii：采用ascii模式传输<br />
type：查看传输模式</p>

<p>五、其他</p>

<p>passwd</p>

<p>1.作用<br />
passwd命令原来修改账户的登陆密码，使用权限是所有用户。</p>

<p>2.格式<br />
passwd [选项] 账户名称</p>

<p>3.主要参数<br />
-l：锁定已经命名的账户名称，只有具备超级用户权限的使用者方可使用。<br />
-u：解开账户锁定状态，只有具备超级用户权限的使用者方可使用。<br />
-x, &ndash;maximum=DAYS：最大密码使用时间（天），只有具备超级用户权限的使用者方可使用。<br />
-n, &ndash;minimum=DAYS：最小密码使用时间（天），只有具备超级用户权限的使用者方可使用。<br />
-d：删除使用者的密码, 只有具备超级用户权限的使用者方可使用。<br />
-S：检查指定使用者的密码认证种类, 只有具备超级用户权限的使用者方可使用。</p>

<p>4.应用实例</p>

<p>$ passwd<br />
Changing password for user cao.<br />
Changing password for cao<br />
(current) UNIX password:<br />
New UNIX password:<br />
Retype new UNIX password:<br />
passwd: all authentication tokens updated successfully.</p>

<p>从上面可以看到，使用passwd命令需要输入旧的密码，然后再输入两次新密码。</p>

<p>su</p>

<p>1.作用<br />
su的作用是变更为其它使用者的身份，超级用户除外，需要键入该使用者的密码。</p>

<p>2.格式<br />
su [选项]&hellip; [-] [USER [ARG]&hellip;]</p>

<p>3.主要参数<br />
-f ， &ndash;fast：不必读启动文件（如 csh.cshrc 等），仅用于csh或tcsh两种Shell。<br />
-l ， &ndash;login：加了这个参数之后，就好像是重新登陆为该使用者一样，大部分环境变 量（例如HOME、SHELL和USER等）都是以该使用者（USER）为主，并且工作目录也会改变。如果没有指定USER，缺省情况是root。<br />
-m， -p ，&ndash;preserve-environment：执行su时不改变环境变数。<br />
-c command：变更账号为USER的使用者，并执行指令（command）后再变回原来使用者。<br />
USER：欲变更的使用者账号，ARG传入新的Shell参数。</p>

<p>4.应用实例<br />
变更账号为超级用户，并在执行df命令后还原使用者。 su -c df root</p>

<p>umask</p>

<p>1.作用<br />
umask设置用户文件和目录的文件创建缺省屏蔽值，若将此命令放入profile文件，就可控制该用户后续所建文件的存取许可。它告诉系统在创建文件时不给谁存取许可。使用权限是所有用户。</p>

<p>2.格式<br />
umask [-p] [-S] [mode]</p>

<p>3.参数<br />
－S：确定当前的umask设置。<br />
－p：修改umask 设置。<br />
[mode]：修改数值。</p>

<p>4.说明<br />
传统Unix的umask值是022，这样就可以防止同属于该组的其它用户及别的组的用户修改该用户的文件。既然每
个用户都拥有并属于一个自己的私有组，那么这种“组保护模式”就不在需要了。严密的权限设定构成了Linux安全的基础，在权限上犯错误是致命的。需要注
意的是，umask命令用来设置进程所创建的文件的读写权限，最保险的值是0077，即关闭创建文件的进程以外的所有进程的读写权限，表示为-rw&mdash;
&mdash;-。在～/.bash_profile中，加上一行命令umask 0077可以保证每次启动Shell后, 进程的 umask权限都可以被正确设定。</p>

<p>5.应用实例</p>

<p>umask -S<br />
u=rwx,g=rx,o=rx<br />
umask -p 177<br />
umask -S<br />
u=rw,g=,o=</p>

<p>上述5行命令，首先显示当前状态，然后把umask值改为177，结果只有文件所有者具有读写文件的权限，其它用户不能访问该文件。这显然是一种非常安全的设置。</p>

<p>chgrp</p>

<p>1.作用<br />
chgrp表示修改一个或多个文件或目录所属的组。使用权限是超级用户。</p>

<p>2.格式<br />
chgrp [选项]&hellip; 组 文件&hellip;<br />
或<br />
chgrp [选项]&hellip; &ndash;reference=参考文件 文件&hellip;</p>

<p>将每个的所属组设定为。</p>

<p>3.参数<br />
-c, &ndash;changes ：像 &ndash;verbose，但只在有更改时才显示结果。<br />
--dereference：会影响符号链接所指示的对象，而非符号链接本身。<br />
-h, &ndash;no-dereference：会影响符号链接本身，而非符号链接所指示的目的地(当系统支持更改符号链接的所有者，此选项才有效)。<br />
-f, &ndash;silent, &ndash;quiet：去除大部分的错误信息。<br />
--reference=参考文件：使用的所属组，而非指定的。<br />
-R, &ndash;recursive：递归处理所有的文件及子目录。<br />
-v, &ndash;verbose：处理任何文件都会显示信息。</p>

<p>4.应用说明<br />
该命令改变指定指定文件所属的用户组。其中group可以是用户组ID，也可以是/etc/group文件中用户组
的组名。文件名是以空格分开的要改变属组的文件列表，支持通配符。如果用户不是该文件的属主或超级用户，则不能改变该文件的组。</p>

<p>5.应用实例<br />
改变/opt/local /book/及其子目录下的所有文件的属组为book，命令如下：<br />
$ chgrp - R book /opt/local /book</p>

<p>chmod</p>

<p>Chmod使用格式：<br />
Chmod [参数][模式]<br />
参数：-R：改变目录及其所有子目录的文件权限。<br />
举例：<br />
#chmod u+x inittab<br />
#chmod ug+wx,o-x inittab<br />
#chmod 0644 inittab<br />
#chmod 0755 inittab<br />
#chmod –R 700 ~</p>

<p>目录权限的补充说明：<br />
1、目录的只读访问不允许使用cd进入目录，必须要有执行的权限才能进入。<br />
2、只有执行权限只能进入目录，不能看到目录下的内容，要想看到目录下的文件名和目录名，需要可读权限。<br />
3、一个文件能不能被删除，主要看该文件所在的目录对用户是否具有写权限，如果目录对用户没有写权限，则该目录下的所有文件都不能被删除，文件所有者除外</p>

<p>对 特殊位的举例说明: 操作这些特殊位与操作文件权限的命令是一样的, 都是 chmod. 有两种方法来操作, 1) chmod u+s temp ：
为temp文件加上setuid标志. (setuid 只对文件有效) chmod g+s tempdir ：为tempdir目录加上setgid标志
(setgid 只对目录有效) chmod o+t tempdir ： 为temp文件加上sticky标志 (sticky只对目录有效)</p>

<p>2) 采用八进制方式. 对一般文件通过三组八进制数字来置标志, 如 666, 777, 644等. 如果设置这些特殊标志,
则在这组数字之外外加一组八进制数字. 如 4666, 2777等.<br />
设 置完这些标志后, 可以用 ls -l 来查看. 如果有这些标志, 则会在原来的执行标志位置上显示. 如 rwsrw-r&ndash; 表示有setuid标志
rwxrwsrw- 表示有setgid标志 rwxrw-rwt 表示有sticky标志 那么原来的执行标志x到哪里去了呢? 系统是这样规定的,
如果本来在该位上有x, 则这些特殊标志显示为小写字母 (s, s, t). 否则, 显示为大写字母 (S, S, T)</p>

<p>1.作用<br />
chmod命令是非常重要的，用于改变文件或目录的访问权限，用户可以用它控制文件或目录的访问权限，使用权限是超级用户。</p>

<p>2.格式<br />
chmod命令有两种用法。一种是包含字母和操作符表达式的字符设定法（相对权限设定）；另一种是包含数字的数字设定法（绝对权限设定）。</p>

<p>（1）字符设定法<br />
chmod [who] [+ | - | =] [mode] 文件名</p>

<p>◆操作对象who可以是下述字母中的任一个或它们的组合<br />
u：表示用户，即文件或目录的所有者。<br />
g：表示同组用户，即与文件属主有相同组ID的所有用户。<br />
o：表示其它用户。<br />
a：表示所有用户，它是系统默认值。</p>

<p>◆操作符号<br />
+：添加某个权限。<br />
-：取消某个权限。<br />
=：赋予给定权限，并取消其它所有权限（如果有的话）。</p>

<p>◆设置mode的权限可用下述字母的任意组合<br />
r：可读。<br />
w：可写。<br />
x：可执行。<br />
X：只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x属性。<br />
s：文件执行时把进程的属主或组ID置为该文件的文件属主。方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。<br />
t：保存程序的文本到交换设备上。<br />
u：与文件属主拥有一样的权限。<br />
g：与和文件属主同组的用户拥有一样的权限。<br />
o：与其它用户拥有一样的权限。<br />
文件名：以空格分开的要改变权限的文件列表，支持通配符。<br />
一个命令行中可以给出多个权限方式，其间用逗号隔开。</p>

<p>（2） 数字设定法<br />
数字设定法的一般形式为： chmod [mode] 文件名</p>

<p>数字属性的格式应为3个0到7的八进制数，其顺序是(u)(g)(o)文件名，以空格分开的要改变权限的文件列表，支持通配符。</p>

<p>数字表示的权限的含义如下：0001为所有者的执行权限；0002为所有者的写权限；0004为所有者的读权限；
0010为组的执行权限；0020为组的写权限；0040为组的读权限；0100为其他人的执行权限；0200为其他人的写权限；0400为其他人的读权
限；1000为粘贴位置位；2000表示假如这个文件是可执行文件，则为组ID为位置位，否则其中文件锁定位置位；4000表示假如这个文件是可执行文
件，则为用户ID为位置位。</p>

<p>3.实例<br />
如果一个系统管理员写了一个表格(tem)让所有用户填写，那么必须授权用户对这个文件有读写权限，可以使用命令：＃chmod 666 tem</p>

<p>上面代码中，这个666数字是如何计算出来的呢？0002为所有者的写权限，0004为所有者的读权限，0020为
组的写权限，0040为组的读权限，0200为其他人的写权限，0400为其他人的读权限，这6个数字相加就是666（注以上数字都是八进制数），结果见 图1所示。</p>

<p>图1 用chmod数字方法设定文件权限</p>

<p>从图1可以看出，tem文件的权限是-rw-rw-rw-，即用户对这个文件有读写权限。</p>

<p>如果用字符权限设定使用下面命令：<br />
＃chmod a =wx tem</p>

<p>chown</p>

<p>1.作用<br />
更改一个或多个文件或目录的属主和属组。使用权限是超级用户。</p>

<p>2.格式<br />
chown [选项] 用户或组 文件</p>

<p>3.主要参数<br />
--dereference：受影响的是符号链接所指示的对象，而非符号链接本身。<br />
-h, &ndash;no-dereference：会影响符号链接本身，而非符号链接所指示的目的地(当系统支持更改符号链接的所有者，此选项才有效)。<br />
--from=目前所有者:目前组只当每个文件的所有者和组符合选项所指定的，才会更改所有者和组。其中一个可以省略，这已省略的属性就不需要符合原有的属性。<br />
-f, &ndash;silent, &ndash;quiet：去除大部分的错误信息。<br />
-R, &ndash;recursive：递归处理所有的文件及子目录。<br />
-v, &ndash;verbose：处理任何文件都会显示信息。</p>

<p>4.说明<br />
chown将指定文件的拥有者改为指定的用户或组，用户可以是用户名或用户ID；组可以是组名或组ID；文件是以空
格分开的要改变权限的文件列表，支持通配符。系统管理员经常使用chown命令，在将文件拷贝到另一个用户的目录下以后，让用户拥有使用该文件的权限。</p>

<p>5.应用实例<br />
1.把文件shiyan.c的所有者改为wan<br />
$ chown wan shiyan.c</p>

<p>2.把目录/hi及其下的所有文件和子目录的属主改成wan，属组改成users。<br />
$ chown - R wan.users /hi</p>

<p>chattr</p>

<p>1.作用<br />
修改ext2和ext3文件系统属性(attribute)，使用权限超级用户。</p>

<p>2.格式<br />
chattr [-RV] [-+=AacDdijsSu] [-v version] 文件或目录</p>

<p>3.主要参数<br />
－R：递归处理所有的文件及子目录。<br />
－V：详细显示修改内容，并打印输出。<br />
－：失效属性。<br />
＋：激活属性。<br />
= ：指定属性。<br />
A：Atime，告诉系统不要修改对这个文件的最后访问时间。<br />
S：Sync，一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘。<br />
a：Append
Only，系统只允许在这个文件之后追加数据，不允许任何进程覆盖或截断这个文件。如果目录具有这个属性，系统将只允许在这个目录下建立和修改文件，而不允许删除任何文件。<br />
i：Immutable，系统不允许对这个文件进行任何的修改。如果目录具有这个属性，那么任何的进程只能修改目录之下的文件，不允许建立和删除文件。<br />
D：检查压缩文件中的错误。<br />
d：No dump，在进行文件系统备份时，dump程序将忽略这个文件。<br />
C：Compress，系统以透明的方式压缩这个文件。从这个文件读取时，返回的是解压之后的数据；而向这个文件中写入数据时，数据首先被压缩之后才写入磁盘。<br />
s：Secure Delete，让系统在删除这个文件时，使用0填充文件所在的区域。<br />
u：Undelete，当一个应用程序请求删除这个文件，系统会保留其数据块以便以后能够恢复删除这个文件。</p>

<p>4.说明<br />
chattr命令的作用很大，其中一些功能是由Linux内核版本来支持的，如果Linux内核版本低于2.2，那
么许多功能不能实现。同样－D检查压缩文件中的错误的功能，需要2.5.19以上内核才能支持。另外，通过chattr命令修改属性能够提高系统的安全
性，但是它并不适合所有的目录。chattr命令不能保护/、/dev、/tmp、/var目录。</p>

<p>5.应用实例<br />
1.恢复/root目录,即子目录的所有文件</p>

<h1 id="chattr-r-u-root">chattr -R +u/root</h1>

<p>2.用chattr命令防止系统中某个关键文件被修改<br />
在Linux下，有些配置文件(passwd
,fatab)是不允许任何人修改的，为了防止被误删除或修改，可以设定该文件的“不可修改位(immutable)”，命令如下：</p>

<h1 id="chattr-i-etc-fstab">chattr +i /etc/fstab</h1>

<p>sudo</p>

<p>1.作用<br />
sudo是一种以限制配置文件中的命令为基础，在有限时间内给用户使用，并且记录到日志中的命令，权限是所有用户。</p>

<p>2.格式</p>

<p>sudo [-bhHpV] [-s ] [-u ] [指令]<br />
sudo [-klv]</p>

<p>3.主要参数</p>

<p>－b：在后台执行命令。<br />
-h：显示帮助。<br />
-H：将HOME环境变量设为新身份的HOME环境变量。<br />
-k：结束密码的有效期，即下次将需要输入密码。<br />
-l：列出当前用户可以使用的命令。<br />
-p：改变询问密码的提示符号。<br />
-s ：执行指定的Shell。<br />
-u ：以指定的用户为新身份，不使用时默认为root。<br />
-v：延长密码有效期5分钟。</p>

<p>4.说明<br />
sudo命令的配置在/etc/sudoers文件中。当用户使用sudo时，需要输入口令以验证使用者身份。随后
的一段时间内可以使用定义好的命令，当使用配置文件中没有的命令时，将会有报警的记录。sudo是系统管理员用来允许某些用户以root身份运行部分/全
部系统命令的程序。一个明显的用途是增强了站点的安全性，如果需要每天以超级用户的身份做一些日常工作，经常执行一些固定的几个只有超级用户身份才能执行
的命令，那么用sudo是非常适合的。</p>

<p>ps</p>

<p>1.作用<br />
ps显示瞬间进程 (process) 的动态，使用权限是所有使用者。</p>

<p>2.格式<br />
ps [options] [&ndash;help]</p>

<p>3.主要参数<br />
ps的参数非常多, 此出仅列出几个常用的参数。</p>

<p>-A：列出所有的进程。<br />
-l：显示长列表。<br />
-m：显示内存信息。<br />
-w：显示加宽可以显示较多的信息。<br />
-e：显示所有进程。<br />
a：显示终端上的所有进程,包括其它用户的进程。<br />
-au：显示较详细的信息。<br />
-aux：显示所有包含其它使用者的进程。</p>

<p>4.说明<br />
要对进程进行监测和控制，首先要了解当前进程的情况，也就是需要查看当前进程。ps命令就是最基本、也是非常强大的
进程查看命令。使用该命令可以确定有哪些进程正在运行、运行的状态、进程是否结束、进程有没有僵尸、哪些进程占用了过多的资源等。图2给出了ps-aux
命令详解。大部分信息都可以通过执行该命令得到。最常用的三个参数是u、a、x。下面就结合这三个参数详细说明ps命令的作用：ps aux</p>

<p>图2 ps-aux命令详解</p>

<p>图2第2行代码中，USER表示进程拥有者；PID表示进程标示符；%CPU表示占用的CPU使用率；%MEM占用的物理内存使用率；VSZ
表示占用的虚拟内存大小；RSS为进程占用的物理内存值；TTY为终端的次要装置号码。</p>

<p>STAT表示进程的状态，其中D为不可中断的静止（I/O动作）；R正在执行中；S静止状态；T暂停执行；Z不存在，但暂时无法消除；W没有
足够的内存分页可分配；高优先序的进程；N低优先序的进程；L有内存分页分配并锁在内存体内 (实时系统或 I/O)。START为
进程开始时间。TIME为执行的时间。COMMAND是所执行的指令。</p>

<p>4.应用实例<br />
在进行系统维护时，经常会出现内存使用量惊人，而又不知道是哪一个进程占用了大量进程的情况。除了可以使用top命令查看内存使用情况之外，还可以使用下面的命令：<br />
ps aux | sort +5n</p>

<p>who</p>

<p>1.作用<br />
who显示系统中有哪些用户登陆系统，显示的资料包含了使用者ID、使用的登陆终端、上线时间、呆滞时间、CPU占用，以及做了些什么。 使用权限为所有用户。</p>

<p>2.格式<br />
who - [husfV] [user]</p>

<p>3.主要参数</p>

<p>-h：不要显示标题列。<br />
-u：不要显示使用者的动作/工作。<br />
-s：使用简短的格式来显示。<br />
-f：不要显示使用者的上线位置。<br />
-V：显示程序版本。</p>

<p>4.说明<br />
该命令主要用于查看当前在线上的用户情况。如果用户想和其它用户建立即时通信，比如使用talk命令，那么首先要确
定的就是该用户确实在线上,不然talk进程就无法建立起来。又如，系统管理员希望监视每个登录的用户此时此刻的所作所为，也要使用who命令。who命
令应用起来非常简单，可以比较准确地掌握用户的情况,所以使用非常广泛。</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>