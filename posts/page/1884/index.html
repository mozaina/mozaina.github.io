<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Posts | 开发者问答集锦</title>
    <meta property="og:title" content="Posts - 开发者问答集锦">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="">
    <meta name="description" content="Posts">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+xml" href="https://zaina.newban.cn/posts/index.xml" title="开发者问答集锦" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashshellif%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/" title="BashShellif条件判断">BashShellif条件判断</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            菜鸟我最近在学习shell脚本，自己写了个很简短的脚本测试下，一直报错“syntax error near unexpected token `then&rsquo; ”。上网google了一圈也没发现原因。原来我在写if条件判断的时候，if后面缺少一个空格。
if [ 判断条件 ]  在写if条件判断的时候，要注意不但if后面需要空格，而且“ [ ” 后面 和“ ] ”前面都需要有空格。有没有感觉很无语。还有一点需要谨记，在shell脚本中当使用“ = ”给变量赋值的时候，在 “ = ”两边一定不能加空格，否者会把变量名当作一个命令来执行而报出“ command not found ”的错误，但是在if条件判断的时候，if [ &ldquo;判断条件&rdquo; ] 判断条件中需要用到比较的时候则“ = ” 或者 &ldquo; != &ldquo;的两边都需要用空格隔开。另外在写if判断的时候，不要忘记then，否者也会有问题。当然elif(相当于else if)是可选的。
下面再总结一下shell脚本中，if判断中的测试选项。
1，关于文件的判断
返回 true 如果&hellip;
-e 文件存在
-f file 是一个 regular 文件(不是目录或者设备文件)
-s 文件长度不为 0
-d 文件是个目录
-b 文件是个块设备(软盘,cdrom 等等)
-c 文件是个字符设备(键盘,modem,声卡等等)
-p 文件是个管道
-h 文件是个符号链接
-L 文件是个符号链接
-S 文件是个 socket……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashshellif%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashshellif%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/" title="bashshellif命令参数说明">bashshellif命令参数说明</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashshellif%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashshellfor%E5%BE%AA%E7%8E%AF1%E5%88%B0100/" title="bashshellfor循环1到100">bashshellfor循环1到100</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashshellfor%E5%BE%AA%E7%8E%AF1%E5%88%B0100/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashshellffmpegmp4%E6%89%B9%E9%87%8F%E8%BD%AC%E6%8D%A2%E4%B8%BAmp3/" title="bashshellffmpegmp4批量转换为mp3">bashshellffmpegmp4批量转换为mp3</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            最需要把视频mp4转换为mp3，
从百度网盘下载mp4到本地苹果电脑后，使用bash shell 和ffmpeg 批量转换,
下面是实现代码:
前提条件:
1.电脑安装了bash shell
2.安装了ffmpeg
3.有mp4或其他格式的视频文件.
mp4tomp3
#!/usr/bin/env bash echo &quot;批量转换当前文件夹的mp4为mp3文件&quot; mp4PostFix=&quot;.mp4&quot;; file_not_ready=&quot;downloading&quot; fileList=$(ls -1 | tr &quot; &quot; &quot;_&quot;) for file in $fileList do found=0 case &quot;${mp4PostFix}&quot; in *${file}*) found=1;; esac #判断是否下载完成 is_finish=1 case &quot;${file_not_ready}&quot; in *${file}*) is_finish=0;; esac if [ $found==1 ] &amp;&amp; [ $is_finish==1 ] then srcMp4File_bd=$(echo $file | tr &quot;_&quot; &quot; &quot;) srcMp4File=$file destMp3File=$(echo $file | tr &quot;.mp4&quot; &quot;.mp3&quot;) echo &quot;旧的mp4文件=${srcMp4File_bd}新的mp4文件=${srcMp4File} 新的mp3文件=${destMp3File}&quot; mv &quot;$srcMp4File_bd&quot; &quot;${srcMp4File_bd// /_}&quot; #mv &quot;${srcMp4File_bd}&quot; &quot;${srcMp4File}&quot; ffmpeg -i ${srcMp4File} -f mp3 -ab 192000 -vn ${destMp3File} sleep 1; else echo &quot;文件{$file}不包含${mp4PostFix}&quot; fi done……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashshellffmpegmp4%E6%89%B9%E9%87%8F%E8%BD%AC%E6%8D%A2%E4%B8%BAmp3/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashshellcommand%E9%80%9F%E6%9F%A5%E6%89%8B%E5%86%8C/" title="Bashshellcommand速查手册">Bashshellcommand速查手册</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashshellcommand%E9%80%9F%E6%9F%A5%E6%89%8B%E5%86%8C/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashshell5ifelsewhile%E5%A4%A7%E5%B0%8F%E6%AF%94%E8%BE%83/" title="bashshell5ifelsewhile大小比较">bashshell5ifelsewhile大小比较</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            1、if ；else 语句
1、if的单分支语法格式： if 条件判断;then 语句1 语句2 …… else 语句1 语句2 …… fi 2、if的多分支语法格式： if 条件判断；then 语句1 语句2 …… elif 语句1 语句2 …… elif 语句1 语句2 …… else 语句1 语句2 …… fi 3.while 循环  while 条件测试
do
 执行命令
done
4.until循环  until 条件测试
do
 执行命令
done
  注：1、elif 也可以有多个
常用的判断语句：
 [ -f &ldquo;somefile&rdquo; ] ：判断是否是一个文件 [ -x &ldquo;/bin/ls&rdquo; ] ：判断/bin/ls是否存在并有可执行权限 [ -n &ldquo;$var&rdquo; ] ：判断$var变量是否有值 [ &ldquo;$a&rdquo; = &ldquo;$b&rdquo; ] ：判断$a和$b是否相等 -r file 用户可读为真 -w file 用户可写为真 -x file 用户可执行为真 -f file 文件为正规文件为真 -d file 文件为目录为真 -c file 文件为字符特殊文件为真 -b file 文件为块特殊文件为真 -s file 文件大小非0时为真 -t file 当文件描述符(默认为1)指定的设备为终端时为真  常用的比较语句：……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashshell5ifelsewhile%E5%A4%A7%E5%B0%8F%E6%AF%94%E8%BE%83/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashshell1/" title="bashshell1">bashshell1</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashshell1/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashshell/" title="BashShell">BashShell</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashshell/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashrc%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9Fshell/" title="bashrc配置系统shell">bashrc配置系统shell</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            不解释操作：
# ~/.bashrc: executed by bash(1) for non-login shells. # see /usr/share/doc/bash/examples/startup-files (in the package bash-doc) # for examples # If not running interactively, don't do anything case $- in *i*) ;; *) return;; esac # don't put duplicate lines or lines starting with space in the history. # See bash(1) for more options HISTCONTROL=ignoreboth # append to the history file, don't overwrite it shopt -s histappend # for setting history length see HISTSIZE and HISTFILESIZE in bash(1) HISTSIZE=1000 HISTFILESIZE=2000 # check the window size after each command and, if necessary, # update the values of LINES and COLUMNS.……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashrc%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9Fshell/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/bashrcbashprofile%E7%AD%89shell%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" title="bashrcbashprofile等shell配置文件详解">bashrcbashprofile等shell配置文件详解</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            一、bashrc,bash_profile等文件执行顺序 如何确定这些文件的执行顺序呢？ 最好的方法就是在这些文件的开头添加一个输出语句，这样文件一执行马上就会输出内容。
我们首先在/etc/profile,/etc/bashrc,~/.bash_profile,~/.bashrc,~/.bash_logout文件开头添加以下行:
1
|
echo &quot;I ampwd/basename $0,executed atdate.&quot;
&mdash;|&mdash;
命令执行时会输出文件名和执行时间到/tmp/bashseq这个文件。
为什么不添加到文件尾部？因为这些文件可以执行，在执行过程中会调用其它文件，如果以上语句添加到文件尾部，则可能被调用的文件好像在前面执行，这就会发生错误。
修改/tmp/bashseq文件权限, 使所有用户可写:
1
|
chmod 666 /tmp/bashseq
&mdash;|&mdash;
重启一次,查看/tmp/bashseq文件,内容如下：
1
2
3
4
|
I am /etc/profile ,exectued at Wed May 11 10:23:18 CST 2011.
I am ~/.bash_profile ,exectued at Wed May 11 10:23:19 CST 2011.
I am ~/.bashrc ,exectued at Wed May 11 10:23:19 CST 2011.
I am /etc/bashrc ,exectued at Wed May 11 10:23:19 CST 2011.……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/bashrcbashprofile%E7%AD%89shell%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/">阅读全文</a></p>
    </article>
    
    
    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://zaina.newban.cn/posts/page/1883/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://zaina.newban.cn/posts/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/posts/page/1882/">1882</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/posts/page/1883/">1883</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://zaina.newban.cn/posts/page/1884/">1884</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/posts/page/1885/">1885</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/posts/page/1886/">1886</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/posts/page/1960/">1960</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://zaina.newban.cn/posts/page/1885/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>