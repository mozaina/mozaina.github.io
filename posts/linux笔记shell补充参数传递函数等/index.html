<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Linux笔记shell补充参数传递函数等 | 开发者问答集锦</title>
    <meta property="og:title" content="Linux笔记shell补充参数传递函数等 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Linux笔记shell补充参数传递函数等">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/linux%E7%AC%94%E8%AE%B0shell%E8%A1%A5%E5%85%85%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E5%87%BD%E6%95%B0%E7%AD%89/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Linux笔记shell补充参数传递函数等</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <p>列表：</p>

<p>Linux笔记——vim常用操作及扩展补充[手册]</p>

<p>Linux笔记——linux常用命令集合</p>

<p>Linux笔记——命令：awk</p>

<p>Linux笔记——命令:sed</p>

<p>Linux笔记——命令：grep</p>

<p>Linux笔记——命令：find</p>

<p>Linux笔记——命令:Sort,uniq,join,cut,paste,split</p>

<p>Linux笔记——shell基础：变量&amp;本地变量&amp;位置变量&amp;特定变量参数</p>

<p>Linux笔记——条件测试test</p>

<p>Linux笔记——控制流</p>

<p>Linux笔记——shell补充：参数传递&amp;函数等</p>

<p>Linux笔记——正则表达式入门及应用</p>

<p>Linux笔记——linux进程</p>

<p>Linux笔记——SVN命令总结</p>

<p>rpm&amp;yum包管理命令总结</p>

<p>鉴于博客，表格&amp;排版&amp;颜色标记等等无法显示，大家可以下载这个笔记的资源</p>

<p>12个文档，不需要积分，以目录+表格+颜色标记形式</p>

<p>下载资源地址<a href="http://download.csdn.net/detail/wklken/3815477">http://download.csdn.net/detail/wklken/3815477</a></p>

<p>The end! Thx! wklken的笔记</p>

<p>-&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-</p>

<p>函数定义：</p>

<hr />

<p>function_name(){</p>

<p>statements</p>

<p>}</p>

<p>必须在调用一个函数之前对它进行定义</p>

<p>shell中不存在向前声明</p>

<p>调用</p>

<p>function_name params</p>

<p>可以通过return命令让函数返回数字值，或者echo一个字符串返回</p>

<p>退出状态：</p>

<hr />

<p>退出值为 0 表示成功</p>

<p>退出值非 0 表示失败</p>

<p>当一个命令因为严重的信号 N 退出时，bash 将使用 128+N 作为它的退出状态</p>

<p>出现一个信号</p>

<p>|</p>

<p>128及以上</p>

<p>命令没找到：</p>

<p>|</p>

<p>127</p>

<p>文件找到但不可执行：</p>

<p>|</p>

<p>126</p>

<p>展开或重定向中的错误：脚本程序可使用的错误代码</p>

<p>|</p>

<p>1-125</p>

<p>所有的内建命令在用法错误时返回</p>

<p>|</p>

<p>2</p>

<p>成功</p>

<p>|</p>

<p>0</p>

<p>参数传递：</p>

<hr />

<p>参数使用与位置参数一样</p>

<p>$1, $2, ……</p>

<p>$@, $*</p>

<p>$#</p>

<p>func $var1 $var2</p>

<p>注：变量中间用空格、Tab分割</p>

<p>返回值</p>

<p>return:主要用来返回退出状态,即$?</p>

<p>0 &lt;= 返回值（整数） &lt;= 255；</p>

<p>0 为无错误；</p>

<p>非0 为有错误；</p>

<p>注：如果返回其他数据，可以使用echo或者全局变量</p>

<p>return_var=<code>func $var1 $var2</code></p>

<p>标准I/O</p>

<hr />

<p>Linux 默认提供了三个I/O 通道：</p>

<p>Standard Input</p>

<p>（标准输入，文件描述符：0） – 默认是键盘</p>

<p>Standard Output</p>

<p>（标准输出，文件描述符：1） – 默认是终端</p>

<p>Standard Error</p>

<p>（标准错误，文件描述符：2） – 默认是终端</p>

<p>调试脚本</p>

<hr />

<p>命令行选项</p>

<p>|</p>

<p>Set选项</p>

<p>|</p>

<p>说明</p>

<p>sh –n</p>

<p>|</p>

<p>set –o noexec</p>

<p>set -n</p>

<p>|</p>

<p>只检查语法错误，不执行命令</p>

<p>sh –v</p>

<p>|</p>

<p>set –o verbose</p>

<p>set –v</p>

<p>|</p>

<p>在执行命令之前回显它们</p>

<p>sh –x</p>

<p>|</p>

<p>set –o xtrace</p>

<p>set –x</p>

<p>|</p>

<p>在处理命令之后回显它们</p>

<p>sh –u</p>

<p>|</p>

<p>set –o nounset</p>

<p>set -u</p>

<p>|</p>

<p>如果使用了未定义的变量，就给出出错信息</p>

<p>-o选项启用设置 +o选项取消设置</p>

<p>AND列表</p>

<hr />

<p>作用：只有前面所有的命令都执行成功的情况下才执行最后一条命令</p>

<p>Statement1 &amp;&amp; statement2 &amp;&amp; statement3 &amp;&amp; …..</p>

<p>从左到右顺序执行每条命令，如果一条命令返回true，右边的下一条命令才能执行</p>

<p>&amp;&amp;命令作用是检查前一条命令的返回值</p>

<p>if [ -f file_one ] &amp;&amp; echo “hello” &amp;&amp; [ -f file_two ] &amp;&amp; echo “ there”</p>

<p>then</p>

<p>……</p>

<p>fi</p>

<p>OR列表</p>

<p>作用：持续执行一系列命令，知道有一条命令成功为止</p>

<p>Statement1 || statement2 || statement3 || ….</p>

<p>从左顺序开始执行每条命令，若是一条命令返回false，它右边的下一条命令才能够被执行，如此持续到知道有一条命令返回true,或者列表中所有命令都执行完毕</p>

<p>if [ -f file_one ] || echo “hello” || echo “ there”</p>

<p>内置命令补充：</p>

<hr />

<p>:命令</p>

<p>冒号(:)是一个空命令，偶尔用于简化条件逻辑，相当于true的一个别名。</p>

<p>例如 while :</p>

<p>也用于在变量的条件设置中</p>

<p>例如 : ${var:=value}</p>

<dl>
<dt>if ….;then</dt>
</dl>

<p>:</p>

<p>fi</p>

<p>.命令</p>

<p>用于在当前shell中执行命令</p>

<p>. ./shell_script</p>

<p>相当于source命令</p>

<p>在执行脚本程序中列出的命令时，使用的是调用该脚本程序的同一个shell</p>

<p>echo命令</p>

<p>输出结尾带有换行符的字符串</p>

<p>echo –n “string to output” bash风格去换行符</p>

<p>eval命令</p>

<p>允许对参数进行求值，是shell的内置命令</p>

<p>即允许代码被随时生成和运行</p>

<p>exec命令</p>

<p>两种用法</p>

<p>典型：将当前shell替换为一个不同的程序</p>

<p>exec wall “Thanks for all the fish”</p>

<p>第二种用法修改当前文件描述符</p>

<p>exec 3 &lt; afile</p>

<p>exit n命令</p>

<p>使脚本程序以退出码n结束运行</p>

<p>若是在脚本退出时不指定退出状态，那么该脚本最后一条被执行命令状态将被用作返回值</p>

<p>export命令</p>

<p>将作为它参数的变量导出到子shell中，并使之在子shell中有效</p>

<p>export把自己的参数创建为一个环境变量，而这个环境变量可以被当前程序调用的其他脚本和程序看见</p>

<p>被导出变量构成从该shell衍生的任何子进程的环境变量</p>

<p>expr命令</p>

<p>将它的参数当做一个表达式来求值，最常见用法简单数学运算</p>

<p>x=<code>expr $x + 1</code> 注意，运算符两边空格必须</p>

<p>x=$(expr $x + 1)</p>

<p>printf命令</p>

<p>格式化输出</p>

<p>d 十进制</p>

<p>C 一个字符</p>

<p>S 一个字符串</p>

<p>% 一个%字符</p>

<p>printf “%s\n” hello</p>

<p>printf “%s %d” “Hi” 6</p>

<p>return命令</p>

<p>使函数返回，可有一个数值参数，作为该函数的返回值，如果不带参数，return命令默认返回最后一条命令的退出码</p>

<p>set命令</p>

<p>为shell设置参数变量</p>

<p>set $(date)</p>

<p>echo The month is $2</p>

<p>即参数的值作为当前脚本参数列表了</p>

<p>shift命令</p>

<p>把所有参数变量左移一个位置，是$2-&gt;$1 $3-&gt;$2原来$1被丢弃，$0保持不变</p>

<p>可带参数表示左移一个数值参数</p>

<p>trap命令</p>

<p>用于指定接收到信号后要采取的行动</p>

<p>常见用途：在脚本程序被中断时完成清理工作</p>

<p>trap command signal</p>

<p>注：脚本程序通常是从上到下顺序解释执行的，必须在想保护那部分代码之前指定trap命令</p>

<p>HUP(1) 挂起，中断掉线或用户退出 引发</p>

<p>INT(2)中断 ctrl+c组合键发生</p>

<p>QUIT(3)退出，ctrl+\组合键发生</p>

<p>ABRT(6)中止，默写严重的执行错误引发</p>

<p>ALRM(14)报警，用来处理超时</p>

<p>TERM(15)终止，系统关机时发出</p>

<p>unset命令</p>

<p>从环境变量中删除变量或函数</p>

<p>不能删除shell本身定义的只读变量</p>

<p>BP：</p>

<p>使用命令扩展:</p>

<p>$() 代替反引号``</p>

<p>$(( …. )) 代替expr算术运算</p>

<p>参数扩展：</p>

<p>for I in 1 2</p>

<p>do</p>

<p>process ${i}_tmp</p>

<p>done</p>

<p>${param:-default} 如果param为空，设为默认值</p>

<p>${#param} 给出param长度</p>

<p>${param%word} 从param尾部开始，删除与word匹配的最小部分，返回剩余部分</p>

<p>${param%%word} 长</p>

<p>${param#word} 头部 小</p>

<p>${param##word} 头部 长</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>