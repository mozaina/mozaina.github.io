<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Shell脚本编程一基本语法 | 开发者问答集锦</title>
    <meta property="og:title" content="Shell脚本编程一基本语法 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Shell脚本编程一基本语法">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%E4%B8%80%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Shell脚本编程一基本语法</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h1 id="shell-script">shell script</h1>

<h2 id="shell脚本的作用与执行">shell脚本的作用与执行</h2>

<p>如果有一系列你经常使用的Linux命令，你可以把它们存储在一个文件里，shell可以读取这个文件并顺序执行其中的命令，这样的文件被称为脚本文件。shell
脚本按行解释。</p>

<ul>
<li><p>shell脚本的编写<br />
Shell 脚本是纯文本文件，可以使用任何文本编辑器编写<br />
Shell 脚本通常是以 .sh 作为后缀名</p></li>

<li><p>Shell 脚本的执行<br />
使用如下命令：<br />
chmod +x script_name<br />
./script_name<br />
或<br />
bash script_name</p></li>
</ul>

<h2 id="shell脚本格式">shell脚本格式</h2>

<ul>
<li><p>第一行：指定用哪个程序来编译和执行脚本。</p>

<p>#!/bin/bash
#!/bin/sh
#!/bin/csh</p></li>

<li><p>一个 shell 脚本通常由一组 Linux 命令、shell 命令、控制结构和注释语句构成。</p></li>

<li><p>注释：以 “ # ” 开头，可独占一行，或跟在语句的后面。<br />
例1、</p>

<p>#!/bin/bash</p>

<h1 id="this-is-the-first-bash-shell-program">This is the first Bash shell program</h1>

<h1 id="scriptname-greetings-sh">ScriptName: greetings.sh</h1>

<p>echo
echo –e &ldquo;Hello $LOGNAME, \c&rdquo;
echo    &ldquo;it&rsquo;s nice talking to you.&rdquo;
echo    &ldquo;Your present working directory is:&rdquo;
pwd # Show the name of present directory
echo
echo –e &ldquo;The time is <code>date +%T</code>!. \nBye&rdquo;
echo</p></li>
</ul>

<p>如上一个简单的shell脚本，使用</p>

<blockquote>
<p>bash greeting.sh<br />
 或者<br />
 chmod +x greetings.sh<br />
 ./greetings<br />
 运行这个脚本</p>
</blockquote>

<h3 id="echo命令"><strong>echo命令</strong></h3>

<p>可以看到例1中有很多echo命令，下面本文从echo开始，介绍shell脚本编写常用命令。<br />
echo:</p>

<ul>
<li>命令简介<br />
功能说明：显示文字。<br />
语 法：echo [-ne][字符串]<br />
或 echo [–help][–version]<br />
补充说明：echo会将输入的字符串送往标准输出。输出的字符串间以空白字符隔开, 并在最后加上换行号。<br />
-n 不进行换行<br />
-e 若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出 \n 换行 \b 空格…</li>
<li>参数说明<br />
-n 不要在最后自动换行<br />
-e 若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出：<br />
\a 发出警告声；<br />
\b 删除前一个字符；<br />
\c 最后不加上换行符号；<br />
\f 换行但光标仍旧停留在原来的位置；<br />
\n 换行且光标移至行首；<br />
\r 光标移至行首，但不换行；<br />
\t 插入tab；<br />
\v 与\f相同；<br />
\ 插入\字符；<br />
\nnn 插入nnn（八进制）所代表的ASCII字符；<br />
–help 显示帮助<br />
–version 显示版本信息</li>
</ul>

<h3 id="read命令"><strong>read命令</strong></h3>

<p>例2</p>

<pre><code>#!/bin/bash
# This script is to test the usage of read
# Scriptname: ex4read.sh
echo &quot;=== examples for testing read ===&quot;
echo -e &quot;What is your name? \c&quot;
read name
echo &quot;Hello $name&quot;
echo
echo -n &quot;Where do you work? &quot;
read
echo &quot;I guess $REPLY keeps you busy!&quot;
echo
read -p &quot;Enter your job title: &quot;#自动读给REPLY
echo &quot;I thought you might be an $REPLY.&quot;
echo
echo &quot;=== End of the script ===&quot;
</code></pre>

<ul>
<li>命令介绍<br />
read variable #读取变量给variable</li>
</ul>

<p>read x y #可同时读取多个变量</p>

<p>read #自动读给REPLY</p>

<p>read –p “Please input: ”<br />
#自动读给REPLY</p>

<h3 id="条件测试"><strong>条件测试</strong></h3>

<p>条件测试可以根据某个特定条件是否满足，来选择执行相应的任务。<br />
Bash 中允许测试两种类型的条件：<br />
命令成功或失败，表达式为真或假<br />
任何一种测试中，都要有退出状态（返回值），退出状态为 0 表示命令成功或表达式为真，非0 则表示命令失败或表达式为假。<br />
状态变量 $? 中保存命令退出状态的值，如例3所示：<br />
例3</p>

<pre><code>grep $USER /etc/passwd
echo $?
grep hello /etc/passwd; echo $?
</code></pre>

<h3 id="test命令-测试表达式的值"><strong>test命令——测试表达式的值</strong></h3>

<p>表达式测试包括字符串测试、整数测试和文件测试。<br />
通常用 test 命令来测试表达式的值，如例4所示：<br />
例4</p>

<pre><code>x=5; y=10
test $x -gt $y
echo $?
</code></pre>

<p>test 命令可以用 方括号 来代替，如例5：<br />
例5：</p>

<pre><code>x=5; y=10
[ $x -gt $y ] 
echo $?
</code></pre>

<p><strong>注意：方括号前后要留空格！</strong></p>

<ol>
<li>字符串测试<br />
<br /></li>
</ol>

<p><a href="https://img.it610.com/image/info8/22f12967302345378cb44e64506a5fb0.jpg"><img src="https://img.it610.com/image/info8/22f12967302345378cb44e64506a5fb0.jpg" alt="Shell脚本编程（一）——基本语法_第1张图片" /></a></p>

<p>例如：</p>

<pre><code>name=Tom; [ -z $name ];  echo $?
name2=Andy; [ $name = $name2 ] ; echo $?
</code></pre>

<ol>
<li>整数测试<br />

<br /></li>
</ol>

<p><a href="https://img.it610.com/image/info8/b79722521b2147588dc64c88e6d37e7f.jpg"><img src="https://img.it610.com/image/info8/b79722521b2147588dc64c88e6d37e7f.jpg" alt="Shell脚本编程（一）——基本语法_第2张图片" /></a></p>

<ol>
<li>逻辑测试<br />

<br /></li>
</ol>

<p><a href="https://img.it610.com/image/info8/337e9513f4d149708e0c1cedd73e79d9.jpg"><img src="https://img.it610.com/image/info8/337e9513f4d149708e0c1cedd73e79d9.jpg" alt="Shell脚本编程（一）——基本语法_第3张图片" /></a></p>

<ol>
<li>文件测试<br />
文件是否存在，文件属性，访问权限等。<br />
常见的文件测试操作符<br />

<br /></li>
</ol>

<p><a href="https://img.it610.com/image/info8/c2dd149bf1f34e028c0c8d314cb2296f.jpg"><img src="https://img.it610.com/image/info8/c2dd149bf1f34e028c0c8d314cb2296f.jpg" alt="Shell脚本编程（一）——基本语法_第4张图片" /></a></p>

<ol>
<li><p>检查空格</p>

<p>方法一：[ &ldquo;$name&rdquo; = &ldquo;&rdquo; ]
方法二：[ ! &ldquo;$name&rdquo; ]
方法三：[ &ldquo;X${name}&rdquo; != &ldquo;X&rdquo; ]</p></li>
</ol>

<h3 id="if-条件语句"><strong>if 条件语句</strong></h3>

<p>例6：</p>

<pre><code>if expr1      # 如果expr1 为真(返回值为0)
then          # 那么
   commands1  # 执行语句块 commands1
elif expr2    # 若expr1 不真，而expr2 为真
then          # 那么
   commands2  # 执行语句块 commands2
 ... ...      # 可以有多个 elif 语句 
else          # else 最多只能有一个
   commands4  # 执行语句块 commands4
fi            # if 语句必须以单词 fi 终止
</code></pre>

<p>几点说明：<br />
1. elif 可以有任意多个（0 个或多个）<br />
2. else 最多只能有一个（0 个或 1 个）<br />
3. if 语句必须以 fi 表示结束<br />
4. expr 通常为条件测试表达式；也可以是多个命令，以最后一个命令的退出状态为条件值。<br />
5. commands 为可执行语句块，如果为空，需使用 shell 提供的空命令 “ : ”，即冒号。该命令不做任何事情，只返回一个退出状态 0<br />
6. if 语句可以嵌套使用</p>

<p>例7：使用if语句比较标准输入中两个数的大小</p>

<pre><code>#!/bin/bash
# scriptname: ex4if.sh
#
echo -n &quot;Please input x,y: &quot;
read x y
echo &quot;x=$x, y=$y&quot;
if (( x &gt; y )); then
   echo &quot;x is larger than y&quot;
elif (( x == y)); then
   echo &quot;x is equal to y&quot;
else
   echo &quot;x is less than y&quot;
fi
</code></pre>

<p>例8：if语句判断文件及其权限</p>

<pre><code>#!/bin/bash
# Using the new style test command: [[ ]]
# filename: perm_check2.sh
#
file=./testing
if [[ -d $file ]] 
then
   echo &quot;$file is a directory&quot; 
elif [[ -f $file ]]
then 
   if [[ -r $file &amp;&amp; -w $file &amp;&amp; -x $file ]] 
   then    # nested if command
      echo &quot;You have read,write,and execute permission on $file.&quot;
   fi
else
   echo &quot;$file is neither a file nor a directory. &quot;
fi
</code></pre>

<p>例9：判断某个文件中是否存存在某个字符串</p>

<pre><code>#!/bin/bash
# Using the new style test command: [[ ]]
# filename: perm_check2.sh
#
file=./testing
if [[ -d $file ]] 
then
   echo &quot;$file is a directory&quot; 
elif [[ -f $file ]]
then 
   if [[ -r $file &amp;&amp; -w $file &amp;&amp; -x $file ]] 
   then    # nested if command
      echo &quot;You have read,write,and execute permission on $file.&quot;
   fi
else
   echo &quot;$file is neither a file nor a directory. &quot;
fi
</code></pre>

<h3 id="case-选择语句"><strong>case 选择语句</strong></h3>

<p>语法结构</p>

<pre><code>case expr in # expr 为表达式，关键词 in 不要忘！
  pattern1)  # 若 expr 与 pattern1 匹配，注意括号
   commands1 # 执行语句块 commands1
   ;;        # 跳出 case 结构
  pattern2)  # 若 expr 与 pattern2 匹配
   commands2 # 执行语句块 commands2
   ;;        # 跳出 case 结构
  ... ...    # 可以有任意多个模式匹配
  *)         # 若 expr 与上面的模式都不匹配
   commands  # 执行语句块 commands
   ;;        # 跳出 case 结构
esac         # case 语句必须以 esac 终止
</code></pre>

<p>几点说明<br />
1. 表达式 expr 按顺序匹配每个模式，一旦有一个模式匹配成功，则执行该模式后面的所有命令，然后退出 case。<br />
2. 如果 expr 没有找到匹配的模式，则执行缺省值 “ <em>) ” 后面的命令块 ( 类似于 if 中的 else )； “</em> ) ” 可以不出现。<br />
3.所给的匹配模式 pattern 中可以含有通配符和“ | ”<br />
4. 每个命令块的最后必须有一个双分号，可以独占一行，或放在最后一个命令的后面。<br />
例9：case语句举例</p>

<pre><code>#!/bin/bash
# test case 
# scriptname: yes_no.sh
#
echo -n &quot;Do you wish to proceed [y/n]: &quot;
read ans
case $ans in
   y|Y|yes|Yes)
     echo &quot;yes is selected&quot;
     ;;
   n|N|no|No)
     echo &quot;no is selected&quot;
     ;;
   *)
     echo &quot;`basename $0`: Unknown response&quot;
     exit 1
     ;;
esac
</code></pre>

<h3 id="for-循环语句"><strong>for 循环语句</strong></h3>

<p>语法结构：</p>

<pre><code>for variable in list 
# 每一次循环，依次把列表 list 中的一个值赋给循环变量
do          # 循环开始的标志
  commands  # 循环变量每取一次值，循环体就执行一遍
done        # 循环结束的标志
</code></pre>

<p>几点说明<br />
列表 list 可以是命令替换、变量名替换、字符串和文件名列表 ( 可包含通配符 )<br />
for 循环执行的次数取决于列表 list 中单词的个数<br />
for 循环体中一般要出现循环变量，但也可以不出现<br />
循环执行过程：<br />
执行第一轮循环时，将 list 中的第一个词赋给循环变量，并把该词从 list 中删除，然后进入循环体，执行 do 和 done
之间的命令。下一次进入循环体时，则将第二个词赋给循环变量，并把该词从 list 中删除，再往后的循环也以此类推。当 list
中的词全部被移走后，循环就结束了。</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>