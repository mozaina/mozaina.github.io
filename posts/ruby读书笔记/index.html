<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>ruby读书笔记 | 开发者问答集锦</title>
    <meta property="og:title" content="ruby读书笔记 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="ruby读书笔记">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/ruby%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">ruby读书笔记</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>Ruby读书笔记</p>

<p>1.不同的变量:<br />
全局变量用美元符作为前缀 $；<br />
而实例变量用 @ 开头；<br />
类变量用 @@ 开头；<br />
类名、模块名和常量应该用大写字母开头。<br />
局部变量不可以在内部类和子类中访问。</p>

<p>2.区间范围：<br />
1..5 表示1，2，3，4，5<br />
1&hellip;5表示1，2，3，4</p>

<p>3.与JAVA相反的对象比较<br />
== 比较对象的数值是否相等<br />
eql? 比较对象的数值和类型是否相等<br />
equal? 比较内存地址</p>

<p>4. NetBeans6 调整菜单栏字体大小<br />
在NB6 快捷方式选目标加入 &ndash;fontsize 12</p>

<p>5．执行顺序<br />
BEGIN 与 END 执行顺序相反， at_exit 比end 晚执行。</p>

<p>6. 按不同进制显示数字<br />
&ldquo;100&rdquo;.to_i(10); #按10进制显示。<br />
&ldquo;100&rdquo;.to_i(2); #按2进制显示。</p>

<p>7．类的get、set类型<br />
attr_writer :duration 类似 set<br />
attr_reader :duration 类似get<br />
attr_reader :name, :gender, :age<br />
attr_accessor :motherland 相当于attr_reader:motherland; attr_writer :motherland<br />
att: 所定义的属性可读可写。</p>

<p>8. Ruby 脚本<br />
ruby script/server :启动服务器<br />
ruby script/server webrick :以webrick作为指定服务器</p>

<p>9．输出语句<br />
puts会识别双引号&rdquo;&ldquo;内的转义符，每打印一串信息，在结果后面自动换行。<br />
print也会识别双引号&rdquo;&ldquo;内的转义符，但每打印一串信息，不会在结果后面自动换行。<br />
p则不会识别双引号&rdquo;&ldquo;内的转义符，怎样的内容就怎样按原来的字符串输出，且在结果后自动换行。</p>

<p>10.取消方法<br />
undef用来取消一个方法的定义，也可以使用Module#undef_method方法取消方法的定义。undef会取消方法名和方法定义之间的关系，即使超类中有同名方法，调用时也会引发异常。<br />
而Module#remove_method方法只负责取消当前类中方法名和方法定义之间的关系，父类的同名方法仍可调用，这点差别非常重要。</p>

<p>11.返回参数<br />
defined?用来判断表达式是否定义。若表达式尚未定义，则返回nil，若已经定义，则返回一个字符串描述该表达式的种类。<br />
若yield调用可用，则返回真，具体返回值为字符串&rdquo;yield&rdquo;。它的作用同block_given?一样，可以判断能否以带块方式来调用某方法。<br />
defined? super若super可被调用，则返回真， 具体返回值为字符串&rdquo;super&rdquo;。</p>

<p>12. %q 和 %Q<br />
使用 %q 和 %Q 来生成字符串对象。%q 相当于单引号，%Q相当于双引号。<br />
单引号原样输出，双引号参与运算。<br />
puts %q/Spring quote/<br />
puts %Q/Spring quote/<br />
puts %q/ #{50*50} /<br />
puts %Q/ #{50*50} /</p>

<p>Spring quote<br />
Spring quote<br />
#{50*50}<br />
2500<br />
？a 查看a的ascII数值<br />
97.chr 查看a 的数值是好多</p>

<p>13．异常处理<br />
begin … rescue … ensure …end</p>

<p>rescue ZeroDivisionError =&gt; ex<br />
puts &ldquo;Error, divide zero&rdquo;<br />
ensure<br />
puts &ldquo;Finish the process!&rdquo;</p>

<p>ensure 无论如何都执行,有点像java的finally , 那么这个异常对象会被复制到ex中。</p>

<p>raise 抛出异常<br />
throw :exception1 catch :exception1</p>

<p>14.时间格式化输出<br />
Time.now.strftime(“%Y-%m-%d %H:%M:%S”);</p>

<p>15.变长参数<br />
*num 方法后面加上这个符号，表示参数不定 。</p>

<p>def varadd(*num)<br />
sum = 0<br />
num.each { |i| sum+=i }<br />
puts sum<br />
end</p>

<p>varadd()<br />
varadd(1,2,3)<br />
varadd(1,2,3,4,5,6)</p>

<p>16. IO操作</p>

<p>模式 含义<br />
R 只读，从文件头开始（默认模式）<br />
R+ 读写，从文件头开始<br />
W 只写，文件不存在则创建文件，文件存在则清空内容<br />
W+ 读写，文件不存在则创建文件，文件存在则清空内容<br />
A 只写，文件不存在则创建文件，文件存在则在尾部添加<br />
A+ 读写，文件不存在则创建文件，文件存在则在尾部添加<br />
B (只用于DOS/Windows)二进制文件，可以和上述模式一同出现</p>

<p>17．Hash、each的用法<br />
h.each {|key, value| puts &ldquo;#{key} is #{value}&rdquo; }</p>

<p>countries = [&ldquo;Korea&rdquo;, &ldquo;Japan&rdquo;, &ldquo;China&rdquo;, &ldquo;Brazil&rdquo;]<br />
countries.each do |country|<br />
puts &ldquo;My country is &rdquo; + country<br />
end</p>

<p>puts &ldquo;&mdash;-Sort the array before iteration&rdquo;<br />
countries.sort.each do |country| #默认升序<br />
puts &ldquo;My country is &rdquo; + country<br />
end</p>

<p>puts &ldquo;&mdash;-Sort it in reverse order before iteration&rdquo;<br />
countries.sort.reverse.each do |country|<br />
puts &ldquo;My country is &rdquo; + country<br />
end</p>

<p>18． 将字符串变为常量<br />
puts &ldquo;Koala&rdquo;.intern.class<br />
puts &lsquo;cat&rsquo;.to_sym.class<br />
puts &ldquo;&mdash;-Usage of strings consumes lots of memory because there are 10000 Q1
strings&rdquo;<br />
10000.times do |x|<br />
x = { &ldquo;Q1&rdquo;=&gt;&ldquo;a&rdquo;, &ldquo;Q2&rdquo;=&gt;&ldquo;b&rdquo;, &ldquo;Q3&rdquo;=&gt;&ldquo;c&rdquo;, &ldquo;Q4&rdquo;=&gt;&ldquo;d&rdquo;}<br />
end</p>

<p>puts &ldquo;&mdash;-Usage of symbols consumes less memory because there is only one :Q1
symbol&rdquo;<br />
10000.times do |y|<br />
y = { :Q1=&gt;&ldquo;a&rdquo;, :Q2=&gt;&ldquo;b&rdquo;, :Q3=&gt;&ldquo;c&rdquo;, :Q4=&gt;&ldquo;d&rdquo;}<br />
end</p>

<p>19. 不同变量的表示方法<br />
puts “#{name1},#{@name2}”</p>

<p>20．文件读写<br />
复制input.txt到output.txt，并显示output.txt文件。<br />
infile = File.new(&ldquo;input.txt&rdquo;, &ldquo;r&rdquo;)<br />
outfile = File.new(&ldquo;output.txt&rdquo;, &ldquo;w&rdquo;)</p>

<p>puts &ldquo;&mdash;-Read input.txt file and write it to output.txt file&rdquo;<br />
infile.each do<br />
|i|<br />
outfile.write i<br />
end</p>

<p>outfile.close()<br />
infile.close()</p>

<p>puts &ldquo;&mdash;-Display output.txt file&rdquo;<br />
outfile = File.new(&ldquo;output.txt&rdquo;, &ldquo;r&rdquo;)<br />
outfile.each do<br />
|i|<br />
puts i<br />
end</p>

<p>21．Object查找有没有name方法<br />
puts Object.respond_to?(:name)</p>

<p>22.instance_of? Kind_of?的区别<br />
class A<br />
end</p>

<p>class B &lt; A<br />
end</p>

<p>a = A.new<br />
b = B.new</p>

<p>puts &ldquo;&mdash;-Exercise instance_of? and kind_of? methods among object instances&rdquo;<br />
puts a.instance_of?(A)<br />
puts b.instance_of?(A) =&gt;false<br />
puts b.kind_of?(A) =&gt;true</p>

<p>23. 定义缺省参数。<br />
class MyOwnRubyMetaClass<br />
def method_missing(m)<br />
puts &ldquo;#{m} method has &ldquo;+m.to_s.length.to_s+&rdquo; characters.&rdquo;<br />
end<br />
end</p>

<p>my_instance=MyOwnRubyMetaClass.new<br />
my_instance.method1<br />
my_instance.whatever<br />
my_instance.m545</p>

<p>method1 method has 7 characters.<br />
whatever method has 8 characters.<br />
m545 method has 4 characters.<br />
24. 两种each的显示：<br />
puts &ldquo;&mdash;-First format of code block containing code fragment between { and }&rdquo;<br />
[1, 2, 3].each { |n| puts &ldquo;Number #{n}&rdquo; }</p>

<p>puts &ldquo;&mdash;-Second format of code block containing code fragment between do and
end&rdquo;<br />
[1, 2, 3].each do |n|<br />
puts &ldquo;Number #{n}&rdquo;<br />
end</p>

<p>25．split<br />
split(/(\s+)/)： 匹配1个或多个空格字符<br />
split(/\b/)： 还可以匹配标点符号</p>

<p>26．每次处理字符串的一个字符<br />
‘foobar’.each_byte {|x| puts “#{x} = #{x.chr}”}<br />
102 = f<br />
111 = o<br />
。。。<br />
‘foobar’.scan(/./){|c| puts c}<br />
f<br />
o<br />
。。。</p>

<p>27． 组合键<br />
“\C-a” Ctrl+ a 的序列<br />
“\M-a” Alt + a 的序列</p>

<p>28. Array 总结<br />
1) #数组赋值的bug,第一种它始终指向一个对象,所以只能用block的方式<br />
f = Array.new(3, &ldquo;blah&rdquo;)<br />
f[0].capitalize!<br />
puts f # f is now: [&ldquo;Blah&rdquo;, &ldquo;Blah&rdquo;, &ldquo;Blah&rdquo;]<br />
g = Array.new(3) { &ldquo;blah&rdquo; }<br />
g[0].capitalize!<br />
puts g # f is now: [&ldquo;Blah&rdquo;, &ldquo;blah&rdquo;, &ldquo;blah&rdquo;]</p>

<p>2) 数组从0开始正排，负数从后面开始排。<br />
3) 方法slice是[]方法的别名：<br />
4) 方法nitems 也是返回数组的大小，不过他计算时不会包括nil的值：<br />
y = [1, 2, nil, nil, 3, 4]<br />
c = y.size # 6<br />
d = y.length # 6<br />
e = y.nitems # 4</p>

<p>5) 对象数组的比较，其中可以多个属性。<br />
list = list.sort_by {|x| [x.name, x.age, x.height] }</p>

<p>6) 等价表达</p>

<h1 id="detect-find-find-all-select-reject-与select-相反">detect == find find_all==select reject 与select 相反</h1>

<p>x = [5, 8, 12, 9, 4, 30]<br />
#得到第一个偶数<br />
p x.detect {|e| e % 2 == 0 } # 8<br />
p x.find {|e| e % 2 == 0 } # 8<br />
p x.find_all {|e| e % 2 == 0 } #[8, 12, 4, 30] p x.select{|e| e % 2 == 0 }
#[8, 12, 4, 30] 7) grep()查找字符串<br />
a = %w[January February March April May]<br />
a.grep(/ary/) # [&ldquo;January, &ldquo;February&rdquo;]<br />
b = [1, 20, 5, 7, 13, 33, 15, 28]<br />
b.grep(12..24) # [20, 13, 15]</p>

<p>8) 数组的集合操作<br />
| 或 &amp; 与 –差</p>

<h1 id="array加入异或操作-自定义函数-覆盖array方法">array加入异或操作，自定义函数 ，覆盖Array方法。</h1>

<p>class Array<br />
def ^(other)<br />
(self | other) - (self &amp; other)<br />
end</p>

<p>end</p>

<p>x = [1, 2, 3, 4, 5]<br />
y = [3, 4, 5, 6, 7]<br />
z = x ^ y<br />
p z # [1, 2, 6, 7]</p>

<p>include?或者member?<br />
x = [1, 2, 3]<br />
if x.include? 2<br />
puts &ldquo;yes&rdquo; # Prints &ldquo;yes&rdquo;<br />
else<br />
puts &ldquo;no&rdquo;<br />
end</p>

<p>#数组的交叉，并去除嵌套<br />
a = [1, 2, 3, 4]<br />
b = [&ldquo;a&rdquo;, &ldquo;b&rdquo;, &ldquo;c&rdquo;, &ldquo;d&rdquo;]<br />
c = a.zip(b)<br />
p c</p>

<h1 id="c-is-now-1-a-2-b-3-c-4-d">c is now [[1,&ldquo;a&rdquo;], [2,&ldquo;b&rdquo;], [3,&ldquo;c&rdquo;], [4,&ldquo;d&rdquo;]]</h1>

<h1 id="use-flatten-if-you-want-to-eliminate-the-nesting">Use flatten if you want to eliminate the nesting</h1>

<p>d = c.flatten<br />
p d</p>

<h1 id="d-is-now-1-a-2-b-3-c-4-d">d is now [1, &ldquo;a&rdquo;, 2, &ldquo;b&rdquo;, 3, &ldquo;c&rdquo;, 4, &ldquo;d&rdquo;]</h1>

<p>9) collect map<br />
我们能够使用collect,方法来操作数组，她也就是和一般函数式语言里面的map函数一样，将会返回一个新的数组，正好ruby中也有map方法，它是collect方法的别名：</p>

<p>x = %w[alpha bravo charlie delta echo foxtrot]</p>

<h1 id="get-the-initial-letters">Get the initial letters</h1>

<p>a = x.collect {|w| w[0..0]} # 对每一个元素应用 [0..0] %w[a b c d e f]</p>

<h1 id="get-the-string-lengths">Get the string lengths</h1>

<p>b = x.collect {|w| w.length} # [5, 5, 7, 5, 4, 7]</p>

<h1 id="map-is-just-an-alias">map is just an alias</h1>

<p>c = x.map {|w| w.length} # [5, 5, 7, 5, 4, 7]</p>

<p>10) 数组的删除<br />
compact :去除数组nil对象<br />
pop 数组删除最后一个元素<br />
shift 数组删除最前一个元素<br />
uniq 去除重复元素。</p>

<p>29. linux下安装ruby<br />
1) 从<a href="http://www.ruby-lang.org/">http://www.ruby-lang.org/</a> 下载ruby-1.8.4.tar.gz<br />
2) tar –zxf ruby-1.8.4.tar.gz<br />
转入ruby文件目录下运行<br />
$ ./configure<br />
$ make<br />
$ make install<br />
3) ruby –v 查看当前版本<br />
4) 设置环境变量<br />
$echo $PATH<br />
$export PATH=$PATH:/usr/local/ruby/bin 不能保存</p>

<p>全局环境变量/etc/profile<br />
本地环境变量/home/username/.bash_profile</p>

<p>30. ruby 对象关系</p>

<p>31. self.last 和self.end 与..和…没有关系</p>

<p>(1..10).end #10<br />
(1…10).end #10</p>

<p>32.ruby gem包放置位置<br />
D:\ruby\lib\ruby\gems\1.8\cache</p>

<p>33. File<br />
File.statr 结果包含关于文件元数据的宝贵信息。<br />
mtime: 写文件的最后时间<br />
atime: 读文件的最后时间</p>

<p>‘w’: 写模式<br />
‘a’ : 附加模式</p>

<p>要查找当前工作目录:<br />
Dir.getwd</p>

<p>Rails读书笔记</p>

<p>1. 编码设置<br />
UTF-8<br />
1) netbeans 安装目录的etc目录下面修改<br />
netbeans_default_options=&ldquo;-J-Dorg.netbeans.modules.tomcat.autoregister.token=1213058320593
-J-Dorg.netbeans.modules.tomcat.autoregister.catalinaHome=\&ldquo;D:\Apache Tomcat
6.0.16\&rdquo; -J-Dcom.sun.aas.installRoot=\&ldquo;C:\Program Files\glassfish-v2ur2\&rdquo;
-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-XX:MaxPermSize=200m
-J-Xverify:none -J-Dapple.laf.useScreenMenuBar=true
-J-Dsun.java2d.noddraw=true -J-Dfile.encoding=UTF-8&rdquo;<br />
2) netbeans工程项目选择UTF-8<br />
3) environment.rb加入<br />
ENV[&lsquo;NLS_LANG&rsquo;] = &ldquo;AMERICAN_AMERICA.UTF8&rdquo;<br />
4) application.rb加入<br />
ActionController::Base.default_charset=(&ldquo;UTF-8&rdquo;)<br />
before_filter :configure_charsets<br />
def configure_charsets<br />
response.headers[&ldquo;Content-Type&rdquo;] = &ldquo;text/html; charset=UTF-8&rdquo;<br />
end<br />
5）所有rhtml页面的编码改为UTF-8,文件格式都要改成UTF-8,.rb的文件可以不改。<br />
UTF-8情况下，控制台中国标准时间是乱码,而且处理传递中文参数乱码。</p>

<p>GBK<br />
1) netbeans工程项目选择GBK<br />
2) application.rb加入<br />
$KCODE=&ldquo;GBK&rdquo;<br />
ActionController::Base.default_charset=(&ldquo;GBK&rdquo;)<br />
before_filter :configure_charsets<br />
def configure_charsets<br />
response.headers[&ldquo;Content-Type&rdquo;] = &ldquo;text/html; charset=GBK&rdquo;<br />
end<br />
3) 所有ruby、rhtml文件格式不变，统一为标准编码。</p>

<p>控制台中文参数正确，页面传递中文参数也没有问题。</p>

<p>2. rails depot 项目总结<br />
1) 缺省admin 的密码secret<br />
2) 数据库迁移语法。<br />
add_column :products, :price, :decimal, :precision =&gt; 8, :scale =&gt; 2, :default
=&gt; 0<br />
:precision 有效数字<br />
:scale 小数点后位数<br />
3) 校验<br />
validates_presence_of :title, :description, :image_url #校验是否为空<br />
validates_numericality_of :price #检验数字是否非法<br />
validates_uniqueness_of :title #检验标题是否唯一<br />
validates_format_of :image_url,<br />
:with =&gt; %r{\.(gif|jpg|png)$}i,<br />
:message =&gt; &ldquo;must be a URL for a GIF, JPG, or PNG image&rdquo;<br />
protected<br />
def validate<br />
errors.add(:price, &ldquo;should be at least 0.01&rdquo;) if price.nil? || price &lt; 0.01<br />
end<br />
4) %{} 连接比较长的字符串<br />
5) 标签库<br />
br&gt; &ldquo;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a><br />
6) CSS的套用<br />
&ldquo;all&rdquo; %&gt;<br />
Js的应用</p>

<p>7） 交替使用颜色</p>

<p>8）价钱显示方式，默认显示2位</p>

<p>Number_to_currency(123456789.50,:unit=&gt;”£”,:separator=&gt;”,”,:delimiter=&gt;””)<br />
£123456789,50<br />
￥</p>

<p>9）激活session机制<br />
config.action_controller.session_store = :active_record_store</p>

<p>10) 模型之间的关系<br />
比如订单(order)和(line_items)是主从表关系<br />
class Order &lt; ActiveRecord::Base<br />
has_many :line_items<br />
end</p>

<p>class LineItem &lt; ActiveRecord::Base<br />
belongs_to :order<br />
belongs_to :product<br />
end</p>

<p>11)命名约定<br />
变量名应该全部小写，单词之间以下划线分隔。<br />
类和模块的名称下面没有下划线,首字母大写。</p>

<p>12) 2.1下脚手架的使用<br />
ruby script/generate scaffold product title:string description:text
image_url:string</p>

<p>13）防注入SQL语句<br />
name = params[:name]<br />
pos = Order.find(:all,:conditions=&gt;[“name=? and pay_type=’po’”，name]);</p>

<p>使用like<br />
name = params[:name]<br />
User.find(:all,:conditions=&gt;[“name like ?”, name+”%”]);</p>

<p>:conditions 条件 :conditions=&gt;[”name=?”,name]<br />
:order 排序 :order=&gt;”pay_type,ship desc”<br />
:limit 条数 :limit=&gt;10<br />
:offset 偏移数量 :limit=&gt;page_size,:offset=&gt;page_num*page_size<br />
:joins 表之间的关联 :joins=&gt;”inner join products on …”<br />
:select 字段 :select=&gt;”title,speaker,recorded_on”<br />
:readonly :readonly=&gt;true<br />
:from :from=&gt;表名<br />
:group :group=&gt;”sku”</p>

<p>14) delete 和destory 的区别<br />
Delete 绕过了ActionRecord的回调和验证<br />
Destroy 确保调用这些功能。<br />
最好使用后者。</p>

<p>15) 字符串连接方式<br />
name1=&ldquo;中国&rdquo;<br />
name2=&ldquo;日本&rdquo;<br />
name3=&ldquo;韩国&rdquo;<br />
puts [name1,name2,name3].compact.join(&ldquo;&rdquo;)<br />
puts name1+name2+name3<br />
中国日本韩国 中国日本韩国 16) 用聚合来组织数据<br />
Composed_of :name,<br />
:class_name =&gt;Name,<br />
:mapping=&gt;<br />
[<br />
[:first_name :first],<br />
[:initizls, :initizls],<br />
[:last_name, :last]<br />
]</p>

<p>17) 当数据库出现写操作时，切记语句要有ID。</p>

<p>18） 一对一、一对多、多对多的分别写法<br />
一对一：<br />
class Order &lt; ActiveRecord::Base<br />
has_one :invoice<br />
End<br />
Class Invoice &lt; ActiveRecord::Base<br />
belongs_to :order<br />
End</p>

<p>一对多：<br />
class Order &lt; ActiveRecord::Base<br />
has_many :line_items<br />
End<br />
Class LineItem &lt; ActiveRecord::Base<br />
Belongs_to :order<br />
End</p>

<p>多对多：<br />
class Product &lt; ActiveRecord::Base<br />
has_and_belongs_to_many :categories<br />
End<br />
Class Cateory &lt;:base&gt; has_and_belongs_to_many :products<br />
End</p>

<p>19）校验<br />
validates_acceptance_of 检查checkbox是否被选中。<br />
validates_associated 对关联对象进行校验。<br />
validates_confirmation_of 校验一个字段及确认字段拥有相同的内容。<br />
validates_each 在代码块中校验1个或多个属性值。<br />
validates_exclusion_of 校验属性值不在一组值之中。<br />
validates_format_of 校验属性值是否匹配1个正则表达式<br />
validates_inclusion_of 校验指定的属性值是否出现在一组指定的数值中。<br />
validates_length_of 校验属性值的长度。<br />
validates_numericality_of 校验指定属性是合法的数值。<br />
validates_presence_of 校验指定属性不为空。<br />
validates_size_of 校验指定属性的长度<br />
validates_uniqueness_of 校验属性的唯一性。</p>

<p>20）save 成功返回true,失败返回nil。<br />
save! 成功返回true,失败抛出异常。</p>

<p>begin<br />
Order.save!<br />
rescue RecordInvalid =&gt;error</p>

<h1 id="处理">处理</h1>

<p>end</p>

<p>21）开发环境部署<br />
1.安装rails2.1<br />
2.安装数据库dbi<br />
1)gem install activerecord-oracle-adapter &ndash;source <a href="http://gems.rubyonrails.org">http://gems.rubyonrails.org</a><br />
2)然后再安装ruby和oracle的驱动：<br />
gem install ruby-oci8 或者 ruby ruby-oci8-1.0.0-mswin32.rb<br />
还需要把database.yml里面的adapter名字从oci改为oralce</p>

<p>22）rails扩展string操作<br />
string =”Now is the time”</p>

<p>puts string.at(2)<br />
puts string.from(8)<br />
puts string.to(8)<br />
puts string.first<br />
puts string.first(3)<br />
puts string.last<br />
puts string.last(4)<br />
puts string.starts_with?(“No”)<br />
puts string.ends_with(“ME”)</p>

<p>puts Time.now.to_s(:db) 2008-05-12 09：30：00</p>

<p>23）对象数组的比较排序<br />
list4.sort!{ |a,b| a.freq_start &lt;=&gt; b.freq_start }</p>

<p>24）配套JS收集<br />
//合并单元格<br />
function SpanGrid(tabObj,colIndex)<br />
{<br />
if(tabObj != null)<br />
{<br />
var i,j;<br />
var intSpan;<br />
var strTemp;<br />
for(i = 0; i &lt; tabObj.rows.length; i++)<br />
{<br />
intSpan = 1;<br />
strTemp = tabObj.rows[i].cells[colIndex].innerText;<br />
for(j = i + 1; j &lt; tabObj.rows.length; j++)<br />
{<br />
if(strTemp == tabObj.rows[j].cells[colIndex].innerText)<br />
{<br />
intSpan++;<br />
tabObj.rows[i].cells[colIndex].rowSpan = intSpan;<br />
tabObj.rows[j].cells[colIndex].style.display = &ldquo;none&rdquo;;<br />
}<br />
else<br />
{<br />
break;<br />
}<br />
}<br />
i = j - 1;<br />
}<br />
}<br />
}<br />
其中tabObj为table的id，colIndex是对与那一列。</p>

<p>25）js 传中文参数<br />
1．页面传取用encodeURIComponent（中文）<br />
2．页面读取用<br />
require &ldquo;iconv&rdquo;<br />
system_name= Iconv.conv(&ldquo;gbk&rdquo;, &ldquo;utf-8&rdquo;, system_name) 进行转码<br />
26) rails注释的写法</p>

<h1 id="todo-这里增加代码">todo: 这里增加代码</h1>

<h1 id="optimize-此函数需要优化">optimize: 此函数需要优化</h1>

<h1 id="fixme-需要修正">fixme： 需要修正</h1>

<p>找出注释清单<br />
rake notes<br />
rake notes：todo</p>

<p>27）ActiveRecord::Base.pluralize_table_names = false #单数表名支持</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a></li>
        
        <li><a href="/posts/051rubyonrails%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%981hellorails/">051RubyonRails學習筆記1Hellorails</a></li>
        
        <li><a href="/posts/053rubyonrails%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%986%E9%87%8D%E6%A7%8B%E5%88%AA%E9%99%A4%E7%95%99%E8%A8%80%E5%AE%89%E5%85%A8/">053RubyonRails學習筆記6重構刪除留言安全</a></li>
        
        <li><a href="/posts/055rubyonrails%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%987carrierwaveimplementation/">055RubyonRails學習筆記7CarrierwaveImplementation</a></li>
        
        <li><a href="/posts/065rubyonrails%E7%AD%86%E8%A8%9810showtargetinfoongooglemaps/">065Rubyonrails筆記10showtargetinfoongooglemaps</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/ruby'>ruby</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>