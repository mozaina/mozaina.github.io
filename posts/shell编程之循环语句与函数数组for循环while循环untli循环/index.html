<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Shell编程之循环语句与函数数组for循环while循环untli循环 | 开发者问答集锦</title>
    <meta property="og:title" content="Shell编程之循环语句与函数数组for循环while循环untli循环 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Shell编程之循环语句与函数数组for循环while循环untli循环">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E4%B8%8E%E5%87%BD%E6%95%B0%E6%95%B0%E7%BB%84for%E5%BE%AA%E7%8E%AFwhile%E5%BE%AA%E7%8E%AFuntli%E5%BE%AA%E7%8E%AF/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Shell编程之循环语句与函数数组for循环while循环untli循环</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h3 id="文章目录">文章目录</h3>

<ul>
<li>循环语句

<ul>
<li>for循环语句

<ul>
<li>使用for批量添加用户</li>
<li>根据IP地址检查主机状态</li>
<li>用循环语句输出1-10的数字的四种办法</li>
<li>shell中let命令</li>
<li>计算1-10偶数/奇数的和</li>
</ul></li>
<li>while循环语句

<ul>
<li>使用while循环语句输出1-10数字</li>
<li>猜商品价格游戏</li>
</ul></li>
<li>untli循环语句

<ul>
<li>计算1–50的和</li>
</ul></li>
</ul></li>
<li>Shell函数

<ul>
<li>shell函数概述</li>
<li>调用函数的方法

<ul>
<li>shell函数应用——两个数字求和</li>
</ul></li>
</ul></li>
<li>Shell数组

<ul>
<li>数组应用场景</li>
<li>数组定义方法

<ul>
<li>创建任意数字及长度的数组，根据客户需求加入元素</li>
</ul></li>
</ul></li>
</ul>

<h1 id="循环语句">循环语句</h1>

<h2 id="for循环语句">for循环语句</h2>

<p>读取不同的变量值，用来逐个执行同一组命令</p>

<pre><code>语句结构
for 变量名 in 取值列表
do
    命令序列
done

语句结构举例
for 收件人 in 邮件地址列表
do
    发送邮件
done
</code></pre>

<p><a href="https://img.it610.com/image/info8/f0b4907306db4e77ace920f591543486.jpg"><img src="https://img.it610.com/image/info8/f0b4907306db4e77ace920f591543486.jpg" alt="Shell编程之循环语句与函数，数组（for循环、while循环、untli循环）_第1张图片" /></a></p>

<h3 id="使用for批量添加用户">使用for批量添加用户</h3>

<p>用户名存放在111.txt文件中，每行一个<br />
初始密码均设为123456</p>

<pre><code>[root@localhost opt]# vim 111.txt
stu1
stu2
stu3
stu4



[root@localhost opt]# vim useradd.sh
#!/bin/bash
name=$(cat /root/111.txt)
for a in $name
do
        useradd $a
        echo &quot;123456&quot; | passwd --stdin $a
        echo &quot;$a添加成功&quot;
done



[root@promote ~]# . 333.sh 
更改用户 stu1 的密码 。
passwd：所有的身份验证令牌已经成功更新。
stu1添加成功
更改用户 stu2 的密码 。
passwd：所有的身份验证令牌已经成功更新。
stu2添加成功
更改用户 stu3 的密码 。
passwd：所有的身份验证令牌已经成功更新。
stu3添加成功
更改用户 stu4 的密码 。
passwd：所有的身份验证令牌已经成功更新。
stu4添加成功
</code></pre>

<h3 id="根据ip地址检查主机状态">根据IP地址检查主机状态</h3>

<p>检测IP地址192.168.110.0-192.168.110.10段落<br />
使用ping命令检测各主机的连通性</p>

<pre><code>#!/bin/bash
for ((a=1;a&lt;=10;a++))
do
  ping -c 3 -i 0.2 -W 3 &quot;192.168.110.$a&quot; &amp;&gt; /dev/null
  if [ $? -eq 0 ]
        then
        echo &quot;Host 192.168.110.$a is up&quot;
  else
        echo &quot;Host 192.168.110.$a is down&quot;
  fi
done



[root@promote ~]# . 222.sh 
Host 192.168.110.1 is up
Host 192.168.110.2 is up
Host 192.168.110.3 is down
Host 192.168.110.4 is down
Host 192.168.110.5 is down
Host 192.168.110.6 is down
Host 192.168.110.7 is down
Host 192.168.110.8 is down
Host 192.168.110.9 is down
Host 192.168.110.10 is up
</code></pre>

<h3 id="用循环语句输出1-10的数字的四种办法">用循环语句输出1-10的数字的四种办法</h3>

<pre><code>#!bin/bash
for ((a=1;a&lt;=10;a++))
do
  echo $a
done       



[root@promote ~]# . 222.sh 
1
2
3
4
5
6
7
8
9
10
</code></pre>

<h3 id="shell中let命令">shell中let命令</h3>

<p>let 对整数进行数学运算</p>

<p>let和双小括号 (( )) 一样，let 命令也只能进行整数运算，不能对小数（浮点数）或者字符串进行运算。</p>

<pre><code>语法格式
let 表达式
或
let &quot;表达式&quot;
或
let '表达式'
以上方式都等价于 ((表达式))
</code></pre>

<p>当表达式中含有 Shell 特殊字符（例如 |）时，需要用双引号&rdquo; &ldquo;或者单引号’ &lsquo;将表达式包围起来。</p>

<p>和 (( )) 类似，let 命令也支持一次性计算多个表达式，并且以最后一个表达式的值作为整个 let 命令的执行结果。</p>

<h3 id="计算1-10偶数-奇数的和">计算1-10偶数/奇数的和</h3>

<pre><code>#!bin/bash
he=0
for((a=0;a&lt;=10;a+=2))
  do
        if [ `expr $a % 2` -eq 0 ]
         then
           let he+=$a
        fi
  done
        echo &quot;总和为：$he&quot;          



[root@promote ~]# . abc.sh 
总和为：30




加法运算：+
减法运算：-
乘法运算：\*
除法运算：/
求模（取余）运算：%

++   自身变量+1
+=5  自身变量+5
-=5  自身变量-5
\*=5 自身变量*5
....
</code></pre>

<h2 id="while循环语句">while循环语句</h2>

<p>重复测试某个条件，只要条件成立则反复执行</p>

<pre><code>语句结构
while 条件测试操作
do
    命令序列
done

语句结构示例
while 未猜中正确的价格
do
    反复猜测商品价格
done
</code></pre>

<p><a href="https://img.it610.com/image/info8/d9b9647ef998447e89d9ac72af4846a3.jpg"><img src="https://img.it610.com/image/info8/d9b9647ef998447e89d9ac72af4846a3.jpg" alt="Shell编程之循环语句与函数，数组（for循环、while循环、untli循环）_第2张图片" /></a></p>

<h3 id="使用while循环语句输出1-10数字">使用while循环语句输出1-10数字</h3>

<pre><code>#!/bin/bash
a=1
while [ $a -le 10 ]
do
  echo &quot;$a&quot;
 let a++
done



[root@promote ~]# . 111.sh 
1
2
3
4
5
6
7
8
9
10
</code></pre>

<h3 id="猜商品价格游戏">猜商品价格游戏</h3>

<p>通过变量RANDOM获得随机数</p>

<p>提示用户猜测并记录次数，猜中后退出循环</p>

<pre><code>#!/bin/bash
A=`expr $RANDOM % 1000`
i=0
echo &quot;商品的实际价格为0-999之间，猜猜看是多少？&quot;
read -p &quot;请输入你猜测的价格数目：&quot; num
while [ $num -le 999 ] &amp;&amp; [ $num -ge 1 ] 
do
        let i++
     if [ $num -eq $A ]
        then
        echo &quot;恭喜你答对了，实际价格是$A&quot;
        echo &quot;你一共猜测了$i 次&quot;
        exit 0
     elif [ $num -lt $A ]
        then
        echo &quot;太低了&quot;
        read -p &quot;请输入你猜测的价格数目：&quot; num
     else
        echo &quot;太高了&quot;
        read -p &quot;请输入你猜测的价格数目：&quot; num
     fi
  done
</code></pre>

<h2 id="untli循环语句">untli循环语句</h2>

<p>重复测试某个条件，只要条件不成立则反复执行</p>

<pre><code>until 条件测试操作
do
 命令序列
done

until 未超过10
do
 数字依次增加
done
</code></pre>

<p><a href="https://img.it610.com/image/info8/a46af433a1c3401abfeb08c8a29e7db7.jpg"><img src="https://img.it610.com/image/info8/a46af433a1c3401abfeb08c8a29e7db7.jpg" alt="Shell编程之循环语句与函数，数组（for循环、while循环、untli循环）_第3张图片" /></a></p>

<h3 id="计算1-50的和">计算1–50的和</h3>

<pre><code>#!/bin/bash
i=1
S=0
until [ $i -eq 51 ]
do
 let S+=$i
 let i++

done
echo &quot;$S&quot;



[root@promote ~]# . 111.sh 
1275
</code></pre>

<h1 id="shell函数">Shell函数</h1>

<h2 id="shell函数概述">shell函数概述</h2>

<p>shell一个非常重要的特性是它可作为一种编程语言来使用。</p>

<p>因为shell是一个解释器，所以它不能对为它编写的程序进行编译，而是在每次从磁盘加载这些程序时对它们进行解释。而程序的加载和解释都是非常耗时的。</p>

<p>针对此问题，许多shell（如BourneAgainShell）都包含shell函数，shell把这些函数放在内存中，这样每次需要执行它们时就不必再从磁盘读入。</p>

<p>shell还以一种内部格式来存放这些函数，这样就不必耗费大量的时间来解释它们</p>

<p>shell函数将命令序列按格式写在一起</p>

<p>可以方便重复使用命令序列</p>

<h2 id="调用函数的方法">调用函数的方法</h2>

<p>函数名 [参数1($1)] [参数2($2)]</p>

<p>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值，例如，$1表示第一个参数，$2表示第二个参数…</p>

<p>10不能获取第十个参数，获取第十个参数需要{10}。当n&gt;=10时，需要使用${n}来获取参数。</p>

<h3 id="shell函数应用-两个数字求和">shell函数应用——两个数字求和</h3>

<p>通过sum(){}定义函数</p>

<p>使用read命令交互输入两个数并求和</p>

<pre><code>#!/bin/bash
#sum=0
 function  A (){
  read -p &quot;请输入第一个数字：&quot; B
  read -p &quot;请输入第二个数字：&quot; C
  sum=`expr $B + $C`
  echo &quot;$B + $C = $sum&quot;
  return 3
}
#echo $sum
A $B $C



[root@localhost opt]# ./han.sh 
请输入第一个数字：4
请输入第二个数字：2
4 + 2 = 6
[root@localhost opt]# echo $?
3
[root@localhost opt]# echo $?
0
</code></pre>

<h1 id="shell数组">Shell数组</h1>

<h2 id="数组应用场景">数组应用场景</h2>

<ul>
<li>获取数组长度</li>
</ul>

<p>使用for循环获取具体信息，使用下标或索引标记数组中数据的位置</p>

<p>可以存放多种数据，如：整型，长整形，浮点型（单精度，双精度），字符串等</p>

<ul>
<li><p>获取元素长度</p></li>

<li><p>遍历元素</p></li>

<li><p>元素切片</p></li>

<li><p>元素替换</p></li>

<li><p>元素删除</p></li>

<li><p>……</p></li>
</ul>

<p>例<br />
数组名称 arr=（11,22,33,44） arr就是数组名称（名字自己定义）<br />
数组元素 （11,22,33,44）<br />
数组长度 数组中元素的个数（4）<br />
数组下标 第一个元素下标是0，第二个是1以此往后（33的下标值是2）<br />
切片：只拿中间的某个子部分</p>

<h2 id="数组定义方法">数组定义方法</h2>

<pre><code>第一种
[root@promote ~]# abc=(1 2 3 4 5)
[root@promote ~]# echo ${abc[*]}  #*所有下标
1 2 3 4 5
[root@promote ~]# echo $abc
1
根据下标调用元素
[root@promote ~]# echo ${abc[4]}
5

第二种
[root@promote ~]# abc=([0]=22 [1]=33 [2]=44 [3]=55)
[root@promote ~]# echo ${abc[@]}    #@和*都表示所有
22 33 44 55

第三种
[root@promote ~]# abc=&quot;12 34 56 78&quot;
[root@promote ~]# cba=($abc)
[root@promote ~]# echo ${cba[*]}
12 34 56 78

第四种
[root@promote ~]# a[0]=&quot;1&quot;
[root@promote ~]# a[1]=&quot;2&quot;
[root@promote ~]# a[3]=&quot;3&quot;
[root@promote ~]# echo ${a[*]}
1 2 3
</code></pre>

<h3 id="创建任意数字及长度的数组-根据客户需求加入元素">创建任意数字及长度的数组，根据客户需求加入元素</h3>

<pre><code>#!bin/bash
i=0         #数组下标
while true
do
  read -p &quot;是否存入元素（yes/no）:&quot; a
  if [ $a == no ];then
    break
  fi
  read -p &quot;请存入第$[$i+1]个元素：&quot; b
  aaa[$i]=$b
  let i++
done
echo ${aaa[*]}
</code></pre>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>