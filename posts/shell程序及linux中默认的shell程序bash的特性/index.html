<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Shell程序及Linux中默认的Shell程序Bash的特性 | 开发者问答集锦</title>
    <meta property="og:title" content="Shell程序及Linux中默认的Shell程序Bash的特性 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Shell程序及Linux中默认的Shell程序Bash的特性">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E7%A8%8B%E5%BA%8F%E5%8F%8Alinux%E4%B8%AD%E9%BB%98%E8%AE%A4%E7%9A%84shell%E7%A8%8B%E5%BA%8Fbash%E7%9A%84%E7%89%B9%E6%80%A7/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Shell程序及Linux中默认的Shell程序Bash的特性</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p><strong>SHELL:</strong></p>

<p>一方面指用户与操作系统之间完成交互式操作的接口程序的统称，可以为用户提供简化的操作；</p>

<p>另一方面指shell也是一种程序语言；</p>

<p>在上世纪70年代中期，著名的实验室中的实验人员Bourne发明了bourne shell程序，简称sh；之后美 国计算机科学家 Bill
joy根据bourne shell用C语言重新编译C bourne shell，简称csh，后来的衍生版 名为tcsh；之后David
korn集合csh和sh的优点发明korn shell，简称ksh；开源组织GNU在比较这几 代的shell程序后发明bourne again
shell，简称bash，进而成为Linux系统中默认的shell程序；再然后
进阶为zsh，也是最终shell，功能非常强大；因为bash是Linux中的默认shell程序，先入为主，zsh并 没有撼动bash的默认地位。</p>

<p>当前系统中所有可以支持的安全shell：</p>

<p>cat /etc/shells</p>

<p><a href="https://img.it610.com/image/info8/b91fcbc929524377b6c72152248afe2f.png"><img src="https://img.it610.com/image/info8/b91fcbc929524377b6c72152248afe2f.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第1张图片" /></a></p>

<p>注意：除了/sbin/nologin之外，其他shell都可以用来测试使用：</p>

<p>在更换shell时，最好在bash中更换其他shell</p>

<p>；</p>

<p>如果已经换成了其他shell，就使用exit命令返回至bash，再行切换</p>

<p><a href="https://img.it610.com/image/info8/28c76dfdf6c04a0b89dd8465d8d51a90.png"><img src="https://img.it610.com/image/info8/28c76dfdf6c04a0b89dd8465d8d51a90.png" alt="767324435dce762d9b503beb4992c8c9.png" /></a>；</p>

<p>切勿进行一下切换方式，这种方式是错误的，会对系统造成很大的压力和负荷</p>

<p><a href="https://img.it610.com/image/info8/7ec934f11f93432f84a10c32d1e244ef.png"><img src="https://img.it610.com/image/info8/7ec934f11f93432f84a10c32d1e244ef.png" alt="3b2d13809d5bb2f13158426812930f75.png" /></a></p>

<p>如上的连续的shell程序切换，只是在已经切换的tcsh中又打开了csh的shell程序，又在csh中打开了bash程序，会对系统造成很大的压力，之后只要按如下操作退出，可以以echo
$0的命令来查看当前使用的shell程序，如下：</p>

<p><a href="https://img.it610.com/image/info8/806c0919961546cd99be7285452c1bc8.png"><img src="https://img.it610.com/image/info8/806c0919961546cd99be7285452c1bc8.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第2张图片" /></a>；</p>

<p><strong>BASH的特性：</strong></p>

<p>一、命令的别名&ndash;（自定义命令）</p>

<p>alias:</p>

<p>定义或显示别名</p>

<p><a href="https://img.it610.com/image/info8/910266575b1e42d1a6ff5caafa3fa0f8.png"><img src="https://img.it610.com/image/info8/910266575b1e42d1a6ff5caafa3fa0f8.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第3张图片" /></a></p>

<p>命令格式：</p>

<p>alias [-p] [名称[=值] &hellip; ]</p>

<p>注意：如果alias命令不带任何选项和参数，则表示显示所有已经定义并生效的别名设置；</p>

<h1 id="alias-alias-command-option-argument">alias ALIAS=&lsquo;COMMAND [OPTION]&hellip;[ARGUMENT]&hellip;&rsquo;</h1>

<p><a href="https://img.it610.com/image/info8/733be922089645d3aae1d668fc5eb8bb.png"><img src="https://img.it610.com/image/info8/733be922089645d3aae1d668fc5eb8bb.png" alt="da589b82188da31004d8f3f90412fec2.png" /></a></p>

<p>上图中，我们自定义命令mp等价于复制目录的命令‘mkdir -p’，在</p>

<p><a href="https://img.it610.com/image/info8/5d8740d77cb948f1a5155dda07ee5db9.png"><img src="https://img.it610.com/image/info8/5d8740d77cb948f1a5155dda07ee5db9.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第4张图片" /></a></p>

<p>unalias:</p>

<p>从别名定义列表中删除每一个“名字‘</p>

<p>命令格式：</p>

<p>unalias [-a] 名称 [名称 &hellip;]</p>

<p>注意：</p>

<p>无论使用alias命令还是unalias命令，其功能都会立即生效；此二命令的生命期仅为当前shell的生命期，一旦注销登录，就相当于关闭了bash，则使用alias命令定义的别名或使用unalias命令删除的别名操作，会立即失效；</p>

<p>对于每个用户来说，都有一个私有的bash的配置文件，就在用户的家目录中的一个隐藏文件，文件名为“.bashrc”,其主要功能是用来保存命令的别名。</p>

<p><a href="https://img.it610.com/image/info8/801218737aab474da846181b2b2637bb.png"><img src="https://img.it610.com/image/info8/801218737aab474da846181b2b2637bb.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第5张图片" /></a></p>

<p>注意：</p>

<p>在对于此文件中的命令别名进行编辑并保存之后，在当前已经运行的bash中并不会立即生效，需要重新加载此文件才能使配置生效，以下两种操作皆可实现：</p>

<p>1.重启bash：注销之后再次登录即可：</p>

<p>2.执行文件中定义的命令：使用source或.；</p>

<p>source/. :</p>

<p>在当前 shell 中执行一个文件中的命令；</p>

<p>格式：</p>

<p>source 文件名 [参数]</p>

<p>. 文件名 [参数]</p>

<p><a href="https://img.it610.com/image/info8/c2709336abde48daa9927c724248c62f.png"><img src="https://img.it610.com/image/info8/c2709336abde48daa9927c724248c62f.png" alt="24a584ac62db7311980036fef58de71b.png" /></a></p>

<p>二、bash的快捷键：</p>

<p>C：Ctrl键</p>

<p>M：Alt键</p>

<p>E：Esc键</p>

<p>DEL:backspace键</p>

<p>C+l:清屏，Ctrl+L；</p>

<p>C+a:将光标跳转至命令行编辑模式的行首；</p>

<p>C+e：将光标跳转至命令行编辑模式的行尾；</p>

<p>C+k:删除光标所在位置至行尾的内容；</p>

<p>C+u：删除命令行编辑模式的光标所在位置至行首的内容；</p>

<p>C+c：结束前台进程；</p>

<p>M+.:引用上一个命令中的最后一个参数；（在Xshell中不可使用）</p>

<p>Esc+.：引用上一个命令中的最后一个参数(功能同M+.)；</p>

<p>三、命令历史：</p>

<p>bash进程会保存其会话中的用户曾经执行过的命令，以方便用户重复执行某个命令操作；</p>

<p>命令历史包括两个方面：</p>

<p>1.用户曾经执行过的命令；</p>

<p>2.用户曾经执行过的命令的路径；</p>

<p>在bash中有一个内置的变量&ndash;
PATH，PATH变量的值为当前所有系统中所有命令的文件的所在路径的集合<a href="https://img.it610.com/image/info8/a2d7187188324eb4a382972077009d98.png"><img src="https://img.it610.com/image/info8/a2d7187188324eb4a382972077009d98.png" alt="696b248a4d2e4a46613ed9cfae63ac8e.png" /></a>；</p>

<p>shell程序执行命令的过程：</p>

<p>bash会将命令行的内容按照空白字符进行切片，分析第一个切片内容：</p>

<p>1.判断第一个切片的内容是外部命令还是外部命令；</p>

<p>如果是内部命令，直接执行；</p>

<p>如果是外部命令，先找hash表中的路径缓存，如果有，则直接执行；否则需要通过查找PATH变量中包含路径中，是否有对应名称的文件；</p>

<p><a href="https://img.it610.com/image/info8/e81acb9e69fa4661b162bde38c3f7310.png"><img src="https://img.it610.com/image/info8/e81acb9e69fa4661b162bde38c3f7310.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第6张图片" /></a></p>

<p>使用hash命令查看被记住的命令文件的路径：</p>

<p>-r：清空hash表；</p>

<p>使用history命令查看被记住的命令的命令行参数；</p>

<p>history：</p>

<p>显示或操纵历史列表；</p>

<p>格式：</p>

<p>history [-c] [-d 偏移量] [n] 或 history -anrw [文件名] 或 history -ps 参数 [参数&hellip;]</p>

<p>常用选项：</p>

<p>-c：删除所有条目从而清空历史列表；</p>

<p>-d OFFSET 偏移量:从指定位置删除历史列表</p>

<p><a href="https://img.it610.com/image/info8/7d92285f0cc5428a89cfb92fbdad98b7.png"><img src="https://img.it610.com/image/info8/7d92285f0cc5428a89cfb92fbdad98b7.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第7张图片" /></a>（如图所示，原来所在的198行的历史*已被删除）；</p>

<p>重复执行历史缓冲区中的命令：</p>

<p>！NUMBER:重复执行历史缓冲区中编号为“NUMBER”的命令；</p>

<p>！STRING:重复执行历史缓冲区中以“STRING”开头的最后一次执行过的命令<a href="https://img.it610.com/image/info8/fb8e262e3bc24bf49cdec2563eb6fa28.png"><img src="https://img.it610.com/image/info8/fb8e262e3bc24bf49cdec2563eb6fa28.png" alt="4fd5d0bee4e78d0e3dfe1f858c8002b8.png" /></a>；</p>

<p>！-NUMBER:重复执行历史缓冲区中倒数第“NUMBER”条命令</p>

<p><a href="https://img.it610.com/image/info8/c8956a3a5d9a4f0baf720630f662b28c.png"><img src="https://img.it610.com/image/info8/c8956a3a5d9a4f0baf720630f662b28c.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第8张图片" /></a>；</p>

<p>使用上、下箭头可以从历史缓冲区中调用命令，回车之后执行；</p>

<p>C+r：在历史缓冲区中实施搜索，回车之后执行
<img src="https://img.it610.com/image/info8/d547793026ac48279e0a015dab726136.png" alt="9f4b7979b72c6e6cf93dafde84325d8a.png" />；</p>

<p>!$:在历史缓冲区中调用最后一个命令的最后一个参数<a href="https://img.it610.com/image/info8/c1fd86ed35ae4585b560b3d53b9c8cb9.png"><img src="https://img.it610.com/image/info8/c1fd86ed35ae4585b560b3d53b9c8cb9.png" alt="5e6be0d7e0e2f01dcce202371f3ac5f3.png" /></a>；</p>

<p>!^:在历史缓冲区中调用最后一个命令的第一个位置的参数<a href="https://img.it610.com/image/info8/3383cd06ff224c9a9925fb75ee25bc76.png"><img src="https://img.it610.com/image/info8/3383cd06ff224c9a9925fb75ee25bc76.png" alt="47e7e66b67c59727cff4d4b26b5dc318.png" /></a>；</p>

<p>!:NUMBER：在历史缓冲区中调用最后一个命令的第“NUMBER”位置的参数</p>

<p><a href="https://img.it610.com/image/info8/2c0cf66f64164e1cb8e66ac7c1b7aeb8.png"><img src="https://img.it610.com/image/info8/2c0cf66f64164e1cb8e66ac7c1b7aeb8.png" alt="9bb7cfd4fb471144860fe013515a5a97.png" /></a>；</p>

<p>!SEQUENCE:NUMBER：在历史缓冲区中调用第“SEQUENCE”条命令的第“NUMBER”位
置的参数<a href="https://img.it610.com/image/info8/6c598b7374f2489db92d734a038263b5.png"><img src="https://img.it610.com/image/info8/6c598b7374f2489db92d734a038263b5.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第9张图片" /></a>（在历史缓冲区中223条位置的
第二条命令）；</p>

<p>在bash中与命令历史相关的内置变量：</p>

<p>HISTSIZE:历史缓冲区中能够保存的命令历史的最大条目数量，默认1000</p>

<p><a href="https://img.it610.com/image/info8/a9031e0b5f854ce98ee308254fb68419.png"><img src="https://img.it610.com/image/info8/a9031e0b5f854ce98ee308254fb68419.png" alt="f0b3eb2ed11161eac45314d30d90a92e.png" /></a>
；</p>

<p>HISTFILESIZE:~/.bash_history文件中能够保存的命令历史的最大条目数，默认是1000；</p>

<p>HISTTIMEFORMAT：在命令历史缓冲区中记录历史命令时；同时记录命令的执行的时间戳标记；可以使用date命令的FORMAT来表示时间的记录格式，默认值为空</p>

<p><a href="https://img.it610.com/image/info8/9c509b8feee0432faffd90d8295b7dd6.png"><img src="https://img.it610.com/image/info8/9c509b8feee0432faffd90d8295b7dd6.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第10张图片" /></a></p>

<p>；</p>

<p>HISTCONTROL:控制命令历史的记录方式<img src="https://img.it610.com/image/info8/92912b3c7eb84d1b829482ad44d30337.png" alt="3b13222e421edfaf24762e61891ba9b2.png" />；</p>

<p>ignoredups：忽略连续且相同的命令被记录到历史缓冲区；此为默认值；</p>

<p>ignorespace：忽略以空白字符开头的命令不会被记录到历史缓冲区；</p>

<p>ignoreboth：上述两种情况都不会被记录到历史缓冲区；</p>

<p>四、命令补全（Tab键的使用：单击补全，双击补出所有可能的内容）：</p>

<p>1、构成命令字符串的补全；</p>

<p>参考PATH变量中的路径，对命令进行补全：</p>

<p>如果给出的字符串是PATH变量中对应的路径是唯一的，则直接补全命令；</p>

<p>如果给出的字符串是PATH变量中对应的路径不唯一，则bash给出提示；</p>

<p>2、命令中参数所对应的字符串的补全；</p>

<p>根据给出的路径进行补全：</p>

<p>如果给出的字符串是PATH变量中对应的路径是唯一的，则直接补全命令；</p>

<p>如果给出的字符串是PATH变量中对应的路径不唯一，则bash给出提示；</p>

<p>五、命令行展开：</p>

<p>1.~展开：</p>

<p>~:bash会自动将波浪线展开为当前登录用户的家目录 ；</p>

<p>~STRING:bash会自动将其展开为以“STRING”为用户名的用户的家目录</p>

<p><a href="https://img.it610.com/image/info8/c273a8f329984ea2a1cf013ea96c28de.png"><img src="https://img.it610.com/image/info8/c273a8f329984ea2a1cf013ea96c28de.png" alt="d705faa0458d7b0e0a1e80b2b2760a15.png" /></a>（左图为用户cl家目录中的目录列表）；</p>

<p>利用getent passwd命令来查看当前系统内的所有用户，如下：</p>

<p>~+:调用bash的内置变量“PWD”的值；</p>

<p>~-；调用bash的内置变量“OLDPWD”的值；</p>

<p>2.{}展开：</p>

<p>在“{}”中，可以填充一个以&rdquo;,&ldquo;来分隔的路径列表，bash会将其展开为多个独立的路径；</p>

<p>示例：</p>

<p>mkdir -pv /china/{hb,hn,jl,hlj,ln}/{link,linka,linkb}/class18</p>

<p><a href="https://img.it610.com/image/info8/92666e19374345a8b713b0ff8836c0e3.png"><img src="https://img.it610.com/image/info8/92666e19374345a8b713b0ff8836c0e3.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第11张图片" /></a></p>

<h1 id="cp-1-txt-bak">cp 1.txt{,.bak}</h1>

<p>1.txt{,bak} == 1.txt 1.txt.bak</p>

<p><a href="https://img.it610.com/image/info8/6b76f286ce86475c9d144607a457bf53.png"><img src="https://img.it610.com/image/info8/6b76f286ce86475c9d144607a457bf53.png" alt="f68783f4a272b81b2c19ac7d913d096c.png" /></a></p>

<p>六、命令的执行结果</p>

<p>在bash中，命令的执行结果有两种：</p>

<p>1.执行命令的输出结果；</p>

<p>根据用户的需求获取到的命令执行的正常输出结果；</p>

<p>命令引用或命令替换：</p>

<p>`` 相当于 $()</p>

<p>``:反向单引号，反引号；</p>

<p>示例：</p>

<p>创建一个文件，文件名为test-系统时间；</p>

<p>touch test-<code>date +%F-%H-%M-$S</code></p>

<p>2.执行命令的状态返回值；</p>

<p>与此前的一个命令是否成功执行的返回内容；</p>

<p>bash使用一个特殊的内置变量来保存其内容：$?</p>

<p>$?实际上保存的是一个数值，其取值范围：0~255</p>

<p>其中：</p>

<p>0：表示命令执行成功<a href="https://img.it610.com/image/info8/e2d07cf42651446c9c006baf6fa6d217.png"><img src="https://img.it610.com/image/info8/e2d07cf42651446c9c006baf6fa6d217.png" alt="976c316f5cb035c699c1d443c16fb6c7.png" /></a>；</p>

<p>1-255：表示命令执行失败；</p>

<p>1,2,127：bash中内置的命令执行失败的状态返回值；</p>

<p>1：表示小问题<a href="https://img.it610.com/image/info8/ef6bb2491dea4aa8bddf250f11ab317b.png"><img src="https://img.it610.com/image/info8/ef6bb2491dea4aa8bddf250f11ab317b.png" alt="ae2e765e026055abddfd6063834a0f33.png" /></a>；</p>

<p>2：表示严重问题；</p>

<p>127：表示命令本身出现问题<a href="https://img.it610.com/image/info8/eff573989bc04bbeb1b977835b2a7b7d.png"><img src="https://img.it610.com/image/info8/eff573989bc04bbeb1b977835b2a7b7d.png" alt="f12213b2f0b6a03694d9224116052f9f.png" /></a>；</p>

<p>其余数字（3-126，128-255）：用户可以自定义的失败状态返回值；</p>

<p>七、引用功能：</p>

<p>&ldquo;:强引用</p>

<p>凡是被单引号引用的内容，bash在处理时，一律视其为普通字符，<a href="https://img.it610.com/image/info8/8ae9eb8a9013455fa27e28b994d1c109.png"><img src="https://img.it610.com/image/info8/8ae9eb8a9013455fa27e28b994d1c109.png" alt="3e1b002bcba4efdc6504d439d76944ed.png" /></a>即使其本身是bash定义的具有特殊功能和作用字符亦是如此，但单引号本身除外,如需要成对儿出现；</p>

<p>&rdquo;&rdquo;:弱引用</p>

<p>凡是被双引号引用的内容，bash在处理时，<a href="https://img.it610.com/image/info8/c38a44ac39bb4df181250941e42edb9a.png"><img src="https://img.it610.com/image/info8/c38a44ac39bb4df181250941e42edb9a.png" alt="55d24e2d538514e599478723084a71ba.png" /></a>有些特殊字符仍然会保留其特殊含义，如$，\,&ldquo;&ldquo;；</p>

<p>八、转义功能：</p>

<p>:bash定义的转义字符；大多数情况下，“\”只能将其后面一个字符转义；</p>

<p>\COMMAND:取消定义过的命令别名，而使用命令本身的功能；</p>

<p><a href="https://img.it610.com/image/info8/5711416db81d4a5eb4c0d041564ce5b6.png"><img src="https://img.it610.com/image/info8/5711416db81d4a5eb4c0d041564ce5b6.png" alt="c9df4d455cac0535a9387fe38f93af38.png" /></a></p>

<p>上图就是反斜线发挥作用的结果；</p>

<p>九、Globbing&ndash;文件名通配符，简称为glob；</p>

<p>*:匹配任意长度的任意字符或字符串；（某些特殊位置的“.”字符不能匹配；）</p>

<p>?:匹配任意单个字符；（不能匹配“.”）</p>

<p>指定范围的方法：</p>

<p>1、枚举法：列出所有有效字符；</p>

<p>2、范围指定：</p>

<p>[0-9]：表示所有单个的十进制数字；</p>

<p>[a-z]：除大写Z外的所有英文字母无论大小写；</p>

<p>[A-Z]：除小写字母a外的所有英文字母无论大小写；</p>

<p>3、bash内建字符集：</p>

<p>[:lower:]：所有的小写字母；</p>

<p>[:upper:]：所有的大写字母；</p>

<p>[:alpha:]：所有的字母，包括大小写；</p>

<p>[:digit:]：所有单个的十进制数字；</p>

<p>[:alnum:]：所有的字母和十进制数字；</p>

<p>[:punct:]：所有的符号；</p>

<p>[:space:]：空白字符，包括空格和制表符；</p>

<p>4、反向匹配：</p>

<p>^ 示例：ls a[<sup class="footnote-ref" id="fnref:digit"><a href="#fn:digit">1</a></sup>]?? //表示文件名的第二个字符不能是十进制数字</p>

<p>注意:当中括号中有脱字符有“^”表示字符集反向匹配时，注意“*”的使用；因为“*”的通配范围可能会导致反向匹配失败；此类失败是因为bash的globbing是在贪婪模式下匹配的；</p>

<p>十、管道</p>

<p>|</p>

<p>管道通常用来连接多个命令的，将管道符号前面的命令的执行的输出结果通过管道传递给管道符号后面的命令，让后面的命令将前面的命令的输出结果当成参数来使用；</p>

<p>wc：</p>

<p>print newline, word, and byte counts for each file</p>

<p>格式：</p>

<p>wc [OPTION]&hellip; [FILE]&hellip;</p>

<p>常用选项：</p>

<p>-c, &ndash;bytes：仅显示文件中的字节数；</p>

<p>-m, &ndash;chars：仅显示文件中的有效字符的数量；</p>

<p>-l, &ndash;lines：仅显示文件中的行数；</p>

<p>-w, &ndash;words：仅显示文件中的数量；</p>

<p><a href="https://img.it610.com/image/info8/36a2101eca62492d97ee22baf2738a90.png"><img src="https://img.it610.com/image/info8/36a2101eca62492d97ee22baf2738a90.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第12张图片" /></a></p>

<p>注意：1、一般来讲，凡是被管道连接的命令，都应该能够执行成功之后完成命令结果的输出，否则管道无意义；</p>

<p>2、管道不是万能的，有些场合没办法使用管道的；</p>

<p>十一、输入输出重定向</p>

<p>在使用计算机的时候，实现某个功能的主体是程序！</p>

<p>程序=指令 + 数据</p>

<p>数据至关重要!</p>

<p>文件，IO&mdash;输入input和输出output</p>

<p>在Linux系统中，能够完成输入和输出功能的实体：文件；</p>

<p>可以用于输入的设备：文件</p>

<p>键盘设备、文件系统中的常规文件、网卡设备、声卡设备等；</p>

<p>可以用于输出的设备：文件</p>

<p>显示器、文件系统中的常规文件、网卡设备、声卡设备、磁盘设备等；</p>

<p>在内存中使用内存的方法是定义文件描述符，一个文件描述符就对应一个文件；</p>

<p>0：表示标准输入，stdin，从键盘实现的输入数据流；</p>

<p>1：表示标准输出，stdout，到显示器的输出数据流；</p>

<p>2：表示标准错误，stderr，到显示器的错误数据流<a href="https://img.it610.com/image/info8/397363e160984bc8800f3e11cf846e4d.png"><img src="https://img.it610.com/image/info8/397363e160984bc8800f3e11cf846e4d.png" alt="cae421708dc1b4f8a78c60a2e3b32ab0.png" /></a>；</p>

<p>输入输出重定向（IO重定向）</p>

<p>采用非标准设备文件实现的IO操作；</p>

<p>输入重定向：</p>

<p>&lt;</p>

<p>输出重定向：</p>

<blockquote>
<p>:覆盖输出重定向；</p>
</blockquote>

<p>set -C：开启防止意外覆盖源文件开关，可以使用&rdquo;&gt;|&ldquo;符号完成覆盖重定向</p>

<p>set +C：开启防止意外覆盖源文件开关；</p>

<p><a href="https://img.it610.com/image/info8/42a35ea10b9c4df2829c8b8551e19aa2.png"><img src="https://img.it610.com/image/info8/42a35ea10b9c4df2829c8b8551e19aa2.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第13张图片" /></a></p>

<blockquote>
<blockquote>
<p>：追加输出重定向；</p>
</blockquote>
</blockquote>

<p><a href="https://img.it610.com/image/info8/b67c5b1342b6411a923a17b2fead35db.png"><img src="https://img.it610.com/image/info8/b67c5b1342b6411a923a17b2fead35db.png" alt="69b5bb1dd93d01d9ee8ea7f50eb13523.png" /></a></p>

<p>错误重定向：</p>

<p>2&gt;:覆盖错误重定向；</p>

<p>2&gt;&gt;:追加错误重定向；</p>

<p>合并标准输出和标准错误的重定向：</p>

<p>1.COMMAND {&gt;|&gt;&gt;} /PATH/TO/SOMEFILLE 2&gt;&amp;1</p>

<p>2.&amp;&gt;,&amp;&gt;&gt;</p>

<p><a href="https://img.it610.com/image/info8/8c2d3318ae654bc19600ac18521817db.png"><img src="https://img.it610.com/image/info8/8c2d3318ae654bc19600ac18521817db.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第14张图片" /></a></p>

<p>特殊的设备文件：</p>

<p>/dev/null:blackhole(黑洞)，blackbucket（位桶）； 输出</p>

<p>/dev/zero:泡泡机，吐零机； 输入</p>

<p>bash中的其他特殊符号：</p>

<p>&lt;&lt;:here document=&ldquo;&rdquo;/&gt;</p>

<p>&lt;&lt;</p>

<p><a href="https://img.it610.com/image/info8/e1d9fc16a1b9434380af9f1a433915dc.png"><img src="https://img.it610.com/image/info8/e1d9fc16a1b9434380af9f1a433915dc.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第15张图片" /></a></p>

<p>bc命令为计算器，在这里&lt;&lt;</p>

<p>十二、bash变量</p>

<p>变量：一段有名称的连续的内存空间；</p>

<p>变量名：这段内存空间的名称，称为变量名；</p>

<p>变量值：在这段内存空间中存储的数据，则称为变量值；</p>

<p>向内存空间(变量)中存储数据的过程，称为赋值操作；赋值符号通常为&rdquo;=&ldquo;；</p>

<p>变量的类型：</p>

<p>123 &ndash; 整型：01111011</p>

<p>-- 字符型：ASCII：3字节</p>

<p>-- 字符型：UTF-8：9字节</p>

<p>（变量类型不一样，占据的内存空间也不一样）</p>

<p>变量分为：</p>

<p>强变量：使用之前必须事先声明，必须声明变量类型；</p>

<p>弱变量：在使用之前无需声明，无需指明变量类型；(bash变量)</p>

<p>变量的赋值方法：</p>

<p>VARNAME=VALUE</p>

<p>含义：将某数值(VALUE)通过赋值操作(=)存储于特定的内存空间中(VARNAME);</p>

<p>bash中变量名称的命名规范：</p>

<p>1.变量名只能以&rdquo;_&ldquo;或&rdquo;字母&rdquo;为起始字符，后面的其他字符可以是任意字母，数字或下划 线；</p>

<p>2.变量名中的字母大小写敏感；</p>

<p>3.命名的书写格式：</p>

<p>全大写：HISTSIZE</p>

<p>全小写：myvar</p>

<p>驼峰式：MyNewVariable</p>

<p>连接式：My_New_Var</p>

<p>4.变量名要能做到见名知意；</p>

<p>5.变量名不能与已知变量或bash的内置变量重复；</p>

<p>bash中的变量的分类：</p>

<p>根据变量的作用范围来划分：</p>

<p>全局变量(环境变量)：作用范围为整个shell进程，包括其子shell；</p>

<p>本地变量：作用范围为当前登录时打开的shell进程，不包括其子shell；</p>

<p>局部变量：作用范围仅仅只是当前程序段，一般用于函数；</p>

<p>根据变量的声明方式来划分：</p>

<p>bash内置变量：</p>

<p>普通的内置变量：HISTSIZE,&hellip;</p>

<p>位置参数变量：$0, $1, $2, &hellip;</p>

<p><img src="https://img.it610.com/image/info8/98d67b9ab69e493e800699e4979e3585.png" alt="1d97bf8d348eab2c1893dd6f123fdc18.png" /></p>

<p>touch存储的位置就是$0 $1 $2 $3 $4</p>

<p>特殊变量：$?, $#, $*, $@, $$, &hellip;</p>

<p>$?：展开为最近一次执行的命令的状态返回值(退出状态码)；用以表示最近一 次执行的命令是否成功执行；</p>

<p>$#：不包括$0在内的其余的位置参数的个数，以十进制数字表示；</p>

<p>$*：从$1开始展开为位置参数。当使用双引号引用展开的结果时，它展开为 特殊变量IFS的第一个字符分隔的值；</p>

<p>$@：从$1开始展开为位置参数。当使用双引号引用展开的结果时，它展开为 一个单独的字符串；</p>

<p>$$：展开为当前shell的进程标识符；</p>

<p>自定义变量：用户可以自定义的变量；</p>

<p>变量的使用：</p>

<p>1.变量的声明（所有声明的变量都是自定义变量）和赋值：</p>

<p>1) 声明全局变量(环境变量)：</p>

<p>export：</p>

<p>export VARNAME</p>

<p>export VARNAME=VALUE</p>

<p>可以声明，也可以直接声明后进行赋值操作，如下图：</p>

<p><a href="https://img.it610.com/image/info8/40034622f0a34303bf3654254fe51671.png"><img src="https://img.it610.com/image/info8/40034622f0a34303bf3654254fe51671.png" alt="21bb8f6d1cc56da5d68ac1296a221ee6.png" /></a></p>

<p>declare命令：</p>

<p>declare - Set variable values and attributes.</p>

<p>格式：declare [-aAfFgilrtux] [-p] [name[=value] &hellip;]</p>

<p>常用的选项：</p>

<p>-a：声明索引数组(如果支持)</p>

<p>-A：声明关联数组(如果支持)</p>

<p>-i：声明整型变量</p>

<p>-l：声明变量并将变量值中的字母转换为小写字母</p>

<p>;</p>

<p>-u：声明变量并将变量值中的字母转换为大写字母；</p>

<p>-r：声明只读变量；该变量仅能进行一次赋值操作；</p>

<p>-x：声明变量并将其导出为全局变量；</p>

<p>声明为全局变量：</p>

<p>declare -x VARNAME[=VALUE]</p>

<p>声明全局变量后，变量就可以在当前shell及其子进程的shell中使用；</p>

<p>2) 声明本地变量：</p>

<p>VARNAME=VALUE</p>

<p>本地变量直接声明，声明后的变量只可以在当前的shell中使用，作用范围</p>

<p>只在当前shell中；</p>

<p>3) 声明局部变量：</p>

<p>local VARNAME[=VALUE]</p>

<p>仅仅是在函数中使用的变量；</p>

<p>2.查看环境变量：</p>

<p>set命令：查看和改变shell属性的值及查看shell变量的变量名和变量值；</p>

<p>export命令：查看变量名称，也可以为变量赋值；</p>

<p>env命令：与export命令类似；</p>

<p>3.查看变量的值：</p>

<p>echo ${VARNAME}</p>

<p><a href="https://img.it610.com/image/info8/05531f30573240159a8f2b765c6b3a2d.png"><img src="https://img.it610.com/image/info8/05531f30573240159a8f2b765c6b3a2d.png" alt="4e2284ec7e261976594c788321018e39.png" /></a></p>

<p>4.撤销变量的赋值及变量声明</p>

<p>unset VARNAME</p>

<p><a href="https://img.it610.com/image/info8/431e2cf2426b4310beb7c756b2b07862.png"><img src="https://img.it610.com/image/info8/431e2cf2426b4310beb7c756b2b07862.png" alt="13002befee682060373d117ba4729ad0.png" /></a></p>

<p>有关于保存变量的shell配置文件：</p>

<p>通用配置文件（在系统启动的时候就已经加载好的配置文件）：</p>

<p>/etc/bashrc</p>

<p>/etc/profile</p>

<p>/etc/profile.d/*</p>

<p>私人配置文件（在家目录下的隐藏文件中，只有此用户登录后才会加载的配置文件）：</p>

<p>~/.bashrc</p>

<p>~/.bash_profile</p>

<p><a href="https://img.it610.com/image/info8/f40b9c258cce4389b145f210c4dfcc47.png"><img src="https://img.it610.com/image/info8/f40b9c258cce4389b145f210c4dfcc47.png" alt="Shell程序及Linux中默认的Shell程序Bash的特性_第16张图片" /></a></p>

<p>注意：</p>

<p>1.一般情况下，变量都是随用随声明，除非有必要，否则不建议修改配置文件的内容；</p>

<p>2.声明的变量在使用完以后，最好使用unset命令予以撤销；</p>

<p>转载于:<a href="https://blog.51cto.com/chenliangdeeper/1976721">https://blog.51cto.com/chenliangdeeper/1976721</a></p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:digit">:digit: <a class="footnote-return" href="#fnref:digit"><sup>[return]</sup></a></li>
</ol>
</div>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>