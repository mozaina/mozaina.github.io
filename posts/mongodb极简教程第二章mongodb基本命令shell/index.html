<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>MongoDB极简教程第二章MongoDB基本命令Shell | 开发者问答集锦</title>
    <meta property="og:title" content="MongoDB极简教程第二章MongoDB基本命令Shell - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="MongoDB极简教程第二章MongoDB基本命令Shell">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/mongodb%E6%9E%81%E7%AE%80%E6%95%99%E7%A8%8B%E7%AC%AC%E4%BA%8C%E7%AB%A0mongodb%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4shell/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">MongoDB极简教程第二章MongoDB基本命令Shell</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>MongoDB的所有请求都以命令的形式发出，支持的命令列表参考Database Commands</p>

<p>The mongo Shell：<br />
<a href="https://docs.mongodb.com/manual/mongo/">https://docs.mongodb.com/manual/mongo/</a></p>

<p>db是mongoDB的全局变量，持有当前数据库schema的引用。<br />
首次进入客户端shell，敲入命令db</p>

<pre><code>&gt; db
test
</code></pre>

<p>看看当前数据库server的状态</p>

<pre><code>&gt; db.serverStatus()
{
    &quot;host&quot; : &quot;jacks-MacBook-Air.local&quot;,
    &quot;advisoryHostFQDNs&quot; : [
        &quot;jacks-macbook-air.local&quot;
    ],
    &quot;version&quot; : &quot;3.2.4&quot;,
    &quot;process&quot; : &quot;mongod&quot;,
    &quot;pid&quot; : NumberLong(68),
    &quot;uptime&quot; : 616301,
    &quot;uptimeMillis&quot; : NumberLong(616300555),
    &quot;uptimeEstimate&quot; : 35411,
    &quot;localTime&quot; : ISODate(&quot;2017-03-20T05:42:48.260Z&quot;),
    &quot;asserts&quot; : {
        &quot;regular&quot; : 0,
        &quot;warning&quot; : 0,
        &quot;msg&quot; : 0,
        &quot;user&quot; : 0,
        &quot;rollovers&quot; : 0
    },
    &quot;connections&quot; : {
        &quot;current&quot; : 2,
        &quot;available&quot; : 3274,
        &quot;totalCreated&quot; : NumberLong(6)
    },
    &quot;extra_info&quot; : {
        &quot;note&quot; : &quot;fields vary by platform&quot;,
        &quot;page_faults&quot; : 4993
    },
    &quot;globalLock&quot; : {
        &quot;totalTime&quot; : NumberLong(&quot;616300534000&quot;),
        &quot;currentQueue&quot; : {
            &quot;total&quot; : 0,
            &quot;readers&quot; : 0,
            &quot;writers&quot; : 0
        },
        &quot;activeClients&quot; : {
            &quot;total&quot; : 9,
            &quot;readers&quot; : 0,
            &quot;writers&quot; : 0
        }
    },
    &quot;locks&quot; : {
        &quot;Global&quot; : {
            &quot;acquireCount&quot; : {
                &quot;r&quot; : NumberLong(1471174),
                &quot;w&quot; : NumberLong(2920),
                &quot;W&quot; : NumberLong(4)
            }
        },
        &quot;Database&quot; : {
            &quot;acquireCount&quot; : {
                &quot;r&quot; : NumberLong(734121),
                &quot;w&quot; : NumberLong(2901),
                &quot;R&quot; : NumberLong(4),
                &quot;W&quot; : NumberLong(19)
            }
        },
        &quot;Collection&quot; : {
            &quot;acquireCount&quot; : {
                &quot;r&quot; : NumberLong(774729),
                &quot;w&quot; : NumberLong(2901)
            }
        },
        &quot;Metadata&quot; : {
            &quot;acquireCount&quot; : {
                &quot;w&quot; : NumberLong(1)
            }
        }
    },
    &quot;network&quot; : {
        &quot;bytesIn&quot; : NumberLong(1529),
        &quot;bytesOut&quot; : NumberLong(6719),
        &quot;numRequests&quot; : NumberLong(21)
    },
    &quot;opcounters&quot; : {
        &quot;insert&quot; : 0,
        &quot;query&quot; : 1,
        &quot;update&quot; : 0,
        &quot;delete&quot; : 0,
        &quot;getmore&quot; : 0,
        &quot;command&quot; : 22
    },
    &quot;opcountersRepl&quot; : {
        &quot;insert&quot; : 0,
        &quot;query&quot; : 0,
        &quot;update&quot; : 0,
        &quot;delete&quot; : 0,
        &quot;getmore&quot; : 0,
        &quot;command&quot; : 0
    },
    &quot;storageEngine&quot; : {
        &quot;name&quot; : &quot;wiredTiger&quot;,
        &quot;supportsCommittedReads&quot; : true
    },
    &quot;wiredTiger&quot; : {
        &quot;uri&quot; : &quot;statistics:&quot;,
        &quot;LSM&quot; : {
            &quot;sleep for LSM checkpoint throttle&quot; : 0,
            &quot;sleep for LSM merge throttle&quot; : 0,
            &quot;rows merged in an LSM tree&quot; : 0,
            &quot;application work units currently queued&quot; : 0,
            &quot;merge work units currently queued&quot; : 0,
            &quot;tree queue hit maximum&quot; : 0,
            &quot;switch work units currently queued&quot; : 0,
            &quot;tree maintenance operations scheduled&quot; : 0,
            &quot;tree maintenance operations discarded&quot; : 0,
            &quot;tree maintenance operations executed&quot; : 0
        },
        &quot;async&quot; : {
            &quot;number of allocation state races&quot; : 0,
            &quot;number of operation slots viewed for allocation&quot; : 0,
            &quot;current work queue length&quot; : 0,
            &quot;number of flush calls&quot; : 0,
            &quot;number of times operation allocation failed&quot; : 0,
            &quot;maximum work queue length&quot; : 0,
            &quot;number of times worker found no work&quot; : 0,
            &quot;total allocations&quot; : 0,
            &quot;total compact calls&quot; : 0,
            &quot;total insert calls&quot; : 0,
            &quot;total remove calls&quot; : 0,
            &quot;total search calls&quot; : 0,
            &quot;total update calls&quot; : 0
        },
        &quot;block-manager&quot; : {
            &quot;mapped bytes read&quot; : 0,
            &quot;bytes read&quot; : 446464,
            &quot;bytes written&quot; : 163840,
            &quot;mapped blocks read&quot; : 0,
            &quot;blocks pre-loaded&quot; : 25,
            &quot;blocks read&quot; : 86,
            &quot;blocks written&quot; : 25
        },
        &quot;cache&quot; : {
            &quot;tracked dirty bytes in the cache&quot; : 0,
            &quot;tracked bytes belonging to internal pages in the cache&quot; : 21407,
            &quot;bytes currently in the cache&quot; : 237704,
            &quot;tracked bytes belonging to leaf pages in the cache&quot; : 216297,
            &quot;maximum bytes configured&quot; : 4294967296,
            &quot;tracked bytes belonging to overflow pages in the cache&quot; : 0,
            &quot;bytes read into cache&quot; : 174182,
            &quot;bytes written from cache&quot; : 110151,
            &quot;pages evicted by application threads&quot; : 0,
            &quot;checkpoint blocked page eviction&quot; : 0,
            &quot;unmodified pages evicted&quot; : 0,
            &quot;page split during eviction deepened the tree&quot; : 0,
            &quot;modified pages evicted&quot; : 0,
            &quot;pages selected for eviction unable to be evicted&quot; : 0,
            &quot;pages evicted because they exceeded the in-memory maximum&quot; : 0,
            &quot;pages evicted because they had chains of deleted items&quot; : 0,
            &quot;failed eviction of pages that exceeded the in-memory maximum&quot; : 0,
            &quot;hazard pointer blocked page eviction&quot; : 0,
            &quot;internal pages evicted&quot; : 0,
            &quot;maximum page size at eviction&quot; : 0,
            &quot;eviction server candidate queue empty when topping up&quot; : 0,
            &quot;eviction server candidate queue not empty when topping up&quot; : 0,
            &quot;eviction server evicting pages&quot; : 0,
            &quot;eviction server populating queue, but not evicting pages&quot; : 0,
            &quot;eviction server unable to reach eviction goal&quot; : 0,
            &quot;internal pages split during eviction&quot; : 0,
            &quot;leaf pages split during eviction&quot; : 0,
            &quot;pages walked for eviction&quot; : 0,
            &quot;eviction worker thread evicting pages&quot; : 0,
            &quot;in-memory page splits&quot; : 0,
            &quot;in-memory page passed criteria to be split&quot; : 0,
            &quot;lookaside table insert calls&quot; : 0,
            &quot;lookaside table remove calls&quot; : 0,
            &quot;percentage overhead&quot; : 8,
            &quot;tracked dirty pages in the cache&quot; : 0,
            &quot;pages currently held in the cache&quot; : 47,
            &quot;pages read into cache&quot; : 43,
            &quot;pages read into cache requiring lookaside entries&quot; : 0,
            &quot;pages written from cache&quot; : 13,
            &quot;page written requiring lookaside records&quot; : 0,
            &quot;pages written requiring in-memory restoration&quot; : 0
        },
        &quot;connection&quot; : {
            &quot;pthread mutex condition wait calls&quot; : 6755705,
            &quot;files currently open&quot; : 27,
            &quot;memory allocations&quot; : 2046182,
            &quot;memory frees&quot; : 2044869,
            &quot;memory re-allocations&quot; : 531046,
            &quot;total read I/Os&quot; : 936,
            &quot;pthread mutex shared lock read-lock calls&quot; : 266348,
            &quot;pthread mutex shared lock write-lock calls&quot; : 67963,
            &quot;total write I/Os&quot; : 39
        },
        &quot;cursor&quot; : {
            &quot;cursor create calls&quot; : 70,
            &quot;cursor insert calls&quot; : 25,
            &quot;cursor next calls&quot; : 3113,
            &quot;cursor prev calls&quot; : 2919,
            &quot;cursor remove calls&quot; : 1,
            &quot;cursor reset calls&quot; : 171656,
            &quot;cursor restarted searches&quot; : 0,
            &quot;cursor search calls&quot; : 168752,
            &quot;cursor search near calls&quot; : 2902,
            &quot;truncate calls&quot; : 0,
            &quot;cursor update calls&quot; : 0
        },
        &quot;data-handle&quot; : {
            &quot;connection data handles currently active&quot; : 24,
            &quot;session dhandles swept&quot; : 0,
            &quot;session sweep attempts&quot; : 21,
            &quot;connection sweep dhandles closed&quot; : 0,
            &quot;connection sweep candidate became referenced&quot; : 0,
            &quot;connection sweep dhandles removed from hash list&quot; : 3,
            &quot;connection sweep time-of-death sets&quot; : 22,
            &quot;connection sweeps&quot; : 17279
        },
        &quot;log&quot; : {
            &quot;total log buffer size&quot; : 33554432,
            &quot;log bytes of payload data&quot; : 4111,
            &quot;log bytes written&quot; : 5504,
            &quot;yields waiting for previous log file close&quot; : 0,
            &quot;total size of compressed records&quot; : 3967,
            &quot;total in-memory size of compressed records&quot; : 6785,
            &quot;log records too small to compress&quot; : 6,
            &quot;log records not compressed&quot; : 0,
            &quot;log records compressed&quot; : 5,
            &quot;log flush operations&quot; : 969556,
            &quot;maximum log file size&quot; : 104857600,
            &quot;pre-allocated log files prepared&quot; : 2,
            &quot;number of pre-allocated log files to create&quot; : 2,
            &quot;pre-allocated log files not ready and missed&quot; : 1,
            &quot;pre-allocated log files used&quot; : 0,
            &quot;log release advances write LSN&quot; : 5,
            &quot;records processed by log scan&quot; : 10,
            &quot;log scan records requiring two reads&quot; : 4,
            &quot;log scan operations&quot; : 3,
            &quot;consolidated slot closures&quot; : 2327947,
            &quot;written slots coalesced&quot; : 0,
            &quot;logging bytes consolidated&quot; : 5120,
            &quot;consolidated slot joins&quot; : 11,
            &quot;consolidated slot join races&quot; : 0,
            &quot;busy returns attempting to switch slots&quot; : 0,
            &quot;consolidated slot join transitions&quot; : 2327947,
            &quot;consolidated slot unbuffered writes&quot; : 0,
            &quot;log sync operations&quot; : 7,
            &quot;log sync_dir operations&quot; : 1,
            &quot;log server thread advances write LSN&quot; : 2,
            &quot;log write operations&quot; : 11,
            &quot;log files manually zero-filled&quot; : 0
        },
        &quot;reconciliation&quot; : {
            &quot;pages deleted&quot; : 0,
            &quot;fast-path pages deleted&quot; : 0,
            &quot;page reconciliation calls&quot; : 12,
            &quot;page reconciliation calls for eviction&quot; : 0,
            &quot;split bytes currently awaiting free&quot; : 0,
            &quot;split objects currently awaiting free&quot; : 0
        },
        &quot;session&quot; : {
            &quot;open cursor count&quot; : 20,
            &quot;open session count&quot; : 16
        },
        &quot;thread-yield&quot; : {
            &quot;page acquire busy blocked&quot; : 0,
            &quot;page acquire eviction blocked&quot; : 0,
            &quot;page acquire locked blocked&quot; : 0,
            &quot;page acquire read blocked&quot; : 0,
            &quot;page acquire time sleeping (usecs)&quot; : 0
        },
        &quot;transaction&quot; : {
            &quot;transaction begins&quot; : 11617,
            &quot;transaction checkpoints&quot; : 2900,
            &quot;transaction checkpoint generation&quot; : 2900,
            &quot;transaction checkpoint currently running&quot; : 0,
            &quot;transaction checkpoint max time (msecs)&quot; : 595,
            &quot;transaction checkpoint min time (msecs)&quot; : 3,
            &quot;transaction checkpoint most recent time (msecs)&quot; : 4,
            &quot;transaction checkpoint total time (msecs)&quot; : 12083,
            &quot;transactions committed&quot; : 3,
            &quot;transaction failures due to cache overflow&quot; : 0,
            &quot;transaction range of IDs currently pinned by a checkpoint&quot; : 0,
            &quot;transaction range of IDs currently pinned&quot; : 0,
            &quot;transaction range of IDs currently pinned by named snapshots&quot; : 0,
            &quot;transactions rolled back&quot; : 11614,
            &quot;number of named snapshots created&quot; : 0,
            &quot;number of named snapshots dropped&quot; : 0,
            &quot;transaction sync calls&quot; : 0
        },
        &quot;concurrentTransactions&quot; : {
            &quot;write&quot; : {
                &quot;out&quot; : 0,
                &quot;available&quot; : 128,
                &quot;totalTickets&quot; : 128
            },
            &quot;read&quot; : {
                &quot;out&quot; : 0,
                &quot;available&quot; : 128,
                &quot;totalTickets&quot; : 128
            }
        }
    },
    &quot;writeBacksQueued&quot; : false,
    &quot;mem&quot; : {
        &quot;bits&quot; : 64,
        &quot;resident&quot; : 7,
        &quot;virtual&quot; : 2513,
        &quot;supported&quot; : true,
        &quot;mapped&quot; : 0,
        &quot;mappedWithJournal&quot; : 0
    },
    &quot;metrics&quot; : {
        &quot;commands&quot; : {
            &quot;buildInfo&quot; : {
                &quot;failed&quot; : NumberLong(0),
                &quot;total&quot; : NumberLong(2)
            },
            &quot;getLog&quot; : {
                &quot;failed&quot; : NumberLong(0),
                &quot;total&quot; : NumberLong(2)
            },
            &quot;isMaster&quot; : {
                &quot;failed&quot; : NumberLong(0),
                &quot;total&quot; : NumberLong(10)
            },
            &quot;listCollections&quot; : {
                &quot;failed&quot; : NumberLong(0),
                &quot;total&quot; : NumberLong(1)
            },
            &quot;listDatabases&quot; : {
                &quot;failed&quot; : NumberLong(0),
                &quot;total&quot; : NumberLong(2)
            },
            &quot;replSetGetStatus&quot; : {
                &quot;failed&quot; : NumberLong(2),
                &quot;total&quot; : NumberLong(2)
            },
            &quot;serverStatus&quot; : {
                &quot;failed&quot; : NumberLong(0),
                &quot;total&quot; : NumberLong(1)
            },
            &quot;whatsmyuri&quot; : {
                &quot;failed&quot; : NumberLong(0),
                &quot;total&quot; : NumberLong(2)
            }
        },
        &quot;cursor&quot; : {
            &quot;timedOut&quot; : NumberLong(0),
            &quot;open&quot; : {
                &quot;noTimeout&quot; : NumberLong(0),
                &quot;pinned&quot; : NumberLong(0),
                &quot;total&quot; : NumberLong(0)
            }
        },
        &quot;document&quot; : {
            &quot;deleted&quot; : NumberLong(0),
            &quot;inserted&quot; : NumberLong(0),
            &quot;returned&quot; : NumberLong(0),
            &quot;updated&quot; : NumberLong(0)
        },
        &quot;getLastError&quot; : {
            &quot;wtime&quot; : {
                &quot;num&quot; : 0,
                &quot;totalMillis&quot; : 0
            },
            &quot;wtimeouts&quot; : NumberLong(0)
        },
        &quot;operation&quot; : {
            &quot;fastmod&quot; : NumberLong(0),
            &quot;idhack&quot; : NumberLong(0),
            &quot;scanAndOrder&quot; : NumberLong(0),
            &quot;writeConflicts&quot; : NumberLong(0)
        },
        &quot;queryExecutor&quot; : {
            &quot;scanned&quot; : NumberLong(0),
            &quot;scannedObjects&quot; : NumberLong(0)
        },
        &quot;record&quot; : {
            &quot;moves&quot; : NumberLong(0)
        },
        &quot;repl&quot; : {
            &quot;executor&quot; : {
                &quot;counters&quot; : {
                    &quot;eventCreated&quot; : 0,
                    &quot;eventWait&quot; : 0,
                    &quot;cancels&quot; : 0,
                    &quot;waits&quot; : 0,
                    &quot;scheduledNetCmd&quot; : 0,
                    &quot;scheduledDBWork&quot; : 0,
                    &quot;scheduledXclWork&quot; : 0,
                    &quot;scheduledWorkAt&quot; : 0,
                    &quot;scheduledWork&quot; : 0,
                    &quot;schedulingFailures&quot; : 0
                },
                &quot;queues&quot; : {
                    &quot;networkInProgress&quot; : 0,
                    &quot;dbWorkInProgress&quot; : 0,
                    &quot;exclusiveInProgress&quot; : 0,
                    &quot;sleepers&quot; : 0,
                    &quot;ready&quot; : 0,
                    &quot;free&quot; : 0
                },
                &quot;unsignaledEvents&quot; : 0,
                &quot;eventWaiters&quot; : 0,
                &quot;shuttingDown&quot; : false,
                &quot;networkInterface&quot; : &quot;NetworkInterfaceASIO inShutdown: 0&quot;
            },
            &quot;apply&quot; : {
                &quot;batches&quot; : {
                    &quot;num&quot; : 0,
                    &quot;totalMillis&quot; : 0
                },
                &quot;ops&quot; : NumberLong(0)
            },
            &quot;buffer&quot; : {
                &quot;count&quot; : NumberLong(0),
                &quot;maxSizeBytes&quot; : 268435456,
                &quot;sizeBytes&quot; : NumberLong(0)
            },
            &quot;network&quot; : {
                &quot;bytes&quot; : NumberLong(0),
                &quot;getmores&quot; : {
                    &quot;num&quot; : 0,
                    &quot;totalMillis&quot; : 0
                },
                &quot;ops&quot; : NumberLong(0),
                &quot;readersCreated&quot; : NumberLong(0)
            },
            &quot;preload&quot; : {
                &quot;docs&quot; : {
                    &quot;num&quot; : 0,
                    &quot;totalMillis&quot; : 0
                },
                &quot;indexes&quot; : {
                    &quot;num&quot; : 0,
                    &quot;totalMillis&quot; : 0
                }
            }
        },
        &quot;storage&quot; : {
            &quot;freelist&quot; : {
                &quot;search&quot; : {
                    &quot;bucketExhausted&quot; : NumberLong(0),
                    &quot;requests&quot; : NumberLong(0),
                    &quot;scanned&quot; : NumberLong(0)
                }
            }
        },
        &quot;ttl&quot; : {
            &quot;deletedDocuments&quot; : NumberLong(0),
            &quot;passes&quot; : NumberLong(2901)
        }
    },
    &quot;ok&quot; : 1
}

``

看看有哪些库
</code></pre>

<blockquote>
<p>show dbs;<br />
admin 0.000GB<br />
local 0.000GB<br />
restfiddle 0.001GB<br />
```</p>
</blockquote>

<h1 id="use命令">use命令</h1>

<p>MongoDB 用</p>

<pre><code>use + 数据库名称
</code></pre>

<p>的方式来创建数据库。use 会创建一个新的数据库，如果该数据库存在，则返回这个数据库。」</p>

<p>例子1. 創建 root 用戶名密碼</p>

<h4 id="step1-首先-切换到admin-db-schema">Step1.首先，切换到admin db (schema):</h4>

<pre><code>&gt; use admin;
switched to db admin
</code></pre>

<h4 id="step2-在該-schema-下面設置用戶名-密碼">Step2.在該 schema 下面設置用戶名，密碼：</h4>

<pre><code>&gt; db.createUser({ user: &quot;root&quot;,pwd: &quot;root&quot;,customData:{name:&quot;root&quot;},roles:[{ role: &quot;userAdminAnyDatabase&quot;,db: &quot;admin&quot; }]})
Successfully added user: {
    &quot;user&quot; : &quot;root&quot;,
    &quot;customData&quot; : {
        &quot;name&quot; : &quot;root&quot;
    },
    &quot;roles&quot; : [
        {
            &quot;role&quot; : &quot;userAdminAnyDatabase&quot;,
            &quot;db&quot; : &quot;admin&quot;
        }
    ]
}
&gt; db.auth('root','root')
1
</code></pre>

<h4 id="step3-给restfiddle库权限">Step3.给restfiddle库权限</h4>

<pre><code>var r = 
    {
      &quot;_id&quot;: &quot;restfiddle.root&quot;,
      &quot;user&quot;: &quot;root&quot;,
      &quot;db&quot;: &quot;restfiddle&quot;,
      &quot;credentials&quot;: {
        &quot;SCRAM-SHA-1&quot;: {
          &quot;iterationCount&quot;: 10000,
          &quot;salt&quot;: &quot;riZjwBYHvkcV99typ8BRMA==&quot;,
          &quot;storedKey&quot;: &quot;E2QOruLrBNXD1mlQTX0TQogL/ws=&quot;,
          &quot;serverKey&quot;: &quot;JEQhfa/5x7+aNzKrFvKRkctXXfQ=&quot;
        }
      },
      &quot;roles&quot;: [
        {
          &quot;role&quot;: &quot;dbOwner&quot;,
          &quot;db&quot;: &quot;restfiddle&quot;
        },
        {
          &quot;role&quot;: &quot;read&quot;,
          &quot;db&quot;: &quot;restfiddle&quot;
        },
        {
          &quot;role&quot;: &quot;readWrite&quot;,
          &quot;db&quot;: &quot;restfiddle&quot;
        }
      ]
    }


db.system.users.insert(r)
</code></pre>

<h1 id="database-operations">Database Operations</h1>

<h1 id="查看数据库的文档-json-document-集合-collection-结构">查看数据库的文档（json document）,集合(collection)结构</h1>

<p>我们切换到库use restfiddle,看一下当前库的状态：</p>

<pre><code>&gt; use restfiddle;
switched to db restfiddle
&gt; db.stats()
{
    &quot;db&quot; : &quot;restfiddle&quot;,
    &quot;collections&quot; : 14,
    &quot;objects&quot; : 298,
    &quot;avgObjSize&quot; : 362.18120805369125,
    &quot;dataSize&quot; : 107930,
    &quot;storageSize&quot; : 372736,
    &quot;numExtents&quot; : 0,
    &quot;indexes&quot; : 15,
    &quot;indexSize&quot; : 339968,
    &quot;ok&quot; : 1
}
</code></pre>

<p>查看库restfiddle有哪些集合：</p>

<pre><code>&gt; db
restfiddle
&gt; show collections;
EntityAuth
activityLog
baseNode
config
conversation
httpRequestHeader
oAuth2
project
rfRequest
rfResponse
runnerLog
tag
user
workspace
</code></pre>

<p>查看user集合里面有哪些json document：</p>

<pre><code>&gt; db.user.find();
{ &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5e&quot;), &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;, &quot;password&quot; : &quot;$2a$10$JzistJ7qIP80KMYwSqSu7uShUGn4bg/m.u0/51HcKHVIui/URgbTi&quot;, &quot;email&quot; : &quot;rf@example.com&quot;, &quot;name&quot; : &quot;RF Admin&quot;, &quot;status&quot; : &quot;ACTIVE&quot;, &quot;version&quot; : NumberLong(0) }
{ &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5f&quot;), &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;, &quot;password&quot; : &quot;$2a$10$eyrBDJyNepEPsX3qTUveqeKNxYFq/nQq4sTixY/nRZhFynTW9izxm&quot;, &quot;email&quot; : &quot;anuja@example.com&quot;, &quot;name&quot; : &quot;Anuja Kumar&quot;, &quot;status&quot; : &quot;ACTIVE&quot;, &quot;version&quot; : NumberLong(0) }
&gt; db.user.find().pretty();
{
    &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5e&quot;),
    &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;,
    &quot;password&quot; : &quot;$2a$10$JzistJ7qIP80KMYwSqSu7uShUGn4bg/m.u0/51HcKHVIui/URgbTi&quot;,
    &quot;email&quot; : &quot;rf@example.com&quot;,
    &quot;name&quot; : &quot;RF Admin&quot;,
    &quot;status&quot; : &quot;ACTIVE&quot;,
    &quot;version&quot; : NumberLong(0)
}
{
    &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5f&quot;),
    &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;,
    &quot;password&quot; : &quot;$2a$10$eyrBDJyNepEPsX3qTUveqeKNxYFq/nQq4sTixY/nRZhFynTW9izxm&quot;,
    &quot;email&quot; : &quot;anuja@example.com&quot;,
    &quot;name&quot; : &quot;Anuja Kumar&quot;,
    &quot;status&quot; : &quot;ACTIVE&quot;,
    &quot;version&quot; : NumberLong(0)
}
</code></pre>

<p>我们看到，json的pretty()函数使得输出更好阅读。</p>

<h1 id="主键-id唯一性">主键_id唯一性</h1>

<p>我们往user集里面插入一条记录：</p>

<pre><code>&gt; var newUser = {
... &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5e&quot;),
... &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;,
... &quot;password&quot; : &quot;$2a$10$JzistJ7qIP80KMYwSqSu7uShUGn4bg/m.u0/51HcKHVIui/URgbTi&quot;,
... &quot;email&quot; : &quot;rf@example.com&quot;,
... &quot;name&quot; : &quot;RF Admin&quot;,
... &quot;status&quot; : &quot;ACTIVE&quot;,
... &quot;version&quot; : NumberLong(0)
... }


&gt; db.user.insert(newUser)
WriteResult({
    &quot;nInserted&quot; : 0,
    &quot;writeError&quot; : {
        &quot;code&quot; : 11000,
        &quot;errmsg&quot; : &quot;E11000 duplicate key error collection: restfiddle.user index: _id_ dup key: { : ObjectId('575fa8a2ba637304fffbad5e') }&quot;
    }
})
</code></pre>

<p>看到了，提示我们：</p>

<blockquote>
<p>&ldquo;E11000 duplicate key error collection: restfiddle.user index: <em>id</em> dup key:
{ : ObjectId(&lsquo;575fa8a2ba637304fffbad5e&rsquo;) }&rdquo;</p>
</blockquote>

<p>这个提示，告诉我们，在mongoDB中，集合里面的文档json的主键_id是唯一的。</p>

<h1 id="插入一条json">插入一条json</h1>

<pre><code>&gt; db.user.find();
{ &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5e&quot;), &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;, &quot;password&quot; : &quot;$2a$10$JzistJ7qIP80KMYwSqSu7uShUGn4bg/m.u0/51HcKHVIui/URgbTi&quot;, &quot;email&quot; : &quot;rf@example.com&quot;, &quot;name&quot; : &quot;RF Admin&quot;, &quot;status&quot; : &quot;ACTIVE&quot;, &quot;version&quot; : NumberLong(0) }
{ &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5f&quot;), &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;, &quot;password&quot; : &quot;$2a$10$eyrBDJyNepEPsX3qTUveqeKNxYFq/nQq4sTixY/nRZhFynTW9izxm&quot;, &quot;email&quot; : &quot;anuja@example.com&quot;, &quot;name&quot; : &quot;Anuja Kumar&quot;, &quot;status&quot; : &quot;ACTIVE&quot;, &quot;version&quot; : NumberLong(0) }


&gt; db.user.insert({'name':'Jason Chen','status':'ACTIVE'})


&gt; db.user.find().pretty();
{
    &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5e&quot;),
    &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;,
    &quot;password&quot; : &quot;$2a$10$JzistJ7qIP80KMYwSqSu7uShUGn4bg/m.u0/51HcKHVIui/URgbTi&quot;,
    &quot;email&quot; : &quot;rf@example.com&quot;,
    &quot;name&quot; : &quot;RF Admin&quot;,
    &quot;status&quot; : &quot;ACTIVE&quot;,
    &quot;version&quot; : NumberLong(0)
}
{
    &quot;_id&quot; : ObjectId(&quot;575fa8a2ba637304fffbad5f&quot;),
    &quot;_class&quot; : &quot;com.restfiddle.entity.User&quot;,
    &quot;password&quot; : &quot;$2a$10$eyrBDJyNepEPsX3qTUveqeKNxYFq/nQq4sTixY/nRZhFynTW9izxm&quot;,
    &quot;email&quot; : &quot;anuja@example.com&quot;,
    &quot;name&quot; : &quot;Anuja Kumar&quot;,
    &quot;status&quot; : &quot;ACTIVE&quot;,
    &quot;version&quot; : NumberLong(0)
}
{
    &quot;_id&quot; : ObjectId(&quot;58cfeededc2042106f53c868&quot;),
    &quot;name&quot; : &quot;Jason Chen&quot;,
    &quot;status&quot; : &quot;ACTIVE&quot;
}
</code></pre>

<p>我们可以看出，主键_id是每次插入的时候，自动生成的。那么，生成的算法是怎样的呢？</p>

<pre><code>&gt; var id=new ObjectId();
&gt; id
ObjectId(&quot;58cfefcddc2042106f53c869&quot;)
</code></pre>

<p>参考：MongoDB ObjectId详解及使用</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>