<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Linux就该这么学CH04VIM编辑器和Shell命令脚本 | 开发者问答集锦</title>
    <meta property="og:title" content="Linux就该这么学CH04VIM编辑器和Shell命令脚本 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Linux就该这么学CH04VIM编辑器和Shell命令脚本">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/linux%E5%B0%B1%E8%AF%A5%E8%BF%99%E4%B9%88%E5%AD%A6ch04vim%E7%BC%96%E8%BE%91%E5%99%A8%E5%92%8Cshell%E5%91%BD%E4%BB%A4%E8%84%9A%E6%9C%AC/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Linux就该这么学CH04VIM编辑器和Shell命令脚本</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h1 id="0-概述">0 概述</h1>

<h1 id="1-vim编辑器">1 Vim编辑器</h1>

<p>在linux 中一切都是文件，而配置一个服务就是修改其配置文件的参数。<br />
vim 编辑器有三种模式：命令模式，末行模式和编辑模式。<br />
命令模式：控制光标移动，对文件进行操作。<br />
末行模式：保存或退出文档，以及设置编辑环境。<br />
编辑模式：对文本进行编辑。<br />
<a href="https://img.it610.com/image/info8/86f1117f067941e092680be682612836.jpg"><img src="https://img.it610.com/image/info8/86f1117f067941e092680be682612836.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第1张图片" /></a><br />
<a href="https://img.it610.com/image/info8/53d8179184cc4dac8f37260babfde933.jpg"><img src="https://img.it610.com/image/info8/53d8179184cc4dac8f37260babfde933.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第2张图片" /></a><br />
<a href="https://img.it610.com/image/info8/de3b2bb8952647018a1bbea7ac751c87.jpg"><img src="https://img.it610.com/image/info8/de3b2bb8952647018a1bbea7ac751c87.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第3张图片" /></a><br />
<a href="https://img.it610.com/image/info8/ad707bdd02dc4433a49f17c1c6600e1e.jpg"><img src="https://img.it610.com/image/info8/ad707bdd02dc4433a49f17c1c6600e1e.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第4张图片" /></a></p>

<h2 id="1-编辑文档">1） 编辑文档</h2>

<p>a:在光标后一位插入。<br />
i:在光标当前位置插入。<br />
o:在光标下一行插入。<br />
:wq保存退出。<br />
:wq!强制保存退出。</p>

<h2 id="2-配置主机名称">2）配置主机名称</h2>

<p>在linux系统中主机名称一般保存在 /etc/hostname.<br />
查看主机名称命令： hostname</p>

<h2 id="3-配置网卡信息">3) 配置网卡信息</h2>

<p>RHEL7中网卡配置文件是以ifcfg开头的。再加上网卡名称就是网卡的配置文件了。<br />
网卡配置步骤：</p>

<ol>
<li><p>用vim 打开 /etc/sysconfig/network-scripts/ifcfg-xxx的网卡文件，修改文件使其包含至少下面几项(其他的可以不变，注释可以不要)：</p>

<p>TYPE=Ethernet               #设备类型
BOOTPROTO=static            #地址分配模式
NAME=eno16777736            #网卡名称
ONBOOT=yes                  #是否启动
IPADDR=192.168.10.10        #IP 地址
NETMASK=255.255.255.0       #子网掩码
GATEWAY=192.168.10.1        #网关地址
DNS1=192.168.10.1           #DNS 地址</p></li>
</ol>

<p>配置网卡IP的命令是：</p>

<p><code>[root@RHEL Desktop]# ifconfig eno16777736 192.168.2.10 netmask 255.255.255.0</code></p>

<ol>
<li><p>重启网卡并测试网络是否联通(ping之后使用ctrl -c 来强制停止)。</p>

<p>[root@RHEL Desktop]# systemctl restart network
[root@RHEL Desktop]# ping 192.168.2.10
PING 192.168.2.10 (192.168.2.10) 56(84) bytes of data.
64 bytes from 192.168.2.10: icmp_seq=1 ttl=64 time=0.061 ms
64 bytes from 192.168.2.10: icmp_seq=2 ttl=64 time=0.064 ms
64 bytes from 192.168.2.10: icmp_seq=3 ttl=64 time=0.047 ms</p></li>
</ol>

<h2 id="4-配置yum软件仓库">4） 配置YUM软件仓库。</h2>

<p>yum仓库的作用是为了进一步简化RPM管理软件的难度以及自动分析所需软件包及其依赖关系的技术。<br />
搭建并配置yum仓库的步骤如下：</p>

<ul>
<li><p>cd到/etc/yum.repos.d/ 目录中（该目录存放yum的配置文件）。<br />
<code>[root@RHEL Desktop]# cd /etc/yum.repos.d/</code></p></li>

<li><p>使用Vim 创建一个rhel7.repo的新配置文件（名称可变，后缀必须为.repo），写入下面文件黑体文件并退出。<br />
<a href="https://img.it610.com/image/info8/0eb61b8ead3c4b8fadeb7a1e1b3609df.jpg"><img src="https://img.it610.com/image/info8/0eb61b8ead3c4b8fadeb7a1e1b3609df.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第5张图片" /></a><br />
<a href="https://img.it610.com/image/info8/1de09379af22417db61cde668655a938.jpg"><img src="https://img.it610.com/image/info8/1de09379af22417db61cde668655a938.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第6张图片" /></a><br />
<code>[root@RHEL yum.repos.d]# vim rhel7.repo</code><br />
rhel7.repo内容如下：</p>

<p>name=rhel7
baseurl=file:///media/cdrom
enabled=1
gpgcheck=0</p></li>

<li><p>按照配置参数的路径挂载光盘，并把光盘挂载信息写入到/etc/fstab文件中。</p>

<p>[root@RHEL yum.repos.d]# mkdir -p /media/cdrom
[root@RHEL yum.repos.d]# mount /dev/cdrom /media/cdrom
mount: /dev/sr0 is write-protected, mounting read-only
[root@RHEL yum.repos.d]# vim /etc/fstab</p></li>
</ul>

<p>在fstab文件的最后一行后面添加下面信息<br />
<code>/dev/cdrom /media/cdrom iso9660 defaults 0 0</code></p>

<ul>
<li><p>使用yum install httpd -y来检查yum是否可用，如果最后出现complete则代表正确。</p>

<p>[root@RHEL yum.repos.d]# yum install httpd
Loaded plugins: langpacks, product-id, subscription-manager
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
Resolving Dependencies
&ndash;&gt; Running transaction check
&mdash;&gt; Package httpd.x86_64 0:2.4.6-17.el7 will be installed
&hellip;
&hellip;
Complete!</p></li>
</ul>

<h1 id="2-编写shell脚本">2 编写shell脚本</h1>

<p>shell脚本命令的工作方式有两种：交互式和批量式。<br />
交互式为输入一个命令立即执行。批量式是先写一个shell脚本文件，再一次性执行该脚本文件内的命令。</p>

<h2 id="1-编写简单的脚本">1)编写简单的脚本</h2>

<p>把linux命名按顺序依次写入到一个文件中，这就是一个简单的脚本文件。<br />
例如: <a href="https://img.it610.com/image/info8/ef5c032fed5c478daff693acbcd63893.jpg"><img src="https://img.it610.com/image/info8/ef5c032fed5c478daff693acbcd63893.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第7张图片" /></a><br />
上图第一行是新建或打开example.sh 脚本。不在脚本文件内容内。<br />
第二行是 脚本声明(#!)告诉系统使用哪种shell解释器来执行该脚本。<br />
第三行#是解释，可以对脚本进行简单的说明。<br />
接下面是脚本的主要内容，也是执行的命令。<br />
两种运行脚本的方法：<br />
1.使用解释器命令运行脚本：bash xx.sh</p>

<pre><code>[root@RHEL Desktop]# bash example.sh
/root/Desktop
total 76
drwxr-xr-x.  3 root root  4096 Aug 29 21:06 .
dr-xr-x---. 16 root root  4096 Aug 29 21:02 ..
drwxr-xr-x.  3 root root  4096 Aug 26 22:38 a
</code></pre>

<p>2.使用完整的路径运行脚本： ./xx.sh<br />
但是该方法需要获得先特殊权限。</p>

<pre><code>[root@RHEL Desktop]# ./example.sh
bash: ./example.sh: Permission denied
[root@RHEL Desktop]# chmod u+x example.sh
[root@RHEL Desktop]# ./example.sh
/root/Desktop
total 76
drwxr-xr-x.  3 root root  4096 Aug 29 21:06 .
dr-xr-x---. 16 root root  4096 Aug 29 21:02 ..
</code></pre>

<p>chmod u+x example.sh 是改变权限命令，后面会讲到。 u=用户， x =执行。</p>

<h2 id="2-接收用户参数">2）接收用户参数</h2>

<p>Linux已经内设了用于接收参数的变量，变量之间可以使用空格间隔。<br />
一些默认的常用的特殊变量的意义：<br />
$0 代表 当前shell的脚本名称。<br />
$#代表总共有几个参数。<br />
$* 代表所有位置的参数值。<br />
$? 代表上一次命令执行的返回值。执行成功则返回0，否则返回非0值。<br />
$1,$2…代表第N个位置的参数。<br />
修改example.sh的内容如下：</p>

<pre><code>#!/bin/bash
#for example by root
pwd
#ls -al
echo &quot;The result of execution of the previous command is $?&quot;
echo &quot;the current sh file name is $0 &quot;
echo &quot;total have $# parameters,there are $*&quot;
echo &quot;the 1st parameter is $1,the 2nd parameter is $2&quot;
</code></pre>

<p>执行结果如下：</p>

<pre><code>[root@RHEL Desktop]# bash example.sh 1 2 3 
/root/Desktop
The result of execution of the previous command is 0
the current sh file name is example.sh 
total have 3 parameters,there are 1 2 3
the 1st parameter is 1,the 2nd parameter is 2
[root@RHEL Desktop]# 
</code></pre>

<h2 id="3-判断用户的参数">3） 判断用户的参数</h2>

<p>接着学习如何进一步处理用户的参数。<br />
shell脚本的条件测试语法可以判断表达式是否成立，若条件成立则返回数字0,不成立则返回非0. 结果存放在 $?中。<br />
条件测试格式：<br />
<a href="https://img.it610.com/image/info8/adccb6cbad5f435da16ca39221768936.jpg"><img src="https://img.it610.com/image/info8/adccb6cbad5f435da16ca39221768936.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第8张图片" /></a><br />
按照测试对象来划分，条件测试语句分为4中。</p>

<ul>
<li>文件测试语句。</li>
<li>逻辑测试语句。</li>
<li>整数值比较语句。</li>
<li>字符串比较语句。</li>
</ul>

<p>文件测试即使用指定条件来判断文件是否存在使用权限不足等情况的运算符。参数如下：<br />
<a href="https://img.it610.com/image/info8/8e6abbf82778479b9555cfcdb3bdf400.jpg"><img src="https://img.it610.com/image/info8/8e6abbf82778479b9555cfcdb3bdf400.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第9张图片" /></a><br />
$? 显示上一条命令执行后的返回值。<br />
下面判断/etc/fstab是不是一个文件。</p>

<pre><code>[root@RHEL Desktop]# [ -e /etc/fstab ] | echo $?
0
</code></pre>

<p>逻辑语句用于对测试结果进行逻辑分析，根据测试结果可实现不同的效果。<br />
逻辑与 （&amp;&amp;） ：表示前面命令执行成功之后才会执行后面的结果。<br />
逻辑或 （||）：表示前面命令执行不成功后才会执行它的结果。<br />
逻辑非 （!）:表示把条件测试的结果取反。</p>

<pre><code>[root@RHEL Desktop]# [ $USER=root ] &amp;&amp; echo &quot;root&quot; || echo &quot;user&quot;
root
[root@RHEL Desktop]# [ ! $USER=root ] &amp;&amp; echo &quot;root&quot; || echo &quot;user&quot;
user
</code></pre>

<p>整数比较运算符只对数字进行操作，不能将数字与字符或文件进行混合操作。而且大于等于小于不能使用 &gt; = &lt; ,而是使用字母。<br />
<a href="https://img.it610.com/image/info8/0101e9642f4b4c68bb628dad3cfa262e.jpg"><img src="https://img.it610.com/image/info8/0101e9642f4b4c68bb628dad3cfa262e.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第10张图片" /></a><br />
<a href="https://img.it610.com/image/info8/dc32f1e865fa4203813e4586735a33a1.jpg"><img src="https://img.it610.com/image/info8/dc32f1e865fa4203813e4586735a33a1.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第11张图片" /></a></p>

<pre><code>[root@RHEL7 Desktop]# [ 3 -gt 5 ] 
[root@RHEL7 Desktop]# echo $?
1
</code></pre>

<p><em><strong>注意： 上面两个不能用管道符连写，结果会出错。原因不详？？？</strong></em><br />
下面的命令用来判断当前linux系统的内存是否小于1G。</p>

<pre><code>[root@RHEL7 Desktop]# FREEMEM=`free -m | grep -i mem | awk '{ print $4 }'`  
[root@RHEL7 Desktop]# [ $FREEMEM -gt 1024 ] &amp;&amp; echo &quot;this is OK.&quot; || echo &quot;this is not OK.&quot;
this is OK.
</code></pre>

<p><strong>注意第一条命令当中最外面使用的是 ``(反引号)。</strong></p>

<h1 id="3-流程控制语句">3 流程控制语句</h1>

<h2 id="1-if-语句">1) if 语句</h2>

<p>if 语句用于条件测试判断，有单分支，双分支和单分支之分。<br />
单分支格式：</p>

<pre><code>if 条件
then
执行语句
fi 
</code></pre>

<p>例程，判断一个目录是否存在，如果不存在则新建该目录。</p>

<pre><code>[root@RHEL7 Desktop]# vim if1.sh
#!/bin/bash
#test if
DIR=&quot;a/b&quot;
if [ ! -e $DIR ]
then
mkdir -p $DIR
fi
[root@RHEL7 Desktop]# ls
if1.sh  petalinux
[root@RHEL7 Desktop]# bash if1.sh
[root@RHEL7 Desktop]# ls
a  if1.sh  petalinux
</code></pre>

<p>双分支格式</p>

<pre><code>if 条件
then 
执行语句1
else 执行语句2
fi
</code></pre>

<p>例程，判断一个IP是否在线。</p>

<pre><code>[root@RHEL7 Desktop]# vim if2.sh
#!/bin/bash
#test if else
ping -c 3 -i 0.2 -W 3 $1 &amp;&gt; /dev/null
if [ $? -eq 0 ]
then
echo &quot;the host $1 is on line.&quot;
else echo &quot;the host #1 is off-line.&quot;
fi

[root@RHEL7 Desktop]# bash if2.sh 192.168.2.10
the host #1 is off-line.
</code></pre>

<p>对 <code>ping -c 3 -i 0.2 -W 3 $1 &amp;&gt; /dev/null</code> 的解释：<br />
-c指定ping的次数。<br />
-i 指定ping 的间隔。<br />
-W 指定等待的最大时间。<br />
&amp;&gt; /dev/null 将输出结果。不管正确与否，都输出到null中。<br />
/dev/null 是一个没有回收功能的垃圾桶。</p>

<p>多分支格式：</p>

<pre><code>if 条件1
then
执行语句1
elif 条件2
then
执行语句2
else  执行语句3
fi
</code></pre>

<p>例程：下面根据输入的数字来判断成绩怎么样。<br />
使用了外部读取的命令： read。 -p选项是输出提示信息。</p>

<pre><code>[root@RHEL Desktop]# vim vchkscore.sh
#!/bin/bash
# test if elif else 
read -p &quot;Enter your score(0-100) : &quot; GRADE
if [ $GRADE -ge 85 ] &amp;&amp; [ $GRADE -le 100 ]
then
echo &quot;$GRADE is excellent !&quot;
elif [ $GRADE -ge 70 ] &amp;&amp; [ $GRADE -le 84 ]
then
echo &quot;$GRADE is pass.&quot;
else echo &quot;$GRADE is fail. &quot;
fi
# end
[root@RHEL Desktop]# bash vchkscore.sh
Enter your score(0-100) : 98
98 is excellent !
[root@RHEL Desktop]# bash vchkscore.sh
Enter your score(0-100) : 20
20 is fail. 
</code></pre>

<h2 id="2-for语句">2) for语句</h2>

<p>for循环语句允许脚本一次性读取多个信息，然后逐一对信息进行操作处理，当要处理的数据有范围时，使用for循环最好。<br />
格式：</p>

<pre><code>for 变量名 in 取值列表
do 
    执行命令
done
</code></pre>

<p>例程：<br />
用for循环批量建立用户。<br />
新建一个name的文件，里面放用户名称，然后写一个脚本文件，来批量建立这些用户。</p>

<pre><code>[root@RHEL Desktop]# vim users.txt
andy
barry
carl
duke
tom
[root@RHEL Desktop]# vim for_example.sh
#!/bin/bash
#test for function
read -p &quot;Enter the users passwd: &quot; PASSWD
for UNAME in `cat users.txt`
do
id $UNAME &amp;&gt; /dev/null
if [ $? -eq 0 ]
then
echo &quot;Already exists.&quot;
else
useradd $UNAME &amp;&gt; /dev/null
echo &quot;$PASSWD&quot; | passwd --stdin $UNAME &amp;&gt; /dev/null
if [ $? -eq 0 ]
then
echo  &quot;$UNAME ,create success&quot;
else
echo &quot;$UNAME, Create failure&quot;
fi
fi
done
[root@RHEL Desktop]# bash for_example.sh
Enter the users passwd: 111
andy ,create success
barry ,create success
carl ,create success
duke ,create success
tom ,create success
</code></pre>

<p>例程：<br />
删除刚才建立的用户。</p>

<pre><code>[root@RHEL Desktop]# vim del_users.sh
#!/bin/bash
#delect users
for UNAME in `cat users.txt`
do
id $UNAME &amp;&gt; /dev/null
if [ $? -eq 0 ]
then
userdel -rf $UNAME
id $UNMAE &amp;&gt; /dev/null
if [ $? -eq 0 ]
then
echo &quot;delect $UNAME  successful.&quot;
else
echo &quot;delect $UNAME  failed.&quot; 
fi
else
echo &quot;the user not exist.&quot;
fi
done
[root@RHEL Desktop]# bash del_users.sh 
delect andy  successful.
delect barry  successful.
delect carl  successful.
delect duke  successful.
delect tom  successful.
</code></pre>

<h2 id="3-while-循环语句">3）while 循环语句</h2>

<p>while循环语句是根据某些条件来重复执行的命令，它的循环结构往往在执行前并不能确定最终的次数。<br />
格式：</p>

<pre><code>while 条件测试
do
    执行的命令
done
</code></pre>

<h3 id="random变量">$RANDOM变量</h3>

<p>$RANDOM变量来调取一个随机的数值（范围0-32767）。<br />
$RANDOM %1000 则是取0-999之间的随机数。</p>

<h3 id="expr-命令">expr 命令</h3>

<p>expr命令是一个手工命令行计数器，用于在UNIX/LINUX下求表达式变量的值，一般用于整数值，也可用于字符串。<br />
语法<br />
<code>expr 表达式</code><br />
表达式说明:<br />
用空格隔开每个项；<br />
用 / (反斜杠) 放在 shell 特定的字符前面；<br />
对包含空格和其他特殊字符的字符串要用引号括起来<br />
实例</p>

<pre><code>1、计算字串长度
&gt; expr length “this is a test”
 14
2、抓取字串
&gt; expr substr “this is a test” 3 5
is is
3、抓取第一个字符数字串出现的位置
&gt; expr index &quot;sarasara&quot;  a
 2
4、整数运算
 &gt; expr 14 % 9
 5
 &gt; expr 10 + 10
 20
 &gt; expr 1000 + 900
 1900
 &gt; expr 30 / 3 / 2
 5
 &gt; expr 30 \* 3 (使用乘号时，必须用反斜线屏蔽其特定含义。因为shell可能会误解显示星号的意义)
 90
 &gt; expr 30 * 3
 expr: Syntax error
</code></pre>

<h3 id="let命令">let命令</h3>

<p>let 命令是 BASH 中用于计算的工具，用于执行一个或多个表达式，变量计算中不需要加上 $
来表示变量。如果表达式中包含了空格或其他特殊字符，则必须引起来。<br />
自加操作：let no++<br />
自减操作：let no–<br />
简写形式 let no+=10，let no-=20，分别等同于 let no=no+10，let no=no-20。</p>

<p>例程：<br />
猜数字游戏。猜一个0-999之间的数。<br />
<a href="https://img.it610.com/image/info8/3e11f9440f804574a583f4555dde6086.jpg"><img src="https://img.it610.com/image/info8/3e11f9440f804574a583f4555dde6086.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第12张图片" /></a><br />
运行结果：</p>

<pre><code>[root@RHEL Desktop]# bash guess.sh 
the price is 0-9999,guess it: 
please enter you answer:500
too low.
please enter you answer:800
too high.
please enter you answer:650
too low.
please enter you answer:720
too high.
please enter you answer:670
too low.
please enter you answer:690
too high.
please enter you answer:680
too high.
please enter you answer:675
too high.
please enter you answer:673
congratulate, the price is 673.
you total guess 9 times.
</code></pre>

<p>注意 ：<strong><em>=两边不要有空格。</em></strong></p>

<h2 id="case-条件测试语句">case 条件测试语句</h2>

<p>case语句是在多个范围内匹配数据。<br />
格式为:</p>

<pre><code>case 变量值 in
条件1）
    执行语句1
    ;;
条件2）
    执行语句2
    ;;
*) 
    默认执行语句
esac
</code></pre>

<p>例程：判断输入的是字母，数字还是其他的。</p>

<pre><code>[root@RHEL7 Desktop]# vim case_example.sh
#!/bin/bash
#test case
read -p &quot;please enter a key:&quot; KEY
case $KEY in
[a-z]|[A-Z] )
echo &quot;your input is a letter&quot;
;;
[0-9] )
echo &quot;your input is a digit&quot;
;;
* )
echo &quot;your input is others&quot;
;;
esac

[root@RHEL7 Desktop]# bash case_example.sh 
please enter a key:3
your input is a digit
[root@RHEL7 Desktop]# bash case_example.sh 
please enter a key:a
your input is a letter
[root@RHEL7 Desktop]# bash case_example.sh ,
please enter a key:,
your input is others
[root@RHEL7 Desktop]# 
</code></pre>

<h1 id="4-计划任务服务">4 计划任务服务</h1>

<p>计划任务是在指定的时间端自动的启用或者停止某项服务命令，从而实现运维的自动化。</p>

<h2 id="创建一次性的任务">创建一次性的任务</h2>

<h3 id="at命令">at命令</h3>

<p>at 时间：建立一次性任务。 ctrl +d 来结束任务的建立。<br />
at -l : 查看一次性任务<br />
atrm 任务号 ： 删除一次性任务<br />
at -c 任务编号 ：查看某个具体的任务。</p>

<pre><code>[root@RHEL Desktop]# at 23:00
at&gt; systemctl restart fttpd
at&gt; systemctl restart sshd
at&gt;   #这里使用ctrl+d 来结束。
job 1 at Tue Sep  3 23:00:00 2019
[root@RHEL Desktop]# at 23:00
at&gt; 
job 2 at Tue Sep  3 23:00:00 2019
[root@RHEL Desktop]# at 23:30
at&gt; reboot
at&gt; 
job 3 at Tue Sep  3 23:30:00 2019
[root@RHEL Desktop]# at -l
1   Tue Sep  3 23:00:00 2019 a root
2   Tue Sep  3 23:00:00 2019 a root
3   Tue Sep  3 23:30:00 2019 a root
[root@RHEL Desktop]# at -c 1
#!/bin/sh
 # atrun uid=0 gid=0
 # mail root 0
.....
${SHELL:-/bin/sh} &lt;&lt; 'marcinDELIMITER12f598ee'
systemctl restart fttpd
systemctl restart sshd

marcinDELIMITER12f598ee

[root@RHEL Desktop]# atrm 2
[root@RHEL Desktop]# at -l
1   Tue Sep  3 23:00:00 2019 a root
3   Tue Sep  3 23:30:00 2019 a root
</code></pre>

<h2 id="创建周期性的任务">创建周期性的任务</h2>

<p>crond服务用于执行周期性的任务。</p>

<h3 id="crontab">crontab</h3>

<p>crontab -e : 创建，编辑计划任务。<br />
crontab -l ：查看某条计划任务。<br />
crontab -r ：删除某条计划任务。<br />
crontab -u :来编辑他人的计划任务。需要root身份登录。<br />
crond服务设置任务的参数格式是： 分 时 日 月 星期 命令。<br />
<a href="https://img.it610.com/image/info8/f9a431c4f9cf49e09007ca86744ef9fe.jpg"><img src="https://img.it610.com/image/info8/f9a431c4f9cf49e09007ca86744ef9fe.jpg" alt="Linux 就该这么学 CH04
VIM编辑器和Shell命令脚本_第13张图片" /></a><br />
其中：<br />
1、分钟 必须有数字，绝对不能为空或者<em>。<br />
2、日和星期不能同时有，否则冲突。<br />
3、命令必须带有路径，不能是直接的命名。如 /bin/tar 。<br />
4、逗号，可以表示多个时间或时间段。 减号- 可以表示一段连续的时间。<br />
5、除号/表示执行的时间间隔，如 “</em>/2” 表示每隔2分钟执行一次。</p>

<h3 id="whereis-查看命令">whereis 查看命令</h3>

<pre><code>[root@RHEL Desktop]# whereis reboot
reboot: /usr/sbin/reboot /usr/share/man/man2/reboot.2.gz /usr/share/man/man8/reboot.8.gz
</code></pre>

<p>其中/usr/sbin/reboot 是reboot的路径。</p>

<pre><code>[root@RHEL7 ~]# crontab -e 
25 3 * * 1,3,5 /usr/sbin/reboot
0  */2  29 2 * /usr/bin/touch  log.txt
crontab: installing new crontab
[root@RHEL7 ~]# crontab -l
25 3 * * 1,3,5 /usr/sbin/reboot
0  */2  29 2 * /usr/bin/touch  log.txt
[root@RHEL7 ~]# crontab -r
[root@RHEL7 ~]# crontab -l
no crontab for root
[root@RHEL7 ~]# 
</code></pre>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>