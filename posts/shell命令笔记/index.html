<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Shell命令笔记 | 开发者问答集锦</title>
    <meta property="og:title" content="Shell命令笔记 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Shell命令笔记">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Shell命令笔记</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <p>====================== shell 命令============================<br />
shell学习：<br />
cat 未指定任何文件，则默认读取标准输入<br />
tac 从最后一行开始显示，可以看出 tac 是 cat 的倒着写！</p>

<p>tar &ndash;no-same-owner 解压缩的时候默认是将文件权限恢复成打包时文件的权限属性。添加这个选项卡后就可以使用解压缩的用户<br />
来作为文件的属主</p>

<p>who 显示目前登录的人数<br />
wc 字数统计， wc -l -w -c</p>

<p>@@一直弄不懂，管道不就是把前一个命令的结果作为参数给下一个命令吗，那在 | 后面加不加xargs有什么区别？？？</p>

<p>管道是实现“将前面的标准输出作为后面的标准输入”<br />
xargs是实现“将标准输入作为命令的参数”</p>

<p>你可以试试运行：<br />
echo &ldquo;&ndash;help&rdquo;|cat #输出 &ndash;help<br />
echo &ldquo;&ndash;help&rdquo;|xargs cat #等价于cat &ndash;help。</p>

<p>看看结果的不同。</p>

<p>cp 复制命令会改变文件的权限，想要将档案的所有特性都一起复制过来，可以加上 -a 喔<br />
-u参数在文件不同时才会发生复制操作。</p>

<p>$$sed 命令理解<br />
sed -i -s &lsquo;/\(nexus ..\)/c\\./nexus ../out/skyapp &amp;&rsquo;
${SK_BIN_OUT}/runsky.sh</p>

<p>解释：-i表示更改源文件<br />
-s表示数据源<br />
命令在中间，则后面有一个反斜杠。<br />
附 常用选项：<br />
-n∶使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN的资料一般都会被列出到萤幕上。但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来。<br />
-e∶直接在指令列模式上进行 sed 的动作编辑；<br />
-f∶直接将 sed 的动作写在一个档案内， -f filename 则可以执行 filename 内的sed 动作；<br />
-r∶sed 的动作支援的是延伸型正规表示法的语法。(预设是基础正规表示法语法)<br />
-i∶直接修改读取的档案内容，而不是由萤幕输出。</p>

<p>常用命令：<br />
a ∶新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行) # sed &lsquo;1,3a drink tea&rsquo; ab
#第一行到第三行后增加字符串&rdquo;drink tea&rdquo;<br />
c ∶取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！代替一行或多行。：# sed &lsquo;1,2c Hi&rsquo; ab
#第一行到第二行代替为Hi<br />
d ∶删除，因为是删除啊，所以 d 后面通常不接任何咚咚；# sed &lsquo;1,2d&rsquo; ab #删除第一行到第二行<br />
i ∶插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；# sed -i &lsquo;$a bye&rsquo; ab
#在文件ab中最后一行直接输入&rdquo;bye&rdquo;<br />
p ∶列印，亦即将某个选择的资料印出。通常 p 会与参数 sed -n 一起运作～ # sed -n &lsquo;2,$p&rsquo; ab #显示第二行到最后一行<br />
s ∶取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！ 替换一行中的某部分：# sed
-n &lsquo;/ruby/p&rsquo; ab | sed &rsquo;s/ruby/bird/g&rsquo; #替换ruby为bird</p>

<p>-&mdash;PS:LINUX中使用VIM替换命令 :s/main/main_bak 报错：pattern not found<br />
解决：使用 :%s/main/main_bak<br />
-&mdash;PPS: 部分字符串替换操作，如把asdf_bbb-1111_asdf_bbb-
bbbm1111中的bbb替换成HHH，把1111替换成2222，其他的不动。<br />
即输入：asdf_bbb-1111_asdf_bbb-bbbm1111 输出：asdf_HHH-2222_asdf_bbb-HHHm2222<br />
-&mdash;命令：sed &rsquo;s/bbb\(.\)1111/HHH\12222/g&rsquo; 或者 sed -r
&rsquo;s/bbb(.)1111/HHH\12222/g&rsquo;<br />
解释：\(.\)这是个匹配项，即表示bbbxxx1111中间的一个字符(.表示任意一个字符，.*表示匹配0个或多个字符)。，后面用\1表示。【注】sed命令中看不懂的都是正则表达式<br />
附录：正则表达式<br />
特别字符 描述<br />
$ 匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 &lsquo;\n&rsquo; 或 &lsquo;\r&rsquo;。要匹配 $
字符本身，请使用 \$。<br />
( ) 标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 \( 和 \)。<br />
* 匹配前面的子表达式零次或多次。要匹配 * 字符，请使用 \*。<br />
+ 匹配前面的子表达式一次或多次。要匹配 + 字符，请使用 \+。<br />
. 匹配除换行符 \n之外的任何单字符。要匹配 .，请使用 \。<br />
[ 标记一个中括号表达式的开始。要匹配 [，请使用 \[。<br />
? 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用 \?。<br />
\ 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， &lsquo;n&rsquo; 匹配字符 &lsquo;n&rsquo;。&rsquo;\n&rsquo; 匹配换行符。序列 &lsquo;\\&rsquo; 匹配
&ldquo;\&ldquo;，而 &lsquo;\(&rsquo; 则匹配 &ldquo;(&ldquo;。<br />
^ 匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 ^ 字符本身，请使用 \^。<br />
{ 标记限定符表达式的开始。要匹配 {，请使用 \{。<br />
| 指明两项之间的一个选择。要匹配 |，请使用 |。</p>

<p>$$tty 命令显示当前的控制台。<br />
#tty<br />
/dev/ttyS000</p>

<p>**,cpio工具：一般用法就是：读取一个目录下所有文件的信息及其所有文件的内容（可能是直接read数据到一个buffer中），然后把这些信息写到一个文件中。<br />
说白了，可能就是一个序列化的工具。然后LK用同样的方法就可以反序列化，恢复原来目录中的内容了<br />
example：<br />
打包：<br />
find testramfs -depth -print | cpio -ov &gt; testramfs.cpio<br />
解包：<br />
cpio -ivd &lt; testramfs.cpio</p>

<p>#diff制作补丁<br />
#-N 参数是当不存在对应文件时当做新文件<br />
diff -ur -x &ldquo;.svn&rdquo; linux-sh4-2.6.23.17_stm23_A25C.original/ linux-
sh4-2.6.23.17_stm23_A25C &gt; linux.patch</p>

<p>#Makefile中sinclude是作用？<br />
相当于
-include,兼容性好一些。&mdash;-为了和其它的make程序进行兼容。也可以使用“sinclude”来代替“-include”（GNU所支持的方式）。</p>

<p>#set -x 命令显示shell脚本执行的过程，即打印出脚本执行的命令及其结果。<br />
set +x 关闭</p>

<p>#test命令和[&hellip;]是等价的,而[[]]命令比[]命令用途更加广。可进行调节判断。<br />
if test &ldquo;a&rdquo; = &ldquo;b&rdquo; &lt;===&gt; if [ &ldquo;a&rdquo; = &ldquo;b&rdquo; ] ##注意[]符号中需要有空格，即不能使用if [&ldquo;a&rdquo;==&ldquo;b&rdquo;]。<br />
Test和[]中可用的比较运算符只有=和!=，两者都是用于字符串比较的，不可用于整数比较，整数比较只能使用-eq，-gt这种形式: if [ a -eq b
]</p>

<p>【注意】： shell中 = 作为等于时（不是==！！！），其两边都必须加空格，否则失效等号也是操作符，必须和其他变量，关键字，用空格格开
(等号做赋值号时正好相反，两边不能有空格）<br />
A, 对比[[]]和[]的例子：<br />
比如可以直接使用if [[ $a != 1 &amp;&amp; $a != 2 ]], 如果不适用双括号, 则为if [ $a -ne 1] &amp;&amp; [ $a != 2
]或者if [ $a -ne 1 -a $a != 2 ]。</p>

<p>B, 长知识：符号$后的括号<br />
（1）${a} 变量a的值, 在不引起歧义的情况下可以省略大括号。</p>

<p>（2）$(cmd) 命令替换，和<code>cmd</code>效果相同，结果为shell命令cmd的输，过某些Shell版本不支持$()形式的命令替换, 如tcsh。</p>

<p>（3）$((expression)) 和<code>exprexpression</code>效果相同, 计算数学表达式exp的数值, 其中exp只要符合C语言的运算规则即可,
甚至三目运算符和逻辑表达式都可以计算。</p>

<p>@@ shell中的单引号和双引号。<br />
单引号：shell中将‘’中的字符当做纯字符，不处理\转意字符。 如：echo &lsquo;addfg&rdquo;&rdquo;\/\/\&rsquo; 输出：addfg&rdquo;&rdquo;\/\/\<br />
双引号：shell中处理“”中的字符可以进行\转意，变量替换，算术等。如：x=a echo &ldquo;x is \&ldquo;$x\&ldquo;&rdquo;<br />
转意字符包括：“ $ \ `，不包括‘</p>

<p>@@几个linux下的数据源。<br />
/dev/null<br />
/dev/random /dev/urandom</p>

<p>@@type命令用来显示指定命令的类型。一个命令的类型可以是如下几种:<br />
alias 别名<br />
keyword 关键字,Shell保留字<br />
function 函数,Shell函数<br />
builtin 内建命令,Shell内建命令<br />
file 文件，磁盘文件，外部命令<br />
unfound 没有找到<br />
它是Linux系统的一种自省机制，知道了是哪种类型，我们就可以针对性的获取帮助。<br />
例子：<br />
wangjie@drteam:~/misc/test$ type ll<br />
ll is aliased to `ls -l&rsquo;</p>

<p>#uniq 命令。<br />
uniq -c 显示非重复的字段，并标记重复次数。<br />
uniq -d 显示重复项。</p>

<p>#trap 命令：trap命令用于指定在接收到信号后将要采取的动作。常见的用途是在脚本程序被中断时完成清理工作<br />
trap -l #显示所有信号。<br />
1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP<br />
6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL 10) SIGUSR1<br />
11) SIGSEGV 12) SIGUSR2 13) SIGPIPE 14) SIGALRM 15) SIGTERM<br />
16) SIGSTKFLT 17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP<br />
21) SIGTTIN 22) SIGTTOU 23) SIGURG 24) SIGXCPU 25) SIGXFSZ<br />
26) SIGVTALRM 27) SIGPROF 28) SIGWINCH 29) SIGIO 30) SIGPWR<br />
31) SIGSYS 34) SIGRTMIN 35) SIGRTMIN+1 36) SIGRTMIN+2 37) SIGRTMIN+3<br />
38) SIGRTMIN+4 39) SIGRTMIN+5 40) SIGRTMIN+6 41) SIGRTMIN+7 42) SIGRTMIN+8<br />
43) SIGRTMIN+9 44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13<br />
48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52)
SIGRTMAX-12<br />
53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9 56) SIGRTMAX-8 57) SIGRTMAX-7<br />
58) SIGRTMAX-6 59) SIGRTMAX-5 60) SIGRTMAX-4 61) SIGRTMAX-3 62) SIGRTMAX-2<br />
63) SIGRTMAX-1 64) SIGRTMAX</p>

<p>例子：trap &lsquo;{ ulimit -c unlimited;killall udhcpc;killall himount; } &gt; /dev/null
2&gt;&amp;1&rsquo; INT #收到INT信号时，执行&rdquo;中间的命令。</p>

<p>@@awk命令： awk &lsquo;条件类型1{动作1}条件类型2{动作2}&rsquo; filename<br />
NF : 每一行 ($0) 拥有的字段总数<br />
NR : 目前 awk 所处理的是『第几行』数据<br />
例子： cat /etc/passwd | awk -F &ldquo;:&rdquo; &lsquo;{print $1 &ldquo; line:&rdquo; NR}&rsquo;</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>