<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>PHPPerlPythonRuby语言特性的区别 | 开发者问答集锦</title>
    <meta property="og:title" content="PHPPerlPythonRuby语言特性的区别 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="PHPPerlPythonRuby语言特性的区别">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/phpperlpythonruby%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9A%84%E5%8C%BA%E5%88%AB/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">PHPPerlPythonRuby语言特性的区别</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>**<br />
**</p>

<p>Interpreted Languages: PHP, Perl, Python, Ruby (Sheet One)</p>

<p><em>a side-by-side reference sheet</em></p>

<p>sheet one: arithmetic and logic | strings | regexes | dates and time | arrays
| dictionaries | functions | execution control<br />
files | directories | processes and environment</p>

<p>sheet two: libraries and modules | objects | reflection | web | tests |
debugging and profiling | java interop | <em>contact</em></p>

<p>|  php (1995) |  perl (1987) |  python (1991) |  ruby (1995)<br />
&mdash;|&mdash;|&mdash;|&mdash;|&mdash;<br />
versions used<br />
|  <em>5.3</em> |  <em>5.12; 5.14</em> |  <em>2.7; 3.2</em> |  <em>1.8; 1.9</em><br />
implicit prologue |  <em>none</em> |  use strict; |  import os, re, sys |  <em>none</em><br />
show version<br />
|  $ php --version |  $ perl --version |  $ python -V |  $ ruby --version<br />
interpreter<br />
|  $ php -f foo.php |  $ perl foo.pl |  $ python foo.py |  $ ruby foo.rb<br />
repl<br />
|  $ php |  $ perl -de 0 |  $ python |  $ irb<br />
command line script |  $ php -r &lsquo;echo &ldquo;hi\n&rdquo;;&rsquo; |  $ perl -e &lsquo;print(&ldquo;hi\n&rdquo;)&rsquo; |
$ python -c &ldquo;print(&lsquo;hi&rsquo;)&rdquo; |  $ ruby -e &lsquo;puts &ldquo;hi&rdquo;&rsquo;<br />
statement separator<br />
|  ;</p>

<p><em>statements must be semicolon terminated inside {}</em> |  ; |  <em>newline or</em> ;</p>

<p>_newlines not separators inside (), [], {}, triple quote literals, or after
backslash: _ |  <em>newline or</em> ;</p>

<p>_newlines not separators inside (), [], {}, ``, &ldquo;, &ldquo;&rdquo;, or after binary
operator or backslash: _<br />
block delimiters<br />
|  {} |  {} |  <em>offside rule</em> |  {}<br />
do end<br />
assignment<br />
|  $v = 1; |  $v = 1; |  <em>assignments can be chained but otherwise don&rsquo;t
return values:</em><br />
v = 1 |  v = 1<br />
parallel assignment<br />
|  list($x, $y, $z) = array(1 ,2, 3);</p>

<h1 id="3-is-discarded">3 is discarded:</h1>

<p>list($x, $y) = array(1, 2, 3);</p>

<h1 id="z-set-to-null">$z set to NULL:</h1>

<p>list($x, $y, $z) = array(1, 2); |  ($x, $y, $z) = (1, 2, 3);</p>

<h1 id="3-is-discarded-1">3 is discarded:</h1>

<p>($x, $y) = (1, 2, 3);</p>

<h1 id="z-set-to-undef">$z set to undef:</h1>

<p>($x, $y, $z) = (1, 2); |  x, y, z = 1, 2, 3</p>

<h1 id="raises-valueerror">raises ValueError:</h1>

<p>x, y = 1, 2, 3</p>

<h1 id="raises-valueerror-1">raises ValueError:</h1>

<p>x, y, z = 1, 2 |  x, y, z = 1, 2, 3</p>

<h1 id="3-is-discarded-2">3 is discarded:</h1>

<p>x, y = 1, 2, 3</p>

<h1 id="z-set-to-nil">z set to nil:</h1>

<p>x, y, z = 1, 2<br />
swap<br />
|  list($x, $y) = array($y, $x); |  ($x, $y) = ($y, $x); |  x, y = y, x |  x,
y = y, x<br />
compound assignment operators: arithmetic, string, logical, bit |  += -= *=
<em>none</em> /= %= **=<br />
.= <em>none</em><br />
&amp;= |= <em>none</em><br />
&lt;&lt;= &gt;&gt;= &amp;= |= ^= |  += -= *= <em>none</em> /= %= **=<br />
.= x=<br />
&amp;&amp;= ||= ^=<br />
&lt;&lt;= &gt;&gt;= &amp;= |= ^= |  # do not return values:<br />
+= -= *= /= //= %= **=<br />
+= *=<br />
&amp;= |= ^=<br />
&lt;&lt;= &gt;&gt;= &amp;= |= ^= |  += -= *= /= <em>none</em> %= **=<br />
+= *=<br />
&amp;&amp;= ||= ^=<br />
&lt;&lt;= &gt;&gt;= &amp;= |= ^=<br />
increment and decrement<br />
|  $x = 1;<br />
$y = ++$x;<br />
$z = --$y; |  my $x = 1;<br />
my $y = ++$x;<br />
my $z = --$y; |  <em>none</em> |  x = 1</p>

<h1 id="x-and-y-not-mutated">x and y not mutated:</h1>

<p>y = x.succ<br />
z = y.pred<br />
local variable declarations<br />
|  # in function body:<br />
$v = NULL;<br />
$a = array();<br />
$d = array();<br />
$x = 1;<br />
list($y, $z) = array(2, 3); |  my $v;<br />
my (@a, %d);<br />
my $x = 1;<br />
my ($y, $z) = (2, 3); |  # in function body:<br />
v = None<br />
a, d = [], {}<br />
x = 1<br />
y, z = 2, 3 |  v = nil<br />
a, d = [], {}<br />
x = 1<br />
y, z = 2, 3<br />
regions which define local scope |  _top level:<br />
function or method body</p>

<p>nestable (with use clause):<br />
anonymous function body_ |  _top level:<br />
file</p>

<p>nestable:<br />
function body<br />
anonymous function body<br />
anonymous block_ |  <em>nestable (read only):<br />
function or method body</em> |  _top level:<br />
file<br />
class block<br />
module block<br />
method body</p>

<p>nestable:<br />
anonymous function block<br />
anonymous block_<br />
global variable |  list($g1, $g2) = array(7, 8);<br />
function swap_globals() {<br />
global $g1, $g2;<br />
list($g1, $g2) = array($g2, $g1);<br />
} |  our ($g1, $g2) = (7, 8);<br />
sub swap_globals {<br />
($g1, $g2) = ($g2, $g1);<br />
} |  g1, g2 = 7, 8<br />
def swap_globals():<br />
global g1, g2<br />
g1, g2 = g2, g1 |  $g1, $g2 = 7, 8<br />
def swap_globals<br />
$g1, $g2 = $g2, $g1<br />
end<br />
constant declaration<br />
|  define(&ldquo;PI&rdquo;, 3.14); |  use constant PI =&gt; 3.14; |  # uppercase identifiers</p>

<h1 id="constant-by-convention">constant by convention</h1>

<p>PI = 3.14 |  # warning if capitalized</p>

<h1 id="identifier-is-reassigned">identifier is reassigned</h1>

<p>PI = 3.14<br />
to-end-of-line comment<br />
|  // comment</p>

<h1 id="comment-comment-comment-comment">comment |  # comment |  # comment |  # comment</h1>

<p>comment out multiple lines<br />
|  /* comment line<br />
another line */ |  =for<br />
comment line<br />
another line<br />
=cut |  <em>use triple quote string literal:</em><br />
&rdquo;&lsquo;comment line<br />
another line&rdquo;&rsquo; |  =begin<br />
comment line<br />
another line<br />
=end<br />
null<br />
|  NULL # case insensitive |  undef |  None |  nil<br />
null test<br />
|  is_null($v)<br />
! isset($v) |  ! defined $v |  v == None<br />
v is None |  v == nil<br />
v.nil?<br />
undefined variable access<br />
|  NULL |  <em>error under</em> use strict; <em>otherwise</em> undef |  <em>raises</em> NameError |
<em>raises</em> NameError<br />
undefined test<br />
|  <em>same as null test; no distinction between undefined variables and
variables set to</em> NULL |  <em>same as null test; no distinction between undefined
variables and variables set to</em> undef |  not_defined = False<br />
try: v<br />
except NameError: not_defined = True |  ! defined?(v)<br />
arithmetic and logic<br />
|  php |  perl |  python |  ruby<br />
true and false<br />
|  TRUE FALSE # case insensitve |  1 &ldquo;&rdquo; |  True False |  true false<br />
falsehoods<br />
|  FALSE NULL 0 0.0 &ldquo;&rdquo; &ldquo;0&rdquo; array() |  undef 0 0.0 &ldquo;&rdquo; &ldquo;0&rdquo; () |  False None 0
0.0 &ldquo; [] {} |  false nil<br />
logical operators<br />
|  &amp;&amp; || !<br />
<em>lower precedence:</em><br />
and or xor |  &amp;&amp; || !<br />
<em>lower precedence:</em><br />
and or xor not |  and or not |  &amp;&amp; || !<br />
<em>lower precedence:</em><br />
and or not<br />
conditional expression<br />
|  $x &gt; 0 ? $x : -$x |  $x &gt; 0 ? $x : -$x |  x if x &gt; 0 else -x |  x &gt; 0 ? x :
-x<br />
comparison operators<br />
|  == != <em>or</em> &lt;&gt; &gt; &lt; &gt;= &lt;=<br />
<em>no conversion:</em> === !== |  <em>numbers only:</em> == != &gt; &lt; &gt;= &lt;=<br />
<em>strings:</em> eq ne gt lt ge le |  <em>comparison operators are chainable:</em><br />
== != &gt; &lt; &gt;= &lt;= |  == != &gt; &lt; &gt;= &lt;=<br />
three value comparison |  <em>none</em> |  0 &lt;=&gt; 1<br />
&ldquo;do&rdquo; cmp &ldquo;re&rdquo; |  <em>removed from Python 3:</em><br />
cmp(0, 1)<br />
cmp(&lsquo;do&rsquo;, &rsquo;re&rsquo;) |  0 &lt;=&gt; 1<br />
&ldquo;do&rdquo; &lt;=&gt; &ldquo;re&rdquo;<br />
convert from string, to string<br />
|  7 + &ldquo;12&rdquo;<br />
73.9 + &ldquo;.037&rdquo;<br />
&ldquo;value: &ldquo; . 8 |  7 + &ldquo;12&rdquo;<br />
73.9 + &ldquo;.037&rdquo;<br />
&ldquo;value: &ldquo; . 8 |  7 + int(&lsquo;12&rsquo;)<br />
73.9 + float(&lsquo;.037&rsquo;)<br />
&lsquo;value: &lsquo; + str(8) |  7 + &ldquo;12&rdquo;.to_i<br />
73.9 + &ldquo;.037&rdquo;.to_f<br />
&ldquo;value: &ldquo; + &ldquo;8&rdquo;.to_s<br />
arithmetic operators<br />
|  + - * / <em>none</em> % pow(b,e) |  + - * / <em>none</em> % ** |  + - * / // % ** |
+ - * x.fdiv(y) / % **<br />
integer division and divmod<br />
|  (int) (13 / 5)<br />
<em>none</em> |  int ( 13 / 5 )<br />
<em>none</em> |  13 // 5<br />
q, r = divmod(13, 5) |  13 / 5<br />
q, r = 13.divmod(5)<br />
float division<br />
|  13 / 5 |  13 / 5 |  float(13) / 5</p>

<h1 id="python-3">Python 3:</h1>

<p>13 / 5 |  13.to_f / 5 <em>or</em><br />
13.fdiv(5)<br />
arithmetic functions<br />
|  sqrt exp log sin cos tan asin acos atan atan2 |  use Math::Trig qw(<br />
tan asin acos atan);</p>

<p>sqrt exp log sin cos tan asin acos atan atan2 |  from math import sqrt, exp,
log, \<br />
sin, cos, tan, asin, acos, atan, atan2 |  include Math</p>

<p>sqrt exp log sin cos tan asin acos atan atan2<br />
arithmetic truncation<br />
|  (int)$x<br />
round($x)<br />
ceil($x)<br />
floor($x)<br />
abs($x) |  # cpan -i Number::Format<br />
use Number::Format &lsquo;round&rsquo;;<br />
use POSIX qw(ceil floor);</p>

<p>int($x)<br />
round($x, 0)<br />
ceil($x)<br />
floor($x)<br />
abs($x) |  import math</p>

<p>int(x)<br />
int(round(x))<br />
math.ceil(x)<br />
math.floor(x)<br />
abs(x) |  x.to_i<br />
x.round<br />
x.ceil<br />
x.floor<br />
x.abs<br />
min and max<br />
|  min(1,2,3)<br />
max(1,2,3)<br />
$a = array(1,2,3)<br />
min($a)<br />
max($a) |  use List::Util qw(min max);</p>

<p>min(1,2,3);<br />
max(1,2,3);<br />
@a = (1,2,3);<br />
min(@a);<br />
max(@a); |  min(1,2,3)<br />
max(1,2,3)<br />
min([1,2,3])<br />
max([1,2,3]) |  [1,2,3].min<br />
[1,2,3].max<br />
division by zero<br />
|  <em>returns</em> FALSE <em>with warning</em> |  <em>error</em> |  <em>raises</em> ZeroDivisionError |
<em>integer division raises</em> ZeroDivisionError<br />
<em>float division returns</em> Infinity<br />
integer overflow<br />
|  <em>converted to float</em> |  <em>converted to float; use</em> Math::BigInt <em>to create
arbitrary length integers</em> |  <em>becomes arbitrary length integer of type</em> long
|  <em>becomes arbitrary length integer of type</em> Bignum<br />
float overflow<br />
|  INF |  inf |  <em>raises</em> OverflowError |  Infinity<br />
sqrt -2<br />
|  NaN |  <em>error unless</em> use Math::Complex <em>in effect</em> |  # raises ValueError:<br />
import math<br />
math.sqrt(-2)</p>

<h1 id="returns-complex-float">returns complex float:</h1>

<p>import cmath<br />
cmath.sqrt(-2) |  <em>raises</em> Errno::EDOM<br />
rational numbers<br />
|  <em>none</em> |  use Math::BigRat;</p>

<p>my $x = Math::BigRat-&gt;new(&ldquo;<sup>22</sup>&frasl;<sub>7</sub>&rdquo;);<br />
$x-&gt;numerator();<br />
$x-&gt;denominator(); |  from fractions import Fraction</p>

<p>x = Fraction(22,7)<br />
x.numerator<br />
x.denominator |  require &lsquo;rational&rsquo;</p>

<p>x = Rational(22,7)<br />
x.numerator<br />
x.denominator<br />
complex numbers<br />
|  <em>none</em> |  use Math::Complex;</p>

<p>my $z = 1 + 1.414 * i;<br />
Re($z);<br />
Im($z); |  z = 1 + 1.414j<br />
z.real<br />
z.imag |  require &lsquo;complex&rsquo;</p>

<p>z = 1 + 1.414.im<br />
z.real<br />
z.imag<br />
random integer, uniform float, normal float |  rand(0,99)<br />
lcg_value()<br />
<em>none</em> |  int(rand() * 100)<br />
rand()<br />
<em>none</em> |  import random</p>

<p>random.randint(0,99)<br />
random.random()<br />
random.gauss(0,1) |  rand(100)<br />
rand<br />
<em>none</em><br />
set random seed, get and restore seed |  srand(17);</p>

<p><em>none</em> |  srand 17;</p>

<p>my $sd = srand;<br />
srand($sd); |  import random</p>

<p>random.seed(17)<br />
sd = random.getstate()<br />
random.setstate(sd) |  srand(17)</p>

<p>sd = srand<br />
srand(sd)<br />
bit operators<br />
|  &lt;&lt; &gt;&gt; &amp; | ^ ~ |  &lt;&lt; &gt;&gt; &amp; | ^ ~ |  &lt;&lt; &gt;&gt; &amp; | ^ ~ |  &lt;&lt; &gt;&gt; &amp; | ^ ~<br />
binary, octal, and hex literals |  <em>none</em><br />
052<br />
0x2a |  0b101010<br />
052<br />
0x2a |  0b101010<br />
052<br />
0x2a |  0b101010<br />
052<br />
0x2a<br />
base conversion |  base_convert(&ldquo;42&rdquo;, 10, 7);<br />
base_convert(&ldquo;60&rdquo;, 7, 10); |  # cpan -i Math::BaseCalc<br />
use Math::BaseCalc;</p>

<p>$c = new Math::BaseCalc(digits=&gt;<br />
[0..6]);<br />
$c-&gt;to_base(42);<br />
$c-&gt;from_base(&ldquo;60&rdquo;); |  <em>none</em><br />
int(&ldquo;60&rdquo;, 7) |  42.to_s(7)<br />
&ldquo;60&rdquo;.to_i(7)<br />
strings<br />
|  php |  perl |  python |  ruby<br />
string literal<br />
|  &ldquo;don&rsquo;t say \&ldquo;no\&ldquo;&rdquo;<br />
&lsquo;don\&rsquo;t say &ldquo;no&rdquo;&rsquo; |  &ldquo;don&rsquo;t say \&ldquo;no\&ldquo;&rdquo;<br />
&lsquo;don\&rsquo;t say &ldquo;no&rdquo;&rsquo; |  &lsquo;don\&rsquo;t say &ldquo;no&rdquo;&rsquo;<br />
&ldquo;don&rsquo;t say \&ldquo;no\&ldquo;&rdquo;<br />
&ldquo;don&rsquo;t &rdquo; &lsquo;say &ldquo;no&rdquo;&rsquo;<br />
&rdquo;&lsquo;don&rsquo;t say &ldquo;no&rdquo;&ldquo;&rsquo;<br />
&rdquo;&ldquo;&ldquo;don&rsquo;t say &ldquo;no\&ldquo;&rdquo;&ldquo;&rdquo; |  &ldquo;don&rsquo;t say \&ldquo;no\&ldquo;&rdquo;<br />
&lsquo;don\&rsquo;t say &ldquo;no&rdquo;&rsquo;<br />
&ldquo;don&rsquo;t &rdquo; &lsquo;say &ldquo;no&rdquo;&rsquo;<br />
newline in literal<br />
|  <em>yes</em> |  <em>yes</em> |  <em>triple quote literals only</em> |  <em>yes</em><br />
backslash escapes<br />
|  <em>double quoted:</em><br />
\f \n \r \t \v \x <em>hh</em> \$ \&rdquo; \ <em>ooo</em></p>

<p><em>single quoted:</em><br />
\&rsquo; \\ |  <em>double quoted:</em><br />
\a \b \c <em>x</em> \e \f \n \r \t \x <em>hh</em> \x{ <em>hhhh</em> } \ <em>ooo</em></p>

<p><em>single quoted:</em><br />
\&rsquo; \\ |  <em>single and double quoted:</em><br />
\ <em>newline</em> \\ \&rsquo; \&rdquo; \a \b \f \n \r \t \v \ <em>ooo</em> \x <em>hh</em></p>

<p><em>Python 3:</em><br />
\u <em>hhhh</em> \U <em>hhhhhhhh</em> |  <em>double quoted:</em><br />
\a \b \c <em>x</em> \e \f \n \r \s \t \v \x <em>hh</em> \ <em>ooo</em></p>

<p><em>Ruby 1.9 double quoted:</em><br />
\u <em>hhhh</em> \u{ <em>hhhhh</em> }</p>

<p><em>single quoted:</em><br />
\&rsquo; \\<br />
variable interpolation<br />
|  $count = 3;<br />
$item = &ldquo;ball&rdquo;;<br />
echo &ldquo;$count ${item}s\n&rdquo;; |  my $count = 3;<br />
my $item = &ldquo;ball&rdquo;;<br />
print &ldquo;$count ${item}s\n&rdquo;; |  count = 3<br />
item = &lsquo;ball&rsquo;<br />
print(&lsquo;{count} {item}s&rsquo;.format(<br />
**locals())) |  count = 3<br />
item = &ldquo;ball&rdquo;<br />
puts &ldquo;#{count} #{item}s&rdquo;<br />
custom delimiters |  <em>none</em> |  my $s1 = q(lorem ipsum);<br />
my $s2 = qq($s1 dolor sit amet); |  <em>none</em> |  s1 = %q(lorem ipsum)<br />
s2 = %Q(#{s1} dolor sit amet)<br />
sprintf<br />
|  $fmt = &ldquo;lorem %s %d %f&rdquo;;<br />
sprintf($fmt, &ldquo;ipsum&rdquo;, 13, 3.7); |  my $fmt = &ldquo;lorem %s %d %f&rdquo;;<br />
sprintf($fmt, &ldquo;ipsum&rdquo;, 13, 3.7) |  &lsquo;lorem %s %d %f&rsquo; % (&lsquo;ipsum&rsquo;, 13, 3.7)</p>

<p>fmt = &lsquo;lorem {0} {1} {2}&rsquo;<br />
fmt.format(&lsquo;ipsum&rsquo;, 13, 3.7) |  &ldquo;lorem %s %d %f&rdquo; % [&ldquo;ipsum&rdquo;,13,3.7]<br />
here document<br />
|  $word = &ldquo;amet&rdquo;;<br />
$s = &lt;&lt;&lt;EOF<br />
lorem ipsum<br />
dolor sit $word<br />
EOF; |  $word = &ldquo;amet&rdquo;;<br />
$s = &lt;&lt;EOF;<br />
lorem ipsum<br />
dolor sit $word<br />
EOF |  <em>none</em> |  word = &ldquo;amet&rdquo;<br />
s = &lt;&lt;EOF<br />
lorem ipsum<br />
dolor sit #{word}<br />
EOF<br />
concatenate<br />
|  $s = &ldquo;Hello, &ldquo;;<br />
$s2 = $s . &ldquo;World!&rdquo;; |  my $s = &ldquo;Hello, &ldquo;;<br />
my $s2 = $s . &ldquo;World!&rdquo;; |  s = &lsquo;Hello, &rsquo;<br />
s2 = s + &lsquo;World!&rsquo;</p>

<p><em>juxtaposition can be used to concatenate literals:</em><br />
s2 = &lsquo;Hello, &rsquo; &ldquo;World!&rdquo; |  s = &ldquo;Hello, &rdquo;<br />
s2 = s + &ldquo;World!&rdquo;</p>

<p><em>juxtaposition can be used to concatenate literals:</em><br />
s2 =&ldquo;Hello, &rdquo; &lsquo;World!&rsquo;<br />
replicate<br />
|  $hbar = str_repeat(&ldquo;-&rdquo;, 80); |  my $hbar = &ldquo;-&rdquo; x 80; |  hbar = &lsquo;-&rsquo; * 80 |
hbar = &ldquo;-&rdquo; * 80<br />
split, in two, with delimiters, into characters |  explode(&rdquo; &ldquo;, &ldquo;do re mi fa&rdquo;)<br />
preg_split(&lsquo;/\s+/&lsquo;, &ldquo;do re mi fa&rdquo;, 2)<br />
preg_split(&lsquo;/(\s+)/&lsquo;, &ldquo;do re mi fa&rdquo;,<br />
NULL, PREG_SPLIT_DELIM_CAPTURE);<br />
str_split(&ldquo;abcd&rdquo;) |  split(/\s+/, &ldquo;do re mi fa&rdquo;)<br />
split(/\s+/, &ldquo;do re mi fa&rdquo;, 2)<br />
split(/(\s+)/, &ldquo;do re mi fa&rdquo;);<br />
split(//, &ldquo;abcd&rdquo;) |  &lsquo;do re mi fa&rsquo;.split()<br />
&lsquo;do re mi fa&rsquo;.split(None, 1)<br />
re.split(&lsquo;(\s+)&lsquo;, &lsquo;do re mi fa&rsquo;)<br />
list(&lsquo;abcd&rsquo;) |  &ldquo;do re mi fa&rdquo;.split<br />
&ldquo;do re mi fa&rdquo;.split(/\s+/, 2)<br />
&ldquo;do re mi fa&rdquo;.split(/(\s+)/)<br />
&ldquo;abcd&rdquo;.split(&ldquo;&rdquo;)<br />
join<br />
|  $a = array(&ldquo;do&rdquo;, &ldquo;re&rdquo;, &ldquo;mi&rdquo;, &ldquo;fa&rdquo;);<br />
implode(&rdquo; &ldquo;, $a) |  join(&rdquo; &ldquo;, qw(do re mi fa)) |  &lsquo; &lsquo;.join([&lsquo;do&rsquo;, &rsquo;re&rsquo;, &lsquo;mi&rsquo;,
&lsquo;fa&rsquo;]) |  %w(do re mi fa).join(&rsquo; &lsquo;)<br />
case manipulation |  strtoupper(&ldquo;lorem&rdquo;)<br />
strtolower(&ldquo;LOREM&rdquo;)<br />
ucfirst(&ldquo;lorem&rdquo;) |  uc(&ldquo;lorem&rdquo;)<br />
lc(&ldquo;LOREM&rdquo;)<br />
ucfirst(&ldquo;lorem&rdquo;) |  &lsquo;lorem&rsquo;.upper()<br />
&lsquo;LOREM&rsquo;.lower()<br />
&lsquo;lorem&rsquo;.capitalize() |  &ldquo;lorem&rdquo;.upcase<br />
&ldquo;LOREM&rdquo;.downcase<br />
&ldquo;lorem&rdquo;.capitalize<br />
strip<br />
|  trim(&rdquo; lorem &ldquo;)<br />
ltrim(&rdquo; lorem&rdquo;)<br />
rtrim(&ldquo;lorem &ldquo;) |  # cpan -i Text::Trim<br />
use Text::Trim;</p>

<p>trim &ldquo; lorem &rdquo;<br />
ltrim &ldquo; lorem&rdquo;<br />
rtrim &ldquo;lorem &rdquo; |  &lsquo; lorem &lsquo;.strip()<br />
&rsquo; lorem&rsquo;.lstrip()<br />
&lsquo;lorem &lsquo;.rstrip() |  &ldquo; lorem &ldquo;.strip<br />
&rdquo; lorem&rdquo;.lstrip<br />
&ldquo;lorem &ldquo;.rstrip<br />
pad on right, on left<br />
|  str_pad(&ldquo;lorem&rdquo;, 10)<br />
str_pad(&ldquo;lorem&rdquo;, 10, &ldquo; &ldquo;,<br />
STR_PAD_LEFT) |  sprintf(&ldquo;%-10s&rdquo;, &ldquo;lorem&rdquo;)<br />
sprintf(&ldquo;%10s&rdquo;, &ldquo;lorem&rdquo;) |  &lsquo;lorem&rsquo;.ljust(10)<br />
&lsquo;lorem&rsquo;.rjust(10) |  &ldquo;lorem&rdquo;.ljust(10)<br />
&ldquo;lorem&rdquo;.rjust(10)<br />
length<br />
|  strlen(&ldquo;lorem&rdquo;) |  length(&ldquo;lorem&rdquo;) |  len(&lsquo;lorem&rsquo;) |  &ldquo;lorem&rdquo;.length<br />
&ldquo;lorem&rdquo;.size<br />
index of substring<br />
|  strpos(&ldquo;do re re&rdquo;, &ldquo;re&rdquo;)<br />
strrpos(&ldquo;do re re&rdquo;, &ldquo;re&rdquo;)<br />
<em>return</em> FALSE <em>if not found</em> |  index(&ldquo;lorem ipsum&rdquo;, &ldquo;ipsum&rdquo;)<br />
rindex(&ldquo;do re re&rdquo;, &ldquo;re&rdquo;)<br />
<em>return</em> -1 <em>if not found</em> |  &lsquo;do re re&rsquo;.index(&rsquo;re&rsquo;)<br />
&lsquo;do re re&rsquo;.rindex(&rsquo;re&rsquo;)<br />
<em>raise</em> ValueError <em>if not found</em> |  &ldquo;do re re&rdquo;.index(&ldquo;re&rdquo;)<br />
&ldquo;do re re&rdquo;.rindex(&ldquo;re&rdquo;)<br />
<em>return</em> nil <em>if not found</em><br />
extract substring<br />
|  substr(&ldquo;lorem ipsum&rdquo;, 6, 5) |  substr(&ldquo;lorem ipsum&rdquo;, 6, 5) |  &lsquo;lorem
ipsum&rsquo;[6:11] |  &ldquo;lorem ipsum&rdquo;[6, 5]<br />
extract character |  <em>syntax error to use index notation directly on string
literal:</em><br />
$s = &ldquo;lorem ipsum&rdquo;;<br />
$s[6]; |  <em>can&rsquo;t use index notation with strings:</em><br />
substr(&ldquo;lorem ipsum&rdquo;, 6, 1) |  &lsquo;lorem ipsum&rsquo;[6] |  &ldquo;lorem ipsum&rdquo;[6]<br />
chr and ord<br />
|  chr(65)<br />
ord(&ldquo;A&rdquo;) |  chr(65)<br />
ord(&ldquo;A&rdquo;) |  chr(65)<br />
ord(&lsquo;A&rsquo;) |  65.chr<br />
&ldquo;A&rdquo;[0]  <em>Ruby 1.9:</em> &ldquo;A&rdquo;.ord<br />
character translation<br />
|  $ins = implode(range(&ldquo;a&rdquo;, &ldquo;z&rdquo;));<br />
$outs = substr($ins, 13, 13) . substr($ins, 0, 13);<br />
strtr(&ldquo;hello&rdquo;, $ins, $outs) |  $s = &ldquo;hello&rdquo;;<br />
$s =~ tr/a-z/n-za-m/; |  from string import lowercase as ins<br />
from string import maketrans</p>

<p>outs = ins[13:] + ins[:13]<br />
&lsquo;hello&rsquo;.translate(maketrans(ins,outs)) |  &ldquo;hello&rdquo;.tr(&ldquo;a-z&rdquo;, &ldquo;n-za-m&rdquo;)<br />
regular expresions<br />
|  php |  perl |  python |  ruby<br />
literal, custom delimited literal |  &lsquo;/lorem|ipsum/&rsquo;<br />
&rsquo;(/etc/hosts)&rsquo; |  /lorem|ipsum/<br />
qr(/etc/hosts) |  re.compile(&lsquo;lorem|ipsum&rsquo;)<br />
<em>none</em> |  /lorem|ipsum/<br />
%r(/etc/hosts)<br />
character class abbreviations and anchors |  <em>char class abbrevs:</em><br />
. \d \D \h \H \s \S \v \V \w \W</p>

<p><em>anchors:</em> ^ $ \A \b \B \z \Z |  <em>char class abbrevs:</em><br />
. \d \D \h \H \s \S \v \V \w \W</p>

<p><em>anchors:</em> ^ $ \A \b \B \z \Z |  <em>char class abbrevs:</em><br />
. \d \D \s \S \w \W</p>

<p><em>anchors:</em> ^ $ \A \b \B \Z |  <em>char class abbrevs:</em><br />
. \d \D \h \H \s \S \w \W</p>

<p><em>anchors:</em> ^ $ \A \b \B \z \Z<br />
match test<br />
|  if (preg_match(&lsquo;/1999/&rsquo;, $s)) {<br />
echo &ldquo;party!\n&rdquo;;<br />
} |  if ($s =~ /1999/) {<br />
print &ldquo;party!\n&rdquo;;<br />
} |  if re.search(&lsquo;1999&rsquo;, s):<br />
print(&lsquo;party!&rsquo;) |  if /1999/.match(s)<br />
puts &ldquo;party!&rdquo;<br />
end<br />
case insensitive match test |  preg_match(&lsquo;/lorem/i&rsquo;, &ldquo;Lorem&rdquo;) |  &ldquo;Lorem&rdquo; =~
/lorem/i |  re.search(&lsquo;lorem&rsquo;, &lsquo;Lorem&rsquo;, re.I) |  /lorem/i.match(&ldquo;Lorem&rdquo;)<br />
modifiers<br />
|  e i m s x |  i m s p x |  re.I re.M re.S re.X |  i o m x<br />
substitution<br />
|  $s = &ldquo;do re mi mi mi&rdquo;;<br />
$s = preg_replace(&lsquo;/mi/&rsquo;, &ldquo;ma&rdquo;, $s); |  my $s = &ldquo;do re mi mi mi&rdquo;;<br />
$s =~ s/mi/ma/g; |  s = &lsquo;do re mi mi mi&rsquo;<br />
s = re.compile(&lsquo;mi&rsquo;).sub(&lsquo;ma&rsquo;, s) |  s = &ldquo;do re mi mi mi&rdquo;<br />
s.gsub!(/mi/, &ldquo;ma&rdquo;)<br />
match, prematch, postmatch<br />
|  <em>none</em> |  if ($s =~ /\d{4}/p) {<br />
$match = ${^MATCH};<br />
$prematch = ${^PREMATCH};<br />
$postmatch = ${^POSTMATCH};<br />
} |  m = re.search(&rsquo;\d{4}&lsquo;, s)<br />
if m:<br />
match = m.group()<br />
prematch = s[0:m.start(0)]<br />
postmatch = s[m.end(0):len(s)] |  m = /\d{4}/.match(s)<br />
if m<br />
match = m[0]<br />
prematch = m.pre_match<br />
postmatch = m.post_match<br />
end<br />
group capture<br />
|  $s = &ldquo;2010-06-03&rdquo;;<br />
$rx = &lsquo;/(\d{4})-(\d{2})-(\d{2})/&lsquo;;<br />
preg<em>match($rx, $s, $m);<br />
list($</em>, $yr, $mo, $dy) = $m; |  $rx = qr/(\d{4})-(\d{2})-(\d{2})/;<br />
&ldquo;2010-06-03&rdquo; =~ $rx;<br />
($yr, $mo, $dy) = ($1, $2, $3); |  rx = &lsquo;(\d{4})-(\d{2})-(\d{2})&rsquo;<br />
m = re.search(rx, &lsquo;2010-06-03&rsquo;)<br />
yr, mo, dy = m.groups() |  rx = /(\d{4})-(\d{2})-(\d{2})/<br />
m = rx.match(&ldquo;2010-06-03&rdquo;)<br />
yr, mo, dy = m[1..3]<br />
scan<br />
|  $s = &ldquo;dolor sit amet&rdquo;;<br />
preg_match_all(&lsquo;/\w+/&lsquo;, $s, $m);<br />
$a = $m[0]; |  my $s = &ldquo;dolor sit amet&rdquo;;<br />
@a = $s =~ m/\w+/g; |  s = &lsquo;dolor sit amet&rsquo;<br />
a = re.findall(&rsquo;\w+&lsquo;, s) |  a = &ldquo;dolor sit amet&rdquo;.scan(/\w+/)<br />
backreference in match and substitution |  preg_match(&lsquo;/(\w+) \1/&lsquo;, &ldquo;do do&rdquo;)</p>

<p>$s = &ldquo;do re&rdquo;;<br />
$rx = &lsquo;/(\w+) (\w+)/&lsquo;;<br />
$s = preg_replace($rx, &lsquo;\2 \1&rsquo;, $s); |  &ldquo;do do&rdquo; =~ /(\w+) \1/</p>

<p>my $s = &ldquo;do re&rdquo;;<br />
$s =~ s/(\w+) (\w+)/$2 $1/; |  <em>none</em></p>

<p>rx = re.compile(&lsquo;(\w+) (\w+)&lsquo;)<br />
rx.sub(r&rsquo;\2 \1&rsquo;, &lsquo;do re&rsquo;) |  /(\w+) \1/.match(&ldquo;do do&rdquo;)</p>

<p>&ldquo;do re&rdquo;.sub(/(\w+) (\w+)/, &lsquo;\2 \1&rsquo;)<br />
recursive regex |  &lsquo;/\(([^()]<em>|($R))\)/&rsquo; |  /\(([^()]</em>|(?R))\)/ |  <em>none</em>
|  <em>Ruby 1.9:</em><br />
/(?</p>

<p>\(([^()]*|\g</p>

<p>)*\))/</p>

<p>dates and time<br />
|  php |  perl |  python |  ruby<br />
date/time type<br />
|  DateTime |  Time::Piece <em>if</em> use Time::Piece <em>in effect, otherwise tm
array</em> |  datetime.datetime |  Time<br />
current date/time |  $t = new DateTime(&ldquo;now&rdquo;);<br />
$utc_tmz = new DateTimeZone(&ldquo;UTC&rdquo;);<br />
$utc = new DateTime(&ldquo;now&rdquo;, $utc_tmz); |  use Time::Piece;</p>

<p>my $t = localtime(time);<br />
my $utc = gmtime(time); |  import datetime</p>

<p>t = datetime.datetime.now()<br />
utc = datetime.datetime.utcnow() |  t = Time.now<br />
utc = Time.now.utc<br />
to unix epoch, from unix epoch |  $epoch = $t-&gt;getTimestamp();<br />
$t2 = new DateTime();<br />
$t2-&gt;setTimestamp(1304442000); |  use Time::Local;<br />
use Time::Piece;</p>

<p>my $epoch = timelocal($t);<br />
my $t2 = localtime(1304442000); |  from datetime import datetime as dt</p>

<p>epoch = int(t.strftime(&ldquo;%s&rdquo;))<br />
t2 = dt.fromtimestamp(1304442000) |  epoch = t.to_i<br />
t2 = Time.at(1304442000)<br />
current unix epoch |  $epoch = time(); |  $epoch = time; |  import datetime</p>

<p>t = datetime.datetime.now()<br />
epoch = int(t.strftime(&ldquo;%s&rdquo;)) |  epoch = Time.now.to_i<br />
strftime |  strftime(&ldquo;%Y-%m-%d %H:%M:%S&rdquo;, $epoch);<br />
date(&ldquo;Y-m-d H:i:s&rdquo;, $epoch);<br />
$t-&gt;format(&ldquo;Y-m-d H:i:s&rdquo;); |  use Time::Piece;</p>

<p>$t = localtime(time);<br />
$fmt = &ldquo;%Y-%m-%d %H:%M:%S&rdquo;;<br />
print $t-&gt;strftime($fmt); |  t.strftime(&lsquo;%Y-%m-%d %H:%M:%S&rsquo;) |
t.strftime(&ldquo;%Y-%m-%d %H:%M:%S&rdquo;)<br />
default format example |  <em>no default string representation</em> |  Tue Aug 23
19:35:19 2011 |  2011-08-23 19:35:59.411135 |  2011-08-23 17:44:53 -0700<br />
strptime |  $fmt = &ldquo;Y-m-d H:i:s&rdquo;;<br />
$s = &ldquo;2011-05-03 10:00:00&rdquo;;<br />
$t = DateTime::createFromFormat($fmt,<br />
$s); |  use Time::Local;<br />
use Time::Piece;</p>

<p>$s = &ldquo;2011-05-03 10:00:00&rdquo;;<br />
$fmt = &ldquo;%Y-%m-%d %H:%M:%S&rdquo;;<br />
$t = Time::Piece-&gt;strptime($s,$fmt); |  from datetime import datetime</p>

<p>s = &lsquo;2011-05-03 10:00:00&rsquo;<br />
fmt = &lsquo;%Y-%m-%d %H:%M:%S&rsquo;<br />
t = datetime.strptime(s, fmt) |  require &lsquo;date&rsquo;</p>

<p>s = &ldquo;2011-05-03 10:00:00&rdquo;<br />
fmt = &ldquo;%Y-%m-%d %H:%M:%S&rdquo;<br />
t = Date.strptime(s, fmt).to_time<br />
parse date w/o format |  $epoch = strtotime(&ldquo;July 7, 1999&rdquo;); |  # cpan -i
Date::Parse<br />
use Date::Parse;</p>

<p>$epoch = str2time(&ldquo;July 7, 1999&rdquo;); |  # pip install python-dateutil<br />
import dateutil.parser</p>

<p>s = &lsquo;July 7, 1999&rsquo;<br />
t = dateutil.parser.parse(s) |  require &lsquo;date&rsquo;</p>

<p>s = &ldquo;July 7, 1999&rdquo;<br />
t = Date.parse(s).to_time<br />
result of date subtraction |  DateInterval <em>object if</em> diff <em>method used:</em><br />
$fmt = &ldquo;Y-m-d H:i:s&rdquo;;<br />
$s = &ldquo;2011-05-03 10:00:00&rdquo;;<br />
$then = DateTime::createFromFormat($fmt, $s);<br />
$now = new DateTime(&ldquo;now&rdquo;);<br />
$interval = $now-&gt;diff($then); |  Time::Seconds <em>object if</em> use Time::Piece
<em>in effect; not meaningful to subtract tm arrays</em> |  datetime.timedelta
<em>object</em> |  Float <em>containing time difference in seconds</em><br />
add time duration |  $now = new DateTime(&ldquo;now&rdquo;);<br />
$now-&gt;add(new DateInterval(&ldquo;PT10M3S&rdquo;); |  use Time::Seconds;</p>

<p>$now = localtime(time);<br />
$now += 10 * ONE_MINUTE() + 3; |  import datetime</p>

<p>delta = datetime.timedelta(<br />
minutes=10,<br />
seconds=3)<br />
t = datetime.datetime.now() + delta |  require &lsquo;date/delta&rsquo;</p>

<p>s = &ldquo;10 min, 3 s&rdquo;<br />
delta = Date::Delta.parse(s).in_secs<br />
t = Time.now + delta<br />
local timezone |  <em>DateTime objects can be instantiated without specifying the
timezone if a default is set:</em><br />
$s = &ldquo;America/Los_Angeles&rdquo;;<br />
date_default_timezone_set($s); |  Time::Piece <em>has local timezone if created
with</em> localtime <em>and UTC timezone if created with</em> gmtime; <em>tm arrays have no
timezone or offset info</em> |  <em>a</em> datetime <em>object has no timezone information
unless a</em> tzinfo <em>object is provided when it is created</em> |  <em>if no timezone is
specified the local timezone is used</em><br />
timezone name; offset from UTC; is daylight savings? |  $tmz =
date_timezone_get($t);<br />
timezone_name_get($tmz);<br />
date_offset_get($t) / 3600;<br />
$t-&gt;format(&ldquo;I&rdquo;); |  # cpan -i DateTime<br />
use DateTime;<br />
use DateTime::TimeZone;</p>

<p>$dt = DateTime-&gt;now();<br />
$tz = DateTime::TimeZone-&gt;new(<br />
name=&gt;&ldquo;local&rdquo;);</p>

<p>$tz-&gt;name;<br />
$tz-&gt;offset_for_datetime($dt) /<br />
3600;<br />
$tz-&gt;is_dst_for_datetime($dt); |  import time</p>

<p>tm = time.localtime()</p>

<p>time.tzname<a href="time.timezone / -3600">tm.tm_isdst</a> + tm.tm_isdst<br />
tm.tm_isdst |  t.zone<br />
t.utc_offset / 3600<br />
t.dst?<br />
microseconds |  list($frac, $sec) = explode(&rdquo; &ldquo;,<br />
microtime());<br />
$usec = $frac * 1000 * 1000; |  use Time::HiRes qw(gettimeofday);</p>

<p>($sec, $usec) = gettimeofday; |  t.microsecond |  t.usec<br />
sleep |  <em>a float argument will be truncated to an integer:</em><br />
sleep(1); |  <em>a float argument will be truncated to an integer:</em><br />
sleep 1; |  import time</p>

<p>time.sleep(0.5) |  sleep(0.5)<br />
timeout |  <em>use</em> set_time_limit <em>to limit execution time of the entire script;
use</em> stream_set_timeout <em>to limit time spent reading from a stream opened
with</em> fopen <em>or</em> fsockopen |  eval {<br />
$SIG{ALRM}= sub {die &ldquo;timeout!&rdquo;;};<br />
alarm 5;<br />
sleep 10;<br />
};<br />
alarm 0; |  import signal, time</p>

<p>class Timeout(Exception): pass</p>

<p>def timeout_handler(signo, fm):<br />
raise Timeout()</p>

<p>signal.signal(signal.SIGALRM,<br />
timeout_handler)</p>

<p>try:<br />
signal.alarm(5)<br />
time.sleep(10)<br />
except Timeout:<br />
pass<br />
signal.alarm(0) |  require &lsquo;timeout&rsquo;</p>

<p>begin<br />
Timeout.timeout(5) do<br />
sleep(10)<br />
end<br />
rescue Timeout::Error<br />
end<br />
arrays<br />
|  php |  perl |  python |  ruby<br />
literal<br />
|  $a = array(1, 2, 3, 4); |  @a = (1, 2, 3, 4); |  a = [1, 2, 3, 4] |  a =
[1, 2, 3, 4]<br />
quote words<br />
|  <em>none</em> |  @a = qw(do re mi); |  <em>none</em> |  a = %w(do re mi)<br />
size<br />
|  count($a) |  $#a + 1 <em>or</em><br />
scalar(@a) |  len(a) |  a.size<br />
a.length # same as size<br />
empty test<br />
|  !$a |  !@a |  not a |  NoMethodError <em>if</em> a <em>is</em> nil:<br />
a.empty?<br />
lookup<br />
|  $a[0] |  $a[0] |  a[0] |  a[0]<br />
update<br />
|  $a[0] = &ldquo;lorem&rdquo;; |  $a[0] = &ldquo;lorem&rdquo;; |  a[0] = &lsquo;lorem&rsquo; |  a[0] = &ldquo;lorem&rdquo;<br />
out-of-bounds behavior |  $a = array();<br />
<em>evaluates as</em> NULL:<br />
$a[10];<br />
<em>increases array size to one:</em><br />
$a[10] = &ldquo;lorem&rdquo;; |  @a = ();<br />
<em>evaluates as</em> undef:<br />
$a[10];<br />
<em>increases array size to 11:</em><br />
$a[10] = &ldquo;lorem&rdquo;; |  a = []<br />
<em>raises</em> IndexError:<br />
a[10]<br />
<em>raises</em> IndexError:<br />
a[10] = &lsquo;lorem&rsquo; |  a = []<br />
<em>evaluates as</em> nil:<br />
a[10]<br />
<em>increases array size to 11:</em><br />
a[10] = &ldquo;lorem&rdquo;<br />
index of array element |  $a = array(&ldquo;x&rdquo;, &ldquo;y&rdquo;, &ldquo;z&rdquo;, &ldquo;w&rdquo;);<br />
$i = array_search(&ldquo;y&rdquo;, $a); |  use List::Util &lsquo;first&rsquo;;</p>

<p>@a = qw(x y z w);<br />
$i = first {$a[$_] eq &ldquo;y&rdquo;} (0..$#a); |  a = [&lsquo;x&rsquo;, &lsquo;y&rsquo;, &lsquo;z&rsquo;, &lsquo;w&rsquo;]<br />
i = a.index(&lsquo;y&rsquo;) |  a = %w(x y z w)<br />
i = a.index(&ldquo;y&rdquo;)<br />
slice by endpoints, by length<br />
|  <em>select 3rd and 4th elements:</em><br />
<em>none</em><br />
array_slice($a, 2, 2) |  <em>select 3rd and 4th elements:</em><br />
@a[2..3]<br />
splice(@a, 2, 2) |  <em>select 3rd and 4th elements:</em><br />
a[2:4]<br />
<em>none</em> |  <em>select 3rd and 4th elements:</em><br />
a[2..3]<br />
a[2, 2]<br />
slice to end<br />
|  array_slice($a, 1) |  @a[1..$#a] |  a[1:] |  a[1..-1]<br />
manipulate back<br />
|  $a = array(6,7,8);<br />
array_push($a, 9);<br />
$a[] = 9; # same as array_push<br />
array_pop($a); |  @a = (6,7,8);<br />
push @a, 9;<br />
pop @a; |  a = [6,7,8]<br />
a.append(9)<br />
a.pop() |  a = [6,7,8]<br />
a.push(9)<br />
a &lt;&lt; 9 # same as push<br />
a.pop<br />
manipulate front<br />
|  $a = array(6,7,8);<br />
array_unshift($a, 5);<br />
array_shift($a); |  @a = (6,7,8);<br />
unshift @a, 5;<br />
shift @a; |  a = [6,7,8]<br />
a.insert(0,5)<br />
a.pop(0) |  a = [6,7,8]<br />
a.unshift(5)<br />
a.shift<br />
concatenate |  $a = array(1,2,3);<br />
$a2 = array_merge($a,array(4,5,6));<br />
$a = array_merge($a,array(4,5,6)); |  @a = (1,2,3);<br />
@a2 = (@a,(4,5,6));<br />
push @a, (4,5,6); |  a = [1,2,3]<br />
a2 = a + [4,5,6]<br />
a.extend([4,5,6]) |  a = [1,2,3]<br />
a2 = a + [4,5,6]<br />
a.concat([4,5,6])<br />
replicate |  |  @a = (undef) x 10; |  a = [None] * 10<br />
a = [None for i in range(0, 10)] |  a = [nil] * 10<br />
a = Array.new(10, nil)<br />
address copy, shallow copy, deep copy |  $a = array(1,2,array(3,4));<br />
$a2 =&amp; $a;<br />
<em>none</em><br />
$a4 = $a; |  use Storable &lsquo;dclone&rsquo;</p>

<p>my @a = (1,2,[3,4]);<br />
my $a2 = \@a;<br />
my @a3 = @a;<br />
my @a4 = @{dclone(\@a)}; |  import copy</p>

<p>a = [1,2,[3,4]]<br />
a2 = a<br />
a3 = list(a)<br />
a4 = copy.deepcopy(a) |  a = [1,2,[3,4]]<br />
a2 = a<br />
a3 = a.dup<br />
a4 = Marshal.load(Marshal.dump(a))<br />
arrays as function arguments |  <em>parameter contains deep copy</em> |  <em>each
element passed as separate argument; use reference to pass array as single
argument</em> |  <em>parameter contains address copy</em> |  <em>parameter contains address
copy</em><br />
iteration<br />
|  foreach (array(1,2,3) as $i) {<br />
echo &ldquo;$i\n&rdquo;;<br />
} |  for $i (1, 2, 3) { print &ldquo;$i\n&rdquo; } |  for i in [1,2,3]:<br />
print(i) |  [1,2,3].each { |i| puts i }<br />
indexed iteration |  $a = array(&ldquo;do&rdquo;, &ldquo;re&rdquo;, &ldquo;mi&rdquo; &ldquo;fa&rdquo;);<br />
foreach ($a as $i =&gt; $s) {<br />
echo &ldquo;$s at index $i\n&rdquo;;<br />
} |  <em>none; use range iteration from</em> 0 <em>to</em> $#a <em>and use index to look up
value in the loop body</em> |  a = [&lsquo;do&rsquo;, &rsquo;re&rsquo;, &lsquo;mi&rsquo;, &lsquo;fa&rsquo;]<br />
for i, s in enumerate(a):<br />
print(&lsquo;%s at index %d&rsquo; % (s, i)) |  a = %w(do re mi fa)<br />
a.each_with_index do |s,i|<br />
puts &ldquo;#{s} at index #{i}&rdquo;<br />
end<br />
iterate over range |  <em>not space efficient; use C-style for loop</em> |  for $i
(1..1_000_000) {<br />
<em>code</em><br />
} |  range <em>replaces</em> xrange <em>in Python 3:</em><br />
for i in xrange(1, 1000001):<br />
<em>code</em> |  (1..1_000_000).each do |i|<br />
<em>code</em><br />
end<br />
instantiate range as array |  $a = range(1, 10); |  @a = 1..10; |  a =
range(1, 11)<br />
<em>Python 3:</em><br />
a = list(range(1, 11)) |  a = (1..10).to_a<br />
reverse |  $a = array(1,2,3);<br />
array_reverse($a);<br />
$a = array_reverse($a); |  @a = (1,2,3);<br />
reverse @a;<br />
@a = reverse @a; |  a = [1,2,3]<br />
a[::-1]<br />
a.reverse() |  a = [1,2,3]<br />
a.reverse<br />
a.reverse!<br />
sort |  $a = array(&ldquo;b&rdquo;, &ldquo;A&rdquo;, &ldquo;a&rdquo;, &ldquo;B&rdquo;);<br />
<em>none</em><br />
sort($a);<br />
<em>none, but</em> usort <em>sorts in place</em> |  @a = qw(b A a B);<br />
sort @a;<br />
@a = sort @a;<br />
sort { lc($a) cmp lc($b) } @a; |  a = [&lsquo;b&rsquo;, &lsquo;A&rsquo;, &lsquo;a&rsquo;, &lsquo;B&rsquo;]<br />
sorted(a)<br />
a.sort()<br />
a.sort(key=str.lower) |  a = %w(b A a B)<br />
a.sort<br />
a.sort!<br />
a.sort do |x,y|<br />
x.downcase &lt;=&gt; y.downcase<br />
end<br />
dedupe |  $a = array(1,2,2,3);<br />
$a2 = array_unique($a);<br />
$a = array_unique($a); |  use List::MoreUtils &lsquo;uniq&rsquo;;</p>

<p>my @a = (1,2,2,3);<br />
my @a2 = uniq @a;<br />
@a = uniq @a; |  a = [1,2,2,3]<br />
a2 = list(set(a))<br />
a = list(set(a)) |  a = [1,2,2,3]<br />
a2 = a.uniq<br />
a.uniq!<br />
membership<br />
|  in_array(7, $a) |  7 ~~ @a |  7 in a |  a.include?(7)<br />
intersection<br />
|  $a = array(1,2);<br />
$b = array(2,3,4)<br />
array_intersect($a, $b) |  |  {1,2} &amp; {2,3,4} |  [1,2] &amp; [2,3,4]<br />
union<br />
|  $a1 = array(1,2);<br />
$a2 = array(2,3,4);<br />
array_unique(array_merge($a1, $a2)) |  |  {1,2} | {2,3,4} |  [1,2] | [2,3,4]<br />
relative complement, symmetric difference |  $a1 = array(1,2,3);<br />
$a2 = array(2);<br />
array_values(array_diff($a1, $a2))<br />
<em>none</em> |  |  {1,2,3} - {2}<br />
{1,2} ^ {2,3,4} |  require &lsquo;set&rsquo;</p>

<p>[1,2,3] - [2]<br />
Set[1,2] ^ Set[2,3,4]<br />
map<br />
|  array<em>map(function ($x) {<br />
return $x*$x;<br />
}, array(1,2,3)) |  map { $</em> * $_ } (1,2,3) |  map(lambda x: x * x, [1,2,3])</p>

<h1 id="or-use-list-comprehension">or use list comprehension:</h1>

<p>[x*x for x in [1,2,3]] |  [1,2,3].map { |o| o*o }<br />
filter<br />
|  array<em>filter(array(1,2,3),<br />
function ($x) {<br />
return $x&gt;1;<br />
}) |  grep { $</em> &gt; 1 } (1,2,3) |  filter(lambda x: x &gt; 1, [1,2,3])</p>

<h1 id="or-use-list-comprehension-1">or use list comprehension:</h1>

<p>[x for x in [1,2,3] if x &gt; 1] |  [1,2,3].select { |o| o &gt; 1 }<br />
reduce<br />
|  array_reduce(array(1,2,3),<br />
function($x,$y) {<br />
return $x+$y;<br />
}, 0) |  use List::Util &lsquo;reduce&rsquo;;</p>

<p>reduce { $x + $y } 0, (1,2,3) |  # import needed in Python 3 only<br />
from functools import reduce</p>

<p>reduce(lambda x, y: x+y, [1,2,3], 0) |  [1,2,3].inject(0) { |m,o| m+o }<br />
universal and existential tests<br />
|  _use array<em>filter</em> |  # cpan -i List::MoreUtils<br />
use List::MoreUtils qw(all any);</p>

<p>all { $_ % 2 == 0 } (1,2,3,4)<br />
any { $_ % 2 == 0 } (1,2,3,4) |  all(i%2 == 0 for i in [1,2,3,4])<br />
any(i%2 == 0 for i in [1,2,3,4]) |  [1,2,3,4].all? {|i| i.even? }<br />
[1,2,3,4].any? {|i| i.even? }<br />
shuffle and sample |  $a = array(1, 2, 3, 4);<br />
shuffle($a);<br />
array_rand($a, 2) |  use List::Util &lsquo;shuffle&rsquo;;</p>

<p>@a = (1, 2, 3, 4);<br />
shuffle(@a);<br />
<em>none</em> |  from random import shuffle, sample</p>

<p>a = [1, 2, 3, 4]<br />
shuffle(a)<br />
sample(a, 2) |  [1, 2, 3, 4].shuffle<br />
<em>Ruby 1.9:</em><br />
[1, 2, 3, 4].sample(2)<br />
zip<br />
|  # array of 3 pairs:<br />
$a = array_map(NULL,<br />
array(1, 2, 3),<br />
array(&ldquo;a&rdquo;, &ldquo;b&rdquo;, &ldquo;c&rdquo;)); |  # cpan -i List::MoreUtils<br />
use List::MoreUtils &lsquo;zip&rsquo;;</p>

<p>@nums = (1, 2, 3);<br />
@lets = qw(a b c);</p>

<h1 id="flat-array-of-6-elements">flat array of 6 elements:</h1>

<p>@a = zip @nums, @lets; |  # array of 3 pairs:<br />
a = zip([1,2,3], [&lsquo;a&rsquo;, &lsquo;b&rsquo;, &lsquo;c&rsquo;]) |  # array of 3 pairs:<br />
a = [1,2,3].zip([&ldquo;a&rdquo;, &ldquo;b&rdquo;, &ldquo;c&rdquo;])<br />
dictionaries<br />
|  php |  perl |  python |  ruby<br />
literal<br />
|  $d = array(&ldquo;t&rdquo; =&gt; 1, &ldquo;f&rdquo; =&gt; 0); |  %d = ( t =&gt; 1, f =&gt; 0 ); |  d = { &rsquo;t&rsquo;:1,
&lsquo;f&rsquo;:0 } |  d = { &ldquo;t&rdquo; =&gt; 1, &ldquo;f&rdquo; =&gt; 0 }<br />
size<br />
|  count($d) |  scalar(keys %d) |  len(d) |  d.size<br />
d.length # same as size<br />
lookup<br />
|  $d[&ldquo;t&rdquo;] |  $d{&ldquo;t&rdquo;} |  d[&rsquo;t&rsquo;] |  d[&ldquo;t&rdquo;]<br />
out-of-bounds behavior<br />
|  $d = array();<br />
<em>evaluates as</em> NULL:<br />
$d[&ldquo;lorem&rdquo;];<br />
<em>adds key/value pair:</em><br />
$d[&ldquo;lorem&rdquo;] = &ldquo;ipsum&rdquo;; |  %d = ();<br />
<em>evaluates as</em> undef:<br />
$d{&ldquo;lorem&rdquo;};<br />
<em>adds key/value pair:</em><br />
$d{&ldquo;lorem&rdquo;} = &ldquo;ipsum&rdquo;; |  d = {}<br />
<em>raises</em> KeyError:<br />
d[&lsquo;lorem&rsquo;]<br />
<em>adds key/value pair:</em><br />
d[&lsquo;lorem&rsquo;] = &lsquo;ipsum&rsquo; |  d = {}<br />
<em>evaluates as</em> nil:<br />
d[&ldquo;lorem&rdquo;]<br />
<em>adds key/value pair:</em><br />
d[&ldquo;lorem&rdquo;] = &ldquo;ipsum&rdquo;<br />
is key present<br />
|  array_key_exists(&ldquo;y&rdquo;, $d); |  exists $d{&ldquo;y&rdquo;} |  &lsquo;y&rsquo; in d |  d.has_key?(&ldquo;y&rdquo;)<br />
delete entry |  $d = array(1 =&gt; &ldquo;t&rdquo;, 0 =&gt; &ldquo;f&rdquo;);<br />
unset($d[1]); |  %d = ( 1 =&gt; &ldquo;t&rdquo;, 0 =&gt; &ldquo;f&rdquo; );<br />
delete $d{1}; |  d = {1: True, 0: False}<br />
del d[1] |  d = {1 =&gt; true, 0 =&gt; false}<br />
d.delete(1)<br />
from array of pairs, from even length array |  |  @a = (1,&ldquo;a&rdquo;,2,&ldquo;b&rdquo;,3,&ldquo;c&rdquo;);<br />
%d = @a; |  a = [[1,&lsquo;a&rsquo;], [2,&lsquo;b&rsquo;], [3,&lsquo;c&rsquo;]]<br />
d = dict(a)</p>

<p>a = [1,&lsquo;a&rsquo;,2,&lsquo;b&rsquo;,3,&lsquo;c&rsquo;]<br />
d = dict(zip(a[::2], a[1::2])) |  a = [[1,&ldquo;a&rdquo;], [2,&ldquo;b&rdquo;], [3,&ldquo;c&rdquo;]]<br />
d = Hash[a]</p>

<p>a = [1,&ldquo;a&rdquo;,2,&ldquo;b&rdquo;,3,&ldquo;c&rdquo;]<br />
d = Hash[*a]<br />
merge |  $d1 = array(&ldquo;a&rdquo;=&gt;1, &ldquo;b&rdquo;=&gt;2);<br />
$d2 = array(&ldquo;b&rdquo;=&gt;3, &ldquo;c&rdquo;=&gt;4);<br />
$d1 = array_merge($d1, $d2); |  %d1 = (a=&gt;1, b=&gt;2);<br />
%d2 = (b=&gt;3, c=&gt;4);<br />
%d1 = (%d1, %d2); |  d1 = {&lsquo;a&rsquo;:1, &lsquo;b&rsquo;:2}<br />
d2 = {&lsquo;b&rsquo;:3, &lsquo;c&rsquo;:4}<br />
d1.update(d2) |  d1 = {&ldquo;a&rdquo;=&gt;1, &ldquo;b&rdquo;=&gt;2}<br />
d2 = {&ldquo;b&rdquo;=&gt;3, &ldquo;c&rdquo;=&gt;4}<br />
d1.merge!(d2)<br />
invert |  $to_num = array(&ldquo;t&rdquo;=&gt;1, &ldquo;f&rdquo;=&gt;0);<br />
$to_let = array_flip($to_num); |  %to_num = (t=&gt;1, f=&gt;0);<br />
%to_let = reverse %to_num; |  to_num = {&rsquo;t&rsquo;:1, &lsquo;f&rsquo;:0}</p>

<h1 id="dict-comprehensions-added-in-2-7">dict comprehensions added in 2.7:</h1>

<p>to_let = {v:k for k, v<br />
in to_num.items()} |  to_num = {&ldquo;t&rdquo;=&gt;1, &ldquo;f&rdquo;=&gt;0}<br />
to_let = to_num.invert<br />
iteration<br />
|  foreach ($d as $k =&gt; $v ) {<br />
<em>code</em><br />
} |  while ( ($k, $v) = each %d ) {<br />
<em>code</em><br />
} |  for k, v in d.iteritems():<br />
<em>code</em></p>

<p><em>Python 3:</em><br />
for k, v in d.items():<br />
<em>code</em> |  d.each do |k,v|<br />
<em>code</em><br />
end<br />
keys and values as arrays |  array_keys($d)<br />
array_values($d) |  keys %d<br />
values %d |  d.keys()<br />
d.values()</p>

<p><em>Python 3:</em><br />
list(d.keys())<br />
list(d.values()) |  d.keys<br />
d.values<br />
default value, computed value |  $counts = array();<br />
$counts[&lsquo;foo&rsquo;] += 1;</p>

<p><em>extend</em> ArrayObject <em>for computed values and defaults other than zero or
empty string.</em> |  my %counts;<br />
$counts{&lsquo;foo&rsquo;} += 1</p>

<p><em>define a tied hash for computed values and defaults other than zero or empty
string</em> |  from collections import defaultdict</p>

<p>counts = defaultdict(lambda: 0)<br />
counts[&lsquo;foo&rsquo;] += 1</p>

<p>class Factorial(dict):<br />
def <strong>missing</strong>(self, k):<br />
if k &gt; 1:<br />
return k * self[k-1]<br />
else:<br />
return 1</p>

<p>factorial = Factorial() |  counts = Hash.new(0)<br />
counts[&lsquo;foo&rsquo;] += 1</p>

<p>factorial = Hash.new do |h,k|<br />
k &gt; 1 ? k * h[k-1] : 1<br />
end<br />
functions<br />
|  php |  perl |  python |  ruby<br />
function declaration<br />
|  function add($a, $b) {<br />
return $a + $b;<br />
} |  sub add { $<em>[0] + $</em>[1] }</p>

<p>sub add {<br />
my ($a, $b) = @_;<br />
$a + $b;<br />
} |  def add(a, b):<br />
return a+b |  def add(a, b)<br />
a+b<br />
end</p>

<p><em>parens are optional and customarily omitted when defining functions with no
parameters</em><br />
function invocation |  add(1, 2);</p>

<p><em>function names are case insensitive:</em><br />
ADD(1, 2); |  add(1, 2);</p>

<p><em>parens are optional:</em><br />
add 1, 2; |  add(1, 2) |  add(1, 2)</p>

<p><em>parens are optional:</em><br />
add 1, 2<br />
missing argument behavior<br />
|  <em>set to</em> NULL <em>with warning</em> |  <em>set to</em> undef |  <em>raises</em> TypeError |
<em>raises</em> ArgumentError<br />
default value<br />
|  function my_log($x, $base=10) {<br />
return log($x)/log($base);<br />
}</p>

<p>my_log(42);<br />
my_log(42, M_E); |  sub my_log {<br />
my $x = shift;<br />
my $base = shift // 10;</p>

<p>log($x)/log($base);<br />
}</p>

<p>my_log(42);<br />
my_log(42, exp(1)); |  import math</p>

<p>def my_log(x, base=10):<br />
return math.log(x)/math.log(base)</p>

<p>my_log(42)<br />
my_log(42, math.e) |  def my_log(x, base=10)<br />
Math.log(x)/Math.log(base)<br />
end</p>

<p>my_log(42)<br />
my_log(42, Math::E)<br />
variable number of arguments |  function foo() {<br />
$arg_cnt = func_num_args();<br />
if ($arg_cnt &gt;= 1) {<br />
$n = func_get_arg(0);<br />
echo &ldquo;first: &ldquo; . $n . &ldquo;\n&rdquo;;<br />
}<br />
if ($arg_cnt &gt;= 2) {<br />
$a = func_get_args();<br />
$n = $a[$arg<em>cnt-1];<br />
echo &ldquo;last: &ldquo; . $n . &ldquo;\n&rdquo;;<br />
}<br />
} |  sub foo {<br />
if ( @</em> &gt;= 1 ) {<br />
print &ldquo;first: $<em>[0]\n&rdquo;;<br />
}<br />
if ( @</em> &gt;= 2 ) {<br />
print &ldquo;last: $_[-1]\n&rdquo;;<br />
}<br />
} |  def foo(*a):<br />
if len(a) &gt;= 1:<br />
print(&lsquo;first: &lsquo; + str(a[0]))<br />
if len(a) &gt;= 2:<br />
print(&lsquo;last: &lsquo; + str(a[-1])) |  def foo(*a)<br />
if a.size &gt;= 1<br />
puts &ldquo;first: #{a[0]}&rdquo;<br />
end<br />
if a.size &gt;= 2<br />
puts &ldquo;last: #{a[-1]}&rdquo;<br />
end<br />
end<br />
named parameters<br />
|  <em>none</em> |  <em>none</em> |  def fequal(x, y, **opts):<br />
eps = opts.get(&lsquo;eps&rsquo;) or 0.01<br />
return abs(x - y) &lt; eps</p>

<p>fequal(1.0, 1.001)<br />
fequal(1.0, 1.001, eps=0.1**10) |  def fequal(x, y, opts={})<br />
eps = opts[:eps] || 0.01<br />
(x - y).abs &lt; eps<br />
end</p>

<p>fequal(1.0, 1.001)<br />
fequal(1.0, 1.001, :eps=&gt;0.1**10)<br />
pass number or string by reference<br />
|  function foo(&amp;$x, &amp;$y) {<br />
$x += 1;<br />
$y .= &ldquo;ly&rdquo;;<br />
}</p>

<p>$n = 7;<br />
$s = &ldquo;hard&rdquo;;<br />
foo($n, $s); |  sub foo {<br />
$<em>[0] += 1;<br />
$</em>[1] .= &ldquo;ly&rdquo;;<br />
}</p>

<p>my $n = 7;<br />
my $s = &ldquo;hard&rdquo;;<br />
foo($n, $s); |  <em>not possible</em> |  <em>not possible</em><br />
pass array or dictionary by reference<br />
|  function foo(&amp;$x, &amp;$y) {<br />
$x[2] = 5;<br />
$y[&ldquo;f&rdquo;] = -1;<br />
}</p>

<p>$a = array(1,2,3);<br />
$d = array(&ldquo;t&rdquo;=&gt;1,&ldquo;f&rdquo;=&gt;0);<br />
foo($a, $d); |  sub foo {<br />
$<em>[0][2] = 5;<br />
$</em>[1]{&ldquo;f&rdquo;} = -1;<br />
}</p>

<p>my @a = (1,2,3);<br />
my %d = (&ldquo;t&rdquo;=&gt; 1, &ldquo;f&rdquo; =&gt; 0);<br />
foo(\@a, \%d); |  def foo(x, y):<br />
x[2] = 5<br />
y[&lsquo;f&rsquo;] = -1</p>

<p>a = [1,2,3]<br />
d = {&rsquo;t&rsquo;:1, &lsquo;f&rsquo;:0}<br />
foo(a, d) |  def foo(x, y)<br />
x[2] = 5<br />
y[&ldquo;f&rdquo;] = -1<br />
end</p>

<p>a = [1,2,3]<br />
d = {&ldquo;t&rdquo;=&gt; 1, &ldquo;f&rdquo; =&gt; 0 }<br />
foo(a, d)<br />
return value<br />
|  return <em>arg or</em> NULL |  return <em>arg or last expression evaluated</em> |  return
<em>arg or</em> None |  return <em>arg or last expression evaluated</em><br />
multiple return values<br />
|  function first_and_second(&amp;$a) {<br />
return array($a[0], $a[1]);<br />
}<br />
$a = array(1,2,3);<br />
list($x, $y) =<br />
first_and_second($a); |  sub first_and<em>second {<br />
return ($</em>[0], $_[1]);<br />
}<br />
@a = (1,2,3);<br />
($x, $y) = first_and_second(@a); |  def first_and_second(a):<br />
return a[0], a[1]</p>

<p>x, y = first_and_second([1,2,3]) |  def first_and_second(a)<br />
return a[0], a[1]<br />
end<br />
x, y = first_and<em>second([1,2,3])<br />
lambda declaration<br />
|  $sqr = function ($x) {<br />
return $x * $x;<br />
}; |  $sqr = sub { $</em>[0] * $_[0] } |  <em>body must be an expression:</em><br />
sqr = lambda x: x * x |  sqr = lambda { |x| x * x }<br />
lambda invocation |  $sqr(2) |  $sqr-&gt;(2) |  sqr(2) |  sqr.call(2) <em>or</em><br />
sqr[2]<br />
function reference |  $func = &ldquo;add&rdquo;; |  my $func = &amp;add; |  func = add |
func = lambda {|*args| add(*args)}<br />
function with private state |  function counter() {<br />
static $i = 0;<br />
return ++$i;<br />
}</p>

<p>echo counter(); |  use feature state;</p>

<p>sub counter {<br />
state $i = 0;<br />
++$i;<br />
}</p>

<p>print counter() . &ldquo;\n&rdquo;; |  # state not private:<br />
def counter():<br />
counter.i += 1<br />
return counter.i</p>

<p>counter.i = 0<br />
print(counter()) |  <em>none</em><br />
closure |  function make_counter() {<br />
$i = 0;<br />
return function () use (&amp;$i) {<br />
return ++$i;<br />
};<br />
}<br />
$nays = make_counter();<br />
echo $nays(); |  sub make_counter {<br />
my $i = 0;<br />
return sub { ++$i };<br />
}<br />
my $nays = make_counter;<br />
print $nays-&gt;() . &ldquo;\n&rdquo;; |  # Python 3:<br />
def make_counter():<br />
i = 0<br />
def counter():<br />
nonlocal i<br />
i += 1<br />
return i<br />
return counter</p>

<p>nays = make_counter() |  def make_counter<br />
i = 0<br />
return lambda { i +=1; i }<br />
end<br />
nays = make_counter<br />
puts nays.call<br />
generator |  <em>none</em> |  <em>none</em> |  def make_counter():<br />
i = 0<br />
while True:<br />
i += 1<br />
yield i</p>

<p>nays = make_counter()<br />
print(nays.next()) |  # Ruby 1.9:<br />
def make_counter<br />
return Fiber.new do<br />
i = 0<br />
while true<br />
i += 1<br />
Fiber.yield i<br />
end<br />
end<br />
end<br />
nays = make_counter<br />
puts nays.resume<br />
execution control<br />
|  php |  perl |  python |  ruby<br />
if<br />
|  if ( 0 == $n ) {<br />
echo &ldquo;no hits\n&rdquo;;<br />
} elseif ( 1 == $n ) {<br />
echo &ldquo;one hit\n&rdquo;;<br />
} else {<br />
echo &ldquo;$n hits\n&rdquo;;<br />
} |  if ( 0 == $n ) {<br />
print &ldquo;no hits\n&rdquo;<br />
} elsif ( 1 == $n ) {<br />
print &ldquo;one hit\n&rdquo;<br />
} else {<br />
print &ldquo;$n hits\n&rdquo;<br />
} |  if 0 == n:<br />
print(&lsquo;no hits&rsquo;)<br />
elif 1 == n:<br />
print(&lsquo;one hit&rsquo;)<br />
else:<br />
print(str(n) + &lsquo; hits&rsquo;) |  if n == 0<br />
puts &ldquo;no hits&rdquo;<br />
elsif 1 == n<br />
puts &ldquo;one hit&rdquo;<br />
else<br />
puts &ldquo;#{n} hits&rdquo;<br />
end<br />
switch |  switch ($n) {<br />
case 0:<br />
echo &ldquo;no hits\n&rdquo;;<br />
break;<br />
case 1:<br />
echo &ldquo;one hit\n&rdquo;;<br />
break;<br />
default:<br />
echo &ldquo;$n hits\n&rdquo;;<br />
} |  use feature &lsquo;switch&rsquo;;</p>

<p>given ($n) {<br />
when (0) { print &ldquo;no hits\n&rdquo;; }<br />
when (1) { print &ldquo;one hit\n&rdquo;; }<br />
default { print &ldquo;$n hits\n&rdquo;; }<br />
} |  <em>none</em> |  case n<br />
when 0<br />
puts &ldquo;no hits&rdquo;<br />
when 1<br />
puts &ldquo;one hit&rdquo;<br />
else<br />
puts &ldquo;#{n} hits&rdquo;<br />
end<br />
while<br />
|  while ( $i &lt; 100 ) { $i++; } |  while ( $i &lt; 100 ) { $i++ } |  while i &lt;
100:<br />
i += 1 |  while i &lt; 100 do<br />
i += 1<br />
end<br />
c-style for<br />
|  for ($i = 1; $i &lt;= 10; $i++) {<br />
echo &ldquo;$i\n&rdquo;;<br />
} |  for ( $i=0; $i &lt;= 10; $i++ ) {<br />
print &ldquo;$i\n&rdquo;;<br />
} |  <em>none</em> |  <em>none</em><br />
break, continue, redo<br />
|  break continue <em>none</em> |  last next redo |  break continue <em>none</em> |  break
next redo<br />
control structure keywords |  case default do else elseif for foreach goto if
switch while |  do else elsif for foreach goto if unless until while |  elif
else for if while |  case do else elsif end for loop when while unless until<br />
what do does |  <em>starts body of a</em> do-while <em>loop, a loop which checks the
condition after the body is executed</em> |  <em>executes following block and returns
value of last statement executed</em> |  <em>raises</em> NameError <em>unless a value was
assigned to it</em> |  <em>starts an anonymous block. Also starts the body of a</em>
loop, while, <em>or</em> until <em>loop</em><br />
statement modifiers<br />
|  <em>none</em> |  print &ldquo;positive\n&rdquo; if $i &gt; 0;<br />
print &ldquo;nonzero\n&rdquo; unless $i == 0; |  <em>none</em> |  puts &ldquo;positive&rdquo; if i &gt; 0<br />
puts &ldquo;nonzero&rdquo; unless i == 0<br />
raise exception<br />
|  throw new Exception(&ldquo;bad arg&rdquo;); |  die &ldquo;bad arg&rdquo;; |  raise Exception(&lsquo;bad
arg&rsquo;) |  # raises RuntimeError<br />
raise &ldquo;bad arg&rdquo;<br />
catch exception<br />
|  try {<br />
risky();<br />
} catch (Exception $e) {<br />
echo &ldquo;risky failed: &ldquo;,<br />
$e-&gt;getMessage(), &ldquo;\n&rdquo;;<br />
} |  eval { risky };<br />
if ($@) {<br />
print &ldquo;risky failed: $@\n&rdquo;;<br />
} |  try:<br />
risky()<br />
except:<br />
print(&lsquo;risky failed&rsquo;) |  # catches StandardError<br />
begin<br />
risky<br />
rescue<br />
print &ldquo;risky failed: &ldquo;<br />
puts $!.message<br />
end<br />
global variable for last exception |  <em>none</em> |  _$EVAL<em>ERROR: $@</em><br />
_$OS<em>ERROR:</em> $!<br />
_$CHILD<em>ERROR: $?</em> |  <em>last exception:</em> sys.exc_info()[1] |  <em>last exception:</em>
$!<br />
<em>backtrace array of exc.:</em> $@<br />
<em>exit status of child:</em> $?<br />
define exception |  class Bam extends Exception {<br />
function <strong>construct() {<br />
parent::</strong>construct(&ldquo;bam!&rdquo;);<br />
}<br />
} |  <em>none</em> |  class Bam(Exception):<br />
def <strong>init</strong>(self):<br />
super(Bam, self).<strong>init</strong>(&lsquo;bam!&rsquo;) |  class Bam Exception<br />
def initialize<br />
super(&ldquo;bam!&rdquo;)<br />
end<br />
end<br />
catch exception by type |  try {<br />
throw new Bam;<br />
} catch (Bam $e) {<br />
echo $e-&gt;getMessage(), &ldquo;\n&rdquo;;<br />
} |  <em>none</em> |  try:<br />
raise Bam()<br />
except Bam as e:<br />
print(e) |  begin<br />
raise Bam.new<br />
rescue Bam =&gt; e<br />
puts e.message<br />
end<br />
finally/ensure<br />
|  <em>none</em> |  <em>none</em> |  acquire_resource()<br />
try:<br />
risky()<br />
finally:<br />
release_resource() |  acquire_resource<br />
begin<br />
risky<br />
ensure<br />
release_resource<br />
end<br />
start thread<br />
|  <em>none</em> |  use threads;</p>

<p>$func = sub { sleep 10 };<br />
$thr = threads-&gt;new($func); |  class sleep10(threading.Thread):<br />
def run(self):<br />
time.sleep(10)</p>

<p>thr = sleep10()<br />
thr.start() |  thr = Thread.new { sleep 10 }<br />
wait on thread<br />
|  <em>none</em> |  $thr-&gt;join; |  thr.join() |  thr.join<br />
files<br />
|  php |  perl |  python |  ruby<br />
print to standard output<br />
|  echo &ldquo;Hello, World!\n&rdquo;; |  print &ldquo;Hello, World!\n&rdquo;; |  print(&lsquo;Hello,
World!&lsquo;) |  puts &ldquo;Hello, World!&rdquo;<br />
read from standard input |  $line = fgets(STDIN); |  $line = ; |  line =
sys.stdin.readline() |  line = gets<br />
standard file handles<br />
|  <em>only set by CLI; not set when reading script from standard input:</em><br />
STDIN STDOUT STDERR |  STDIN STDOUT STDERR |  sys.stdin sys.stdout sys.stderr
|  $stdin $stdout $stderr<br />
open file<br />
|  $f = fopen(&ldquo;/etc/hosts&rdquo;, &ldquo;r&rdquo;); |  open my $f, &ldquo;/etc/hosts&rdquo;; <em>or</em><br />
open FILE, &ldquo;/etc/hosts&rdquo;; |  f = open(&lsquo;/etc/hosts&rsquo;) |  f =
File.open(&ldquo;/etc/hosts&rdquo;) <em>or</em><br />
File.open(&ldquo;/etc/hosts&rdquo;) { |f|<br />
open file for writing<br />
|  $f = fopen(&ldquo;/tmp/php_test&rdquo;, &ldquo;w&rdquo;); |  open my $f, &ldquo;&gt;/tmp/perl_test&rdquo;; <em>or</em><br />
open FILE, &ldquo;&gt;/tmp/perl_test&rdquo;; |  f = open(&lsquo;/tmp/test&rsquo;, &lsquo;w&rsquo;) |  f =
File.open(&lsquo;/tmp/test&rsquo;, &lsquo;w&rsquo;) <em>or</em><br />
File.open(&lsquo;/tmp/test&rsquo;, &lsquo;w&rsquo;) { |f|<br />
close file<br />
|  fclose($f); |  close $f; <em>or</em><br />
close FILE; |  f.close() |  f.close<br />
read line<br />
|  $line = fgets($f); |  $line = ; <em>or</em><br />
$line = ; |  f.readline() |  f.gets<br />
iterate over file by line<br />
|  while (!feof($f)) {<br />
$line = fgets($f); |  while ($line = ) { |  for line in f: |  f.each do |line|<br />
chomp<br />
|  chop($line); |  chomp $line; |  line = line.rstrip(&rsquo;\r\n&rsquo;) |  line.chomp!<br />
read entire file into array or string |  $a = file(&ldquo;/etc/hosts&rdquo;);<br />
$s = file_get_contents(&ldquo;/etc/hosts&rdquo;); |  @a = ;<br />
$s = do { local $/; }; |  a = f.readlines()<br />
s = f.read() |  a = f.lines.to_a<br />
s = f.read<br />
write to file<br />
|  fwrite($f, &ldquo;lorem ipsum&rdquo;); |  print $f &ldquo;lorem ipsum&rdquo;; |  f.write(&lsquo;lorem
ipsum&rsquo;) |  f.write(&ldquo;lorem ipsum&rdquo;)<br />
flush file handle<br />
|  <em>note that CLI output isn&rsquo;t buffered</em><br />
fflush($f); |  use IO::Handle;</p>

<p>$f-&gt;flush(); |  f.flush() |  f.flush<br />
file test, regular file test<br />
|  file_exists(&ldquo;/etc/hosts&rdquo;)<br />
is_file(&ldquo;/etc/hosts&rdquo;) |  -e &ldquo;/etc/hosts&rdquo;<br />
-f &ldquo;/etc/hosts&rdquo; |  os.path.exists(&lsquo;/etc/hosts&rsquo;)<br />
os.path.isfile(&lsquo;/etc/hosts&rsquo;) |  File.exists?(&ldquo;/etc/hosts&rdquo;)<br />
File.file?(&ldquo;/etc/hosts&rdquo;)<br />
copy file, remove file, rename file |  copy(&ldquo;/tmp/foo&rdquo;, &ldquo;/tmp/bar&rdquo;);<br />
unlink(&ldquo;/tmp/foo&rdquo;);<br />
rename(&ldquo;/tmp/bar&rdquo;, &ldquo;/tmp/foo&rdquo;); |  use File::Copy;</p>

<p>copy(&ldquo;/tmp/foo&rdquo;, &ldquo;/tmp/bar&rdquo;);<br />
unlink &ldquo;/tmp/foo&rdquo;;<br />
move(&ldquo;/tmp/bar&rdquo;, &ldquo;/tmp/foo&rdquo;); |  import shutil</p>

<p>shutil.copy(&lsquo;/tmp/foo&rsquo;, &lsquo;/tmp/bar&rsquo;)<br />
os.remove(&lsquo;/tmp/foo&rsquo;)<br />
shutil.move(&lsquo;/tmp/bar&rsquo;, &lsquo;/tmp/foo&rsquo;) |  require &lsquo;fileutils&rsquo;</p>

<p>FileUtils.cp(&ldquo;/tmp/foo&rdquo;, &ldquo;/tmp/bar&rdquo;)<br />
FileUtils.rm(&ldquo;/tmp/foo&rdquo;)<br />
FileUtils.mv(&ldquo;/tmp/bar&rdquo;, &ldquo;/tmp/foo&rdquo;)<br />
set file permissions |  chmod(&ldquo;/tmp/foo&rdquo;, 0755); |  chmod 0755, &ldquo;/tmp/foo&rdquo;; |
os.chmod(&lsquo;/tmp/foo&rsquo;, 0755) |  File.chmod(0755, &ldquo;/tmp/foo&rdquo;)<br />
temporary file |  $tmp = tempnam(sys_get_temp_dir(),<br />
&ldquo;foo&rdquo;);<br />
$f = fopen($tmp, &ldquo;w&rdquo;);<br />
fwrite($f, &ldquo;lorem ipsum\n&rdquo;);<br />
fclose($f);</p>

<p>echo &ldquo;tmp file: $tmp\n&rdquo;; |  use File::Temp;</p>

<p>$f = File::Temp-&gt;new();<br />
print $f &ldquo;lorem ipsum\n&rdquo;;<br />
close $f;</p>

<p>print &ldquo;tmp file: &ldquo;;<br />
print $f-&gt;filename . &ldquo;\n&rdquo;; |  import tempfile</p>

<p>f = tempfile.NamedTemporaryFile(<br />
prefix=&lsquo;foo&rsquo;)<br />
f.write(&lsquo;lorem ipsum\n&rsquo;)<br />
f.close()</p>

<p>print(&ldquo;tmp file: %s&rdquo; % f.name) |  require &lsquo;tempfile&rsquo;</p>

<p>f = Tempfile.new(&lsquo;foo&rsquo;)<br />
f.puts &ldquo;lorem ipsum&rdquo;<br />
f.close</p>

<p>puts &ldquo;tmp file: #{f.path}&rdquo;<br />
in memory file |  $meg = 1024 * 1024;<br />
$mem = &ldquo;php://temp/maxmemory:$meg&rdquo;;<br />
$f = fopen($mem, &ldquo;r+&rdquo;);<br />
fputs($f, &ldquo;lorem ipsum&rdquo;);<br />
rewind($f);<br />
$s = fread($f, $meg); |  my ($f, $s);<br />
open($f, &ldquo;&gt;&rdquo;, \$s);<br />
print $f &ldquo;lorem ipsum\n&rdquo;;<br />
$s; |  <em>from</em> StringIOimport StringIO</p>

<p>f = StringIO()<br />
f.write(&lsquo;lorem ipsum\n&rsquo;)<br />
s = f.getvalue()</p>

<p><em>Python 3 moved</em> StringIO <em>to the</em> io <em>module</em> |  require &lsquo;stringio&rsquo;</p>

<p>f = StringIO.new<br />
f.puts(&ldquo;lorem ipsum&rdquo;)<br />
f.rewind<br />
s = f.read<br />
directories<br />
|  php |  perl |  python |  ruby<br />
build pathname |  &ldquo;/etc&rdquo; . DIRECTORY_SEPARATOR . &ldquo;hosts&rdquo; |  use File::Spec;</p>

<p>File::Spec-&gt;catfile(&ldquo;/etc&rdquo;, &ldquo;hosts&rdquo;) |  os.path.join(&lsquo;/etc&rsquo;, &lsquo;hosts&rsquo;) |
File.join(&ldquo;/etc&rdquo;, &ldquo;hosts&rdquo;)<br />
dirname and basename |  dirname(&ldquo;/etc/hosts&rdquo;)<br />
basename(&ldquo;/etc/hosts&rdquo;) |  use File::Basename;</p>

<p>print dirname(&ldquo;/etc/hosts&rdquo;);<br />
print basename(&ldquo;/etc/hosts&rdquo;); |  os.path.dirname(&lsquo;/etc/hosts&rsquo;)<br />
os.path.basename(&lsquo;/etc/hosts&rsquo;) |  File.dirname(&ldquo;/etc/hosts&rdquo;)<br />
File.basename(&ldquo;/etc/hosts&rdquo;)<br />
absolute pathname |  realpath(&ldquo;..&rdquo;) |  use Cwd;</p>

<p>Cwd::abs_path(&ldquo;..&rdquo;) |  os.path.abspath(&lsquo;..&rsquo;) |  File.expand_path(&ldquo;..&rdquo;)<br />
iterate over directory by file |  if ($dir = opendir(&ldquo;/etc&rdquo;)) {<br />
while ($file = readdir($dir)) {<br />
echo &ldquo;$file\n&rdquo;;<br />
}<br />
closedir($dir);<br />
} |  use File::Basename;</p>

<p>while (  ) {<br />
print basename($_) . &ldquo;\n&rdquo;;<br />
} |  for filename in os.listdir(&lsquo;/etc&rsquo;):<br />
print(filename) |  Dir.open(&ldquo;/etc&rdquo;).each do |file|<br />
puts file<br />
end<br />
make directory |  mkdir(&ldquo;/tmp/foo/bar&rdquo;, 0755, TRUE); |  use File::Path
&lsquo;make_path&rsquo;;</p>

<p>make_path &ldquo;/tmp/foo/bar&rdquo;; |  dirname = &lsquo;/tmp/foo/bar&rsquo;<br />
if not os.path.isdir(dirname):<br />
os.makedirs(dirname) |  require &lsquo;fileutils&rsquo;</p>

<p>FileUtils.mkdir_p(&ldquo;/tmp/foo/bar&rdquo;)<br />
recursive copy |  <em>none</em> |  # cpan -i File::Copy::Recursive<br />
use File::Copy::Recursive &lsquo;dircopy&rsquo;;</p>

<p>dircopy &ldquo;/tmp/foodir&rdquo;,<br />
&rdquo;/tmp/bardir&rdquo;; |  import shutil</p>

<p>shutil.copytree(&lsquo;/tmp/foodir&rsquo;,<br />
&rsquo;/tmp/bardir&rsquo;) |  require &lsquo;fileutils&rsquo;</p>

<p>FileUtils.cp_r(&ldquo;/tmp/foodir&rdquo;,<br />
&rdquo;/tmp/bardir&rdquo;)<br />
remove empty directory |  rmdir(&ldquo;/tmp/foodir&rdquo;); |  rmdir &ldquo;/tmp/foodir&rdquo;; |
os.rmdir(&lsquo;/tmp/foodir&rsquo;) |  File.rmdir(&ldquo;/tmp/foodir&rdquo;)<br />
remove directory and contents |  <em>none</em> |  use File::Path &lsquo;remove_tree&rsquo;;</p>

<p>remove_tree &ldquo;/tmp/foodir&rdquo;; |  import shutil</p>

<p>shutil.rmtree(&lsquo;/tmp/foodir&rsquo;) |  require &lsquo;fileutils&rsquo;</p>

<p>FileUtils.rm_rf(&ldquo;/tmp/foodir&rdquo;)<br />
directory test<br />
|  is_dir(&ldquo;/tmp&rdquo;) |  -d &ldquo;/tmp&rdquo; |  os.path.isdir(&lsquo;/tmp&rsquo;) |
File.directory?(&ldquo;/tmp&rdquo;)<br />
processes and environment<br />
|  php |  perl |  python |  ruby<br />
command line args, script name<br />
|  count($argv)<br />
$argv[0] $argv[1] <em>etc</em><br />
$_SERVER[&ldquo;SCRIPT_NAME&rdquo;] |  scalar(@ARGV)<br />
$ARGV[0] $ARGV[1] <em>etc</em><br />
$0 |  len(sys.argv)-1<br />
sys.argv[1] sys.argv[2] <em>etc</em><br />
sys.argv[0] |  ARGV.size<br />
ARGV[0] ARGV[1] <em>etc</em><br />
$0<br />
getopt |  $opts = getopt(&ldquo;f:h&rdquo;,<br />
array(&ldquo;file:&ldquo;, &ldquo;help&rdquo;));</p>

<p>if ( array_key_exists(&ldquo;h&rdquo;, $opts) ||<br />
array_key_exists(&ldquo;help&rdquo;, $opts) ) {</p>

<p>$script = $_SERVER[&ldquo;SCRIPT_NAME&rdquo;];<br />
echo &ldquo;usage: $script -f SRC -h\n&rdquo;;<br />
exit -1;<br />
}</p>

<p>$src = $opts[&ldquo;f&rdquo;] ? $opts[&ldquo;f&rdquo;] :<br />
$opts[&ldquo;file&rdquo;]; |  use Getopt::Long;</p>

<p>my ($src, $help);</p>

<p>sub usage {<br />
print &ldquo;usage: $0 --f SRC\n&rdquo;;<br />
exit -1;<br />
}</p>

<p>GetOptions(&ldquo;file=s&rdquo; =&gt; \$src,<br />
&ldquo;help&rdquo; =&gt; \$help);</p>

<p>usage if $help; |  import argparse</p>

<p>parser = argparse.ArgumentParser()<br />
parser.add_argument(&rsquo;--file&rsquo;, &lsquo;-f&rsquo;,<br />
dest=&lsquo;file&rsquo;)</p>

<p>args = parser.parse_args()<br />
src = args.file |  require &lsquo;getoptlong&rsquo;</p>

<p>opts = GetoptLong.new(<br />
[&rsquo;--help&rsquo;, &lsquo;-h&rsquo;,<br />
GetoptLong::NO_ARGUMENT],<br />
[&rsquo;--file&rsquo;, &lsquo;-f&rsquo;,<br />
GetoptLong::REQUIRED_ARGUMENT]<br />
)</p>

<p>opts.each do |opt, arg|<br />
case opt<br />
when &lsquo;--file&rsquo;<br />
src = arg<br />
when &lsquo;--help&rsquo;<br />
puts &ldquo;usage: #{$0} -f SRC&rdquo;<br />
exit -1<br />
end<br />
end<br />
get and set environment variable<br />
|  getenv(&ldquo;HOME&rdquo;)</p>

<p>putenv(&ldquo;PATH=/bin&rdquo;); |  $ENV{&ldquo;HOME&rdquo;}</p>

<p>$ENV{&ldquo;PATH&rdquo;) = &ldquo;/bin&rdquo;; |  os.getenv(&lsquo;HOME&rsquo;)</p>

<p>os.environ[&lsquo;PATH&rsquo;] = &lsquo;/bin&rsquo; |  ENV[&ldquo;HOME&rdquo;]</p>

<p>ENV[&ldquo;PATH&rdquo;] = &ldquo;/bin&rdquo;<br />
exit<br />
|  exit 0; |  exit 0; |  sys.exit(0) |  exit(0)<br />
set signal handller<br />
|  |  $SIG{INT} = sub {<br />
die &ldquo;exiting…\n&rdquo;;<br />
}; |  import signal</p>

<p>def handler(signo, frame):<br />
print(&lsquo;exiting…&rsquo;)<br />
exit -1<br />
signal.signal(signal.SIGINT, handler) |  Signal.trap(&ldquo;INT&rdquo;,<br />
lambda do |signo|<br />
puts &ldquo;exiting…&rdquo;<br />
exit<br />
end<br />
)<br />
executable test |  is_executable(&ldquo;/bin/ls&rdquo;) |  -x &ldquo;/bin/ls&rdquo; |
os.access(&lsquo;/bin/ls&rsquo;, os.X_OK) |  File.executable?(&ldquo;/bin/ls&rdquo;)<br />
external command<br />
|  system(&ldquo;ls -l /tmp&rdquo;, $retval);<br />
if ($retval) {<br />
throw new Exception(&ldquo;ls failed&rdquo;);<br />
} |  system(&ldquo;ls -l /tmp&rdquo;) == 0 or<br />
die &ldquo;ls failed&rdquo;; |  if os.system(&lsquo;ls -l /tmp&rsquo;):<br />
raise Exception(&lsquo;ls failed&rsquo;) |  unless system(&ldquo;ls -l /tmp&rdquo;)<br />
raise &ldquo;ls failed&rdquo;<br />
end<br />
escaped external command<br />
|  $path = chop(fgets(STDIN));<br />
$safe = escapeshellarg($path);<br />
system(&ldquo;ls -l &rdquo; . $safe, $retval);<br />
if ($retval) {<br />
throw new Exception(&ldquo;ls failed&rdquo;);<br />
} |  $path = &lt;&gt;;<br />
chomp($path);<br />
system(&ldquo;ls&rdquo;, &ldquo;-l&rdquo;, $path) == 0 or<br />
die &ldquo;ls failed&rdquo;; |  import subprocess</p>

<p>cmd = [&lsquo;ls&rsquo;, &lsquo;-l&rsquo;, &lsquo;/tmp&rsquo;]<br />
if subprocess.call(cmd):<br />
raise Exception(&lsquo;ls failed&rsquo;) |  path = gets<br />
path.chomp!<br />
unless system(&ldquo;ls&rdquo;, &ldquo;-l&rdquo;, path)<br />
raise &ldquo;ls failed&rdquo;<br />
end<br />
backticks<br />
|  $files = <code>ls -l /tmp</code>; |  my $files = <code>ls -l /tmp</code>; <em>or</em><br />
my $files = qx(ls); |  import subprocess</p>

<p>cmd = [&lsquo;ls&rsquo;, &lsquo;-l&rsquo;, &lsquo;/tmp&rsquo;]<br />
files = subprocess.check_output(cmd) |  files = <code>ls -l /tmp</code><br />
unless $?.success?<br />
raise &ldquo;ls failed&rdquo;<br />
end</p>

<p>files = %x(ls)<br />
unless $?.success?<br />
raise &ldquo;ls failed&rdquo;<br />
end<br />
|  __________________________________________ |
__________________________________________ |
__________________________________________ |</p>

<hr />

<p>sheet two: libraries and modules | objects | reflection | web | tests |
debugging and profiling | java interop</p>

<h1 id="general-footnotes">General Footnotes</h1>

<h2 id="versions-used">versions used</h2>

<p>The versions used for testing code in the reference sheet.</p>

<h2 id="implicit-prologue">implicit prologue</h2>

<p>Code which examples in the sheet assume to have already been executed.</p>

<p><strong>perl:</strong></p>

<p>We adopt the convention that if an example uses a variable without declaring
it, it should be taken to have been previously declared with <code>my</code>.</p>

<p><strong>python:</strong></p>

<p>To keep the examples short we assume that <code>os</code>, <code>re</code>, and <code>sys</code> are always
imported.</p>

<h2 id="show-version">show version</h2>

<p>How to get the version.</p>

<p><strong>php:</strong></p>

<p>The function <code>phpversion()</code> will return the version number as a string.</p>

<p><strong>perl:</strong></p>

<p>Also available in the predefined variable $], or in a different format in $^V
and $PERL_VERSION.</p>

<p><strong>python:</strong></p>

<p>The following function will return the version number as a string:</p>

<pre><code>import platform
platform.python_version()
</code></pre>

<p><strong>ruby:</strong></p>

<p>Also available in the global constant <code>VERSION</code> (Ruby 1.8) or <code>RUBY_VERSION</code>
(Ruby 1.9).</p>

<h2 id="interpreter">interpreter</h2>

<p>The customary name of the interpreter and how to invoke it.</p>

<p><strong>php:</strong></p>

<p><code>php -f</code> will only execute portions of the source file within a <em>php code</em> ?&gt;
tag as php code. Portions of the source file outside of such tags is not
treated as executable code and is echoed to standard out.</p>

<p>If short tags are enabled, then php code can also be placed inside <em>php code</em>
?&gt; and = <em>php code</em> ?&gt; tags.</p>

<p>= <em>php code</em> ?&gt; is identical to <em>php code</em> ?&gt;.</p>

<h2 id="repl">repl</h2>

<p>The customary name of the repl.</p>

<p><strong>php:</strong></p>

<p>The <code>php</code> REPL does not save or display the result of an expression.</p>

<p><code>php -a</code> offers a different style of interactive mode. It collects input until
EOF is encountered and then it executes it. Text inside `<code>_code_</code>?&gt;<code>and</code>=<code>
_code_</code>?&gt;` is executed as PHP code. Text outside of PHP markup tags is
echoed.</p>

<p><strong>perl:</strong></p>

<p>The Perl REPL <code>perl -de 0</code> does not save or display the result of an
expression. <code>perl -d</code> is the Perl debugger and <code>perl -e</code> runs code provided on
the command line.</p>

<p><code>perl -de 0</code> does not by default have readline, but it can be added:</p>

<pre><code>$ cpan -i Term::Readline::Perl



$ perl -de 0

  DB&lt;1&gt; use Term::Readline::Perl;

  DB&lt;2&gt; print 1 + 1;
2
</code></pre>

<p><strong>python:</strong></p>

<p>The python repl saves the result of the last statement in _.</p>

<p><strong>ruby:</strong></p>

<p><code>irb</code> saves the result of the last statement in _.</p>

<h2 id="command-line-script">command line script</h2>

<p>How to pass the code to be executed to the interpreter as a command line
argument.</p>

<h2 id="statement-separator">statement separator</h2>

<p>How the parser determines the end of a statement.</p>

<p><strong>php:</strong></p>

<p>Inside braces statements must be terminated by a semicolon. The following
causes a parse error:</p>

<pre><code> if (true) { echo &quot;true&quot; } ?&gt;
</code></pre>

<p>The last statement inside <code>= ?&gt;</code> or <code>?&gt;</code> tags does not need to be semicolon
terminated, however. The following code is legal:</p>

<pre><code>= $a = 1 ?&gt;
 echo $a ?&gt;
</code></pre>

<p><strong>perl:</strong></p>

<p>In a script statements are separated by semicolons and never by newlines.
However, when using &lsquo;perl -de 0&rsquo;, a newline terminates the statement.</p>

<p><strong>python:</strong></p>

<p>Newline does not terminate a statement when:</p>

<ul>
<li>inside parens</li>
<li>inside list [] or dictionary {} literals</li>
</ul>

<p>Python single quote &ldquo; and double quote &ldquo;&rdquo; strings cannot contain newlines
except as the two character escaped form \n. Putting a newline in these
strings results in a syntax error. There is however a multi-line string
literal which starts and ends with three single quotes &ldquo;&rsquo; or three double
quotes: &ldquo;&rdquo;&ldquo;.</p>

<p>A newline that would normally terminate a statement can be escaped with a
backslash.</p>

<p><strong>ruby:</strong></p>

<p>Newline does not terminate a statement when:</p>

<ul>
<li>inside single quotes &ldquo;, double quotes &ldquo;&rdquo;, backticks ``, or parens ()</li>
<li>after an operator such as + or , that expects another argument</li>
</ul>

<p>Ruby permits newlines in array [] or hash literals, but only after a comma ,
or associator =&gt;. Putting a newline before the comma or associator results in
a syntax error.</p>

<p>A newline that would normally terminate a statement can be escaped with a
backslash.</p>

<h2 id="block-delimiters">block delimiters</h2>

<p>How blocks are delimited.</p>

<p><strong>perl:</strong></p>

<p>Curly brackets {} delimit blocks. They are also used for:</p>

<ul>
<li>hash literal syntax which returns a reference to the hash: $rh = { &lsquo;true&rsquo; =&gt; 1, &lsquo;false&rsquo; =&gt; 0 }</li>
<li>hash value lookup: $h{&lsquo;true&rsquo;}, $rh-&gt;{&lsquo;true&rsquo;}</li>
<li>variable name delimiter: $s = &ldquo;hello&rdquo;; print &ldquo;${s}goodbye&rdquo;;</li>
</ul>

<p><strong>python:</strong></p>

<p>Python blocks begin with a line that ends in a colon. The block ends with the
first line that is not indented further than the initial line. Python raises
an IndentationError if the statements in the block that are not in a nested
block are not all indented the same. Using tabs in Python source code is
unrecommended and many editors replace them automatically with spaces. If the
Python interpreter encounters a tab, it is treated as 8 spaces.</p>

<p>The python repl switches from a &gt;&gt;&gt; prompt to a … prompt inside a block. A
blank line terminates the block.</p>

<p><strong>ruby:</strong></p>

<p>Curly brackets {} delimit blocks. A matched curly bracket pair can be replaced
by the <code>do</code> and <code>end</code> keywords. By convention curly brackets are used for one
line blocks.</p>

<p>The <code>end</code> keyword also terminates blocks started by <code>def</code>, <code>class</code>, or
<code>module</code>.</p>

<p>Curly brackets are also used for hash literals, and the #{ } notation is used
to interpolate expressions into strings.</p>

<h2 id="assignment">assignment</h2>

<p>How to assign a value to a variable.</p>

<p><strong>perl:</strong></p>

<p>Assignment operators have right precedence and evaluate to the right argument,
so assignments can be chained:</p>

<pre><code>$a = $b = 3;
</code></pre>

<p><strong>python:</strong></p>

<p>If the variable on the left has not previously been defined in the current
scope, then it is created. This may hide a variable in a containing scope.</p>

<p>Assignment does not return a value and cannot be used in an expression. Thus,
assignment cannot be used in a conditional test, removing the possibility of
using assignment (=) in place of an equality test (==). Assignments can
nevertheless be chained to assign a value to multiple variables:</p>

<pre><code>a = b = 3
</code></pre>

<p><strong>ruby:</strong></p>

<p>Assignment operators have right precedence and evaluate to the right argument,
so they can be chained. If the variable on the left does not exist, then it is
created.</p>

<h2 id="parallel-assignment">parallel assignment</h2>

<p>How to assign values to variables in parallel.</p>

<p><strong>python:</strong></p>

<p>The r-value can be a list or tuple:</p>

<pre><code>nums = [1,2,3]
a,b,c = nums
more_nums = (6,7,8)
d,e,f = more_nums
</code></pre>

<p>Nested sequences of expression can be assigned to a nested sequences of
l-values, provided the nesting matches. This assignment will set a to 1, b to
2, and c to 3:</p>

<pre><code>(a,[b,c]) = [1,(2,3)]
</code></pre>

<p>This assignment will raise a <code>TypeError</code>:</p>

<pre><code>(a,(b,c)) = ((1,2),3)
</code></pre>

<p>In Python 3 the splat operator <code>*</code> can be used to collect the remaining right
side elements in a list:</p>

<pre><code>x, y, *z = 1, 2        # assigns [] to z
x, y, *z = 1, 2, 3     # assigns [3] to z
x, y, *z = 1, 2, 3, 4  # assigns [3, 4] to z
</code></pre>

<p><strong>ruby:</strong></p>

<p>The r-value can be an array:</p>

<pre><code>nums = [1,2,3]
a,b,c = nums
</code></pre>

<h2 id="swap">swap</h2>

<p>How to swap the values held by two variables.</p>

<h2 id="compound-assignment">compound assignment</h2>

<p>Compound assignment operators mutate a variable, setting it to the value of an
operation which takes the value of the variable as an argument.</p>

<p><em>First row:</em> arithmetic operator assignment: addition, subtraction,
multiplication, (float) division, integer division, modulus, and
exponentiation.<br />
<em>Second row:</em> string concatenation assignment and string replication
assignment<br />
<em>Third row:</em> logical operator assignment: and, or, xor<br />
<em>Fourth row:</em> bit operator assignment: left shift, right shift, and, or, xor.</p>

<p><strong>python:</strong></p>

<p>Python compound assignment operators do not return a value and hence cannot be
used in expressions.</p>

<h2 id="increment-and-decrement">increment and decrement</h2>

<p>The C-style increment and decrement operators can be used to increment or
decrement values. They return values and thus can be used in expressions. The
prefix versions return the value in the variable after mutation, and the
postfix version return the value before mutation.</p>

<p>Incrementing a value two or more times in an expression makes the order of
evaluation significant:</p>

<pre><code>x = 1;
foo(++x, ++x); // foo(2, 3) or foo(3, 2)?

x = 1;
y = ++x/++x;  // y = 2/3 or y = 3/2?
</code></pre>

<p>Python avoids the problem by not having an in-expression increment or
decrement.</p>

<p>Ruby mostly avoids the problem by providing a non-mutating increment and
decrement. However, here is a Ruby expression which is dependent on order of
evaluation:</p>

<pre><code>x = 1
y = (x += 1)/(x += 1)
</code></pre>

<p><strong>php:</strong></p>

<p>The increment and decrement operators also work on strings. There are postfix
versions of these operators which evaluate to the value before mutation:</p>

<pre><code>$x = 1;
$x++;
$x--;
</code></pre>

<p><strong>perl:</strong></p>

<p>The increment and decrement operators also work on strings. There are postfix
versions of these operators which evaluate to the value before mutation:</p>

<pre><code>$x = 1;
$x++;
$x--;
</code></pre>

<p><strong>ruby:</strong></p>

<p>The Integer class defines <em>succ</em> , <em>pred</em> , and <em>next</em> , which is a synonym
for <em>succ</em>.</p>

<p>The String class defines <em>succ</em> , <em>succ!</em> , <em>next</em> , and <em>next!</em>. <em>succ!</em> and
<em>next!</em> mutate the string.</p>

<h2 id="local-variable-declarations">local variable declarations</h2>

<p>How to declare variables which are local to the scope defining region which
immediately contain them.</p>

<p><strong>php:</strong></p>

<p>Variables do not need to be declared and there is no syntax for declaring a
local variable. If a variable with no previous reference is accessed, its
value is <em>NULL</em>.</p>

<p><strong>perl:</strong></p>

<p>Variables don&rsquo;t need to be declared unless <em>use strict</em> is in effect.</p>

<p>If not initialized, scalars are set to <em>undef</em> , arrays are set to an empty
array, and hashes are set to an empty hash.</p>

<p>Perl can also declare variables with <em>local</em>. These replace the value of a
global variable with the same name, if any, for the duration of the enclosing
scope, after which the old value is restored. <em>local</em> declarations became
obsolete with the introduction of the <em>my</em> declaration introduced in Perl 5.</p>

<p><strong>python:</strong></p>

<p>A variable is created by assignment if one does not already exist. If the
variable is inside a function or method, then its scope is the body of the
function or method. Otherwise it is a global.</p>

<p><strong>ruby:</strong></p>

<p>Variables are created by assignment. If the variable does not have a dollar
sign ($) or ampersand (@) as its first character then its scope is scope
defining region which most immediately contains it.</p>

<p>A lower case name can refer to a local variable or method. If both are
defined, the local variable takes precedence. To invoke the method make the
receiver explicit: e.g. self. <em>name</em>. However, outside of class and modules
local variables hide functions because functions are private methods in the
class <em>Object</em>. Assignment to <em>name</em> will create a local variable if one with
that name does not exist, even if there is a method <em>name</em>.</p>

<h2 id="regions-which-define-local-scope">regions which define local scope</h2>

<p>A list of regions which define a scope for the local variables they contain.</p>

<p>Local variables defined inside the region are only in scope while code within
the region is executing. If the language does not have closures, then code
outside the region has no access to local variables defined inside the region.
If the language does have closures, then code inside the region can make local
variables accessible to code outside the region by returning a reference.</p>

<p>A region which is <em>top level</em> hides local variables in the scope which
contains it from the code it contains. A region can also be top level if the
syntax requirements of the language prohibit it from being placed inside
another scope defining region.</p>

<p>A region is <em>nestable</em> if it can be placed inside another scope defining
region, and if code in the inner region can access local variables in the
outer region.</p>

<p><strong>php:</strong></p>

<p>Only function bodies and method bodies define scope. Function definitions can
be nested, but when this is done lexical variables in the outer function are
not visible to code in the body of the inner function.</p>

<p>Braces can be used to set off blocks of codes in a manner similar to the
anonymous blocks of Perl. However, these braces do not define a scope. Local
variables created inside the braces will be visible to subsequent code outside
of the braces.</p>

<p>Local variables cannot be created in class bodies.</p>

<p><strong>perl:</strong></p>

<p>A local variable can be defined outside of any function definition or
anonymous block, in which case the scope of the variable is the file
containing the source code. In this way Perl resembles Ruby and contrasts with
PHP and Python. In PHP and Python, any variable defined outside a function
definition is global.</p>

<p>In Perl, when a region which defines a scope is nested inside another, then
the inner region has read and write access to local variables defined in the
outer region.</p>

<p>Note that the blocks associated with the keywords <em>if</em> , <em>unless</em> , <em>while</em> ,
<em>until</em> , <em>for</em> , and <em>foreach</em> are anonymous blocks, and thus any <em>my</em>
declarations in them create variables local to the block.</p>

<p><strong>python:</strong></p>

<p>Only functions and methods define scope. Function definitions can be nested.
When this is done, inner scopes have read access to variables defined in outer
scopes. Attempting to write (i.e. assign) to a variable defined in an outer
scope will instead result in a variable getting created in the inner scope.
Python trivia question: what would happen if the following code were executed?</p>

<pre><code>def foo():
    v = 1
    def bar():
        print(v)
        v = 2
        print(v)
    bar()

foo()
</code></pre>

<p><strong>ruby:</strong></p>

<p>Note that though the keywords <em>if</em> , <em>unless</em> , <em>case</em> , <em>while</em> , and <em>until</em>
each define a block which is terminated by an <em>end</em> keyword, none of these
blocks have their own scope.</p>

<p>Anonymous functions can be created with the <em>lambda</em> keyword. Ruby anonymous
blocks can be provided after a function invocation and are bounded by curly
brackets { } or the <em>do</em> and <em>end</em> keywords. Both anonymous functions and
anonymous blocks can have parameters which are specified at the start of the
block within pipes. Here are some examples:</p>

<pre><code>id = lambda { |x| x }

[3,1,2,4].sort { |a,b| a &lt;=&gt; b }

10.times do |i|
  print &quot;#{i}...&quot; 
end
</code></pre>

<p>In Ruby 1.8, the scope of the parameter of an anonymous block or function or
block is local to the block or function body if the name is not already bound
to a variable in the containing scope. However, if it is, then the variable in
the containing scope will be used. This behavior was changed in Ruby 1.9 so
that parameters are always local to function body or block. Here is an example
of code which behaves differently under Ruby 1.8 and Ruby 1.9:</p>

<pre><code>x = 3
id = lambda { |x| x }
id.call(7)
puts x # 1.8 prints 7; 1.9 prints 3
</code></pre>

<p>Ruby 1.9 also adds the ability mark variables as local, even when they are
already defined in the containing scope. All such variables are listed inside
the parameter pipes, separated from the parameters by a semicolon:</p>

<pre><code>x = 3
noop = lambda { |; x| x = 15 } # bad syntax under 1.8
noop.call
# x is still 3
</code></pre>

<h2 id="global-variable">global variable</h2>

<p>How to declare and access a variable with global scope.</p>

<p><strong>php:</strong></p>

<p>A variable is global if it is used at the top level (i.e. outside any function
definition) or if it is declared inside a function with the <em>global</em> keyword.
A function must use the <em>global</em> keyword to access the global variable.</p>

<p><strong>perl:</strong></p>

<p>Undeclared variables, which are permitted unless <em>use strict</em> is in effect,
are global. If <em>use strict</em> is in effect, a global can be declared at the top
level of a package (i.e. outside any blocks or functions) with the <em>our</em>
keyword. A variable declared with <em>my</em> inside a function will hide a global
with the same name, if there is one.</p>

<p><strong>python:</strong></p>

<p>A variable is global if it is defined at the top level of a file (i.e. outside
any function definition). Although the variable is global, it must be imported
individually or be prefixed with the module name prefix to be accessed from
another file. To be accessed from inside a function or method it must be
declared with the <em>global</em> keyword.</p>

<p><strong>ruby:</strong></p>

<p>A variable is global if it starts with a dollar sign: $.</p>

<h2 id="constant-declaration">constant declaration</h2>

<p>How to declare a constant.</p>

<p><strong>php:</strong></p>

<p>A constant can be declared inside a class:</p>

<pre><code>class Math {
  const pi = 3.14;
}
</code></pre>

<p>Refer to a class constant like this:</p>

<pre><code>Math::pi
</code></pre>

<p><strong>ruby:</strong></p>

<p>Capitalized variables contain constants and class/module names. By convention,
constants are all caps and class/module names are camel case. The ruby
interpreter does not prevent modification of constants, it only gives a
warning. Capitalized variables are globally visible, but a full or relative
namespace name must be used to reach them: e.g. Math::PI.</p>

<h2 id="to-end-of-line-comment">to-end-of-line comment</h2>

<p>How to create a comment that ends at the next newline.</p>

<h2 id="comment-out-multiple-lines">comment out multiple lines</h2>

<p>How to comment out multiple lines.</p>

<p><strong>python:</strong></p>

<p>The triple single quote &ldquo;&rsquo; and triple double quote &ldquo;&rdquo;&rdquo; syntax is a syntax for
string literals.</p>

<h2 id="null">null</h2>

<p>The null literal.</p>

<h2 id="null-test">null test</h2>

<p>How to test if a variable contains null.</p>

<p><strong>php:</strong></p>

<p><em>$v == NULL</em> does not imply that <em>$v</em> is <em>NULL</em> , since any comparison between
<em>NULL</em> and a falsehood will return true. In particular, the following
comparisons are true:</p>

<pre><code>$v = NULL;
if ($v == NULL) { echo &quot;true&quot;; }

$v = 0;
if ($v == NULL) { echo &quot;sadly true&quot;; }

$v = '';
if ($v == NULL) { echo &quot;sadly true&quot;; }
</code></pre>

<p><strong>perl:</strong></p>

<p><em>$v == undef</em> does not imply that <em>$v</em> is <em>undef</em>. Any comparison between
<em>undef</em> and a falsehood will return true. The following comparisons are true:</p>

<pre><code>$v = undef;
if ($v == undef) { print &quot;true&quot;; }

$v = 0;
if ($v == undef) { print &quot;sadly true&quot;; }

$v = '';
if ($v == undef) { print &quot;sadly true&quot;; }
</code></pre>

<h2 id="undefined-variable-access">undefined variable access</h2>

<p>The result of attempting to access an undefined variable.</p>

<h2 id="undefined-test">undefined test</h2>

<p><strong>php:</strong></p>

<p>A test showing that <code>isset</code> is the logical negation of <code>is_null</code>.</p>

<p><strong>perl:</strong></p>

<p>Perl does not distinguish between unset variables and variables that have been
set to undef. In perl, calling defined($a) does not result in a error if $a is
undefined, even with the strict pragma.</p>

<h1 id="arithmetic-and-logic-footnotes">Arithmetic and Logic Footnotes</h1>

<h2 id="true-and-false">true and false</h2>

<p>Literals for the booleans.</p>

<p>These are the return values of the comparison operators.</p>

<p><strong>php:</strong></p>

<p>Any identifier which matches TRUE case-insensitive can be used for the TRUE
boolean. Similarly for FALSE.</p>

<p>In general, PHP variable names are case-sensitive, but function names are
case-insensitive.</p>

<p>When converted to a string for display purposes, TRUE renders as &ldquo;1&rdquo; and FALSE
as &ldquo;&rdquo;. The equality tests <code>TRUE == 1</code> and <code>FALSE == &quot;&quot;</code> evaluate as TRUE but
the equality tests <code>TRUE === 1</code> and <code>FALSE === &quot;&quot;</code> evaluate as FALSE.</p>

<h2 id="falsehoods">falsehoods</h2>

<p>Values which behave like the false boolean in a conditional context.</p>

<p>Examples of conditional contexts are the conditional clause of an <code>if</code>
statement and the test of a <code>while</code> loop.</p>

<p><strong>python:</strong></p>

<p>Whether a object evaluates to True or False in a boolean context can be
customized by implementing a <strong>nonzero</strong> (Python 2) or <strong>bool</strong> (Python 3)
instance method for the class.</p>

<h2 id="logical-operators">logical operators</h2>

<p>Logical and, or, and not.</p>

<p><strong>php, perl, ruby:</strong></p>

<p>&amp;&amp; and || have higher precedence than assignment, compound assignment, and the
ternary operator (?:), which have higher precedence than <em>and</em> and <em>or</em>.</p>

<h2 id="conditional-expression">conditional expression</h2>

<p>How to write a conditional expression. A ternary operator is an operator which
takes three arguments. Since</p>

<p><em>condition</em> ? <em>true value</em> : <em>false value</em></p>

<p>is the only ternary operator in C, it is unambiguous to refer to it as <em>the</em>
ternary operator.</p>

<p><strong>python:</strong></p>

<p>The Python conditional expression comes from Algol.</p>

<p><strong>ruby:</strong></p>

<p>The Ruby <code>if</code> statement is also an expression:</p>

<pre><code>x = if x &gt; 0
  x
else
  -x
end
</code></pre>

<h2 id="comparison-operators">comparison operators</h2>

<p>Equality, inequality, greater than, less than, greater than or equal, less
than or equal.</p>

<p>Also known as the relational operators.</p>

<p><strong>php:</strong></p>

<p>Most of the comparison operators will convert a string to a number if the
other operand is a number. Thus 0 == &ldquo;0&rdquo; is true. The operators === and !== do
not perform this conversion, so 0 === &ldquo;0&rdquo; is false.</p>

<p><strong>perl:</strong></p>

<p>The operators: == != &gt; &lt; &gt;= &lt;= convert strings to numbers before performing a
comparison. Many string evaluate as zero in a numeric context and are equal
according to the == operator. To perform a lexicographic string comparison,
use: <em>eq</em> , <em>ne</em> , <em>gt</em> , <em>lt</em> , <em>ge</em> , <em>le</em>.</p>

<p><strong>python:</strong></p>

<p>Comparison operators can be chained. The following expressions evaluate to
true:</p>

<pre><code>1 &lt; 2 &lt; 3
1 == 1 != 2
</code></pre>

<p>In general if <em>A i</em> are expressions and <em>op i</em> are comparison operators, then</p>

<p><code>A1 op1 A2 op2 A3 … An opn An+1</code></p>

<p>is true if and only if each of the following is true</p>

<p><code>A1 op1 A2</code><br />
<code>A2 op2 A3</code><br />
…<br />
<code>An opn An+1</code></p>

<h2 id="three-value-comparison">three value comparison</h2>

<p>Binary comparison operators which return -1, 0, or 1 depending upon whether
the left argument is less than, equal to, or greater than the right argument.</p>

<p>The <code>&lt;=&gt;</code> symbol is called the spaceship operator.</p>

<h2 id="convert-from-string-to-string">convert from string, to string</h2>

<p>How to convert string data to numeric data and vice versa.</p>

<p><strong>php:</strong></p>

<p>PHP converts a scalar to the desired type automatically and does not raise an
error if the string contains non-numeric data. If the start of the string is
not numeric, the string evaluates to zero in a numeric context.</p>

<p><strong>perl:</strong></p>

<p>Perl converts a scalar to the desired type automatically and does not raise an
error if the string contains non-numeric data. If the start of the string is
not numeric, the string evaluates to zero in a numeric context.</p>

<p><strong>python:</strong></p>

<p>float and int raise an error if called on a string and any part of the string
is not numeric.</p>

<p><strong>ruby:</strong></p>

<p>to_i and to_f always succeed on a string, returning the numeric value of the
digits at the start of the string, or zero if there are no initial digits.</p>

<h2 id="arithmetic-operators">arithmetic operators</h2>

<p>The operators for addition, subtraction, multiplication, float division,
integer division, modulus, and exponentiation.</p>

<h2 id="integer-division">integer division</h2>

<p>How to get the integer quotient of two integers. How to get the integer
quotient and remainder.</p>

<p><strong>perl:</strong></p>

<p>The <code>integer</code> pragma makes all arithmetic operations integer operations.
Floating point numbers are truncated before they are used. Hence integer
division could be performed with:</p>

<pre><code>use integer;
my $a = 7 / 3;
no integer;
</code></pre>

<h2 id="float-division">float division</h2>

<p>How to perform floating point division, even if the operands might be
integers.</p>

<h2 id="arithmetic-functions">arithmetic functions</h2>

<p>Some arithmetic functions. Trigonometric functions are in radians unless
otherwise noted. Logarithms are natural unless otherwise noted.</p>

<p><strong>python:</strong></p>

<p>Python also has <em>math.log10</em>. To compute the log of <em>x</em> for base <em>b</em> , use:</p>

<pre><code>math.log(x)/math.log(b)
</code></pre>

<p><strong>ruby:</strong></p>

<p>Ruby also has <em>Math.log2</em> , <em>Math.log10</em>. To compute the log of <em>x</em> for base
<em>b</em> , use</p>

<pre><code>Math.log(x)/Math.log(b)
</code></pre>

<h2 id="arithmetic-truncation">arithmetic truncation</h2>

<p>How to truncate a float to the nearest integer towards zero; how to round a
float to the nearest integer; how to find the nearest integer above a float;
how to find the nearest integer below a float; how to take the absolute value.</p>

<p><strong>perl:</strong></p>

<p>The CPAN module <code>Number::Format</code> provides a <code>round</code> function. The 2nd argument
specifies the number of digits to keep to the right of the radix. The default
is 2.</p>

<pre><code>use Number::Format 'round';

round(3.14, 0);
</code></pre>

<h2 id="min-and-max">min and max</h2>

<p>How to get the min and max.</p>

<h2 id="division-by-zero">division by zero</h2>

<p>What happens when division by zero is performed.</p>

<h2 id="integer-overflow">integer overflow</h2>

<p>What happens when the largest representable integer is exceeded.</p>

<h2 id="float-overflow">float overflow</h2>

<p>What happens when the largest representable float is exceeded.</p>

<h2 id="sqrt-2">sqrt -2</h2>

<p>The result of taking the square root of negative two.</p>

<h2 id="rational-numbers">rational numbers</h2>

<p>How to create rational numbers and get the numerator and denominator.</p>

<p><strong>ruby:</strong></p>

<p>Require the library <em>mathn</em> and integer division will yield rationals instead
of truncated integers.</p>

<h2 id="complex-numbers">complex numbers</h2>

<p><strong>python:</strong></p>

<p>Most of the functions in <em>math</em> have analogues in <em>cmath</em> which will work
correctly on complex numbers.</p>

<h2 id="random-integer-uniform-float-normal-float">random integer, uniform float, normal float</h2>

<p>How to generate a random integer between 0 and 99, include, float between zero
and one in a uniform distribution, or a float in a normal distribution with
mean zero and standard deviation one.</p>

<h2 id="set-random-seed-get-and-restore-seed">set random seed, get and restore seed</h2>

<p>How to set the random seed; how to get the current random seed and later
restore it.</p>

<p>All the languages in the sheet set the seed automatically to a value that is
difficult to predict. The Ruby 1.9 MRI interpreter uses the current time and
process ID, for example. As a result there is usually no need to set the seed.</p>

<p>Setting the seed to a hardcoded value yields a random but repeatable sequence
of numbers. This can be used to ensure that unit tests which cover code using
random numbers doesn&rsquo;t intermittently fail.</p>

<p>The seed is global state. If multiple functions are generating random numbers
then saving and restoring the seed may be necessary to produce a repeatable
sequence.</p>

<h2 id="bit-operators">bit operators</h2>

<p>The bit operators for left shift, right shift, and, inclusive or, exclusive
or, and negation.</p>

<h2 id="binary-octal-and-hex-literals">binary, octal, and hex literals</h2>

<p>Binary, octal, and hex integer literals</p>

<h2 id="base-conversion">base conversion</h2>

<p>How to convert integers to strings of digits of a given base. How to convert
such strings into integers.</p>

<p><strong>perl</strong></p>

<p>Perl has the functions <code>oct</code> and <code>hex</code> which convert strings encoded in octal
and hex and return the corresponding integer. The <code>oct</code> function will handle
binary or hex encoded strings if they have &ldquo;0b&rdquo; or &ldquo;0x&rdquo; prefixes.</p>

<pre><code>oct(&quot;60&quot;)
oct(&quot;060&quot;)
oct(&quot;0b101010&quot;)
oct(&quot;0x2a&quot;)

hex(&quot;2a&quot;)
hex(&quot;0x2a&quot;)
</code></pre>

<p><strong>python</strong></p>

<p>Python has the functions <code>bin</code>, <code>oct</code>, and <code>hex</code> which take an integer and
return a string encoding the integer in base 2, 8, and 16.</p>

<pre><code>bin(42)
oct(42)
hex(42)
</code></pre>

<h1 id="string-footnotes">String Footnotes</h1>

<h2 id="string-literal">string literal</h2>

<p>The syntax for string literals.</p>

<p><strong>perl:</strong></p>

<p>When <code>use strict</code> is not in effect bareword strings are permitted.</p>

<p>Barewords are strings without quote delimiters. They are a feature of shells.
Barewords cannot contain whitespace or any other character used by the
tokenizer to distinguish words.</p>

<p>Before Perl 5 subroutines were invoked with an ampersand prefix &amp; or the older
<code>do</code> keyword. With Perl 5 neither is required, but this made it impossible to
distinguish a bareword string from a subroutine without knowing all the
subroutines which are in scope.</p>

<p>The following code illustrates the bareword ambiguity:</p>

<pre><code>no strict;

print rich . &quot;\n&quot;;  # prints &quot;rich&quot;; rich is a bareword string

sub rich { return &quot;poor&quot; }

print rich . &quot;\n&quot;;  # prints &quot;poor&quot;; rich is now a subroutine
</code></pre>

<h2 id="newline-in-literal">newline in literal</h2>

<p>Whether newlines are permitted in string literals.</p>

<p><strong>python:</strong></p>

<p>Newlines are not permitted in single quote and double quote string literals. A
string can continue onto the following line if the last character on the line
is a backslash. In this case, neither the backslash nor the newline are taken
to be part of the string.</p>

<p>Triple quote literals, which are string literals terminated by three single
quotes or three double quotes, can contain newlines:</p>

<pre><code>'''This is
two lines'''

&quot;&quot;&quot;This is also
two lines&quot;&quot;&quot;
</code></pre>

<h2 id="backslash-escapes">backslash escapes</h2>

<p>Backslash escape sequences for inserting special characters into string
literals.</p>

<p><strong>python:</strong></p>

<p>When string literals have an <code>r</code> or <code>R</code> prefix there are no backslash escape
sequences and any backslashes thus appear in the created string. The delimiter
can be inserted into a string if it is preceded by a backslash, but the
backslash is also inserted. It is thus not possible to create a string with an
<code>r</code> or <code>R</code> prefix that ends in a backslash. The <code>r</code> and <code>R</code> prefixes can be
used with single or double quotes:</p>

<pre><code>r'C:\Documents and Settings\Admin'
r&quot;C:\Windows\System32&quot;
</code></pre>

<p>The \u <em>hhhh</em> escapes are also available inside Python 2 Unicode literals.
Unicode literals have a <em>u</em> prefiix:</p>

<pre><code>u'lambda: \u03bb'
</code></pre>

<h2 id="variable-interpolation">variable interpolation</h2>

<p>How to interpolate variables into strings.</p>

<p><strong>python:</strong></p>

<p><code>str.format</code> will take named or positional parameters. When used with named
parameters <code>str.format</code> can mimic the variable interpolation feature of the
other languages.</p>

<p>A selection of variables in scope can be passed explicitly:</p>

<pre><code>count = 3
item = 'ball'
print('{count} {item}s'.format(
  count=count,
  item=item))
</code></pre>

<p>Python 3 has <code>format_map</code> which accepts a <code>dict</code> as an argument:</p>

<pre><code>count = 3
item = 'ball'
print('{count} {item}s'.format_map(locals()))
</code></pre>

<h2 id="custom-delimiters">custom delimiters</h2>

<p>How to specify custom delimiters for single and double quoted strings. These
can be used to avoid backslash escaping. If the left delimiter is (, [, or {
the right delimiter must be ), ], or }, respectively.</p>

<h2 id="sprintf">sprintf</h2>

<p>How to create a string using a printf style format.</p>

<p><strong>python:</strong></p>

<p>The % operator will interpolate arguments into printf-style format strings.</p>

<p>The <code>str.format</code> with positional parameters provides an alternative format
using curly braces {0}, {1}, … for replacement fields.</p>

<p>The curly braces are escaped by doubling:</p>

<pre><code>'to insert parameter {0} into a format, use {{{0}}}'.format(3)
</code></pre>

<p>If the replacement fields appear in sequential order and aren&rsquo;t repeated, the
numbers can be omitted:</p>

<pre><code>'lorem {} {} {}'.format('ipsum', 13, 3.7)
</code></pre>

<h2 id="here-document">here document</h2>

<p>Here documents are strings terminated by a custom identifier. They perform
variable substitution and honor the same backslash escapes as double quoted
strings.</p>

<p><strong>perl:</strong></p>

<p>Put the custom identifer in single quotes to prevent variable interpolation
and backslash escape interpretation:</p>

<pre><code>s = &lt;
</code></pre>

<p><strong>python:</strong></p>

<p>Python lacks variable interpolation in strings. Triple quotes honor the same
backslash escape sequences as regular quotes, so triple quotes can otherwise
be used like here documents:</p>

<pre><code>s = '''here document
there computer
'''
</code></pre>

<p><strong>ruby:</strong></p>

<p>Put the customer identifier in single quotes to prevent variable interpolation
and backslash escape interpretation:</p>

<pre><code>s = &lt;
</code></pre>

<h2 id="concatenate">concatenate</h2>

<p>The string concatenation operator.</p>

<h2 id="replicate">replicate</h2>

<p>The string replication operator.</p>

<h2 id="split-in-two-with-delimiters-into-characters">split, in two, with delimiters, into characters</h2>

<p>How to split a string containing a separator into an array of substrings; how
to split a string in two; how to split a string with the delimiters preserved
as separate elements; how to split a string into an array of single character
strings.</p>

<p><strong>python:</strong></p>

<p><code>str.split()</code> takes simple strings as delimiters; use <code>re.split()</code> to split on
a regular expression:</p>

<pre><code>re.split('\s+', 'do re mi fa')
re.split('\s+', 'do re mi fa', 1)
</code></pre>

<h2 id="join">join</h2>

<p>How to concatenate the elements of an array into a string with a separator.</p>

<h2 id="case-manipulation">case manipulation</h2>

<p>How to put a string into all caps or all lower case letters. How to capitalize
the first letter of a string.</p>

<h2 id="strip">strip</h2>

<p>How to remove whitespace from the ends of a string.</p>

<h2 id="pad-on-right-on-left">pad on right, on left</h2>

<p>How to pad the edge of a string with spaces so that it is a prescribed length.</p>

<h2 id="length">length</h2>

<p>How to get the length in characters of a string.</p>

<h2 id="index-of-substring">index of substring</h2>

<p>How to find the index of the leftmost occurrence of a substring in a string;
how to find the index of the rightmost occurrence.</p>

<p><strong>python:</strong></p>

<p>Methods for splitting a string into three parts using the first or last
occurrence of a substring:</p>

<pre><code>'do re re mi'.partition('re')     # returns ('do ', 're', ' re mi')
'do re re mi'.rpartition('re')    # returns ('do re ', 're', ' mi')
</code></pre>

<h2 id="extract-substring">extract substring</h2>

<p>How to extract a substring from a string by index.</p>

<h2 id="extract-character">extract character</h2>

<p>How to extract a character from a string by its index.</p>

<h2 id="chr-and-ord">chr and ord</h2>

<p>Converting characters to ASCII codes and back.</p>

<p>The languages in this reference sheet do not have character literals, so
characters are represented by strings of length one.</p>

<h2 id="character-translation">character translation</h2>

<p>How to apply a character mapping to a string.</p>

<h1 id="regular-expressions">Regular Expressions</h1>

<ul>
<li>PHP PCRE Regexes</li>
<li>perlre and perlreref</li>
<li>Python re library: 2.7, 3.1</li>
<li>Ruby Regexp</li>
</ul>

<p>Regular expressions or regexes are a way of specifying sets of strings. If a
string belongs to the set, the string and regex &ldquo;match&rdquo;. Regexes can also be
used to parse strings.</p>

<p>The modern notation for regexes was introduced by Unix command line tools in
the 1970s. POSIX standardized the notation into two types: extended regexes
and the more archaic basic regexes. Perl regexes are extended regexes
augmented by new character class abbreviations and a few other features
introduced by the Perl interpreter in the 1990s. All the languages in this
sheet use Perl regexes.</p>

<p>Any string that doesn&rsquo;t contain regex metacharacters is a regex which matches
itself. The regex metacharacters are: <code>[ ] . | ( ) * + ? { } ^ $ \</code></p>

<p><strong>character classes: [ ] .</strong></p>

<p>A character class is a set of characters in brackets: [ ]. When used in a
regex it matches any character it contains.</p>

<p>Character classes have their own set of metacharacters: ^ - \ ]</p>

<p>The ^ is only special when it the first character in the character class. Such
a character class matches its complement; that is, any character not inside
the brackets. When not the first character the ^ refers to itself.</p>

<p>The hypen is used to specify character ranges: e.g. 0-9 or A-Z. When the
hyphen is first or last inside the brackets it matches itself.</p>

<p>The backslash can be used to escape the above characters or the terminal
character class delimiter: ]. It can be used in character class abbreviations
or string backslash escapes.</p>

<p>The period . is a character class abbreviation which matches any character
except for newline. In all languages the period can be made to match all
characters. In PHP and Perl use the <code>m</code> modifer. In Python use the <code>re.M</code>
flag. In Ruby use the <code>s</code> modifer.</p>

<p><strong>character class abbreviations:</strong></p>

<table>
<thead>
<tr>
<th>abbrev</th>
<th>name</th>
<th>character class</th>
</tr>
</thead>

<tbody>
<tr>
<td>\d</td>
<td>digit</td>
<td>[0-9]</td>
</tr>

<tr>
<td>\D</td>
<td>nondigit</td>
<td>[^0-9]</td>
</tr>

<tr>
<td>\h</td>
<td><em>PHP, Perl:</em> horizontal whitespace character</td>
<td></td>
</tr>

<tr>
<td><em>Ruby:</em> hex digit</td>
<td><em>PHP, Perl:</em> [ \t]</td>
<td></td>
</tr>
</tbody>
</table>

<p><em>Ruby:</em> [0-9a-fA-F]<br />
\H |  <em>PHP, Perl:</em> not a horizontal whitespace character<br />
<em>Ruby:</em> not a hex digit |  <em>PHP, Perl:</em> [^ \t]<br />
<em>Ruby:</em> [^0-9a-fA-F]<br />
\s |  whitespace character |  [ \t\r\n\f]<br />
\S |  non whitespace character |  [^ \t\r\n\f]<br />
\v |  vertical whitespace character |  [\r\n\f]<br />
\V |  not a vertical whitespace character |  [^\r\n\f]<br />
\w |  word character |  [A-Za-z0-9<em>]<br />
\W |  non word character |  [^A-Za-z0-9</em>]</p>

<p><strong>alternation and grouping: | ( )</strong></p>

<p>The vertical pipe | is used for alternation and parens () for grouping.</p>

<p>A vertical pipe takes as its arguments everything up to the next vertical
pipe, enclosing paren, or end of string.</p>

<p>Parentheses control the scope of alternation and the quantifiers described
below. The are also used for capturing groups, which are the substrings which
matched parenthesized parts of the regular expression. Each language numbers
the groups and provides a mechanism for extracting when a match is made. A
parenthesized subexpression can be removed from the groups with this syntax:
<code>(?: _expr_ )</code></p>

<p><strong>quantifiers: * + ? { }</strong></p>

<p>As an argument quantifiers take the preceding regular character, character
class, or group. The argument can itself be quantified, so that <code>^a{4}*$</code>
matches strings with the letter a in multiples of 4.</p>

<table>
<thead>
<tr>
<th>quantifier</th>
<th># of occurrences of argument matched</th>
</tr>
</thead>

<tbody>
<tr>
<td>*</td>
<td>zero or more, greedy</td>
</tr>

<tr>
<td>+</td>
<td>one or more, greedy</td>
</tr>

<tr>
<td>?</td>
<td>zero or one, greedy</td>
</tr>

<tr>
<td>{m,n}</td>
<td><em>m</em> to <em>n</em> , greedy</td>
</tr>

<tr>
<td>{n}</td>
<td>exactly <em>n</em></td>
</tr>

<tr>
<td>{m,}</td>
<td><em>m</em> or more, greedy</td>
</tr>

<tr>
<td>{,n}</td>
<td>zero to <em>n</em> , greedy</td>
</tr>

<tr>
<td>*?</td>
<td>zero or more, lazy</td>
</tr>

<tr>
<td>+?</td>
<td>one or more, lazy</td>
</tr>

<tr>
<td>{m,n}?</td>
<td><em>m</em> to <em>n</em> , lazy</td>
</tr>

<tr>
<td>{m,}?</td>
<td><em>m</em> or more, lazy</td>
</tr>

<tr>
<td>{,n}?</td>
<td>zero to <em>n</em> , lazy</td>
</tr>
</tbody>
</table>

<p>When there is a choice, greedy quantifiers will match the maximum possible
number of occurrences of the argument. Lazy quantifiers match the minimum
possible number.</p>

<p><strong>anchors: ^ $</strong></p>

<table>
<thead>
<tr>
<th>anchor</th>
<th>matches</th>
</tr>
</thead>

<tbody>
<tr>
<td>^</td>
<td>beginning of a string. In Ruby or when <em>m</em> modifier is used also matches</td>
</tr>
</tbody>
</table>

<p>right side of a newline<br />
$ |  end of a string. In Ruby or when <em>m</em> modifier is used also matches left
side of a newline<br />
\A |  beginning of the string<br />
\b |  word boundary. In between a \w and a \W character or in between a \w
character and the edge of the string<br />
\B |  not a word boundary. In between two \w characters or two \W characters<br />
\z |  end of the string<br />
\Z |  end of the string unless it is a newline, in which case it matches the
left side of the terminal newline</p>

<p>*<em>escaping: *</em></p>

<p>To match a metacharacter, put a backslash in front of it. To match a backslash
use two backslashes.</p>

<p><strong>php:</strong></p>

<p>PHP 5.3 still supports the EREG engine, though the functions which use it are
deprecated. These include the <code>split</code> function and functions which start with
<code>ereg</code>. The preferred functions are <code>preg_split</code> and the other functions with
a <code>preg</code> prefix.</p>

<h2 id="literal-custom-delimited-literal">literal, custom delimited literal</h2>

<p>The literal for a regular expression; the literal for a regular expression
with a custom delimiter.</p>

<p><strong>php:</strong></p>

<p>PHP regex literals are strings. The first character is the delimiter and it
must also be the last character. If the start delimiter is (, {, or [ the end
delimiter must be ), }, or ], respectively.</p>

<p>Here are the signatures from the PHP manual for the preg functions used in
this sheet:</p>

<pre><code>array preg_split ( string $pattern , string $subject [, int $limit = -1 [, int $flags = 0 ]] )

int preg_match ( string $pattern , string $subject [, array &amp;$matches [, int $flags = 0 [, int $offset = 0 ]]] )

mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &amp;$count ]] )

int preg_match_all ( string $pattern , string $subject [, array &amp;$matches [, int $flags = PREG_PATTERN_ORDER [, int $offset = 0 ]]] )
</code></pre>

<p><strong>python:</strong></p>

<p>Python does not have a regex literal, but the <code>re.compile</code> function can be
used to create regex objects.</p>

<p>Compiling regexes can always be avoided:</p>

<pre><code>re.compile('\d{4}').search('1999')
re.search('\d{4}', '1999')

re.compile('foo').sub('bar', 'foo bar')
re.sub('foo', 'bar', 'foo bar')

re.compile('\w+').findall('do re me')
re.findall('\w+', 'do re me')
</code></pre>

<h2 id="character-class-abbreviations-and-anchors">character class abbreviations and anchors</h2>

<p>The supported character class abbreviations and anchors.</p>

<p>Note that <code>\h</code> refers to horizontal whitespace (i.e. a space or tab) in PHP
and Perl and a hex digit in Ruby. Similarly <code>\H</code> refers to something that
isn&rsquo;t horizontal whitespace in PHP and Perl and isn&rsquo;t a hex digit in Ruby.</p>

<h2 id="match-test">match test</h2>

<p>How to test whether a string matches a regular expression.</p>

<p><strong>python:</strong></p>

<p>The <code>re.match</code> function is like the <code>re.search</code> function, except that it is
only true if the regular expression matches the entire string.</p>

<p><strong>ruby:</strong></p>

<p><code>match</code> is a method of both <code>Regexp</code> and <code>String</code> so can match with both</p>

<pre><code>/1999/.match(&quot;1999&quot;)
</code></pre>

<p>and</p>

<pre><code>&quot;1999&quot;.match(/1999/)
</code></pre>

<p>When variables are involved it is safer to invoke the <code>Regexp</code> method because
string variables are more likely to contain <code>nil</code>.</p>

<h2 id="case-insensitive-match-test">case insensitive match test</h2>

<p>How to perform a case insensitive match test.</p>

<h2 id="modifiers">modifiers</h2>

<p>Modifiers that can be used to adjust the behavior of a regular expression.</p>

<p>The lists are not comprehensive. For all languages except Ruby there are
additional modifiers.</p>

<table>
<thead>
<tr>
<th>modifier</th>
<th>behavior</th>
</tr>
</thead>

<tbody>
<tr>
<td>e</td>
<td><em>PHP:</em> when used with preg_replace, the replacement string, after</td>
</tr>
</tbody>
</table>

<p>backreferences are substituted, is eval&rsquo;ed as PHP code and the result is used
as the replacement.<br />
i, re.I |  <em>all:</em> ignores case. Upper case letters match lower case letters
and vice versa.<br />
m, re.M |  <em>PHP, Perl, Python:</em> makes the ^ and $ match the right and left
edge of newlines in addition to the beginning and end of the string.<br />
<em>Ruby:</em> makes the period . match newline characters.<br />
o |  <em>Ruby:</em> performs variable interpolation #{ } only once per execution of
the program.<br />
p |  <em>Perl:</em> sets ${^MATCH} ${^PREMATCH} and ${^POSTMATCH}<br />
s, re.S |  <em>PHP, Perl, Python:</em> makes the period . match newline characters.<br />
x, re.X |  <em>all:</em> ignores whitespace in the regex which permits it to be used
for formatting.</p>

<p>Python modifiers are bit flags. To use more than one flag at the same time,
join them with bit or: |</p>

<h2 id="substitution">substitution</h2>

<p>How to replace all occurrences of a matching pattern in a string with the
provided substitution string.</p>

<p><strong>php:</strong></p>

<p>The number of occurrences replaced can be controlled with a 4th argument to
<code>preg_replace</code>:</p>

<pre><code>$s = &quot;foo bar bar&quot;;
preg_replace('/bar/', &quot;baz&quot;, $s, 1);
</code></pre>

<p>If no 4th argument is provided, all occurrences are replaced.</p>

<p><strong>perl:</strong></p>

<p>The <code>=~</code> operator performs the substitution in place on the string and returns
the number of substitutions performed.</p>

<p>The <code>g</code> modifiers specifies that all occurrences should be replaced. If
omitted, only the first occurrence is replaced.</p>

<p><strong>python:</strong></p>

<p>The 3rd argument to <code>sub</code> controls the number of occurrences which are
replaced.</p>

<pre><code>s = 'foo bar bar'
re.compile('bar').sub('baz', s, 1)
</code></pre>

<p>If there is no 3rd argument, all occurrences are replaced.</p>

<p><strong>ruby:</strong></p>

<p>The <em>gsub</em> operator returns a copy of the string with the substitution made,
if any. The <em>gsub!</em> performs the substitution on the original string and
returns the modified string.</p>

<p>The <em>sub</em> and <em>sub!</em> operators only replace the first occurrence of the match
pattern.</p>

<h2 id="match-prematch-postmatch">match, prematch, postmatch</h2>

<p>How to get the substring that matched the regular expression, as well as the
part of the string before and after the matching substring.</p>

<p><strong>perl:</strong></p>

<p>The special variables <code>$&amp;</code>, <code>$</code><code>, and</code>$&rsquo;` also contain the match, prematch,
and postmatch.</p>

<p><strong>ruby:</strong></p>

<p>The special variables <code>$&amp;</code>, <code>$</code><code>, and</code>$&rsquo;` also contain the match, prematch,
and postmatch.</p>

<h2 id="group-capture">group capture</h2>

<p>How to get the substrings which matched the parenthesized parts of a regular
expression.</p>

<p><strong>ruby:</strong></p>

<p>Ruby has syntax for extracting a group from a match in a single expression.
The following evaluates to &ldquo;1999&rdquo;:</p>

<pre><code>&quot;1999-07-08&quot;[/(\d{4})-(\d{2})-(\d{2})/, 1]
</code></pre>

<h2 id="scan">scan</h2>

<p>How to return all non-overlapping substrings which match a regular expression
as an array.</p>

<h2 id="backreference-in-match-and-substitution">backreference in match and substitution</h2>

<p>How to use backreferences in a regex; how to use backreferences in the
replacement string of substitution.</p>

<h2 id="recursive-regex">recursive regex</h2>

<p>Examples of recursive regexes.</p>

<p>The examples match substrings containing balanced parens.</p>

<h1 id="date-and-time-footnotes">Date and Time Footnotes</h1>

<p>In ISO 8601 terminology, a <em>date</em> specifies a day in the Gregorian calendar
and a <em>time</em> does not contain date information; it merely specifies a time of
day. A data type which combines both date and time information is probably
more useful than one which contains just date information or just time
information; it is unfortunate that ISO 8601 doesn&rsquo;t provide a name for this
entity. The word <em>timestamp</em> often gets used to denote a combined date and
time. PHP and Python use the compound noun <em>datetime</em> for combined date and
time values.</p>

<p>An useful property of ISO 8601 dates, times, and date/time combinations is
that they are correctly ordered by a lexical sort on their string
representations. This is because they are big-endian (the year is the leftmost
element) and they used fixed-length fields for each term in the string
representation.</p>

<p>The C standard library provides two methods for representing dates. The first
is the UNIX epoch, which is the seconds since January 1, 1970 in UTC. If such
a time were stored in a 32-bit signed integer, the rollover would happen on
January 18, 2038.</p>

<p>The other method of representing dates is the <code>tm</code> struct, a definition of
which can be found on Unix systems in <code>/usr/include/time.h</code>:</p>

<pre><code>struct tm {
        int     tm_sec;         /* seconds after the minute [0-60] */
        int     tm_min;         /* minutes after the hour [0-59] */
        int     tm_hour;        /* hours since midnight [0-23] */
        int     tm_mday;        /* day of the month [1-31] */
        int     tm_mon;         /* months since January [0-11] */
        int     tm_year;        /* years since 1900 */
        int     tm_wday;        /* days since Sunday [0-6] */
        int     tm_yday;        /* days since January 1 [0-365] */
        int     tm_isdst;       /* Daylight Savings Time flag */
        long    tm_gmtoff;      /* offset from CUT in seconds */
        char    *tm_zone;       /* timezone abbreviation */
};
</code></pre>

<p>Perl and Python both use and expose the <code>tm</code> struct of the standard library.
In the case of Perl, the first nine values of the struct (up to the member
<code>tm_isdst</code>) are put into an array. Python, meanwhile, has a module called
<code>time</code> which is a thin wrapper to the standard library functions which operate
on this struct. Here is how get a <code>tm</code>struct in Python:</p>

<pre><code>import time

utc = time.gmtime(time.time())
t = time.localtime(time.time())
</code></pre>

<p>The <code>tm</code> struct is a low level entity, and interacting with it directly should
be avoided. In the case of Python it is usually sufficient to use the
<code>datetime</code> module instead. For Perl, one can use the <code>Time::Piece</code> module to
wrap the <code>tm</code> struct in an object.</p>

<h2 id="date-time-type">date/time type</h2>

<p>The data type used to hold a combined date and time.</p>

<p><strong>perl</strong></p>

<p>Built in Perl functions work with either (1) scalars containing the Unix epoch
as an integer or (2) arrays containing the first nine values of the standard C
library tm struct. When <code>use Time::Piece</code> is in effect functions which work
with tm arrays are replaced with variant that work with the <code>Time::Piece</code>
wrapper.</p>

<p>The modules <code>Time::Local</code> and <code>Date::Parse</code> can create scalars containing the
Unix epoch.</p>

<p>CPAN provides the <code>DateTime</code> module which provides objects with functionality
comparable to the DateTime objects of PHP and Python.</p>

<h2 id="current-date-time">current date/time</h2>

<p>How to get the combined date and time for the present moment in both local
time and UTC.</p>

<h2 id="to-unix-epoch-from-unix-epoch">to unix epoch, from unix epoch</h2>

<p>How to convert the native date/time type to the Unix epoch which is the number
of seconds since the start of January 1, 1970 UTC.</p>

<h2 id="current-unix-epoch">current unix epoch</h2>

<p>How to get the current time as a Unix epoch timestamp.</p>

<h2 id="strftime">strftime</h2>

<p>How to format a date/time as a string using the format notation of the
<em>strftime</em> function from the standard C library. This same format notation is
used by the Unix <em>date</em> command.</p>

<p><strong>php:</strong></p>

<p>PHP supports strftime but it also has its own time formatting system used by
<code>date</code>, <code>DateTime::format</code>, and <code>DateTime::createFromFormat</code>. The letters used
in the PHP time formatting system are described here.</p>

<h2 id="default-format-example">default format example</h2>

<p>Examples of how a date/time object appears when treated as a string such as
when it is printed to standard out.</p>

<p>The formats are in all likelihood locale dependent. The provided examples come
from a machine running Mac OS X in the Pacific time zone of the USA.</p>

<p><strong>php:</strong></p>

<p>It is a fatal error to treat a DateTime object as a string.</p>

<h2 id="strptime">strptime</h2>

<p>How to parse a date/time using the format notation of the <code>strptime</code> function
from the standard C library.</p>

<h2 id="parse-date-w-o-format">parse date w/o format</h2>

<p>How to parse a date without providing a format string.</p>

<h2 id="result-date-subtraction">result date subtraction</h2>

<p>The data type that results when subtraction is performed on two combined date
and time values.</p>

<h2 id="add-time-duration">add time duration</h2>

<p>How to add a time duration to a date/time.</p>

<p>A time duration can easily be added to a date/time value when the value is a
Unix epoch value.</p>

<p>ISO 8601 distinguishes between a time interval, which is defined by two
date/time endpoints, and a duration, which is the length of a time interval
and can be defined by a unit of time such as &lsquo;10 minutes&rsquo;. A time interval can
also be defined by date and time representing the start of the interval and a
duration.</p>

<p>ISO 8601 defines notation for durations. This notation starts with a &lsquo;P&rsquo; and
uses a &rsquo;T&rsquo; to separate the day and larger units from the hour and smaller
units. Observing the location relative to the &rsquo;T&rsquo; is important for
interpreting the letter &rsquo;M&rsquo;, which is used for both months and minutes.</p>

<h2 id="local-timezone">local timezone</h2>

<p>Do date/time values include timezone information. When a date/time value for
the local time is created, how the local timezone is determined.</p>

<p>A date/time value can represent a local time but not have any timezone
information associated with it.</p>

<p>On Unix systems processes determine the local timezone by inspecting the file
<code>/etc/localtime</code>.</p>

<p><strong>php:</strong></p>

<p>The default timezone can also be set in the <code>php.ini</code> file.</p>

<pre><code>date.timezone = &quot;America/Los_Angeles&quot;
</code></pre>

<p>Here is the list of timezones supported by PHP.</p>

<h2 id="timezone-name-offset-from-utc-is-daylight-savings">timezone name, offset from UTC, is daylight savings?</h2>

<p>How to get time zone information: the name of the timezone, the offset in
hours from UTC, and whether the timezone is currently in daylight savings.</p>

<p>Timezones are often identified by three or four letter abbreviations. As can
be seen from the list, many of the abbreviations do not uniquely identify a
timezone. Furthermore many of the timezones have been altered in the past. The
Olson database (aka Tz database) decomposes the world into zones in which the
local clocks have all been set to the same time since 1970 and it gives these
zones unique names.</p>

<p><strong>perl:</strong></p>

<p>It is not necessary to create a DateTime object to get the local timezone
offset:</p>

<pre><code>use Time::Piece;

$t = localtime(time);
$offset_hrs = $t-&gt;tzoffset / 3600;
</code></pre>

<p><strong>ruby:</strong></p>

<p>The <code>Time</code> class has a <code>zone</code> method which returns the time zone abbreviation
for the object. There is a <code>tzinfo</code> gem which can be used to create timezone
objects using the Olson database name. This can in turn be used to convert
between UTC times and local times which are daylight saving aware.</p>

<h2 id="microseconds">microseconds</h2>

<p>How to get the microseconds component of a combined date and time value. The
SI abbreviations for milliseconds and microseconds are <code>ms</code> and <code>μs</code>,
respectively. The C standard library uses the letter <code>u</code> as an abbreviation
for <code>micro</code>. Here is a struct defined in <code>/usr/include/sys/time.h</code>:</p>

<pre><code>struct timeval {
  time_t       tv_sec;   /* seconds since Jan. 1, 1970 */
  suseconds_t  tv_usec;  /* and microseconds */
};
</code></pre>

<h2 id="sleep">sleep</h2>

<p>How to put the process to sleep for a specified number of seconds. In Python
and Ruby the default version of <code>sleep</code> supports a fractional number of
seconds.</p>

<p><strong>php:</strong></p>

<p>PHP provides <code>usleep</code> which takes an argument in microseconds:</p>

<pre><code>usleep(500000);
</code></pre>

<p><strong>perl:</strong></p>

<p>The Perl standard library includes a version of <code>sleep</code> which supports
fractional seconds:</p>

<pre><code>use Time::HiRes qw(sleep);

sleep 0.5;
</code></pre>

<h2 id="timeout">timeout</h2>

<p>How to cause a process to timeout if it takes too long.</p>

<p>Techniques relying on SIGALRM only work on Unix systems.</p>

<h1 id="array-footnotes">Array Footnotes</h1>

<p>What the languages call their basic container types:</p>

<p>|  php |  perl |  python |  ruby<br />
&mdash;|&mdash;|&mdash;|&mdash;|&mdash;<br />
array |  array</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a></li>
        
        <li><a href="/posts/051rubyonrails%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%981hellorails/">051RubyonRails學習筆記1Hellorails</a></li>
        
        <li><a href="/posts/053rubyonrails%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%986%E9%87%8D%E6%A7%8B%E5%88%AA%E9%99%A4%E7%95%99%E8%A8%80%E5%AE%89%E5%85%A8/">053RubyonRails學習筆記6重構刪除留言安全</a></li>
        
        <li><a href="/posts/055rubyonrails%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%987carrierwaveimplementation/">055RubyonRails學習筆記7CarrierwaveImplementation</a></li>
        
        <li><a href="/posts/065rubyonrails%E7%AD%86%E8%A8%9810showtargetinfoongooglemaps/">065Rubyonrails筆記10showtargetinfoongooglemaps</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/ruby'>ruby</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>