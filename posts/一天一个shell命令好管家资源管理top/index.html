<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>一天一个shell命令好管家资源管理top | 开发者问答集锦</title>
    <meta property="og:title" content="一天一个shell命令好管家资源管理top - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="一天一个shell命令好管家资源管理top">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/%E4%B8%80%E5%A4%A9%E4%B8%80%E4%B8%AAshell%E5%91%BD%E4%BB%A4%E5%A5%BD%E7%AE%A1%E5%AE%B6%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86top/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">一天一个shell命令好管家资源管理top</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<hr />

<p>**如若发现博文任何错误，敬请指正。赠人玫瑰，手留余香。 **</p>

<p><strong>说明</strong></p>

<p>top 是一个即时打印系统综合信息的一个命令，非常实用，重要。这个命令本身非常简单，但他传达的信息量非常巨大</p>

<p><strong>实例</strong></p>

<ol>
<li>$top</li>
</ol>

<p>如图：</p>

<hr />

<p><strong>讲解</strong> ：</p>

<p>第一行-任务队列信息：<br />
该行相当于命令uptime</p>

<h2 id="top-15-20-19-up-4-35-1-user-load-average-0-17-0-12-0-13">top - 15:20:19 up 4:35, 1 user, load average: 0.17, 0.12, 0.13</h2>

<table>
<thead>
<tr>
<th>15:20:19</th>
<th>当前时间</th>
</tr>
</thead>

<tbody>
<tr>
<td>up 4:35</td>
<td>系统运行时长</td>
</tr>

<tr>
<td>1 user</td>
<td>当前多少用户登录</td>
</tr>

<tr>
<td>load average: 0.17, 0.12, 0.13</td>
<td>load average: 0.17, 0.12, 0.13。</td>
</tr>
</tbody>
</table>

<p>这三个值分别是1分钟，3分钟，15分钟到现在的平均负载。 （这意味着，如果第三个值很大的话，你的系统需要查看下是否出了问题）</p>

<p>第二行和第三行均为CPU信息:</p>

<p>Tasks: 144 total, 1 running, 141 sleeping, 1 stopped, 1 zombie</p>

<h2 id="cpu-s-0-0-us-0-3-sy-0-0-ni-99-7-id-0-0-wa-0-0-hi-0-0-si-0-0-st">Cpu(s): 0.0%us, 0.3%sy, 0.0%ni, 99.7%id, 0.0%wa, 0.0%hi, 0.0%si, 0.0%st</h2>

<table>
<thead>
<tr>
<th><strong>Tasks</strong></th>
<th>全称</th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>144 total</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>进程总数</p>

<p>1 running, |  | 正在运行的进程数<br />
141 sleeping, |  | 睡眠的进程数<br />
1 stopped |  | 停止的进程数<br />
1 zombie |  |</p>

<p>僵尸进程(一个早已死亡的进程，但在进程表(processs table)中仍占了一个位置(slot)。</p>

<p>)</p>

<p><strong>Cpu(s)</strong> |  |<br />
0.0% us, |</p>

<p>User CPU time</p>

<p>|</p>

<p>运行没有标明优先级的用户进程占用CPU时间的百分比</p>

<p>0.3% sy |</p>

<p>System CPU time</p>

<p>|</p>

<p>运行内核和他的进程占用CPU时间百分比</p>

<p>0.0% ni, | Nice CPU time |</p>

<p>用户进程空间内改变过优先级的进程占用CPU百分比</p>

<p>99.7% id |  | 空闲CPU百分<br />
0.0% wa |</p>

<p>iowait</p>

<p>|</p>

<p>CPU等待I/O到完成所占时间百分比</p>

<p>0.0% hi |</p>

<p>Hardware IRQ</p>

<p>|</p>

<p>硬件中断引起CPU检测的总时间量</p>

<p>0.0% si |</p>

<p>Software Interrupts</p>

<p>|</p>

<p>软件中断引起的CPU检测总时间</p>

<p>0.0% st | Steal Time | 通过管理虚拟机的进程获得的CPU总时间量（例如运行另一个虚拟机）</p>

<p>第四行-内存信息：</p>

<h2 id="mem-3057896k-total-2137744k-used-920152k-free-733140k-buffers">Mem: 3057896k total, 2137744k used, 920152k free, 733140k buffers</h2>

<table>
<thead>
<tr>
<th>3057896k total</th>
<th>物理内存总量</th>
</tr>
</thead>

<tbody>
<tr>
<td>2137744k used</td>
<td>使用的物理内存总量</td>
</tr>

<tr>
<td>920152k free</td>
<td>空闲内存总量</td>
</tr>

<tr>
<td>733140k buffers</td>
<td>用作内核缓存的内存量</td>
</tr>
</tbody>
</table>

<p>第五行-内存信息-交换区：</p>

<h2 id="swap-262140k-total-0k-used-262140k-free-1201304k-cached">Swap: 262140k total, 0k used, 262140k free, 1201304k cached</h2>

<table>
<thead>
<tr>
<th>262140k total</th>
<th>交换区总量</th>
</tr>
</thead>

<tbody>
<tr>
<td>0k used</td>
<td>使用的交换区总量</td>
</tr>

<tr>
<td>262140k free</td>
<td>空闲交换区总量</td>
</tr>

<tr>
<td>1201304k cached</td>
<td>缓冲的交换区总量。 内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖， 该数值即为这些</td>
</tr>
</tbody>
</table>

<p><strong>内容已存在于内存中</strong> 的交换区的大小。相应的内存再次被换出时可不必再对交换区写入。</p>

<p>第六行标题：</p>

<h2 id="pid-user-pr-ni-virt-res-shr-s-cpu-mem-time-command">PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND</h2>

<p>注意：他们表现总按照排序号排列，与你输入的命令无关</p>

<p>下面这个列表包含上面的：</p>

<table>
<thead>
<tr>
<th>排序号</th>
<th>简称</th>
<th>全称</th>
<th>解释</th>
</tr>
</thead>

<tbody>
<tr>
<td>a</td>
<td>PID</td>
<td>Process Id</td>
<td>每个进程的ID</td>
</tr>

<tr>
<td>b</td>
<td>PPID</td>
<td>Parent Process Pid</td>
<td>PPID 每个进程的父进程ID</td>
</tr>

<tr>
<td>c</td>
<td>RUSER</td>
<td>Real User Name</td>
<td>任务拥有者的真正用户的用户名</td>
</tr>

<tr>
<td>d</td>
<td>UID</td>
<td>User Id</td>
<td>每个进程所有者的UID</td>
</tr>

<tr>
<td>e</td>
<td>USER</td>
<td>User Name</td>
<td>每个进程所有者的用户名</td>
</tr>

<tr>
<td>f</td>
<td>GROUP</td>
<td>Group Name</td>
<td></td>
</tr>

<tr>
<td>g</td>
<td>TTY</td>
<td>Controlling Tty</td>
<td></td>
</tr>

<tr>
<td>h</td>
<td>PR</td>
<td>Priority</td>
<td>每个进程的优先级别</td>
</tr>

<tr>
<td>i</td>
<td>NI</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>Nice value</p>

<p>| 该进程的优先级值<br />
j | P | Last used CPU (SMP) |<br />
k | %CPU | CPU usage | 该进程自最近一次刷新以来所占用的CPU时间和总时间的百分比<br />
l | TIME |</p>

<p>CPU Time</p>

<p>|<br />
m | TIME+ | CPU Time, hundredths | TIME+
该进程自启动以来所占用的总CPU时间。如果进入的是累计模式，那么该时间还包括这个进程子进程所占用的时间。且标题会变成CTIME<br />
n | %MEM | Memory usage (RES) | 该进程占用的物理内存占总内存的百分比<br />
o | VIRT |</p>

<p>Virtual Image (kb)</p>

<p>| 进程“需要的”虚拟内存大小，包括进程使用的库、代码和数据等<br />
p | SWAP | Swapped size (kb) |<br />
q | RES |</p>

<p>Resident size (kb)</p>

<p>| 该进程占用的物理内存的总大小，单位是KB<br />
r | CODE |</p>

<p>Code size (kb)</p>

<p>|<br />
s | DATA | Data+Stack size (kb) |<br />
t | SHR |</p>

<p>Shared Mem size (kb)</p>

<p>| 该进程使用共享内存的大小<br />
u | nFLT | Page Fault count |<br />
v | nDRT | Dirty Pages count |<br />
w | S | Process Status | 该进程的状态。其中<br />
S：代表休眠状态；<br />
D：代表不可中断的休眠状态；<br />
R：代表运行状态；<br />
Z：代表僵死状态；<br />
T：代表停止或跟踪状<br />
x | Command | Command line or Program name |
该进程的命令名称，如果一行显示不下，则会进行截取。内存中的进程会有一个完整的命令行<br />
y | WCHAN | Sleeping in Function |<br />
z | Flags | Task Flags |</p>

<hr />

<p><strong>帮助信息:</strong></p>

<p>注：这篇博文，本人用的是ubuntu的版本v_12</p>

<p>帮助信息有点麻烦，只能自己自总结一下:</p>

<p>| 说明<br />
&mdash;|&mdash;<br />
d | 指定每两次屏幕信息刷新之间的时间间隔。当然用户可以使用s交互命令来改变之。<br />
S | 指定累计模式。<br />
s | 使top命令在安全模式中运行。这将去除交互命令所带来的潜在危险。<br />
i | 使top不显示任何闲置或者僵死进程。<br />
c | 显示整个命令行而不只是显示命令名。(进程的command列显示进程的对应命令行或命令名)<br />
h 或者 v | 版本号+帮助<br />
p | 指定查看的pid<br />
u | 指定用户<br />
<del>U</del> |  ~~ 指定用户 ~~<br />
~~ q ~~ |  ~~ 该选项将使top没有任何延迟的进行刷新。如果调用程序有超级用户权限，那么top将以尽可能高的优先级运行。 ~~</p>

<p>注意： 红色个人认识常用，划线是存在争议目前测试不可以的命令。</p>

<p><strong>实例：</strong></p>

<p><strong>1. 查看某个用户的信息</strong></p>

<ol>
<li>$top –u shelldir

<br /></li>
</ol>

<p>解释：这里用户名是shelldir</p>

<p><strong>2. 去掉闲置和僵死进程</strong></p>

<ol>
<li>$top –i</li>
</ol>

<hr />

<p><strong>交互命令</strong> （这个算是技巧提升，其实最有价值就是这里，我却写粗糙了）</p>

<p>注意：当你top执行后，一般是用q来退出，如果你用Ctrl+Z强行关闭，其实程序并未结束，就如同作者在查看sehlldir用户下，为何有这么多top进程？</p>

<p>每次在top后面加入参数未免麻烦，如果在启动top以后还能做一些操作就好，类似于vi命令，top刚好支持，如下：</p>

<p>（这里投个懒，从其他地方摘了下，如果有疑问，直接在top以后，h（帮助）一下，未自己全部亲测，有问题，请指正。）</p>

<p>h或者？ 显示帮助画面，给出一些简短的命令总结说明</p>

<p>k
终止一个进程。系统将提示用户输入需要终止的进程PID，以及需要发送给该进程什么样的信号。一般的终止进程可以使用15信号；如果不能正常结束那就使用信号9强制结束该进程。默认值是信号15。在安全模式中此命令被屏<br />
i 忽略闲置和僵死进程。这是一个开关式命令<br />
q 退出程序<br />
r 重新安排一个进程的优先级别<br />
S 切换到累计模式<br />
s 改变两次刷新之间的延迟时间。系统将提示用户输入新的时间，单位为s。如果有小数，就换算成m s。输入0值则系统将不断刷新，默认值是5
s。需要注意的是如果设置太小的时间，很可能会引起不断刷新，从而根本来不及看清显示的情况，而且系统负载也会大大增加</p>

<p>f或者F 从当前显示中添加或者删除项目</p>

<p>o或者O 改变显示项目的顺序</p>

<p>l 切换显示平均负载和启动时间信息</p>

<p>m 切换显示内存信息</p>

<p>t 切换显示进程和CPU状态信息</p>

<p>c 切换显示命令名称和完整命令行</p>

<p>M 根据驻留内存大小进行排序</p>

<p>P 根据CPU使用百分比大小进行排序</p>

<p>T 根据时间/累计时间进行排序</p>

<p>W 将当前设置写入~/.toprc文件中。这是写top配置文件的推荐方法</p>

<hr />

<hr />

<p><strong>收尾</strong></p>

<p>这篇文章耗时太久了，超出预计，我打算提出一个linux技巧贴，专门长期收集技巧，更新。希望有兴趣朋友，能够一起给出意见。</p>

<p>转载于:<a href="https://blog.51cto.com/yjplxq/1039504">https://blog.51cto.com/yjplxq/1039504</a></p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>