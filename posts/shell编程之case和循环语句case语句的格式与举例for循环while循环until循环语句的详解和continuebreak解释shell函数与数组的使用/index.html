<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell编程之case和循环语句case语句的格式与举例for循环while循环until循环语句的详解和continuebreak解释shell函数与数组的使用 | 开发者问答集锦</title>
    <meta property="og:title" content="shell编程之case和循环语句case语句的格式与举例for循环while循环until循环语句的详解和continuebreak解释shell函数与数组的使用 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell编程之case和循环语句case语句的格式与举例for循环while循环until循环语句的详解和continuebreak解释shell函数与数组的使用">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E7%BC%96%E7%A8%8B%E4%B9%8Bcase%E5%92%8C%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5case%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%A0%BC%E5%BC%8F%E4%B8%8E%E4%B8%BE%E4%BE%8Bfor%E5%BE%AA%E7%8E%AFwhile%E5%BE%AA%E7%8E%AFuntil%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E7%9A%84%E8%AF%A6%E8%A7%A3%E5%92%8Ccontinuebreak%E8%A7%A3%E9%87%8Ashell%E5%87%BD%E6%95%B0%E4%B8%8E%E6%95%B0%E7%BB%84%E7%9A%84%E4%BD%BF%E7%94%A8/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">shell编程之case和循环语句case语句的格式与举例for循环while循环until循环语句的详解和continuebreak解释shell函数与数组的使用</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h3 id="文章目录">文章目录</h3>

<ul>
<li>前言</li>
<li>一：case多分支语句

<ul>
<li>1.1：case语句的结构</li>
<li>1.2：case语句的实例

<ul>
<li>1.2.1：创建一个判断输入类型的脚本</li>
<li>1.2.2：判断学生成绩的优良</li>
</ul></li>
</ul></li>
<li>二：循环语句

<ul>
<li>2.1：for循环语句

<ul>
<li>2.1.1：for语句结构</li>
<li>2.1.2：使用for批量添加用户</li>
<li>2.1.3：示例&ndash;根据IP地址检查主机状态</li>
<li>2.1.4：用循环语句输出1-10的数字的四种办法</li>
<li>2.1.5：shell中let命令</li>
<li>2.1.6：计算1-10偶数/奇数的和</li>
<li>方式二：求奇数和</li>
</ul></li>
<li>2.2：while循环语句

<ul>
<li>2.2.1：while语句结构</li>
<li>2.2.2：while语句应用示例</li>
<li>2.2.3：while死循环</li>
<li>2.2.4：使用while批量添加用户</li>
<li>2.2.5：猜商品价格游戏</li>
</ul></li>
<li>2.3：continue和break

<ul>
<li>2.3.1：continue</li>
<li>2.3.2：break</li>
<li>2.3.3：break和continue的区别</li>
</ul></li>
<li>2.4:九九乘法表</li>
<li>2.5：幸运抽奖</li>
<li>2.6：untli循环语句

<ul>
<li>2.6.1：until语句的结构</li>
<li>2.6.2：until语句应用1</li>
<li>2.6.3：until语句应用2</li>
</ul></li>
</ul></li>
<li>三：shell函数

<ul>
<li>3.1：shell函数概述</li>
<li>3.2：shell函数定义</li>
<li>3.3：调用函数的方法</li>
<li>3.4：shell函数应用1</li>
<li>3.5：shell函数应用2</li>
</ul></li>
<li>四：shell数组

<ul>
<li>4.1：数组应用场景</li>
<li>4.2：数组定义方法（推荐方法一）</li>
<li>4.3：数组包括的数据类型与数组操作

<ul>
<li>4.3.1：数组包括的数据类型</li>
<li>4.3.2：数组操作</li>
</ul></li>
<li>4.4：求数组最大值</li>
</ul></li>
</ul>

<h1 id="前言">前言</h1>

<h1 id="一-case多分支语句">一：case多分支语句</h1>

<h3 id="1-1-case语句的结构">1.1：case语句的结构</h3>

<ul>
<li><p>针对变量的不同取值，分别执行不同的命令序列</p></li>

<li><p>这种情况与多分支的if语句非常相似，只不过if语句需要判断多个不同的条件，而case语句指示判断一个变量的不同取值</p>

<pre><code>格式：
</code></pre>

<p>case 变量值 in
模式1)
    命令序列1
    ;;
模式2)
    命令序列2
    ;;
    &hellip;.
*)
    默认命令序列
esac</p>

<pre><code>实例：
</code></pre>

<p>case 控制指令 in
start)
    启动XX服务
    ;;
stop)
    停止XX服务
    ;;
    &hellip;.
*)
    显示服务脚本的用法
esac</p></li>
</ul>

<p><a href="https://img.it610.com/image/info8/81c3d1258c114aaebe7168bb8eb99a4e.jpg"><img src="https://img.it610.com/image/info8/81c3d1258c114aaebe7168bb8eb99a4e.jpg" alt="shell编程之case和循环语句（case语句的格式与举例）（for循环，while循环until循环语句的详解和continue，break解释）（shell函数与数组的使用）_第1张图片" /></a></p>

<h3 id="1-2-case语句的实例">1.2：case语句的实例</h3>

<h5 id="1-2-1-创建一个判断输入类型的脚本">1.2.1：创建一个判断输入类型的脚本</h5>

<ul>
<li><p>提示用户输入一个字符</p></li>

<li><p>判断出该字符是字母，数字或者其他字符</p></li>

<li><p>[root@localhost opt]# vim panduan.sh
#!/bin/bash
read -p &ldquo;请输入一个字符：&rdquo; aa
case &ldquo;$aa&rdquo; in
[0-9])
        echo &ldquo;你输入的是数字&rdquo;
        ;;
[a-z]|[A-Z])
        echo &ldquo;你输入的是字母&rdquo;
        ;;
*)
        echo &ldquo;你输入的是符号&rdquo;
esac
~<br />
[root@localhost opt]# chmod +x panduan.sh
[root@localhost opt]# ./panduan.sh
请输入一个字符：3
你输入的是数字
[root@localhost opt]# ./panduan.sh
请输入一个字符：e
你输入的是字母
[root@localhost opt]# ./panduan.sh
请输入一个字符：#
你输入的是符号</p></li>
</ul>

<h5 id="1-2-2-判断学生成绩的优良">1.2.2：判断学生成绩的优良</h5>

<ul>
<li>成绩0-100分</li>
</ul>

<p>0-59分：不及格</p>

<p>60-74：及格</p>

<p>75-84：良好</p>

<p>85-100：优秀</p>

<ul>
<li><p>[root@localhost opt]# vim chengji.sh
#!/bin/bash
read -p &ldquo;请输入你的成绩：&rdquo; aa
case &ldquo;$aa&rdquo; in
#[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])
[1-5][0-9]|[0-9])
        echo &ldquo;你的成绩不合格&rdquo;
        ;;
6[0-9]|7[0-4])
        echo &ldquo;你的成绩合格&rdquo;
        ;;
7[5-9]|8[0-4])
        echo &ldquo;你的成绩良好&rdquo;
        ;;
8[5-9]|9[0-9]|100)
        echo &ldquo;你的成绩优秀&rdquo;
        ;;
*)
        echo &ldquo;输入有误&rdquo;
esac
~</p>

<p>[root@localhost opt]# ./chengji.sh
请输入你的成绩：0<br />
你的成绩不合格
[root@localhost opt]# ./chengji.sh
请输入你的成绩：59
你的成绩不合格
[root@localhost opt]# ./chengji.sh
请输入你的成绩：60
你的成绩合格
[root@localhost opt]# ./chengji.sh
请输入你的成绩：74
你的成绩合格
[root@localhost opt]# ./chengji.sh
请输入你的成绩：75
你的成绩良好
[root@localhost opt]# ./chengji.sh
请输入你的成绩：84
你的成绩良好
[root@localhost opt]# ./chengji.sh
请输入你的成绩：85
你的成绩优秀
[root@localhost opt]# ./chengji.sh
请输入你的成绩：100
你的成绩优秀
[root@localhost opt]# ./chengji.sh
请输入你的成绩：101
输入有误
[root@localhost opt]# ./chengji.sh
请输入你的成绩：-1
输入有误</p></li>
</ul>

<h1 id="二-循环语句">二：循环语句</h1>

<h3 id="2-1-for循环语句">2.1：for循环语句</h3>

<h5 id="2-1-1-for语句结构">2.1.1：for语句结构</h5>

<ul>
<li><p>读取不同的变量值，用来逐个执行同一组命令</p></li>

<li><p>语句结构
for 变量名 in 取值列表
do
    命令序列
done</p>

<pre><code>语句结构举例
</code></pre>

<p>for 收件人 in 邮件地址列表
do
    发送邮件
done</p></li>
</ul>

<p><a href="https://img.it610.com/image/info8/809d68f41f2443b2a10058e7a9f2452b.jpg"><img src="https://img.it610.com/image/info8/809d68f41f2443b2a10058e7a9f2452b.jpg" alt="shell编程之case和循环语句（case语句的格式与举例）（for循环，while循环until循环语句的详解和continue，break解释）（shell函数与数组的使用）_第2张图片" /></a></p>

<h5 id="2-1-2-使用for批量添加用户">2.1.2：使用for批量添加用户</h5>

<ul>
<li><p>用户名存放在users.txt文件中，每行一个</p></li>

<li><p>初始密码均设为123456</p></li>

<li><p>[root@localhost opt]# vim user.txt
zhangsan
lisi
wangermazi
zhaoliu
tianji
wangba
[root@localhost opt]# vim useradd.sh
#!/bin/bash
Lists=$(cat /opt/user.txt)
for bb in $Lists
do
        useradd $bb
        echo &ldquo;123456&rdquo; | passwd &ndash;stdin $bb
        echo &ldquo;$bb添加成功&rdquo;
done
[root@localhost opt]# chmod +x useradd.sh
[root@localhost opt]# ./useradd.sh
Changing password for user zhangsan.
passwd: all authentication tokens updated successfully.
zhangsan添加成功
useradd: warning: the home directory already exists.
Not copying any file from skel directory into it.
Creating mailbox file: File exists
Changing password for user lisi.
passwd: all authentication tokens updated successfully.
lisi添加成功
Changing password for user wangermazi.
passwd: all authentication tokens updated successfully.
wangermazi添加成功
Changing password for user zhaoliu.
passwd: all authentication tokens updated successfully.
zhaoliu添加成功
Changing password for user tianji.
passwd: all authentication tokens updated successfully.
tianji添加成功
Changing password for user wangba.
passwd: all authentication tokens updated successfully.
wangba添加成功
[root@localhost opt]# cat /etc/passwd | grep &ldquo;bash&rdquo;
root:x:0:0:root:/root:/bin/bash
dd:x:1000:1000:cn-tangzheng:/home/dd:/bin/bash
zhangsan:x:1001:1001::/home/zhangsan:/bin/bash
lisi:x:1002:1002::/home/lisi:/bin/bash
wangermazi:x:1003:1003::/home/wangermazi:/bin/bash
zhaoliu:x:1004:1004::/home/zhaoliu:/bin/bash
tianji:x:1005:1005::/home/tianji:/bin/bash
wangba:x:1006:1006::/home/wangba:/bin/bash</p>

<pre><code>脚本可以适当修改优化：如
</code></pre>

<p>echo &ldquo;123456&rdquo; | passwd &ndash;stdin $bb &amp;&gt; /dev/null</p>

<pre><code>批量删除用户：在刚刚的基础上修改
</code></pre>

<p>[root@localhost opt]# vim useradd.sh
#!/bin/bash
Lists=$(cat /opt/user.txt)
for bb in $Lists
do
        userdel -r $bb  &lsquo;-r 删除家目录&rsquo;
        #echo &ldquo;123456&rdquo; | passwd &ndash;stdin $bb &amp;&gt; /dev/null
        echo &ldquo;$bb删除成功&rdquo;
done</p>

<p>[root@localhost opt]# ./useradd.sh
zhangsan删除成功
lisi删除成功
wangermazi删除成功
zhaoliu删除成功
tianji删除成功
wangba删除成功
[root@localhost opt]# cat /etc/passwd | grep &ldquo;bash&rdquo;
root:x:0:0:root:/root:/bin/bash
dd:x:1000:1000:cn-tangzheng:/home/cn-tangzheng:/bin/bash</p></li>
</ul>

<h5 id="2-1-3-示例-根据ip地址检查主机状态">2.1.3：示例–根据IP地址检查主机状态</h5>

<ul>
<li><p>检测IP地址192.168.197.0-192.168.197.10段落</p></li>

<li><p>使用ping命令检测各主机的连通性</p></li>

<li><p>[root@localhost opt]# vim ipchk.sh
#!/bin/bash
for ((i=1;i&lt;=10;i++))
do
  ping -c 3 -i 0.2 -W 3 &ldquo;192.168.197.$i&rdquo; &amp;&gt; /dev/null
  if [ $? -eq 0 ]
        then
        echo &ldquo;Host 192.168.197.$i is up&rdquo;
  else
        echo &ldquo;Host 192.168.197.$i is down&rdquo;
  fi
done
[root@localhost opt]# ./ipchk.sh
Host 192.168.197.1 is up
Host 192.168.197.2 is up
Host 192.168.197.3 is down
Host 192.168.197.4 is down
Host 192.168.197.5 is down
Host 192.168.197.6 is down
Host 192.168.197.7 is down
Host 192.168.197.8 is down
Host 192.168.197.9 is down
Host 192.168.197.10 is down</p></li>
</ul>

<h5 id="2-1-4-用循环语句输出1-10的数字的四种办法">2.1.4：用循环语句输出1-10的数字的四种办法</h5>

<ul>
<li><p>方式一：</p>

<pre><code>#!/bin/bash
</code></pre>

<p>for ((i=1;i&lt;=10;i++))
do
        echo &ldquo;$i&rdquo;
done</p></li>

<li><p>方式二：</p>

<pre><code>#!/bin/bash
</code></pre>

<p>i=1
for ((;i&lt;=10;i++))
do
        echo &ldquo;$i&rdquo;
done</p></li>

<li><p>方式三：</p>

<pre><code>#!/bin/bash
</code></pre>

<p>i=1
for ((;i&lt;=10;))
do
        echo &ldquo;$i&rdquo;
        let i++
done</p></li>

<li><p>方式四：</p>

<pre><code>#!/bin/bash
</code></pre>

<p>i=1
for ((;;))
do
  if [ $i -le 10 ]
        then
        echo &ldquo;$i&rdquo;
        let i++
  else
        exit 0
  fi
done</p></li>

<li><p>输出结果</p>

<pre><code>[root@localhost opt]# ./number.sh 
</code></pre>

<p>1
2
3
4
5
6
7
8
9
10</p></li>
</ul>

<h5 id="2-1-5-shell中let命令">2.1.5：shell中let命令</h5>

<ul>
<li><p>let 对整数进行数学运算</p></li>

<li><p>let和双小括号 (( )) 一样，let 命令也只能进行整数运算，不能对小数（浮点数）或者字符串进行运算。</p></li>

<li><p>语法格式
let 表达式
或
let &ldquo;表达式&rdquo;
或
let &lsquo;表达式&rsquo;
以上方式都等价于 ((表达式))</p></li>

<li><p>当表达式中含有 Shell 特殊字符（例如 |）时，需要用双引号<code>&quot; &quot;</code>或者单引号<code>' '</code>将表达式包围起来。</p></li>

<li><p>和 (( )) 类似，let 命令也支持一次性计算多个表达式，并且以最后一个表达式的值作为整个 let 命令的执行结果。</p></li>
</ul>

<h5 id="2-1-6-计算1-10偶数-奇数的和">2.1.6：计算1-10偶数/奇数的和</h5>

<ul>
<li><p>方式一：计算偶数的和</p>

<pre><code>#!/bin/bash
</code></pre>

<p>sum=0
for((i=0;i&lt;=10;i+=2))
  do
        let sum+=$i
  done
        echo &ldquo;总和为：$sum&rdquo;</p></li>

<li><p>方式一：计算奇数的和</p>

<pre><code>#!/bin/bash
</code></pre>

<p>sum=0
for((i=1;i&lt;=10;i+=2))
  do
        let sum+=$i
  done
        echo &ldquo;总和为：$sum&rdquo;</p></li>

<li><p>方式二：求偶数和</p>

<pre><code>#!/bin/bash
</code></pre>

<p>sum=0
for((i=0;i&lt;=10;i+=2))
  do
        if [ <code>expr $i % 2</code> -eq 0 ]
         then
           let sum+=$i
        fi
  done
        echo &ldquo;总和为：$sum&rdquo;</p></li>

<li><h5 id="方式二-求奇数和">方式二：求奇数和</h5>

<pre><code>#!/bin/bash
</code></pre>

<p>sum=0
for((i=1;i&lt;=10;i+=2))
  do
        if [ <code>expr $i % 2</code> -eq 1 ]
         then
           let sum+=$i
        fi
  done
        echo &ldquo;总和为：$sum&rdquo;</p></li>
</ul>

<h3 id="2-2-while循环语句">2.2：while循环语句</h3>

<h5 id="2-2-1-while语句结构">2.2.1：while语句结构</h5>

<ul>
<li><p>重复测试某个条件，只要条件成立则反复执行</p></li>

<li><p>语句结构
while 条件测试操作
do
    命令序列
done</p>

<p>语句结构示例
while 未猜中正确的价格
do
    反复猜测商品价格
done</p></li>
</ul>

<p><a href="https://img.it610.com/image/info8/77c20fa2325f4f75a7fb7acaf16c8de0.jpg"><img src="https://img.it610.com/image/info8/77c20fa2325f4f75a7fb7acaf16c8de0.jpg" alt="shell编程之case和循环语句（case语句的格式与举例）（for循环，while循环until循环语句的详解和continue，break解释）（shell函数与数组的使用）_第3张图片" /></a></p>

<h5 id="2-2-2-while语句应用示例">2.2.2：while语句应用示例</h5>

<ul>
<li><p>使用while循环语句输出1-10数字</p>

<pre><code>#!/bin/bash
</code></pre>

<p>i=0
while [ $i -le 10 ]
do
  echo &ldquo;$i&rdquo;
  let i++
done</p>

<pre><code>[root@localhost opt]# . cccc.sh 
</code></pre>

<p>0
1
2
3
4
5
6
7
8
9
10</p></li>
</ul>

<h5 id="2-2-3-while死循环">2.2.3：while死循环</h5>

<ul>
<li><p>while true：死循环有时候也有奇效，可与用户交互</p></li>

<li><p>#!/bin/bash
while true
do
  read -p &ldquo;请输入yes退出：&rdquo; KEY
  if [ $KEY = yes ]
        then
          break
  fi
done
echo &ldquo;正常退出&rdquo;</p>

<pre><code>[root@localhost opt]# ./sixunhuan.sh 
</code></pre>

<p>请输入yes退出：no
请输入yes退出：1
请输入yes退出：d
请输入yes退出：！
请输入yes退出：a
请输入yes退出：yes
正常退出</p></li>
</ul>

<h5 id="2-2-4-使用while批量添加用户">2.2.4：使用while批量添加用户</h5>

<ul>
<li><p>用户名称以stu开头，按数字顺序进行编号</p></li>

<li><p>一共添加20个用户，即stu1，stu2…stu20</p></li>

<li><p>初始密码设置为</p></li>

<li><p>#!/bin/bash
i=0
while [ $i -le 19 ]
do
  let i++
  useradd stu$i
  echo &ldquo;123456&rdquo; | passwd &ndash;stdin stu$i &amp;&gt; /dev/null
  echo &ldquo;stu$i添加成功&rdquo;
done
echo &ldquo;添加完毕&rdquo;</p>

<pre><code>[root@localhost opt]# ./useradd.sh 
</code></pre>

<p>stu1添加成功
stu2添加成功
stu3添加成功
stu4添加成功
stu5添加成功
stu6添加成功
stu7添加成功
stu8添加成功
stu9添加成功
stu10添加成功
stu11添加成功
stu12添加成功
stu13添加成功
stu14添加成功
stu15添加成功
stu16添加成功
stu17添加成功
stu18添加成功
stu19添加成功
stu20添加成功
添加完毕</p></li>
</ul>

<h5 id="2-2-5-猜商品价格游戏">2.2.5：猜商品价格游戏</h5>

<ul>
<li><p>通过变量RANDOM获得随机数</p></li>

<li><p>提示用户猜测并记录次数，猜中后退出循环</p></li>

<li><p>#!/bin/bash
A=<code>expr $RANDOM % 1000</code>
i=0
echo &ldquo;商品的实际价格为0-999之间，猜猜看是多少？&rdquo;
read -p &ldquo;请输入你猜测的价格数目：&rdquo; num
while [ $num -le 999 ] &amp;&amp; [ $num -ge 1 ]
do
        let i++
     if [ $num -eq $A ]
        then
        echo &ldquo;恭喜你答对了，实际价格是$A&rdquo;
        echo &ldquo;你一共猜测了$i 次&rdquo;
        exit 0
     elif [ $num -lt $A ]
        then
        echo &ldquo;太低了&rdquo;
        read -p &ldquo;请输入你猜测的价格数目：&rdquo; num
     else
        echo &ldquo;太高了&rdquo;
        read -p &ldquo;请输入你猜测的价格数目：&rdquo; num
     fi
  done</p></li>
</ul>

<h3 id="2-3-continue和break">2.3：continue和break</h3>

<h5 id="2-3-1-continue">2.3.1：continue</h5>

<ul>
<li><p>命令格式
continue n
n 表示循环的层数：
如果省略 n，则表示 continue 只对当前层次的循环语句有效，遇到 continue 会跳过本次循环，忽略本次循环的剩余代码，直接进入下一次循环。
如果带上 n，比如 n 的值为 2，那么 continue 对内层和外层循环语句都有效，不但内层会跳过本次循环，外层也会跳过本次循环，其效果相当于内层循环和外层循环同时执行了不带 n 的 continue。这么说可能有点难以理解，稍后我们通过代码来演示。
continue 关键字也通常和 if 语句一起使用，即满足条件时便跳出循环。</p></li>

<li><p><a href="https://img.it610.com/image/info8/3a1010271c974756afd42dd69cc69938.jpg"><img src="https://img.it610.com/image/info8/3a1010271c974756afd42dd69cc69938.jpg" alt="shell编程之case和循环语句（case语句的格式与举例）（for循环，while循环until循环语句的详解和continue，break解释）（shell函数与数组的使用）_第4张图片" /></a></p></li>
</ul>

<h5 id="2-3-2-break">2.3.2：break</h5>

<ul>
<li><p>命令格式
break n
n 表示跳出循环的层数，如果省略 n，则表示跳出当前的整个循环。
break 关键字通常和 if 语句一起使用，即满足条件时便跳出循环。</p></li>

<li><p><a href="https://img.it610.com/image/info8/75b4df0ae88c428b8c5ba16dfb45b097.jpg"><img src="https://img.it610.com/image/info8/75b4df0ae88c428b8c5ba16dfb45b097.jpg" alt="shell编程之case和循环语句（case语句的格式与举例）（for循环，while循环until循环语句的详解和continue，break解释）（shell函数与数组的使用）_第5张图片" /></a></p></li>
</ul>

<h5 id="2-3-3-break和continue的区别">2.3.3：break和continue的区别</h5>

<ul>
<li>break 用来结束所有循环，循环语句不再有执行的机会；continue 用来结束本次循环，直接跳到下一次循环，如果循环条件成立，还会继续循环。</li>
</ul>

<h3 id="2-4-九九乘法表">2.4:九九乘法表</h3>

<ul>
<li><p>#!/bin/bash
for ((k=1;k&lt;=9;k++))
do
 for ((i=1;i&lt;=$k;i++))
 do
  echo -n &ldquo;&rdquo;$k&rdquo;x&rdquo;$i&rdquo;=$(expr $k * $i)  &ldquo;
  if [ $i -eq $k ]
        then
        echo -e &lsquo;\n&rsquo;
  fi
 done
done</p>

<pre><code>[root@localhost opt]# ./99.sh 
</code></pre>

<p>1x1=1</p>

<p>2x1=2  2x2=4</p>

<p>3x1=3  3x2=6  3x3=9</p>

<p>4x1=4  4x2=8  4x3=12  4x4=16</p>

<p>5x1=5  5x2=10  5x3=15  5x4=20  5x5=25</p>

<p>6x1=6  6x2=12  6x3=18  6x4=24  6x5=30  6x6=36</p>

<p>7x1=7  7x2=14  7x3=21  7x4=28  7x5=35  7x6=42  7x7=49</p>

<p>8x1=8  8x2=16  8x3=24  8x4=32  8x5=40  8x6=48  8x7=56  8x8=64</p>

<p>9x1=9  9x2=18  9x3=27  9x4=36  9x5=45  9x6=54  9x7=63  9x8=72  9x9=81</p></li>
</ul>

<h3 id="2-5-幸运抽奖">2.5：幸运抽奖</h3>

<ul>
<li><p>奖池观众：zhangsan，lisi，wangwu</p></li>

<li><p>奖池观众名单在name.txt中</p></li>

<li><p>共10次投票，使用随机数的方法挑选幸运观众，票数最多获胜</p></li>

<li><p>#!/bin/bash
B=0
C=0
D=0
for ((i=1;i&lt;=10;i++))
do
 A=$(expr $[RANDOM%3+1])
 list=$(cat /opt/name.txt|grep &ldquo;$A&rdquo; |awk -F: &lsquo;{print $2}&rsquo;)
 case $list in
 zhangsan)
        let B++
 ;;
 lisi)
        let C++
 ;;
 *)
        let D++
  esac
  echo &ldquo;$list&rdquo;
done</p>

<pre><code>[root@localhost opt]# ./luckly.sh 
</code></pre>

<p>lisi
wangwu
lisi
lisi
wangwu
zhangsan
zhangsan
lisi
lisi
wangwu
zhangsan:2票lisi5票wangwu3票
[root@localhost opt]# ./luckly.sh
zhangsan
wangwu
zhangsan
wangwu
zhangsan
lisi
zhangsan
wangwu
wangwu
wangwu
zhangsan:4票lisi1票wangwu5票</p></li>
</ul>

<h3 id="2-6-untli循环语句">2.6：untli循环语句</h3>

<h5 id="2-6-1-until语句的结构">2.6.1：until语句的结构</h5>

<ul>
<li><p>重复测试某个条件，只要条件不成立则反复执行</p></li>

<li><p>until 条件测试操作
do
 命令序列
done</p>

<pre><code>while 未超过10
</code></pre>

<p>do
 数字依次增加
done</p></li>

<li><p><a href="https://img.it610.com/image/info8/8569509d09794878aff6a7022b866d98.jpg"><img src="https://img.it610.com/image/info8/8569509d09794878aff6a7022b866d98.jpg" alt="shell编程之case和循环语句（case语句的格式与举例）（for循环，while循环until循环语句的详解和continue，break解释）（shell函数与数组的使用）_第6张图片" /></a></p></li>
</ul>

<h5 id="2-6-2-until语句应用1">2.6.2：until语句应用1</h5>

<ul>
<li>计算1–50的和</li>
</ul>

<p>通过循环累加的方式计算1–50的和</p>

<ul>
<li><p>#!/bin/bash
i=1
S=0
until [ $i -eq 51 ]
do
 let S+=$i
 let i++</p>

<p>done
echo &ldquo;$S&rdquo;</p>

<pre><code>[root@localhost opt]# ./jisuan.sh 
</code></pre>

<p>1275</p></li>
</ul>

<h5 id="2-6-3-until语句应用2">2.6.3：until语句应用2</h5>

<ul>
<li><p>为指定用户发送在线消息</p>

<ul>
<li>若指定用户不在线（未登陆系统），则每10分钟（实验中为了测试效果，可改为3s）试一次，直至用户登录系统后再发送信息</li>
<li>用户名与消息通过为止参数传递给脚本</li>
</ul></li>

<li><p>#!/bin/bash
username=$1
#判断格式参数是否为空
if [ $# -lt 1 ]
 then
 echo &ldquo;Usage:<code>basename $0</code>  []&rdquo;
 exit 1
fi
#判断账号是否存在
if grep &ldquo;^$username:&rdquo; /etc/passwd &amp;&gt; /dev/nell;then :
  else
        echo &ldquo;用户不存在&rdquo;
        exit 2
fi
#判断用户是否在线
until who | grep &ldquo;$username&rdquo; &amp;&gt; /dev/null
do
        echo &ldquo;用户不在线,正在尝试连接&rdquo;
        sleep 3
done
mes=$*
echo &ldquo;$mes&rdquo; | write &ldquo;$username&rdquo;</p>

<pre><code>[root@localhost opt]# ./mes.sh 
</code></pre>

<p>Usage:mes.sh  []
[root@localhost opt]# ./mes.sh wangwu
用户不存在
[root@localhost opt]# ./mes.sh stu1
用户不在线,正在尝试连接
用户不在线,正在尝试连接
^C</p></li>
</ul>

<h1 id="三-shell函数">三：shell函数</h1>

<h3 id="3-1-shell函数概述">3.1：shell函数概述</h3>

<ul>
<li>shell一个非常重要的特性是它可作为一种编程语言来使用。</li>
<li>因为shell是一个解释器，所以它不能对为它编写的程序进行编译，而是在每次从磁盘加载这些程序时对它们进行解释。而程序的加载和解释都是非常耗时的。</li>
<li>针对此问题，许多shell（如BourneAgainShell）都包含shell函数，shell把这些函数放在内存中，这样每次需要执行它们时就不必再从磁盘读入。</li>
<li>shell还以一种内部格式来存放这些函数，这样就不必耗费大量的时间来解释它们</li>
<li>shell函数将命令序列按格式写在一起</li>
<li>可以方便重复使用命令序列</li>
</ul>

<h3 id="3-2-shell函数定义">3.2：shell函数定义</h3>

<ul>
<li><p><a href="https://img.it610.com/image/info8/561de42596874b19b4e82c0a502b4ba5.jpg"><img src="https://img.it610.com/image/info8/561de42596874b19b4e82c0a502b4ba5.jpg" alt="shell编程之case和循环语句（case语句的格式与举例）（for循环，while循环until循环语句的详解和continue，break解释）（shell函数与数组的使用）_第7张图片" /></a></p>

<ul>
<li><p>其中，return返回的是状态码，需要使用$?调取</p></li>

<li><p>echo 返回的是值，使用变量调用</p></li>

<li><p>传参：指位置变量</p></li>
</ul></li>

<li><p>可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</p></li>

<li><p>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255</p></li>
</ul>

<h3 id="3-3-调用函数的方法">3.3：调用函数的方法</h3>

<ul>
<li>函数名 [参数1($1)] [参数2($2)]</li>
<li>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值，例如，$1表示第一个参数，$2表示第二个参数…</li>
<li>10 不 能 获 取 第 十 个 参 数 ， 获 取 第 十 个 参 数 需 要 10 不能获取第十个参数，获取第十个参数需要 10不能获取第十个参数，获取第十个参数需要{10}。当n&gt;=10时，需要使用${n}来获取参数。</li>
</ul>

<h3 id="3-4-shell函数应用1">3.4：shell函数应用1</h3>

<ul>
<li><p>两个数字求个</p>

<ul>
<li>通过sum(){}定义函数</li>
<li>使用read命令交互输入两个数并求和</li>
</ul></li>

<li><p>#!/bin/bash
#sum=0
 function  A (){
  read -p &ldquo;请输入第一个数字：&rdquo; B
  read -p &ldquo;请输入第二个数字：&rdquo; C
  sum=<code>expr $B + $C</code>
  echo &ldquo;$B + $C = $sum&rdquo;
  return 3
}
#echo $sum
A $B $C</p>

<pre><code>[root@localhost opt]# ./han.sh 
</code></pre>

<p>请输入第一个数字：4
请输入第二个数字：2
4 + 2 = 6
[root@localhost opt]# echo $?
3
[root@localhost opt]# echo $?
0</p></li>
</ul>

<h3 id="3-5-shell函数应用2">3.5：shell函数应用2</h3>

<ul>
<li>编写登录系统后便可使用的自定义函数

<ul>
<li>编辑用户自定义函数文件/root/function</li>
<li>在当前shell中加载可执行的函数文件/root/function</li>
<li>在~/.bashrc文件中添加source /root/function命令</li>
</ul></li>
<li></li>
</ul>

<h1 id="四-shell数组">四：shell数组</h1>

<h3 id="4-1-数组应用场景">4.1：数组应用场景</h3>

<ul>
<li>获取数组长度</li>
</ul>

<p>使用for循环获取具体信息，使用下标或索引标记数组中数据的位置</p>

<p>可以存放多种数据，如：整型，长整形，浮点型（单精度，双精度），字符串等</p>

<ul>
<li><p>获取元素长度</p></li>

<li><p>遍历元素</p></li>

<li><p>元素切片</p></li>

<li><p>元素替换</p></li>

<li><p>元素删除</p></li>

<li><p>…</p></li>

<li><p>注意，忌讳数组越界，</p></li>
</ul>

<p>数组下标从0开始算</p>

<p>数组长度从1开始算</p>

<p>长度为4，数组长度表示为1,2,3,4；数组下标表示为0,1,2,3</p>

<ul>
<li>shell中数组是可变长的</li>
</ul>

<h3 id="4-2-数组定义方法-推荐方法一">4.2：数组定义方法（推荐方法一）</h3>

<ul>
<li><p>方法一：</p>

<pre><code>基本格式
</code></pre>

<p>数组名=（value0 value1 value2&hellip;）</p>

<pre><code>例如
</code></pre>

<p>ABC=（11 22 33&hellip;）</p></li>

<li><p>方法二：</p>

<pre><code>基本格式
</code></pre>

<p>数组名=（[0]=value [1]=value [2]=value&hellip;）</p>

<pre><code>例如
</code></pre>

<p>ABC=（[0]=11 [1]=22 [2]=33&hellip;)</p></li>

<li><p>方法三：数组元素之间使用空格隔开</p>

<pre><code>基本格式
</code></pre>

<p>列表名=“value0 value1 value2”
数组名=（$列表名）</p>

<pre><code>例如
</code></pre>

<p>AAA=“11 22 33&hellip;”
ABC=($列表名)</p></li>

<li><p>方法四：</p>

<pre><code>基本格式
</code></pre>

<p>数组名[0]=“value”
数组名[1]=“value”
数组名[2]=“value”
&hellip;</p>

<pre><code>例如
</code></pre>

<p>AAA[0]=“11”
AAA[1]=“22”
AAA[2]=“33”
&hellip;</p></li>
</ul>

<h3 id="4-3-数组包括的数据类型与数组操作">4.3：数组包括的数据类型与数组操作</h3>

<h5 id="4-3-1-数组包括的数据类型">4.3.1：数组包括的数据类型</h5>

<ul>
<li><p>数值类型</p></li>

<li><p>字符类型</p>

<ul>
<li>使用“”或‘’定义</li>
</ul></li>
</ul>

<p>数组只可存放数值或字符</p>

<h5 id="4-3-2-数组操作">4.3.2：数组操作</h5>

<ul>
<li><p>获取数组长度</p>

<pre><code>基本格式
</code></pre>

<p>${#数组名[@/<em>]}
例如
[root@localhost opt]# abc=(10 20 30)
[root@localhost opt]# echo ${abc[</em>]}
10 20 30
[root@localhost opt]# echo ${#abc[*]}
3</p></li>

<li><p>读取某下标赋值</p>

<pre><code>基本格式
</code></pre>

<p>${数组名[下标]}
例如
[root@localhost opt]# echo ${abc[1]}
20
[root@localhost opt]# echo ${abc[0]}
10
[root@localhost opt]# echo ${abc[1]}
20
[root@localhost opt]# echo ${abc[2]}
30</p></li>
</ul>

<h3 id="4-4-求数组最大值">4.4：求数组最大值</h3>

<ul>
<li><p>#!/bin/bash
for ((i=1;i&lt;=5;i++));do
  read -p &ldquo;请输入第$i个数字：&rdquo; num
  abc[$i-1]=$num
done</p>

<p>max=${abc[0]}
for ((k=1;k&lt;=${#abc[*]}-1;k++));do
  if [ $max -lt ${abc[$k]} ];then
   max=${abc[$k]}
  fi
done
echo &ldquo;最大值是：$max&rdquo;</p>

<pre><code>[root@localhost opt]# chmod +x max.sh 
</code></pre>

<p>[root@localhost opt]# ./max.sh
请输入第1个数字：2
请输入第2个数字：3
请输入第3个数字：66
请输入第4个数字：33
请输入第5个数字：111
最大值是：111</p></li>
</ul>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>