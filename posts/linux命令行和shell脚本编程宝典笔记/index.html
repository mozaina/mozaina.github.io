<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Linux命令行和shell脚本编程宝典笔记 | 开发者问答集锦</title>
    <meta property="og:title" content="Linux命令行和shell脚本编程宝典笔记 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Linux命令行和shell脚本编程宝典笔记">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%92%8Cshell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%E5%AE%9D%E5%85%B8%E7%AC%94%E8%AE%B0/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Linux命令行和shell脚本编程宝典笔记</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h1 id="linux命令行">Linux命令行</h1>

<h2 id="第五章-使用linux环境变量">第五章 使用Linux环境变量</h2>

<h3 id="设置环境变量">设置环境变量</h3>

<h4 id="①设置本地环境变量">①设置本地环境变量</h4>

<h4 id="②设置全局环境变量-通过export将本地环境变量引导到全局环境中">②设置全局环境变量 通过export将本地环境变量引导到全局环境中。</h4>

<h3 id="变量数组">变量数组</h3>

<p>将他们列出在圆括号中，各值以空格分隔。例如mytest=(one two three four five)<br />
显示整个数组变量 使用星号通配符作为索引值。例如echo ${mytest[*]} （不能有空格）</p>

<h1 id="shell脚本的基础知识">Shell脚本的基础知识</h1>

<h2 id="第八章-基本脚本编译">第八章 基本脚本编译</h2>

<p>反引号（`）<br />
用于将shell输出赋值给变量（用反引号包围整个命令）</p>

<p>输出重定向</p>

<pre><code>&gt;
&gt;&gt;追加
</code></pre>

<p>输入重定向<br />
&lt;<br />
&lt;</p>

<h3 id="数学计算-bash-shell只支持整数计算">数学计算（Bash shell只支持整数计算）</h3>

<h4 id="expr命令">expr命令</h4>

<p>特殊符号（如)需要转义(\)<br />
bash中为变量指定数学表达式的值时，用$和[]把等式括起来<br />
使用等号（=）为变量赋值时，等号两边不能有空格。</p>

<h4 id="bash计算器-bc">bash计算器（bc)</h4>

<p>用scale=n指定结果的小数位数<br />
bc中可以使用变量，不用加$，但在shell中使用bc则需要。<br />
shell脚本中使用bc variable=’echo “options;expression” |
bc’（其中options设置变量，如scale=4，expression为 数学表达式）</p>

<h3 id="linux退出状态码">Linux退出状态码</h3>

<p><a href="https://img.it610.com/image/info8/4e37e53be0ab45e489a26824bf86b065.jpg"><img src="https://img.it610.com/image/info8/4e37e53be0ab45e489a26824bf86b065.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第1张图片" /></a></p>

<h2 id="第九章-使用结构化命令">第九章 使用结构化命令</h2>

<p>if-then-else-fi<br />
if-then-elif-then-fi</p>

<p>if test condition<br />
then<br />
commands<br />
fi<br />
同<br />
if [ condition ]<br />
then<br />
commands<br />
fi<br />
<a href="https://img.it610.com/image/info8/f8d2119f575c438db2b97e6aefa68af1.jpg"><img src="https://img.it610.com/image/info8/f8d2119f575c438db2b97e6aefa68af1.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第2张图片" /></a><br />
<a href="https://img.it610.com/image/info8/98b4fa809f164113a2434646d76bbeb7.jpg"><img src="https://img.it610.com/image/info8/98b4fa809f164113a2434646d76bbeb7.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第3张图片" /></a><br />
<a href="https://img.it610.com/image/info8/7086738b90ea488d93548e039f046308.jpg"><img src="https://img.it610.com/image/info8/7086738b90ea488d93548e039f046308.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第4张图片" /></a><br />
<a href="https://img.it610.com/image/info8/bff8565f44814776b98a0ad278c502c6.png"><img src="https://img.it610.com/image/info8/bff8565f44814776b98a0ad278c502c6.png" alt="Linux命令行和shell脚本编程宝典
笔记_第5张图片" /></a><br />
<a href="https://img.it610.com/image/info8/cbbb0de1a8904d85830fc8de78774487.jpg"><img src="https://img.it610.com/image/info8/cbbb0de1a8904d85830fc8de78774487.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第6张图片" /></a><br />
复合条件检查<br />
[ condition1 ] &amp;&amp; [ condition2 ]<br />
[ condition1 ] || [ condition2 ]</p>

<p>if-then高级特征<br />
<a href="https://img.it610.com/image/info8/d36dec70ca4b45e19ace9d2d6f582b3d.jpg"><img src="https://img.it610.com/image/info8/d36dec70ca4b45e19ace9d2d6f582b3d.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第7张图片" /></a><br />
双方括号可以对字符串进行模式匹配。</p>

<p>case格式：<br />
case $variable in<br />
var1)<br />
command<br />
;;<br />
var2)<br />
command<br />
;;<br />
*)<br />
command<br />
;;<br />
esac</p>

<h2 id="第十章-更多结构化命令">第十章 更多结构化命令</h2>

<h3 id="从列表中读取值">从列表中读取值</h3>

<p>for var in list<br />
do<br />
commands<br />
done</p>

<h3 id="从变量中读取列表">从变量中读取列表</h3>

<h3 id="读取命令中的值">读取命令中的值</h3>

<p>内部字段分隔符IFS（默认 空格、制表符、换行符）<br />
限制bash shell看作是字段分隔符的字符IFS=$’\n’</p>

<h3 id="使用通配符读取目录">使用通配符读取目录*</h3>

<p>for file in /home/rich/test/*</p>

<p>C式for循环<br />
for((variable assignment;condition;iteration process))<br />
do<br />
commands<br />
done</p>

<p>while test command （或者while [ command ] ）<br />
do<br />
other command<br />
done</p>

<p>while command1<br />
test command2 （由于是两条语句因此需要换行 或使用；隔开）<br />
do<br />
other command<br />
done</p>

<p>until test command （由于是两条语句因此需要换行 或使用；隔开）<br />
do<br />
other command<br />
done<br />
until command1<br />
test command2<br />
do<br />
other command<br />
done<br />
处理循环的输出<br />
在done后使用管道或重定向循环输出结果。<br />
例如done &gt; output.txt</p>

<h2 id="第十一章-处理用户输入">第十一章 处理用户输入</h2>

<h3 id="命令行参数">命令行参数</h3>

<p>0为程序名称 1第一个参数$2第二个参数，以此类推。<br />
basename只返回程序名称，不带路径</p>

<h3 id="特殊的参数变量">特殊的参数变量</h3>

<p><code>$#</code>执行脚本时包含的命令行参数个数。（大括号中将$替换为!）<br />
<code>$*</code>将命令行提供的所有参数作为一个单词处理；<br />
<code>$@</code>将命令行中提供的所有参数作为同一个字符串中的多个单词处理，允许对其中的值进行迭代；</p>

<h3 id="移位">移位</h3>

<p>Shift命令默认将每个参数变量左移一个位置，变量$1的值被丢弃。<br />
Shift n n为偏移量</p>

<h3 id="处理选项">处理选项</h3>

<h4 id="简单选项-当做参数进行处理">简单选项（当做参数进行处理）</h4>

<h4 id="从参数中分离选项">从参数中分离选项</h4>

<p>Shell使用双破折号（——）指示选项列表的结束。</p>

<h4 id="处理带值的选项">处理带值的选项</h4>

<p><a href="https://img.it610.com/image/info8/1e07c26f5eb040a1bb2c6d8ff22de066.jpg"><img src="https://img.it610.com/image/info8/1e07c26f5eb040a1bb2c6d8ff22de066.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第8张图片" /></a></p>

<h4 id="使用getopt命令">使用getopt命令</h4>

<p>格式：getopt options optstring parameters<br />
选项字符串optstring，定义了命令行中的有效选项字母，在每个需要参数值的选项字母后放置一个冒号<br />
如果希望忽略错误消息，命令中使用-q选项<br />
脚本中使用getopt命令：<br />
Set命令的一个选项是双破折号，表示将命令行参数变量替换为set命令的命令行的值。<br />
Set – <code>getopt –q ab:c “$@”</code>（注意：是反引号）</p>

<h4 id="更高级的getopts命令">更高级的getopts命令</h4>

<p>命令格式getopts optstring variable<br />
如果要禁止输出错误消息，使选项字符串以冒号开头。<br />
参数被放入variable中。<br />
环境变量OPTARG中包含需要选项的参数值；OPTIND的值表示getopts停止处理时在参数列表中的位置。<br />
当getopts命令解析命令行选项时，会将打头的破折号去掉。<br />
Getopts特性：①可以在参数之中包含空格，②选项字母和参数值中间可以没有空格；<br />
<a href="https://img.it610.com/image/info8/3dafe4583473453188f1c3717d3f6aad.jpg"><img src="https://img.it610.com/image/info8/3dafe4583473453188f1c3717d3f6aad.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第9张图片" /></a><br />
getopt会将选项值和参数当做字符串处理，在使用数字作为选项值或参数时使用getopts更好一些。<br />
<a href="https://img.it610.com/image/info8/4bcdc58313e040289fe8e59499d26f71.jpg"><img src="https://img.it610.com/image/info8/4bcdc58313e040289fe8e59499d26f71.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第10张图片" /></a></p>

<h3 id="获取用户输入">获取用户输入：</h3>

<p>基本读取read –p 指定提示<br />
在read命令行中不指定变量时，将接收到的数据放置在环境变量REPLY中；<br />
-t选项指定计数器，计数器满时，read命令返回非零退出状态。（if read –t 5 then/else fi）<br />
默读（不希望输出显示）-s(数据显示，只是文本颜色与背景色相同)<br />
读取文件<br />
<a href="https://img.it610.com/image/info8/bd114ed762354e798ded46f9d1f51c13.jpg"><img src="https://img.it610.com/image/info8/bd114ed762354e798ded46f9d1f51c13.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第11张图片" /></a></p>

<h2 id="第十二章-显示数据">第十二章 显示数据</h2>

<h3 id="文件描述符-每个进程最多打开9个文件描述符-shell保留前三个">文件描述符（每个进程最多打开9个文件描述符，shell保留前三个）</h3>

<p><a href="https://img.it610.com/image/info8/388fa5a9ba664daba5f69eef6c4b5951.jpg"><img src="https://img.it610.com/image/info8/388fa5a9ba664daba5f69eef6c4b5951.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第12张图片" /></a></p>

<h4 id="重定向错误">重定向错误</h4>

<p>2&gt;</p>

<h4 id="重定向错误和数据">重定向错误和数据</h4>

<p>2&gt; file2 1&gt; file1</p>

<h4 id="错误和数据重定向到同一文件">错误和数据重定向到同一文件</h4>

<p>&amp;&gt; file</p>

<h3 id="脚本中重定向输出">脚本中重定向输出</h3>

<h4 id="临时重定向-重定向到某个文件描述符时-需在文件描述符编号钱添加">临时重定向 重定向到某个文件描述符时，需在文件描述符编号钱添加&amp;</h4>

<h4 id="永久重定向-exec通知shell在脚本执行起见重定向特定的文件描述符">永久重定向 exec通知shell在脚本执行起见重定向特定的文件描述符</h4>

<h3 id="脚本中重定向输入">脚本中重定向输入</h3>

<p>exec 0&lt; file</p>

<h3 id="创建自己的重定向">创建自己的重定向</h3>

<p>使用exec命令为输出分配文件描<code>exec 3&gt;test3out echo “XXX” &gt;&amp;3</code><br />
定向文件描<code>exec 3&gt;&amp;1;exec 1&gt;testout;exec 1&gt;&amp;3</code><br />
入文件描<code>exec 3  
取/写入文件描述符 exec 3&lt;&gt; inputoutputfile  
关闭文件描述符 exec 3&gt;&amp;- (输入输出同时关闭)</code></p>

<h3 id="列出开放文件描述符">列出开放文件描述符</h3>

<p>lsof –p 制定进程（PID） $$为当前的PID<br />
lsof –d 指定要显示的文件描述符编号 r读取w写入u读写<br />
lsof –a 用来连接其他两个选项的结果</p>

<h3 id="禁止命令输出">禁止命令输出</h3>

<p>将STDERR重定向到空文件/dev/null</p>

<h3 id="使用临时文件-只有所有者有读写权限">使用临时文件（只有所有者有读写权限）</h3>

<h4 id="当前文件夹创建临时文件mktemp-文件名模板-例如mktemp-testing-xxxxxx">当前文件夹创建临时文件mktemp +文件名模板（例如mktemp testing.XXXXXX）</h4>

<h4 id="在-tmp下创建临时文件-mktemp-t-文件名模板">在/tmp下创建临时文件 mktemp –t 文件名模板</h4>

<h4 id="创建临时目录-mktemp-d-文件夹模板">创建临时目录 mktemp –d 文件夹模板</h4>

<h3 id="记录消息">记录消息</h3>

<p>输出同时发送到监视器和日志文件。 command | tree filename<br />
如希望向文件添加数据 -a选项</p>

<h2 id="第十三章-脚本控制">第十三章 脚本控制</h2>

<p><a href="https://img.it610.com/image/info8/9a1521384a63483fbcb521acdf1a98d7.jpg"><img src="https://img.it610.com/image/info8/9a1521384a63483fbcb521acdf1a98d7.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第13张图片" /></a></p>

<h3 id="处理信号">处理信号</h3>

<p>捕捉信号 保护该信号不被shell处理，并在本地处理它<br />
trap commands signals<br />
捕获脚本退出<br />
trap commands EXIT<br />
移除捕获<br />
trap – EXIT</p>

<h3 id="以后台模式运行脚本">以后台模式运行脚本</h3>

<p>1、以命令行界面以后台模式运行shell脚本，在命令后加上一个&amp;符号<br />
如果终端退出，后台进程也会退出。</p>

<h3 id="在不使用控制台的情况下运行脚本">在不使用控制台的情况下运行脚本</h3>

<p>nohup命令运行另一个命令阻塞发送到进程的任何SIGHUP信号。防止在退出终端会话时退出进程。<br />
nohup命令格式：nohup command &amp;<br />
因为nohup命令将进程和终端断开，所以进程没有STDOUT和STDERR输出链接。为接收命令生成的任何输出，nohup将STDOUT和STDERR消息重定向到nohup.out文件。</p>

<h3 id="作业控制">作业控制</h3>

<h4 id="查看作业-jobs">查看作业 jobs</h4>

<p><a href="https://img.it610.com/image/info8/894a7a89036e4cde9b6cc31460820ca4.jpg"><img src="https://img.it610.com/image/info8/894a7a89036e4cde9b6cc31460820ca4.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第14张图片" /></a></p>

<h4 id="重新启动停止的作业">重新启动停止的作业</h4>

<h5 id="以后台模式重新启动作业bg-作业号">以后台模式重新启动作业bg 作业号</h5>

<h5 id="以前台模式重新启动作业fg-作业号">以前台模式重新启动作业fg 作业号</h5>

<h3 id="调整调度优先级">调整调度优先级</h3>

<h4 id="nice命令-启动命令时设置他的调度优先级">nice命令 启动命令时设置他的调度优先级</h4>

<p>格式：nice –n 正整数 （不许普通用户增加优先级）</p>

<h4 id="renice命令-修改已运行的命令优先级">renice命令 修改已运行的命令优先级</h4>

<h3 id="给定时间运行脚本">给定时间运行脚本</h3>

<h4 id="at-指定linux系统运行脚本的时间">at 指定Linux系统运行脚本的时间</h4>

<p>命令格式 at [-f filename] time<br />
有26种不同的作业队列可用于不同的优先级水平，默认所有at作业都提交到作业队列a，即最高优先级队列，如希望以较低的优先级运行作业，可以使用-q参数指定字母。<br />
输出STDOUT和STDERR通过邮件发送给用户。<br />
列出排队的作业 atq<br />
移除作业 atrm 作业号</p>

<h4 id="batch命令-安排脚本在系统使用率低时运行">batch命令 安排脚本在系统使用率低时运行</h4>

<p>检查Linux系统当前的平均负载水平，如果低于0.8，将运行任何在作业队列中等待的作业。<br />
命令格式： batch –f filename time</p>

<h4 id="cron调度定期脚本">cron调度定期脚本</h4>

<h3 id="从头开始">从头开始</h3>

<p>让脚本在Linux一启动或用户启动新的bash shell会话时便自动运行。</p>

<h4 id="系统启动时启动">系统启动时启动</h4>

<h4 id="随新shell一起启动">随新shell一起启动。</h4>

<p>shell在由于新用户登录而运行新的shell时运行.bash_profile<br />
shell在每次启动新shell时运行.bashrc文件</p>

<h1 id="高级shell脚本编程">高级shell脚本编程</h1>

<h2 id="第十四章-创建函数">第十四章 创建函数</h2>

<p>函数是被赋予名称的脚本代码块。</p>

<h3 id="创建函数-大括号-不能与函数名连在一起">创建函数（大括号“{”不能与函数名连在一起）</h3>

<p>① function name {<br />
commands<br />
}<br />
② name() {<br />
commands<br />
}</p>

<h3 id="使用函数">使用函数</h3>

<p>在脚本中指定函数名即可。函数定义必须在使用之前。</p>

<h3 id="返回值">返回值</h3>

<p>以退出状态作为返回值。退出状态有三种生成方式。</p>

<h4 id="默认退出状态-最后一条命令返回的退出状态">默认退出状态 最后一条命令返回的退出状态。</h4>

<h4 id="使用return命令-以特定退出状态退出函数-0-255">使用return命令 以特定退出状态退出函数。0-255</h4>

<h4 id="使用函数输出-捕获函数输出-echo输出-存放到shell变量中-例如result-funcname">使用函数输出 捕获函数输出（echo输出）存放到shell变量中。例如result=<code>funcname</code></h4>

<h3 id="在函数中使用变量">在函数中使用变量</h3>

<h4 id="向函数中传递参数-使用标准参数环境变量来表示命令行传递给函数的参数">向函数中传递参数（使用标准参数环境变量来表示命令行传递给函数的参数）</h4>

<h4 id="在函数中处理变量-脚本中定义的变量可以在函数中使用并修改-危险">在函数中处理变量 脚本中定义的变量可以在函数中使用并修改。（危险）</h4>

<pre><code>            在函数中使用local声明变量，外部变量不受影响。
</code></pre>

<h3 id="函数中使用数组">函数中使用数组</h3>

<p>向函数传递数组 不能将数组变量作为单个参数传递。如func $arrname<br />
（解决方案：将数组变量拆分为单个元素，函数内部重组为数组变量）例如：<br />
function testit {<br />
local newarray<br />
newarray=(<code>echo “$@”</code>)<br />
}<br />
myarray=(1 2 3 4 5)<br />
testit ${myarray[*]}<br />
从函数返回数组（类似于向函数传递数组）</p>

<h3 id="函数递归">函数递归</h3>

<h3 id="库文件-将函数独立出来-供多个脚本使用-关键是source命令-别名-点操作符-例如-myfuncs-注意">库文件（将函数独立出来，供多个脚本使用） 关键是source命令（别名 点操作符“.”）例如： . ./myfuncs （注意 .</h3>

<p>与后面文件的空格）</p>

<h3 id="在命令行中使用函数">在命令行中使用函数</h3>

<p>在命令行中创建函数<br />
（存入环境变量中）使用unset删除 –f仅删除函数-v仅删除变量<br />
将函数定义在一行命令中<br />
使用多行命令定义函数<br />
在.bashrc文件中定义函数</p>

<h2 id="第十五章-与脚本用户的更多交互">第十五章 与脚本用户的更多交互</h2>

<h3 id="创建文本菜单">创建文本菜单</h3>

<h4 id="创建菜单布局">创建菜单布局</h4>

<h5 id="clear清除文本">clear清除文本；</h5>

<h5 id="echo-e输出特殊字符">echo –e输出特殊字符；</h5>

<h4 id="创建菜单函数">创建菜单函数</h4>

<p><a href="https://img.it610.com/image/info8/b5e7e38671bd46c48157202ff7e2fb34.jpg"><img src="https://img.it610.com/image/info8/b5e7e38671bd46c48157202ff7e2fb34.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第15张图片" /></a></p>

<h4 id="添加菜单逻辑">添加菜单逻辑</h4>

<p><a href="https://img.it610.com/image/info8/48b05397c41049de90dbbc3b29d140a3.jpg"><img src="https://img.it610.com/image/info8/48b05397c41049de90dbbc3b29d140a3.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第16张图片" /></a></p>

<h4 id="将其全部组合在一起">将其全部组合在一起</h4>

<h4 id="使用select命令">使用select命令</h4>

<p><a href="https://img.it610.com/image/info8/4c5d33fe668b4f90a080c5aa14c4e506.jpg"><img src="https://img.it610.com/image/info8/4c5d33fe668b4f90a080c5aa14c4e506.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第17张图片" /></a></p>

<h3 id="添加颜色">添加颜色</h3>

<h4 id="ansi转义码-以控制序列指示器csi-开头-后跟表示要在显示器上执行的操作的数据">ANSI转义码（以控制序列指示器CSI）开头，后跟表示要在显示器上执行的操作的数据。</h4>

<p>要控制显示格式，必须使用选择图形再现（SGR）转义码，格式SCIn[;k]m<br />
<a href="https://img.it610.com/image/info8/3022754f36e44759a436444f7dcff812.jpg"><img src="https://img.it610.com/image/info8/3022754f36e44759a436444f7dcff812.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第18张图片" /></a><br />
<a href="https://img.it610.com/image/info8/a1451e16c90d4dc4a104fc3eec551027.jpg"><img src="https://img.it610.com/image/info8/a1451e16c90d4dc4a104fc3eec551027.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第19张图片" /></a></p>

<h4 id="显示ansi转义码">显示ANSI转义码</h4>

<p>使用echo将ANSI转义码发送到终端会话。CSI是一个两字符序列（ESC的ASCII值+左方括号字符）ESC的ASCII值通过Ctrl-V跟Esc键输入<br />
<a href="https://img.it610.com/image/info8/c9e9f92ed1c348ecbb12c17dec81a58b.jpg"><img src="https://img.it610.com/image/info8/c9e9f92ed1c348ecbb12c17dec81a58b.jpg" alt="这里写图片描述" /></a></p>

<h3 id="制作窗口">制作窗口</h3>

<p>dialog软件包<br />
<a href="https://img.it610.com/image/info8/e7aa593e60b2497d981b40c4fa4cab42.jpg"><img src="https://img.it610.com/image/info8/e7aa593e60b2497d981b40c4fa4cab42.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第20张图片" /></a><br />
命令格式dialog –widget parameters（widget小部件名称，parameters窗口大小及文本）<br />
选择OK或yes按钮，dialog返回0退出状态；选择Cancel或No按钮，dialog返回1退出状态；ESC退出，dialog返回255退出状态。<br />
输出形式①使用STDERR（接收输入值）；②使用退出代码状态（接收选项）；<br />
使用—title指定小部件的标题<br />
dialog –msgbox text height width<br />
dialog –yesno text height width<br />
dialog –inputbox text height width<br />
dialog –textbox filename height width<br />
dialog –menu title height width itemcount(菜单项数) items(菜单项)<br />
<a href="https://img.it610.com/image/info8/fb94c7de35924fca93f79653ab939136.jpg"><img src="https://img.it610.com/image/info8/fb94c7de35924fca93f79653ab939136.jpg" alt="这里写图片描述" /></a><br />
dialog –fselect dir(窗口使用的起始位置) height width<br />
<a href="https://img.it610.com/image/info8/005da0b16efe4b80b948c48941850f58.jpg"><img src="https://img.it610.com/image/info8/005da0b16efe4b80b948c48941850f58.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第21张图片" /></a><br />
<a href="https://img.it610.com/image/info8/8873a75192b84c80b13d5f6bdf057a02.jpg"><img src="https://img.it610.com/image/info8/8873a75192b84c80b13d5f6bdf057a02.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第22张图片" /></a></p>

<h3 id="x-windows图形小部件-只能在图形界面运行">X Windows图形小部件（只能在图形界面运行）</h3>

<p>KDE环境<br />
kdialog软件包（不是包含在终端模拟器对话中）结果发送到STDOUT<br />
命令格式：kdialog display-options window-options(部件类型) arguments<br />
<a href="https://img.it610.com/image/info8/d0ec0e2783f5413489ed8c687d10356f.jpg"><img src="https://img.it610.com/image/info8/d0ec0e2783f5413489ed8c687d10356f.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第23张图片" /></a><br />
GNOME环境<br />
gdialog包和zenity包<br />
<a href="https://img.it610.com/image/info8/c4cf6798afad479d9d6e8efe0df05075.jpg"><img src="https://img.it610.com/image/info8/c4cf6798afad479d9d6e8efe0df05075.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第24张图片" /></a><br />
<a href="https://img.it610.com/image/info8/6b6eb1b8b7fe4847ab2314d4e7c1be2b.jpg"><img src="https://img.it610.com/image/info8/6b6eb1b8b7fe4847ab2314d4e7c1be2b.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第25张图片" /></a><br />
参数在命令行上另起一行输入，而不作为选项参数。</p>

<h2 id="第十六章-sed和gawk">第十六章 sed和gawk</h2>

<p>sed编辑器，称为流编辑器。<br />
命令格式：sed options script file<br />
<a href="https://img.it610.com/image/info8/30ed8bd1764c4ce5b6c295e5bc50c081.jpg"><img src="https://img.it610.com/image/info8/30ed8bd1764c4ce5b6c295e5bc50c081.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第26张图片" /></a></p>

<h4 id="1-在命令行中定义编辑器命令">1、 在命令行中定义编辑器命令</h4>

<p>通过管道将数据传送给sed 例：echo “This is a test” | sed ‘s/test/big test/’</p>

<h4 id="2-在命令行中使用多个编辑器命令-使用-e选项-多个命令用分号分隔-命令结尾与分号间不能有空格">2、 在命令行中使用多个编辑器命令 使用-e选项，多个命令用分号分隔，命令结尾与分号间不能有空格</h4>

<p>sed –e ‘s/brown/green/; s/dog/cat/’ data1</p>

<h4 id="3-从文件读取编辑器命令">3、 从文件读取编辑器命令</h4>

<p>gawk程序<br />
提供了一种编程语言而不仅仅是编辑器命令行。</p>

<h4 id="1-命令格式-gawk-options-program-file">1、命令格式： gawk options program file</h4>

<p><a href="https://img.it610.com/image/info8/fd11be84186943fb88a3d5a39b1919e8.jpg"><img src="https://img.it610.com/image/info8/fd11be84186943fb88a3d5a39b1919e8.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第27张图片" /></a></p>

<h4 id="2-自命令行读取程序脚本">2、自命令行读取程序脚本</h4>

<p>gawk程序脚本由左大括号和右大括号定义<br />
使用Ctrl-D结束gawk程序</p>

<h4 id="3-数据字段变量">3、 数据字段变量</h4>

<p>0表示整行文本 1 表示文本行中第一个数据字段<br />
$n 表示文本行中第n个数据字段<br />
gawk默认字段分隔符是任意空白字符（如制表符和空格） -F指定字段分隔符，如-F：</p>

<h4 id="4-使用多个命令">4、 使用多个命令</h4>

<p>多个命令之间用分号“；”分隔</p>

<h4 id="5-从文件读取程序">5、 从文件读取程序</h4>

<p>-f script</p>

<h4 id="6-在处理数据之前运行gawk脚本">6、 在处理数据之前运行gawk脚本</h4>

<p>gawk ‘BEGIN {commands}’<br />
如果有正常处理脚本程序，使用另一脚本片段定义。例如gawk ‘BEGIN {command1} {commands}’</p>

<h4 id="7-在处理数据之后运行gawk脚本">7、 在处理数据之后运行gawk脚本</h4>

<p>gawk ‘END {commands}’</p>

<p>sed编辑器扩展</p>

<h4 id="1-更多替换选项">1、 更多替换选项</h4>

<p>s/pattern/replacement/flags<br />
flags:<br />
数字（新文本替换的模式）替换第几次出现的内容<br />
g（一行全部替换）<br />
p（打印原始行的内容） -n禁止sed编辑器的输出<br />
w file（将输出保存到指定的文件中）<br />
由于正斜杠/用作定界符，如果正斜杠出现在模式文本中必须使用反斜杠转义。<br />
sed允许为替换命令中定界符选择一个不同的字符。如sed ‘s!/bin/bash!/bin/csh!’</p>

<h4 id="2-sed使用范围">2、 sed使用范围</h4>

<p>如仅想将命令应用于某特定行，必须使用行寻址。<br />
格式：[address]command 或<br />
address{<br />
command1<br />
command2<br />
}<br />
数字式行寻址：①单行行号；（尾行$）②起始行号、逗号+结束行号<br />
文本模式筛选器<br />
格式：/pattern/command</p>

<h4 id="3-删除行">3、 删除行</h4>

<p>sed ‘d</p>

<h4 id="4-插入和附加文本">4、 插入和附加文本</h4>

<p>插入命令（i）在指定行之前添加新的一行<br />
附加命令（a）在指定行之后添加新的一行<br />
格式：sed ‘[address]command\ 如：<br />
<a href="https://img.it610.com/image/info8/11cddee76d7b49cfbbcd4898218bab42.jpg"><img src="https://img.it610.com/image/info8/11cddee76d7b49cfbbcd4898218bab42.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第28张图片" /></a></p>

<h4 id="5-更改行">5、 更改行</h4>

<p>c命令</p>

<h4 id="6-变换命令">6、 变换命令</h4>

<p>y命令 对单个字符进行操作。inchars和outchars一对一映射，如果inchars和outchars长度不同，sed生成错误消息。</p>

<h4 id="7-打印命令">7、 打印命令</h4>

<p>① 打印行p，与-n搭配使用 sed –n ‘2,$p’<br />
② 打印行号=命令 sed ‘=’<br />
③ 列出行l（小写的L） 允许打印数据流中的文本和不可打印的ASCII字符</p>

<h4 id="8-文件与sed">8、 文件与sed</h4>

<p>写文件w用于将文本行写入文件 格式：[address]w filename<br />
例：sed –n ‘/IN/w INcustomers’ data10<br />
从文件读取数据r （插入独立文件中的数据）不能使用地址范围</p>

<h2 id="第十七章-正则表达式">第十七章 正则表达式</h2>

<p>正则表达式引擎<br />
POSIX基本正则表达式（BRE）引擎；<br />
POSIX扩展正则表达式（ERE）引擎；<br />
一、 特殊字符类<br />
<a href="https://img.it610.com/image/info8/3b5c41023f634a539438209cc514b324.jpg"><img src="https://img.it610.com/image/info8/3b5c41023f634a539438209cc514b324.jpg" alt="这里写图片描述" /></a><br />
<a href="https://img.it610.com/image/info8/e845ee15127341f1b773fbeed75f49c9.jpg"><img src="https://img.it610.com/image/info8/e845ee15127341f1b773fbeed75f49c9.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第29张图片" /></a><br />
扩展正则表达式（ERE）<br />
gawk能识别ERE，sed不能。<br />
使用大括号——指定对可重复的正则表达式的限制。（必须指定—re-interval命令行选项）<br />
管道符号（检查两个或多个模式）（将两边的内容各自作为整体，而非单字符）</p>

<h2 id="第十八章-高级sed编程">第十八章 高级sed编程</h2>

<h3 id="多行命令">多行命令</h3>

<h4 id="①n在数据流中添加下一行以创建用于处理的多行组">①N在数据流中添加下一行以创建用于处理的多行组。</h4>

<p><a href="https://img.it610.com/image/info8/4812c29615d14b75b6f9c2dc104b9fc4.jpg"><img src="https://img.it610.com/image/info8/4812c29615d14b75b6f9c2dc104b9fc4.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第30张图片" /></a><br />
（如果待搜索内容在末尾则存在问题，解决方案：将单行命令移到N命令前）<br />
<a href="https://img.it610.com/image/info8/32d9554003244eda955afb41d08ffecc.jpg"><img src="https://img.it610.com/image/info8/32d9554003244eda955afb41d08ffecc.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第31张图片" /></a></p>

<h4 id="②d删除多行组中的单个行">②D删除多行组中的单个行</h4>

<p>在使用N找到两行后只想删除第一行而非两行都删除</p>

<h4 id="③p打印多行组中的单个行">③P打印多行组中的单个行</h4>

<p>只打印模式空间的第一行</p>

<h3 id="保留空间-启动sed时保留空间包含一个空行">保留空间（启动sed时保留空间包含一个空行）</h3>

<p>模式空间是一个活动的缓冲区。<br />
<a href="https://img.it610.com/image/info8/6e5665148feb4387a4bf8b9e742aa6c8.jpg"><img src="https://img.it610.com/image/info8/6e5665148feb4387a4bf8b9e742aa6c8.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第32张图片" /></a></p>

<h3 id="否定命令">否定命令</h3>

<p>！用于否定命令。在通常命令被激活的地方不激活命令<br />
<a href="https://img.it610.com/image/info8/afc1b76d63d44e7eb1bc33c8036150d9.jpg"><img src="https://img.it610.com/image/info8/afc1b76d63d44e7eb1bc33c8036150d9.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第33张图片" /></a></p>

<h3 id="更改命令流">更改命令流</h3>

<h4 id="1-分支">1、 分支</h4>

<p>格式：[address]b [label]<br />
标签在后面<br />
<a href="https://img.it610.com/image/info8/acd638a8657d406ba5f554ebb24f0f0c.jpg"><img src="https://img.it610.com/image/info8/acd638a8657d406ba5f554ebb24f0f0c.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第34张图片" /></a><br />
<a href="https://img.it610.com/image/info8/4328cdf5df204dad88a6a685b460f753.jpg"><img src="https://img.it610.com/image/info8/4328cdf5df204dad88a6a685b460f753.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第35张图片" /></a><br />
<a href="https://img.it610.com/image/info8/7deb94cb2c7f4a83a6449a46062f2b73.jpg"><img src="https://img.it610.com/image/info8/7deb94cb2c7f4a83a6449a46062f2b73.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第36张图片" /></a><br />
标签在前面</p>

<h4 id="2-测试">2、 测试</h4>

<p>不是基于地址跳转到标签，而是基于替换命令的结果跳转到标签。<br />
格式：[address]t [label]<br />
匹配替换成功后，测试命令跳过后续的替换命令。<br />
<a href="https://img.it610.com/image/info8/00b3a02467474aa9aab3c36facf51e5b.jpg"><img src="https://img.it610.com/image/info8/00b3a02467474aa9aab3c36facf51e5b.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第37张图片" /></a></p>

<h3 id="模式替换">模式替换</h3>

<h4 id="与号">与号</h4>

<p>用于表示替换命令中的匹配模式。无论什么文本匹配上定义的模式，都可以使用与号在替换模式中调用它。（批注：相当于正则中调用分组1、2）</p>

<h4 id="替换个别单词">替换个别单词</h4>

<p>圆括号定义替换模式中的子字符串元素，替换字符由反斜杠和数字组成。（圆括号必须转义）<br />
<a href="https://img.it610.com/image/info8/d6a21d20adc3463b9aff693bd7ce7f24.jpg"><img src="https://img.it610.com/image/info8/d6a21d20adc3463b9aff693bd7ce7f24.jpg" alt="这里写图片描述" /></a></p>

<h3 id="脚本中使用sed">脚本中使用sed</h3>

<h4 id="sed包装器">sed包装器</h4>

<p><a href="https://img.it610.com/image/info8/53043fc665f54fe79c452d6a51e7b9fd.jpg"><img src="https://img.it610.com/image/info8/53043fc665f54fe79c452d6a51e7b9fd.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第38张图片" /></a></p>

<h4 id="重定向sed输出-使用反引号">重定向sed输出：使用反引号（`）</h4>

<h3 id="创建sed工具">创建sed工具</h3>

<ol>
<li><p>对可能有空行的文件使用双倍行距<br />
使用sed ‘G’ filename时有空行的位置出现3个空行，解决办法是从数据流中删除空行。sed ‘/^ /d; !G’ filename</p></li>

<li><p>显示行号<br />
sed ‘=’ filename | sed ‘N; s/\n/ /’ 通过‘=‘显示行号后将其放在同一行<br />
打印最后几行</p>

<p>sed ‘{
:start
$q
N
12,$D
b start
}’ filename</p></li>

<li><p>删除行<br />
删除连续空行 /./,/^ /!d（注释：非空行加空行不删，其他就是连续空行）删除开头空行/./, !d （注释：第一个非空行到最后不删，其他都是开头空行）<br />
删除结尾空行</p>

<p>sed ‘{
:start
/^\n*$/{$d; N; b start }
}’</p></li>
</ol>

<h2 id="第十九章-高级gawk编程">第十九章 高级gawk编程</h2>

<h3 id="使用变量">使用变量</h3>

<h4 id="内置变量">内置变量</h4>

<p><a href="https://img.it610.com/image/info8/5f64d744b2ae410780149b78b1503d40.jpg"><img src="https://img.it610.com/image/info8/5f64d744b2ae410780149b78b1503d40.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第39张图片" /></a><br />
<a href="https://img.it610.com/image/info8/544067b8e2ba4b748e767ceeba18454a.jpg"><img src="https://img.it610.com/image/info8/544067b8e2ba4b748e767ceeba18454a.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第40张图片" /></a><br />
<a href="https://img.it610.com/image/info8/9e969008e99f49de85e0f75d33f5a9b4.jpg"><img src="https://img.it610.com/image/info8/9e969008e99f49de85e0f75d33f5a9b4.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第41张图片" /></a></p>

<h4 id="用户定义变量">用户定义变量</h4>

<p>使用“=”赋值，输出时不带“$”符号。赋值可以在脚本中赋值，也可以在命令行中赋值。例：<br />
<a href="https://img.it610.com/image/info8/cb6b639ecbac47cbb20881893a02d371.jpg"><img src="https://img.it610.com/image/info8/cb6b639ecbac47cbb20881893a02d371.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第42张图片" /></a><br />
<a href="https://img.it610.com/image/info8/f7d1ab336c28442480ea5843ea419d2b.jpg"><img src="https://img.it610.com/image/info8/f7d1ab336c28442480ea5843ea419d2b.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第43张图片" /></a><br />
（数学运算符^等同于**，求幂运算）</p>

<h3 id="使用数组-关联数组">使用数组（关联数组）</h3>

<p>递归时使用for(key in array)<br />
删除数组元素delete array[“index”]</p>

<h3 id="使用模式">使用模式</h3>

<h4 id="1-正则表达式-在使用正则表达式时-正则表达式必须出现在程序脚本的左括号之前">1、正则表达式 在使用正则表达式时，正则表达式必须出现在程序脚本的左括号之前。</h4>

<pre><code>例如：`gawk ‘BEGIN{FS=”,”} /11/{print $1}’ data1`
</code></pre>

<h4 id="2-匹配操作符-允许限制正则表达式匹配记录中的特定数据字段-波浪线-需要指定匹配操作符-数据字段变量-匹配的正则表达式">2、匹配操作符 允许限制正则表达式匹配记录中的特定数据字段。（波浪线~）需要指定匹配操作符，数据字段变量，匹配的正则表达式。</h4>

<pre><code>例如：`gawk ‘BEGIN{FS=”,”} $2 ~ /^data/{print $0}’ data1`   匹配出第二个字段以data开头字符串
</code></pre>

<h4 id="3-数学表达式">3、数学表达式 ==,&lt;=,=,&gt;</h4>

<pre><code>例如 `gawk –F: ‘$4 == 0{print $1}’ /etc/passwd`
</code></pre>

<h3 id="四-格式化命令">四、 格式化命令</h3>

<h4 id="1-if语句">1、 if语句</h4>

<h4 id="2-while语句">2、 while语句</h4>

<h4 id="3-do-while语句">3、 do-while语句</h4>

<h4 id="4-for语句">4、 for语句</h4>

<h3 id="五-格式化打印">五、 格式化打印</h3>

<p>printf命令 printf “format string”,var1,var2……<br />
<a href="https://img.it610.com/image/info8/ee14dd772ef04bd2bc1a0449fc370347.jpg"><img src="https://img.it610.com/image/info8/ee14dd772ef04bd2bc1a0449fc370347.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第44张图片" /></a><br />
<a href="https://img.it610.com/image/info8/4f8e4b9b80a94b5f9d212e0494fa2212.jpg"><img src="https://img.it610.com/image/info8/4f8e4b9b80a94b5f9d212e0494fa2212.jpg" alt="这里写图片描述" /></a></p>

<h3 id="六-内置函数">六、 内置函数</h3>

<h4 id="1-数学函数">1、 数学函数</h4>

<p><a href="https://img.it610.com/image/info8/9c7196f4c6c147a7ab1d13abf379ec87.jpg"><img src="https://img.it610.com/image/info8/9c7196f4c6c147a7ab1d13abf379ec87.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第45张图片" /></a><br />
<a href="https://img.it610.com/image/info8/a292698f4055484080fcf70a707294ab.jpg"><img src="https://img.it610.com/image/info8/a292698f4055484080fcf70a707294ab.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第46张图片" /></a></p>

<h4 id="2-字符串函数">2、 字符串函数</h4>

<p><a href="https://img.it610.com/image/info8/81221ec824d74a748e7dc6c1db3ecc93.jpg"><img src="https://img.it610.com/image/info8/81221ec824d74a748e7dc6c1db3ecc93.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第47张图片" /></a><br />
<a href="https://img.it610.com/image/info8/ce6b1d8b079940ca94e04cbb74e1f60a.jpg"><img src="https://img.it610.com/image/info8/ce6b1d8b079940ca94e04cbb74e1f60a.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第48张图片" /></a></p>

<h4 id="3-时间函数">3、 时间函数</h4>

<p><a href="https://img.it610.com/image/info8/3d8cafdd3b1b4f13a2fa2403555bc0cf.jpg"><img src="https://img.it610.com/image/info8/3d8cafdd3b1b4f13a2fa2403555bc0cf.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第49张图片" /></a></p>

<h3 id="七-用户自定义函数">七、 用户自定义函数</h3>

<h4 id="1-关键字function">1、 关键字function</h4>

<h4 id="2-使用自己的函数-单独出现在定义的任何代码部分之前-包括begin部分">2、 使用自己的函数 单独出现在定义的任何代码部分之前（包括BEGIN部分）</h4>

<h4 id="3-创建函数库-函数合并到单独的库文件中-使用-f命令将函数库与gawk组合使用">3、 创建函数库 函数合并到单独的库文件中 使用-f命令将函数库与gawk组合使用。</h4>

<h1 id="可选的linux-shell">可选的Linux shell</h1>

<h2 id="第二十章-ashshell">第二十章 ashshell</h2>

<p><a href="https://img.it610.com/image/info8/26aac303c22a472a8437cb98d6fd73b7.jpg"><img src="https://img.it610.com/image/info8/26aac303c22a472a8437cb98d6fd73b7.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第50张图片" /></a><br />
<a href="https://img.it610.com/image/info8/7966eb57c9e34ecf835d8c155087cbce.jpg"><img src="https://img.it610.com/image/info8/7966eb57c9e34ecf835d8c155087cbce.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第51张图片" /></a><br />
<a href="https://img.it610.com/image/info8/e6ec97739d8d4037a3d251be4e19d5ee.jpg"><img src="https://img.it610.com/image/info8/e6ec97739d8d4037a3d251be4e19d5ee.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第52张图片" /></a><br />
<a href="https://img.it610.com/image/info8/f694fd35fe9f4383bb7fb4aa0de53a73.jpg"><img src="https://img.it610.com/image/info8/f694fd35fe9f4383bb7fb4aa0de53a73.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第53张图片" /></a><br />
<a href="https://img.it610.com/image/info8/4b3e9c3bd17c44cfbe0aa37cc50fa9ea.jpg"><img src="https://img.it610.com/image/info8/4b3e9c3bd17c44cfbe0aa37cc50fa9ea.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第54张图片" /></a><br />
<a href="https://img.it610.com/image/info8/d837f38a658546768b568cfe1f25496f.jpg"><img src="https://img.it610.com/image/info8/d837f38a658546768b568cfe1f25496f.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第55张图片" /></a><br />
<a href="https://img.it610.com/image/info8/c2daf5833fd241ef947a36583ddbfa57.jpg"><img src="https://img.it610.com/image/info8/c2daf5833fd241ef947a36583ddbfa57.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第56张图片" /></a></p>

<h2 id="第二十一章-tcsh">第二十一章 tcsh</h2>

<p>tcsh shell使用命令行参数、默认文件、环境变量和内置命令来定义shell操作环境。<br />
<a href="https://img.it610.com/image/info8/a22b7c27e5e94f2794134c44e524e50d.jpg"><img src="https://img.it610.com/image/info8/a22b7c27e5e94f2794134c44e524e50d.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第57张图片" /></a><br />
tcsh文件： 登录文件、shell启动文件、退出文件</p>

<pre><code>登录文件    /etc/csh.login  /etc/csh/login
启动文件    /etc/csh.cshrc  $HOME/.cshrc    $HOME/.tcshrc
退出文件    /etc/csh.logout $HOME/.logout
</code></pre>

<p>tcsh shell包含两种环境变量 shell变量、系统环境变量</p>

<h2 id="第二十二章-kornshell">第二十二章 Kornshell</h2>

<p>ksh88和ksh93<br />
ksh93包括 命令行参数、默认文件、环境变量、内置命令</p>

<pre><code>默认文件    /etc/profile    $HOME/.profile
</code></pre>

<h3 id="ksh93环境变量特性">ksh93环境变量特性：</h3>

<h4 id="随机数-random">随机数 $RANDOM</h4>

<h4 id="定义变量类型">定义变量类型</h4>

<p><a href="https://img.it610.com/image/info8/aa1f8c78b7ba423d912b26869d1c97f6.jpg"><img src="https://img.it610.com/image/info8/aa1f8c78b7ba423d912b26869d1c97f6.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第58张图片" /></a></p>

<h4 id="复合变量">复合变量</h4>

<p><a href="https://img.it610.com/image/info8/b2396064583d4b298ed85d7c8d89e4bd.jpg"><img src="https://img.it610.com/image/info8/b2396064583d4b298ed85d7c8d89e4bd.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第59张图片" /></a></p>

<h4 id="特殊变量下标">特殊变量下标</h4>

<h3 id="在ksh93中编写脚本">在ksh93中编写脚本</h3>

<ol>
<li>执行数学运算 let命令、双圆括号、</li>
<li>结构化命令</li>
<li>命令重定向 variable = $( commond )</li>
<li>规程函数 get获取函数变量的值，set设置函数变量的值，unset重置函数变量的值。使用.sh.value变量</li>
</ol>

<h2 id="第二十三章-zsh-shell">第二十三章 zsh shell</h2>

<h3 id="一-zsh-shell的组成部分">一、zsh shell的组成部分</h3>

<h4 id="1-shell选项">1、 shell选项</h4>

<p><a href="https://img.it610.com/image/info8/e001043418dc4bfaab253baa2297d19b.jpg"><img src="https://img.it610.com/image/info8/e001043418dc4bfaab253baa2297d19b.jpg" alt="这里写图片描述" /></a><br />
选项类型：<br />
<a href="https://img.it610.com/image/info8/c0dca8ab1c8445e3bd724f373fd4c78f.jpg"><img src="https://img.it610.com/image/info8/c0dca8ab1c8445e3bd724f373fd4c78f.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第60张图片" /></a></p>

<h4 id="2-zsh-shell文件">2、 zsh shell文件</h4>

<p>shell启动文件 /etc/zshenv $HOME/.zshenv</p>

<pre><code>登录文件        /etc/zlogin /etc/zprofile   $HOME/.zlogin   $HOME/.zprofile
交互式文件       /etc/zshrc  $HOME/.zshrc
退出文件        /etc/zlogout    $HOME/.zlogout
</code></pre>

<h4 id="3-环境变量">3、 环境变量</h4>

<p>支持typeset命令，在变量使用前声明变量的属性<br />
<a href="https://img.it610.com/image/info8/57217405b07545789d05f82bc5369ea9.jpg"><img src="https://img.it610.com/image/info8/57217405b07545789d05f82bc5369ea9.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第61张图片" /></a><br />
<a href="https://img.it610.com/image/info8/b0fbe1afda494a7aa124fc1267ec3b99.jpg"><img src="https://img.it610.com/image/info8/b0fbe1afda494a7aa124fc1267ec3b99.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第62张图片" /></a><br />
数值数组起始索引值为1。<br />
声明关联数组 variable=( key1 value1 key2 value2 )</p>

<h4 id="4-内置命令">4、 内置命令</h4>

<p>核心内置命令<br />
添加模块<br />
<a href="https://img.it610.com/image/info8/90ee6ed9b35d4ec69f7a6ea995ff73c9.jpg"><img src="https://img.it610.com/image/info8/90ee6ed9b35d4ec69f7a6ea995ff73c9.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第63张图片" /></a><br />
<a href="https://img.it610.com/image/info8/ef7d43ddfdf84cdb91202c36c4da8b74.jpg"><img src="https://img.it610.com/image/info8/ef7d43ddfdf84cdb91202c36c4da8b74.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第64张图片" /></a><br />
查看模块 zmodload不加任何命令行参数<br />
载入模块 zmodload 模块名<br />
删除模块 zmodload –u 模块名</p>

<h3 id="二-使用zsh编写脚本">二、使用zsh编写脚本</h3>

<h4 id="1-数学运算">1、数学运算</h4>

<p>执行计算 let命令； 双圆括号参数<br />
数学函数</p>

<h4 id="2-结构化命令">2、结构化命令</h4>

<h4 id="3-函数-使用function关键字-定义带圆括号的函数名">3、函数 使用function关键字； 定义带圆括号的函数名</h4>

<p>可以将函数放在单独文件中，zsh shell通过fpath环境变量查找函数，可将函数文件放在该路径下任意目录中。<br />
zsh shell解析函数前，必须使用autoload命令，将函数载入内存 格式：autoload filename</p>

<h1 id="高级主题">高级主题</h1>

<h2 id="第二十四章-使用数据库">第二十四章 使用数据库</h2>

<p><a href="https://img.it610.com/image/info8/d5ecb42e333940d187d54229f6ae8a3a.jpg"><img src="https://img.it610.com/image/info8/d5ecb42e333940d187d54229f6ae8a3a.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第65张图片" /></a><br />
发送命令：单条命令<br />
<a href="https://img.it610.com/image/info8/726caa1d10f949d48d8eab242a7c6a00.jpg"><img src="https://img.it610.com/image/info8/726caa1d10f949d48d8eab242a7c6a00.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第66张图片" /></a><br />
多条命令<br />
<a href="https://img.it610.com/image/info8/87568d27da144b0caa672992cd6efef7.jpg"><img src="https://img.it610.com/image/info8/87568d27da144b0caa672992cd6efef7.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第67张图片" /></a><br />
将输出赋值给变量<br />
<a href="https://img.it610.com/image/info8/10e4905d9b4c4e2491b370c83f4055ae.jpg"><img src="https://img.it610.com/image/info8/10e4905d9b4c4e2491b370c83f4055ae.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第68张图片" /></a><br />
使用格式化标签<br />
mysql dbname –u username –X –e ‘commond’</p>

<h2 id="第二十五章-使用web">第二十五章 使用web</h2>

<h3 id="1-lynx程序">1、 Lynx程序</h3>

<h3 id="2-curl程序">2、 cURL程序</h3>

<h3 id="3-zsh的tcp模块">3、 zsh的TCP模块</h3>

<p><a href="https://img.it610.com/image/info8/4d9e2d71a0a14b53ab57dfc36932698f.jpg"><img src="https://img.it610.com/image/info8/4d9e2d71a0a14b53ab57dfc36932698f.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第69张图片" /></a><br />
<a href="https://img.it610.com/image/info8/5b61bfeb134c40d9a4eb775f99ddc211.jpg"><img src="https://img.it610.com/image/info8/5b61bfeb134c40d9a4eb775f99ddc211.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第70张图片" /></a></p>

<h2 id="第二十六章-使用电子邮件">第二十六章 使用电子邮件</h2>

<h2 id="第二十七章-管理员使用的shell脚本">第二十七章 管理员使用的shell脚本</h2>

<h3 id="1-监控系统统计信息">1、 监控系统统计信息</h3>

<h4 id="监控磁盘空闲空间">监控磁盘空闲空间</h4>

<p><a href="https://img.it610.com/image/info8/29ae16818b63467ea960a46ab106264f.jpg"><img src="https://img.it610.com/image/info8/29ae16818b63467ea960a46ab106264f.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第71张图片" /></a></p>

<h4 id="谁在霸占磁盘资源">谁在霸占磁盘资源</h4>

<p><a href="https://img.it610.com/image/info8/536935e9a3b046c090268f0dbed356c0.jpg"><img src="https://img.it610.com/image/info8/536935e9a3b046c090268f0dbed356c0.jpg" alt="Linux命令行和shell脚本编程宝典
笔记_第72张图片" /></a></p>

<h4 id="监视cpu和内存使用情况">监视CPU和内存使用情况</h4>

<p>使用uptime和vmstat命令</p>

<h3 id="2-执行备份">2、 执行备份</h3>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>