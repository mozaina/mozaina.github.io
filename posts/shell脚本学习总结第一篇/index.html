<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>shell脚本学习总结第一篇 | 开发者问答集锦</title>
    <meta property="og:title" content="shell脚本学习总结第一篇 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="shell脚本学习总结第一篇">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93%E7%AC%AC%E4%B8%80%E7%AF%87/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">shell脚本学习总结第一篇</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <p>一、用户登陆进入系统后的系统环境变量：<br />
$HOME 使用者自己的目录<br />
$PATH 执行命令时所搜寻的目录<br />
$TZ 时区<br />
$MAILCHECK 每隔多少秒检查是否有新的信件<br />
$PS1 在命令列时的提示号<br />
$PS2 当命令尚未打完时，Shell 要求再输入时的提示号<br />
$MANPATH man 指令的搜寻路径</p>

<p>二、特殊变量：</p>

<p>$0 这个程序的执行名字<br />
$n 这个程序的第n个参数值，n=1..9<br />
$* 这个程序的所有参数<br />
$# 这个程序的参数个数<br />
$$ 这个程序的PID<br />
$! 执行上一个指令的PID<br />
$? 执行上一个指令的返回值</p>

<p>三、shell中的变元：<br />
* 任意字符串<br />
? 一个任意字符<br />
[abc] a, b, c三者中之一<br />
[a-n] 从a到n的任一字符</p>

<p>四、几个特殊字符表示</p>

<p>/b 退回<br />
/c 打印一行时没有换行符 这个我们经常会用到<br />
/f 换页<br />
/r 回车<br />
/t 制表<br />
/v 垂直制表<br />
// 反斜线本身</p>

<p>五、判断文件的属性</p>

<p>格式：-操作符 filename<br />
-e 文件存在返回1， 否则返回0<br />
-r 文件可读返回1,否则返回0<br />
-w 文件可写返回1,否则返回0<br />
-x 文件可执行返回1,否则返回0<br />
-o 文件属于用户本人返回1, 否则返回0<br />
-s 文件长度为0返回1, 否则返回0.<br />
-f 文件为普通文件返回1, 否则返回0<br />
-d 文件为目录文件时返回1, 否则返回0</p>

<p>六、测试字符串<br />
字符串1 = 字符串2 当两个字串相等时为真<br />
字符串1 != 字符串2 当两个字串不等时为真<br />
-n 字符串 当字符串的长度大于0时为真<br />
-z 字符串 当字符串的长度为0时为真<br />
字符串 当串字符串为非空时为真</p>

<p>七、测试两个整数关系<br />
数字1 -eq 数字2 两数相等为真<br />
数字1 -ne 数字2 两数不等为真<br />
数字1 -gt 数字2 数字1大于数字2为真<br />
数字1 -ge 数字2 数字1大于等于数字2为真<br />
数字1 -lt 数字2 数字1小于数字2为真<br />
数字1 -le 数字2 数字1小于等于数字2为真</p>

<p>八、逻辑测试<br />
-a 与<br />
-o 或<br />
! 非</p>

<p>if [ $1 -gt 1 ] &amp;&amp; [ $1 -lt 10 ];<br />
then<br />
echo &ldquo;大于1小于10&rdquo;<br />
fi</p>

<p>shell中的特殊字符有</p>

<p>1、$ 美元符<br />
2、/ 反斜杠<br />
3、` 反引号<br />
4、&rdquo; 双引号<br />
5、&lt; ,&gt;,*,?,[,]</p>

<p>一、$符号<br />
1、echo $? 显示的是上一条指令退出状态<br />
2、echo &ldquo;$?&rdquo; 效果同上<br />
3、echo &lsquo;$?&rsquo; 显示的是$?<br />
4、echo /$? 显示的是$?<br />
5、echo &ldquo;/$?&rdquo; 显示的是$?</p>

<p>大家可能已经看出 $符号在双引号中具有特殊意义 双引号对$符号不起作用<br />
而单引号可以将特殊字符的的特殊意义屏蔽掉，使其能显示为字符本身，反斜<br />
杠也可以将特殊字符的特殊含义屏蔽掉，使特殊字符失去特殊含义。</p>

<p>二、/ 反斜杠<br />
反斜杠的作用是将特殊符号字符的特殊含义屏蔽掉，使其还是原字符<br />
A＝1234<br />
echo /$A 显示为$A 如果不加/将显示为1234<br />
echo /<code>显示为</code><br />
echo /&rdquo; 显示为双引号<br />
echo // 显示为/</p>

<p>三、` 反引号<br />
反引号的功能是命令替换，将反引号中的字符串做为命令来执行，我们在用shell编程时经常用的到 将系统命令的执行结果赋给一个变量</p>

<p>A=<code>date</code><br />
echo $A 显示的不是date而是当时的时间串<br />
比如有一文件A的内容如下<br />
ABCDEFG<br />
1234456<br />
abcdefg</p>

<p>B=<code>cat A|grep 234</code> # 检索文件A中含有字符串234的行<br />
echo $B 将显示为1234456<br />
echo &ldquo;$B&rdquo; 将显示为什么？<br />
echo &ldquo;/$B&rdquo; 将显示为什么？读者自己试试</p>

<p>四、&rdquo; 双引号<br />
在系统中有些特殊字符，为避免引用这些特殊字符 往往用双引号或单引号将这些特殊字符引起来，使其不具有特殊含义。<br />
但有一部分特殊字符在引号中还是具有特殊含义，用双引号引起来是不起作用的。本文中所列的前四个特殊字符在双引号中还是特殊字符。为了使其不具有特殊含义一是用单引号引进来二是用/反斜线使其失去作用。</p>

<p>比如我们想原样输出这些特殊字符</p>

<p>echo &ldquo;&rdquo;&rdquo;<br />
echo &ldquo;$&rdquo;<br />
echo &ldquo;/&rdquo;<br />
echo &ldquo;<code>&quot;  
以上不是你所期望的结果，因为双引号对它们不起作用，你只能这样才能输出这些特殊字符的原形  
echo '&quot;'  
echo '$'  
echo '/'  
echo '</code>&rsquo;<br />
或<br />
echo &ldquo;/&rdquo;&rdquo;<br />
echo &ldquo;/$&rdquo;<br />
echo &ldquo;//&rdquo;<br />
echo &ldquo;/<code>&quot;  
将分别显示为 &quot; $ /</code><br />
五、其它特殊字符<br />
大家注意到 除了前四个特殊字符外
我将其它的特殊字符都放在一块，这是因为前四个特殊字符在双引号中还是具有特殊含义，所以单独拿出来讲，除此以外的特殊字符如果你要输出这些特殊字符的原形，你就可以用双引号或单引号引起来使其失去特殊含义。<br />
&lt; ,&gt;,*,?,[,]对shell有特殊含义 但你可以用双引号引起来输入这些原形</p>

<p>讲了这么多大家是不是已经注意到所有的特殊字符在单引号中失去特殊含义，如果你要输出特殊字符原形但又记不清那些特殊字符在双引号中不能输出原形，建议你干脆用单引号引起来。</p>

<p>今天介绍条件测试语句</p>

<p>一、if 条件语句<br />
格式：<br />
if 条件表达式<br />
then #当条件为真时执行以下语句<br />
命令列表<br />
else #为假时执行以下语句<br />
命令列表<br />
fi</p>

<p>if test -f &ldquo;$1&rdquo;<br />
then<br />
lpr $1<br />
else<br />
if test -d &ldquo;$1&rdquo;<br />
then<br />
cd $1<br />
lpr $1<br />
else<br />
echo &ldquo;$1不是文件或目录&rdquo;<br />
fi<br />
fi</p>

<p>二、多重条件测试语句case<br />
格式：<br />
case 字串 in<br />
模式) 命令列表;;<br />
模式) 命令列表;;<br />
&hellip;.<br />
esac</p>

<p>多重条件语句是以case 开始以esac结束 中间可以有多个条件列表 功能是测试字串和和里面的模式有没有匹配的,有就执行里面的命令列表 模式也可以是*号
表示任意字串，每个模式里面的最后要心;;双引号结束，否则会发生语法错误。</p>

<p>现举例如下：</p>

<p>case $1 in<br />
*.c)<br />
cc $1<br />
;;<br />
*.txt)<br />
lpr $1<br />
;;<br />
*)<br />
echo &ldquo;未知的类型&rdquo;<br />
esac</p>

<p>假如将以上内容保存在文件abc中</p>

<p>今天介绍循环语句<br />
一. while 循环<br />
while 命令格式</p>

<p>while 条件表<br />
do<br />
命令表<br />
done</p>

<p>执行过程</p>

<p>举例说明 假如shell文件的内容如下:</p>

<p>Sum=0<br />
i=0<br />
while true #true是系统的关键词 表示真<br />
do<br />
i=<code>expr $i + 1</code><br />
Sum=<code>expr $Sum + $i</code><br />
if [ $i = &ldquo;100&rdquo; ]<br />
then<br />
break;<br />
fi<br />
done<br />
echo $i $Sum<br />
最后这个程序显示的是 100 5050<br />
这个程序的运算就是将1到100加起来</p>

<p>下面将这个程序再改动一下</p>

<p>Sum=0<br />
i=0<br />
while [ $i != &ldquo;100&rdquo; ]<br />
do<br />
i=<code>expr $i + 1</code><br />
Sum=<code>expr $Sum + $i</code><br />
done<br />
echo $i $Sum</p>

<p>改动后的程序运算结果和上面是一样 但程序比上面的要简练</p>

<p>在这个循环中还可以以until做为测试条件
它正好与while测试的条件相反,也就是当条件为假时将继续执行循环体内的语句,否则就退出循环体,下面还用这个例子.</p>

<p>Sum=0<br />
i=0<br />
until [ $i = &ldquo;100&rdquo; ]<br />
do<br />
i=<code>expr $i + 1</code><br />
Sum=<code>expr $Sum + $i</code><br />
done<br />
echo $i $Sum<br />
当i不等于100时循环 就是当条件为假时循环,否则就退出,而第一个例子是当i不等于100 时循环,也就是测试条件为真时循环.</p>

<p>二.for 循环</p>

<p>命令格式:<br />
for 变量 in 名字列表<br />
do<br />
命令列表<br />
done</p>

<p>这里的名字列表是一个由空格分隔的字符串列表,shell在执行for循环时每次依次从名字表中取出一个字符串赋给循环变量作为变量的值.在写for语句时,也可以省略in
名字列表部分,这表示用当前的位置参数来代替这时的名字列表.</p>

<p><strong>下面举个例子</strong><br />
比如在你的电脑中有两个目录,一个是aa,一个是bb在这两个目录中有5个相同的文件,但其中一个目录中的一个或多个文件刚刚修改过,现在我忘记刚才改的是那几个文件
了,那么我靠梢员冉弦幌抡饬礁瞿柯嫉奈募就知道?程序如下:</p>

<p>for File in a1 a2 a3 a4 a5<br />
do<br />
diff aa/$File bb/$File<br />
done</p>

<p>下面再举一个不带名字列表的例子</p>

<p>for File<br />
do<br />
echo $File<br />
done</p>

<p>文件内容保存在a.sh中 并可执行<br />
我们在执行这个shell程序时命令行如下:<br />
a.sh a1 a2 a3 a4 a5<br />
执行结果如下:<br />
a1<br />
a2<br />
a3<br />
a4<br />
a5<br />
大家从这个例子中可以看到命令行的参数被逐一读入一次</p>

<p>三.循环控制语句<br />
break 命令不执行当前循环体内break下面的语句从当前循环退出.<br />
continue 命令是程序在本循体内忽略下面的语句,从循环头开始执行.</p>

<p>一,命令组合:圆括号和花括号<br />
shell中有两种方法将命令组合在一起:圆括号和花括号.圆括号使shell创建一个子shell
来读取并执行括起来的名命令.左括号和右括号不论出现在命令行中的什么位置,shell都会认为它们具有特殊的组合意义的.只有用双引号将它们括起来引用,才表示圆括号或花括号的原义.例如:</p>

<p>echo a(b)<br />
将出现语法上的错误,要想输出a(b)字符串 只能括起来<br />
echo &ldquo;a(b)&rdquo;<br />
或echo a&rdquo;(&ldquo;b&rdquo;)&rdquo;<br />
这样才能被shell正确解释. 利用组合命令有什么作用呢?</p>

<p>一,用圆括号组合命令<br />
圆括号的组合命令可以创建子进程运行组合程序,建立子进程的功能是很有用的,因为子shell在组合命令中的种种操作都不会影响到当前shell的各变量的值.<br />
例如:<br />
子进程在执行组合命令时改变了工作目录,并在新的工作目录下执行一系例命令,执行完后它可以不必返回原工作目录,因为子进程工作目录的改变不会影响到当前工作目录.
创建子进程后将当前的环境也同样传给子shell,当前shell中用export输出到环境中的各变量在子shell中同样有效.</p>

<p>花括号也可以将命令组合在一起.左 右花括号只有作为一条命令的第一个字出现时, shell才它们含有特殊含义.
与圆括号不同的是花括号并不创建子shell,只是由当前的shell来读取并执行括起来的
命令.有时用户希望使用一组命令的顺序输出作为另一组命令的输入,此时用花括号是很方便的.
不论是用圆括号不是花括号,退出状态都是等于最后一条括起来的命令的退出状态</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>