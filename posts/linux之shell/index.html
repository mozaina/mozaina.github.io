<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>linux之Shell | 开发者问答集锦</title>
    <meta property="og:title" content="linux之Shell - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="linux之Shell">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/linux%E4%B9%8Bshell/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">linux之Shell</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>2018年8月9日</p>

<p>0:31</p>

<h2 id="1-查看linux支持的shell"><strong>1 、查看linux支持的Shell</strong></h2>

<p><strong><em>cat /etc/shells</em></strong></p>

<h2 id="2-执行脚本文件-3种方法"><strong>2 、执行脚本文件（3种方法：）</strong></h2>

<p>方法一：脚本文件路径（需要执行权：x权限）</p>

<p>例如：</p>

<p>cd /root</p>

<p>vi first.sh</p>

<p>cd /boot/</p>

<p>pwd</p>

<p>ls -lh vml*</p>

<p>chmod +x first.sh（赋予first.sh脚本文件执行权）</p>

<p>./first.sh</p>

<p>方法二：sh 脚本文件路径</p>

<p>例如：</p>

<p>vi server.sh</p>

<p>service $1 start</p>

<p>sh server.sh crond（crond为服务名）</p>

<p>方法三：source 脚本文件路径</p>

<p>例如：</p>

<p>source server.sh crond</p>

<h2 id="3-重定向"><strong>3 、重定向：</strong></h2>

<p>交互式设备：</p>

<p>标准输入：键盘（默认） /dev/stdin(设备文件） 0（编号）</p>

<p>标准输出：显示器（默认） /dev/stdout(设备文件） 1（编号）</p>

<p>错误输出：显示器（默认） /dev/stderr(设备文件） 2（编号）</p>

<p>重定向类型：</p>

<p>输入重定向：</p>

<p>标准输出（正确结果）重定向：</p>

<blockquote>
<p>（将输出结果保存至文件，并覆盖原内容）</p>

<blockquote>
<p>（将输出结果追加至原内容的末尾处）</p>
</blockquote>
</blockquote>

<p>错误输出（正确结果）重定向：</p>

<p>2&gt; （将输出结果保存至文件，并覆盖原内容）</p>

<p>2&gt;&gt; （将输出结果追加至原内容的末尾处）</p>

<p>混合输出（正确、错误）重定向：</p>

<p>&amp;&gt; （将输出结果保存至文件，并覆盖原内容）</p>

<p>&amp;&gt;&gt; （将输出结果追加至原内容的末尾处）</p>

<h2 id="4-管道符操作"><strong>4 、管道符操作</strong></h2>

<p>例如：</p>

<p>grep “bash$” /etc/passwd | awk -F: ‘{print $1,$7}’</p>

<p>（awk用于截取输出内容，-F为指定分隔符，例子中的分隔符为冒号）</p>

<p>（print为打印输出，$1,$7为位置变量，表示：第1列和第7列）</p>

<p>（整个命令结果是只显示原屏幕的：第1列和第7列的内容）</p>

<h2 id="5-shell变量"><strong>5 、Shell变量：</strong></h2>

<p>1）变量的类型</p>

<p>自定义变量：由用户自己定义、修改和使用</p>

<p>环境变量：由系统维护，用于设置工作环境</p>

<p>位置变量：通过命令行给脚本程序传递参数</p>

<p>预定义变量：Bash中内置的一类变量，不能直接修改</p>

<p>2）定义变量：变量名=变量值</p>

<p>（变量名以字母或下划线开头，区分大小写，建议全大写）</p>

<p>3）查看变量的值：echo $变量名</p>

<p>例如：</p>

<p>Product=AIX</p>

<p>Version=1.0</p>

<p>echo $Product</p>

<p>echo $Product $Version</p>

<p>4）赋值时使用引号</p>

<p>双引号：允许通过$符号引用其他变量值</p>

<p>单引号：禁止引用其他变量值，$视为普通字符</p>

<p>反撇号：命令替换，提取命令执行后的输出结果</p>

<p>例如：</p>

<p>num1=100</p>

<p>num2=200</p>

<p>num3=&ldquo;$num2&rdquo;</p>

<p>num4=&lsquo;$num2&rsquo;</p>

<p>LS=<code>ls /root</code></p>

<p>echo $num3</p>

<p>echo $num4</p>

<p>echo $LS</p>

<p>5)从键盘输入内容为变量赋值</p>

<p>格式： read [-p &ldquo;提示信息&rdquo;] 变量名</p>

<p>例如：</p>

<p>read NAME（无友好提示，不知道该输入什么内容）</p>

<p>（从键盘输入的内容赋值给变量NAME）</p>

<p>read &ldquo;请输入您的姓名&rdquo; NAME（有提示，提示内容为：请输入您的姓名）</p>

<p>（从键盘输入的内容赋值给变量NAME）</p>

<p>6）设置变量的作用范围</p>

<p>格式1：export 变量名 &hellip;（提升已有变量为全局变量）</p>

<p>格式2： export 变量名=变量值 &hellip;（定义新变量的同时，提升其为全局变量）</p>

<p>例如：</p>

<p>Product=AIX</p>

<p>Version=1.0</p>

<p>export Product</p>

<p>bash</p>

<p>echo $Product（输出结果为：AIX）</p>

<p>echo $Version（输出结果为：空）</p>

<p>exit</p>

<p>7）整数变量的运算</p>

<p>格式：expr 变量1 运算符 变量2 [运算符 变量3] &hellip;</p>

<p>常用运算符</p>

<p>加法运算：+</p>

<p>减法运算： -</p>

<p>乘法运算： \*</p>

<p>除法运算： /</p>

<p>求模（取余）运算： %</p>

<p>例如：</p>

<p>num1=100</p>

<p>num2=200</p>

<p>sum1=<code>expr $num1 + $num2</code></p>

<p>product1=<code>expr $num1 \\* $num2</code></p>

<p>echo $sum1 $product1</p>

<p>也可以：</p>

<p>sum2=$((num1+num2))</p>

<p>product2=$((num1*num2))</p>

<p>echo $sum2 $product2</p>

<p>8)环境变量</p>

<p>由系统提前创建，用来设置用户的工作环境</p>

<p>配置文件：</p>

<p>/etc/profile：定义全局的系统环境变量</p>

<p>~/.bash_profile（定义不同用户的环境变量，该文件具有隐藏属性）</p>

<p>例如：</p>

<p>ls /root（无法找到.bash_profile文件，文件处于隐藏状态）</p>

<p>ls -a /root（-a选项，也可以-A，都可以看到隐藏文件）</p>

<p>（前面带点的文件或目录，就自动具有隐藏属性）</p>

<p>（我们也可以自己创建带点的文件或目录）</p>

<p>常见的环境变量：</p>

<p>PWD（定义工作路径）、PATH（命令的搜索路径）</p>

<p>USER（定义登录的用户名） 、SHELL（定义shell）、HOME（定义家目录）</p>

<p>例如：</p>

<p>echo $PATH（查看显示结果）</p>

<p>PATH=&ldquo;$PATH:/root&rdquo;</p>

<p>echo $PATH（再次查看显示结果，前后对比）</p>

<p>9）位置变量：表示为 $n，n为1~9之间的数字</p>

<p>例如：</p>

<p>cd /root</p>

<p>vi copy.sh</p>

<p>#!/bin/bash</p>

<p>cp $1 $2</p>

<p>chmod +x copy.sh</p>

<p>./copy.sh /etc/yum.conf /root</p>

<p>(脚本中的位置变量$1的值为：/etc/yum.conf,$2的值为：/root)</p>

<p>10）预定义变量</p>

<p>$#：命令行中位置变量的个数</p>

<p>$*：所有位置变量的内容</p>

<p>$?：上一条命令执行后返回的状态，当返回状态值为0时表示执行正常，非0值表示执行异常或出错</p>

<p>$0：当前执行的进程/程序名</p>

<p>例如：</p>

<p>cd /root</p>

<p>vi mybak.sh</p>

<p>#!/bin/bash</p>

<p>TARFILE=beifen-<code>date +%s</code>.tgz</p>

<p>tar zcf $TARFILE $* &amp;&gt; /dev/null</p>

<p>echo &ldquo;已执行 $0 脚本，&rdquo;</p>

<p>echo &ldquo;共完成 $# 个对象的备份&rdquo;</p>

<p>echo “具体内容包括： $*”</p>

<p>./mybak.sh /etc/passwd /etc/shadow （查看结果）</p>

<p>10）脚本应用思路</p>

<p>第一：具体命令、及其执行顺序</p>

<p>第二：组织任务过程 编写脚本</p>

<p>第三：设置计划任务（控制时间tab，调用任务脚本）</p>

<p>Crontab -e</p>

<p>30 2 * * * /bak.sh（脚本或目录命令）</p>

<p>分 小时 日 月 年</p>

<p>Service crond start 计划任务服务开启</p>

<p>Shell 逻辑命令</p>

<p>2018年8月9日</p>

<p>11:39</p>

<h2 id="test-命令"><strong>Test 命令</strong></h2>

<p><strong><em>测试特定的表达式是否成立，如果成立返回</em> <em>0</em> <em>值，不成立返回</em> <em>1.</em></strong></p>

<p>格式1：test 条件表达式</p>

<p>格式2：[ 条件表达式 ]</p>

<p>-d：测试是否为目录（Directory）</p>

<p>-e：测试目录或文件是否存在（Exist）</p>

<p>-f：测试是否为文件（File）</p>

<p>-r：测试当前用户是否有权限读取（Read）</p>

<p>-w：测试当前用户是否有权限写入（Write）</p>

<p>-x：测试当前用户是否有权限执行（eXcute）</p>

<h2 id="逻辑测试"><strong>逻辑测试</strong></h2>

<p>格式1：[ 表达式1 ] 操作符 [ 表达式2 ] &hellip;</p>

<p>格式2：命令1 操作符 命令2 &hellip;</p>

<p>常用的测试操作符</p>

<p>-a或&amp;&amp;：逻辑与，“而且”的意思</p>

<p>-o或||：逻辑或，“或者”的意思</p>

<p>!：逻辑否</p>

<h2 id="常用的测试操作符"><strong>常用的测试操作符</strong></h2>

<p>=：字符串内容相同</p>

<p>!=：字符串内容不同，! 号表示相反的意思</p>

<p>-z：字符串内容为空</p>

<h2 id="例如"><strong>例如：</strong></h2>

<p>[root@localhost ~]# Str1=&ldquo;abc&rdquo;</p>

<p>[root@localhost ~]# Str2=&ldquo;ABC&rdquo;</p>

<p>[root@localhost ~]# [ $Str1 = $Str2 ] &amp;&amp; echo YES || echo NO</p>

<p>NO</p>

<p>[root@localhost ~]# [ $Str1 != $Str2 ] &amp;&amp; echo YES || echo NO</p>

<p>YES</p>

<p>[root@localhost ~]# [ -z $Str2 ] &amp;&amp; echo YES || echo NO</p>

<p>NO</p>

<p>[root@localhost ~]# [ -z &ldquo;&rdquo; ] &amp;&amp; echo YES || echo NO</p>

<p>YES</p>

<h2 id="if-条件测试"><strong>if 条件测试</strong></h2>

<p>if</p>

<p>then</p>

<p>elif</p>

<p>then</p>

<p>else</p>

<p>fi</p>

<p>for</p>

<p>for 变量名 in 取值列表</p>

<p>do</p>

<p>命令序列</p>

<p>done</p>

<p>while 条件测试操作</p>

<p>do</p>

<p>命令序列</p>

<p>done</p>

<p>例：</p>

<p><a href="https://img.it610.com/image/info8/955ad308d54d41738154afdb61fb71ef.jpg"><img src="https://img.it610.com/image/info8/955ad308d54d41738154afdb61fb71ef.jpg" alt="linux之Shell_第1张图片" /></a></p>

<p>case</p>

<p>case 变量值 in</p>

<p>模式1）</p>

<p>命令序列1</p>

<p>;;</p>

<p>模式2）</p>

<p>命令序列2</p>

<p>;;</p>

<p>….</p>

<p>*)(表示通配)</p>

<p>默认命令序列</p>

<p>esac</p>

<p>例：</p>

<p><a href="https://img.it610.com/image/info8/194cf1d38de246d79f321b72b5a337af.jpg"><img src="https://img.it610.com/image/info8/194cf1d38de246d79f321b72b5a337af.jpg" alt="linux之Shell_第2张图片" /></a></p>

<p><a href="https://img.it610.com/image/info8/a271ad603ff24b5a99b137e1c0afa1ae.jpg"><img src="https://img.it610.com/image/info8/a271ad603ff24b5a99b137e1c0afa1ae.jpg" alt="linux之Shell_第3张图片" /></a></p>

<h2 id="程序案例"><strong>、程序案例：</strong></h2>

<p>案例一：判断磁盘已用空间比例</p>

<p><a href="https://img.it610.com/image/info8/c0f20b94eb364db4972d63367e773096.jpg"><img src="https://img.it610.com/image/info8/c0f20b94eb364db4972d63367e773096.jpg" alt="linux之Shell_第4张图片" /></a></p>

<p>输出结果</p>

<p>案例二：判断Httpd服务是否开启</p>

<p>#!/bin/bash</p>

<p>netstat -anpt | grep httpd &amp;&gt; /dev/null</p>

<p>if [ $? -eq 0 ]</p>

<p>then</p>

<p>echo &ldquo;Httpd服务已经启动！&rdquo;</p>

<p>else</p>

<p>rpm -q httpd &amp;&gt; /dev/null</p>

<p>if [ $? -eq 0 ]</p>

<p>then</p>

<p>service httpd start</p>

<p>else</p>

<p>mount /dev/cdrom /mnt</p>

<p>rpm -ivh /mnt/Packages/httpd-2.2.15-29.el6_4.x86_64.rpm</p>

<p>fi</p>

<p>fi</p>

<p>案例三：根据输入的成绩值，判断等级</p>

<p><a href="https://img.it610.com/image/info8/26173ed9991341d89e9d721c63c96c91.jpg"><img src="https://img.it610.com/image/info8/26173ed9991341d89e9d721c63c96c91.jpg" alt="linux之Shell_第5张图片" /></a></p>

<p>输出结果</p>

<p><a href="https://img.it610.com/image/info8/111fe7a03b784bcab140d1f255c8d924.jpg"><img src="https://img.it610.com/image/info8/111fe7a03b784bcab140d1f255c8d924.jpg" alt="" /></a></p>

<p>案例四：网络连通性测试</p>

<p><a href="https://img.it610.com/image/info8/bd37b4e3a9074a2c909d92fd093669b7.jpg"><img src="https://img.it610.com/image/info8/bd37b4e3a9074a2c909d92fd093669b7.jpg" alt="linux之Shell_第6张图片" /></a></p>

<p>结果</p>

<p><a href="https://img.it610.com/image/info8/4610f5ea9b374c9b93855babc54df3a4.jpg"><img src="https://img.it610.com/image/info8/4610f5ea9b374c9b93855babc54df3a4.jpg" alt="" /></a></p>

<p>案例五：从IP地址列表文件中，测试主机的连通性</p>

<p>案例六：批量创建100个用户，用户名为stu开头字符串开头，后跟1-100的编号，初始密码均为：123456</p>

<p>#!/bin/bash</p>

<p>for((i=1;i&lt;=100;i++))</p>

<p>do</p>

<p>useradd stu$i &amp;&gt; /dev/null</p>

<p>echo &ldquo;123456&rdquo; | password &ndash;stdin stu$i</p>

<p>done</p>

<p>案例七：批量创建用户，用户名从文件列表中获取，初始密码均为：123456</p>

<p>#!/bin/bash</p>

<p>UserList=$(cat /root/userlist.txt)</p>

<p>for User in $UserList</p>

<p>do</p>

<p>useradd $UserList &amp;&gt; /dev/null</p>

<p>echo &ldquo;123456&rdquo; | password &ndash;stdin $UserList</p>

<p>done</p>

<p>案例八：统计1-100之和</p>

<p>#!/bin/bash</p>

<p>sum=0</p>

<p>for((i=1;i&lt;=100;i++))</p>

<p>do</p>

<p>sum=$((sum+i))</p>

<p>done</p>

<p>echo $sum</p>

<p>案例九： 猜价格游戏</p>

<p><a href="https://img.it610.com/image/info8/b605580f4bb943bbafdd352902cbd733.jpg"><img src="https://img.it610.com/image/info8/b605580f4bb943bbafdd352902cbd733.jpg" alt="linux之Shell_第7张图片" /></a></p>

<p>案例10：MySQL数据库备份脚本</p>

<p>#!/bin/bash</p>

<h1 id="这是一个简化的mqsql数据库逻辑备份脚本">这是一个简化的MqSQL数据库逻辑备份脚本</h1>

<h1 id="1-定义数据库链接-目标库信息">1.定义数据库链接，目标库信息</h1>

<p>MY_USER=&ldquo;operator&rdquo;</p>

<p>MY_PASS=&ldquo;pwd123&rdquo;</p>

<p>MY_HOST=&ldquo;192.168.4.11&rdquo;</p>

<p>MY_CONN=&ldquo;-u $MY_USER -p$MY_PASS -h $MY_HOST&rdquo;</p>

<p>MY_DB1=&ldquo;studydb&rdquo;</p>

<p>MY_DB2=&ldquo;coursedb&rdquo;</p>

<h1 id="2-定义备份目录-工具-时间-文件名主体">2.定义备份目录，工具，时间，文件名主体</h1>

<p>BF_DIR=&ldquo;/mysql.benfen/&rdquo;</p>

<p>BF_CMD=&ldquo;/usr/bin/mysqldump&rdquo;</p>

<p>BF_TIME=&lsquo;date +%Y%m%d-%H%M&rsquo;</p>

<p>NAME_1=&ldquo;$MY_DB1-$BF_TIME&rdquo;</p>

<p>NAME_2=&ldquo;$MY_DB2-$BF_TIME&rdquo;</p>

<h1 id="3-先导出为-sql脚本-然后再进行压缩-打包后删除原文件">3.先导出为.sql脚本，然后再进行压缩（打包后删除原文件）</h1>

<p>cd $BF_DIR</p>

<p>$BF_CMD $MY_CONN &ndash;databases $MY_DB1 &gt; $NAME_1.sql</p>

<p>$BF_CMD $MY_CONN &ndash;databases $MY_DB2 &gt; $NAME_2.sql</p>

<p>/bin/tar zcf $NAME_1.tar.gz $NAME_1.sql &ndash;remove &amp;&gt; /dev/null</p>

<p>/bin/tar zcf $NAME_2.tar.gz $NAME_2.sql &ndash;remove &amp;&gt; /dev/null</p>

<p>案例11：</p>

<p>#!/bin/bash</p>

<p>case $2 in</p>

<p>start)</p>

<p>service $1 start</p>

<p>;;</p>

<p>stop)</p>

<p>service $1 stop</p>

<p>;;</p>

<p>restart)</p>

<p>service $1 stop</p>

<p>service $1 start</p>

<p>;;</p>

<p>status)</p>

<p>service $1 status</p>

<p>;;</p>

<p>reload)</p>

<p>service $1 reload</p>

<p>;;</p>

<p>*)</p>

<p>echo &ldquo;语法错误！&rdquo;</p>

<p>echo &ldquo;service $1 start|stop|restart|status|reload&rdquo;</p>

<p>esac</p>

<p>案例12：设置网卡静态IP地址等信息</p>

<p>#!/bin/bash</p>

<p>#获取网卡的设备名称</p>

<p>IFNAME=$(ifconfig | grep &ldquo;eth&rdquo; | awk &lsquo;{print $1}&rsquo;)</p>

<p>#获取网卡的MAC地址信息</p>

<p>MAC=$(ifconfig | grep &ldquo;eth&rdquo; | awk &lsquo;{print $5}&rsquo;)</p>

<p>#生成网卡设备的配置文件，并重启网络服务，使配置文件生效</p>

<p>echo &ldquo;DEVICE=$IFNAME</p>

<p>HWADDR=$MAC</p>

<p>TYPE=Ethernet</p>

<p>ONBOOT=yes</p>

<p>BOOTPROTO=static</p>

<p>IPADDR=192.168.120.120</p>

<p>NETMASK=255.255.255.0</p>

<p>GATEWAY=192.168.120.254</p>

<p>DNS1=8.8.8.8</p>

<p>DNS2=114.114.114.114&rdquo; &gt; /etc/sysconfig/network-scripts/ifcfg-$IFNAME</p>

<p>service network restart</p>

<p>案例13：设置网卡静态IP地址等信息(通过键盘输入)</p>

<p>#!/bin/bash</p>

<p>IFNAME=$(ifconfig | grep &ldquo;eth&rdquo; | awk &lsquo;{print $1}&rsquo;)</p>

<p>MAC=$(ifconfig | grep &ldquo;eth&rdquo; | awk &lsquo;{print $5}&rsquo;)</p>

<p>read -p &ldquo;请输入网卡IP地址：&rdquo; IP</p>

<p>read -p &ldquo;请输入子网掩码：&rdquo; MASK</p>

<p>read -p &ldquo;请输入网关地址：&rdquo; GW</p>

<p>read -p &ldquo;请输入首选DNS地址：&rdquo; DNS1</p>

<p>read -p &ldquo;请输入备用DNS地址：&rdquo; DNS2</p>

<p>echo &ldquo;DEVICE=$IFNAME</p>

<p>HWADDR=$MAC</p>

<p>TYPE=Ethernet</p>

<p>ONBOOT=yes</p>

<p>BOOTPROTO=static</p>

<p>IPADDR=$IP</p>

<p>NETMASK=$MASK</p>

<p>GATEWAY=$GW</p>

<p>DNS1=$DNS1</p>

<p>DNS2=$DNS2&rdquo; &gt; /etc/sysconfig/network-scripts/ifcfg-$IFNAME</p>

<p>service network restart</p>

<p>案例14：将克隆后的虚拟机网卡设备名称由：eth1、eth2、eth3&hellip;改为eth0</p>

<p>思路如下：</p>

<p>修改网卡设备名为：eth0</p>

<p>修改下列文件：</p>

<p>/etc/udev/rules.d/70-persistent-net.rules</p>

<p>对原始的eth0所在行加注释：如下所示：</p>

<p>#SUBSYSTEM==&ldquo;net&rdquo;, ACTION==&ldquo;add&rdquo;, DRIVERS==&ldquo;?<em>&rdquo;,
ATTR{address}==&ldquo;00:0c:29:3b:7d:a4&rdquo;, ATTR{type}==&ldquo;1&rdquo;, KERNEL==&ldquo;eth</em>&rdquo;,
NAME=&ldquo;eth0&rdquo;</p>

<p>再将另一个设备名改为：eth0，如下所示：</p>

<p>该行原内容为：</p>

<p>SUBSYSTEM==&ldquo;net&rdquo;, ACTION==&ldquo;add&rdquo;, DRIVERS==&ldquo;?<em>&rdquo;,
ATTR{address}==&ldquo;00:0c:29:0f:85:66&rdquo;, ATTR{type}==&ldquo;1&rdquo;, KERNEL==&ldquo;eth</em>&rdquo;,
NAME=&ldquo;eth1&rdquo;</p>

<p>修改后为：</p>

<p>SUBSYSTEM==&ldquo;net&rdquo;, ACTION==&ldquo;add&rdquo;, DRIVERS==&ldquo;?<em>&rdquo;,
ATTR{address}==&ldquo;00:0c:29:0f:85:66&rdquo;, ATTR{type}==&ldquo;1&rdquo;, KERNEL==&ldquo;eth</em>&rdquo;,
NAME=&ldquo;eth0&rdquo;</p>

<p>最后，执行重启命令：reboot</p>

<p>#!/bin/bash</p>

<p>#获取网卡的设备名称</p>

<p>IFNAME=$(ifconfig | grep &ldquo;eth&rdquo; | awk &lsquo;{print $1}&rsquo;)</p>

<p>#获取网卡的MAC地址信息</p>

<p>MAC=$(ifconfig | grep &ldquo;eth&rdquo; | awk &lsquo;{print $5}&rsquo;)</p>

<p>#注释原有的eth0所在行</p>

<p>sed -i &ldquo;/eth0/s/SUBSYSTEM/#SUBSYSTEM&rdquo; /etc/udev/rules.d/70-persistent-
net.rules</p>

<p>#将网卡的新设备名改为：eth0</p>

<p>sed &ldquo;s/$IFNAME/eth0&rdquo; /etc/udev/rules.d/70-persistent-net.rules &amp;&gt; /dev/null</p>

<p>#生成网卡设备的配置文件，并重启网络服务，使配置文件生效</p>

<p>echo &ldquo;DEVICE=eth0</p>

<p>HWADDR=$MAC</p>

<p>TYPE=Ethernet</p>

<p>ONBOOT=yes</p>

<p>BOOTPROTO=static</p>

<p>IPADDR=192.168.120.120</p>

<p>NETMASK=255.255.255.0</p>

<p>GATEWAY=192.168.120.254</p>

<p>DNS1=8.8.8.8</p>

<p>DNS2=114.114.114.114&rdquo; &gt; /etc/sysconfig/network-scripts/ifcfg-eth0</p>

<p>service network restart</p>

<p>reboot</p>

<p><a href="https://img.it610.com/image/info8/e1c7329350fc402f9275d0c7b4457e87.jpg"><img src="https://img.it610.com/image/info8/e1c7329350fc402f9275d0c7b4457e87.jpg" alt="" /></a></p>

<p><a href="https://img.it610.com/image/info8/223d0baa9683489aa3e2fd93c34bd532.jpg"><img src="https://img.it610.com/image/info8/223d0baa9683489aa3e2fd93c34bd532.jpg" alt="linux之Shell_第8张图片" /></a></p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>