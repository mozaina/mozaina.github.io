<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Androidadb命令和adbshell命令 | 开发者问答集锦</title>
    <meta property="og:title" content="Androidadb命令和adbshell命令 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Androidadb命令和adbshell命令">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/androidadb%E5%91%BD%E4%BB%A4%E5%92%8Cadbshell%E5%91%BD%E4%BB%A4/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Androidadb命令和adbshell命令</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>adb命令是adb这个程序自己的命令。adb
shell是Android系统自带的命令，都保存在Android系统的/system/bin目录下，命令文件本质是shell脚本。</p>

<h1 id="adb命令">ADB命令</h1>

<p>adb devices：获取当前所有已连接设备的list。<br />
adb get-state：获取设备的状态。<br />
设备的状态有三种：device、offline、unknow。</p>

<table>
<thead>
<tr>
<th>状态</th>
<th>意义</th>
</tr>
</thead>

<tbody>
<tr>
<td>device</td>
<td>设备已连接</td>
</tr>

<tr>
<td>offline</td>
<td>设备脱机</td>
</tr>

<tr>
<td>unknow</td>
<td>设备状态不可知</td>
</tr>
</tbody>
</table>

<p>adb kill-server：停止adb服务。<br />
adb start-server：开启adb服务。<br />
这两个状态通常配对使用。<br />
adb logcat：输出Android系统日志。<br />
adb bugrepot：打印dumpsys、dumpstate、logcat的输出，用于错误分析。<br />
adb install：用于app安装，-r参数覆盖安装。<br />
adb uninstall：用于app卸载。<br />
adb pull：用于将Android系统中的文件或文件夹复制到本地。<br />
adb push：用于将本地文件或文件夹复制到Android系统指定文件目录下。<br />
这两个命令如果处理的是系统文件或文件夹需要先获取到root权限然后remount系统文件获取读写权限。<br />
adb root、adb remount：用于获取root权限再重新挂载系统文件获取读写权限。<br />
adb reboot：重启android系统。<br />
adb forward：用于将宿主机上的某个端口重定向到Android机上的某个端口。例如：adb forward tcp:123 tcp:8888
这条命令就会把发往主机123端口的数据转发到Android机的8888端口，一般用于远程控制等。<br />
adb connect：用于无线adb连接，要求宿主机和Android机在同一个局域网络下。例如：adb connect
192.168.1.100，这个ip地址就是手机在局域网中的ip。缺点是延迟大。<br />
adb shell：可以执行Android系统命令。<br />
下面介绍的都是adb shell命令。</p>

<h1 id="pm">pm</h1>

<pre><code>255|yfve_8q:/ # pm  
Package manager (package) commands:
  help
    Print this help text.

  path [--user USER_ID] PACKAGE
    Print the path to the .apk of the given PACKAGE.

  dump PACKAGE
    Print various system state associated with the given PACKAGE.

  list features
    Prints all features of the system.

  has-feature FEATURE_NAME [version]
    Prints true and returns exit status 0 when system has a FEATURE_NAME,
    otherwise prints false and returns exit status 1

  list instrumentation [-f] [TARGET-PACKAGE]
    Prints all test packages; optionally only those targeting TARGET-PACKAGE
    Options:
      -f: dump the name of the .apk file containing the test package

  list libraries
    Prints all system libraries.

  list packages [-f] [-d] [-e] [-s] [-3] [-i] [-l] [-u] [-U] 
      [--uid UID] [--user USER_ID] [FILTER]
    Prints all packages; optionally only those whose name contains
    the text in FILTER.  Options are:
      -f: see their associated file
      -d: filter to only show disabled packages
      -e: filter to only show enabled packages
      -s: filter to only show system packages
      -3: filter to only show third party packages
      -i: see the installer for the packages
      -l: ignored (used for compatibility with older releases)
      -U: also show the package UID
      -u: also include uninstalled packages
      --uid UID: filter to only show packages with the given UID
      --user USER_ID: only list packages belonging to the given user

  list permission-groups
    Prints all known permission groups.

  list permissions [-g] [-f] [-d] [-u] [GROUP]
    Prints all known permissions; optionally only those in GROUP.  Options are:
      -g: organize by group
      -f: print all information
      -s: short summary
      -d: only list dangerous permissions
      -u: list only the permissions users will see

  resolve-activity [--brief] [--components] [--user USER_ID] INTENT
    Prints the activity that resolves to the given INTENT.

  query-activities [--brief] [--components] [--user USER_ID] INTENT
    Prints all activities that can handle the given INTENT.

  query-services [--brief] [--components] [--user USER_ID] INTENT
    Prints all services that can handle the given INTENT.

  query-receivers [--brief] [--components] [--user USER_ID] INTENT
    Prints all broadcast receivers that can handle the given INTENT.

  install [-lrtsfdg] [-i PACKAGE] [--user USER_ID|all|current]
       [-p INHERIT_PACKAGE] [--install-location 0/1/2]
       [--originating-uri URI] [---referrer URI]
       [--abi ABI_NAME] [--force-sdk]
       [--preload] [--instantapp] [--full] [--dont-kill]
       [--force-uuid internal|UUID] [--pkg PACKAGE] [-S BYTES] [PATH|-]
    Install an application.  Must provide the apk data to install, either as a
    file path or '-' to read from stdin.  Options are:
      -l: forward lock application
      -R: disallow replacement of existing application
      -t: allow test packages
      -i: specify package name of installer owning the app
      -s: install application on sdcard
      -f: install application on internal flash
      -d: allow version code downgrade (debuggable packages only)
      -p: partial application install (new split on top of existing pkg)
      -g: grant all runtime permissions
      -S: size in bytes of package, required for stdin
      --user: install under the given user.
      --dont-kill: installing a new feature split, don't kill running app
      --originating-uri: set URI where app was downloaded from
      --referrer: set URI that instigated the install of the app
      --pkg: specify expected package name of app being installed
      --abi: override the default ABI of the platform
      --instantapp: cause the app to be installed as an ephemeral install app
      --full: cause the app to be installed as a non-ephemeral full app
      --install-location: force the install location:
          0=auto, 1=internal only, 2=prefer external
      --force-uuid: force install on to disk volume with given UUID
      --force-sdk: allow install even when existing app targets platform
          codename but new one targets a final API level

  install-create [-lrtsfdg] [-i PACKAGE] [--user USER_ID|all|current]
       [-p INHERIT_PACKAGE] [--install-location 0/1/2]
       [--originating-uri URI] [---referrer URI]
       [--abi ABI_NAME] [--force-sdk]
       [--preload] [--instantapp] [--full] [--dont-kill]
       [--force-uuid internal|UUID] [--pkg PACKAGE] [-S BYTES]
    Like &quot;install&quot;, but starts an install session.  Use &quot;install-write&quot;
    to push data into the session, and &quot;install-commit&quot; to finish.

  install-write [-S BYTES] SESSION_ID SPLIT_NAME [PATH|-]
    Write an apk into the given install session.  If the path is '-', data
    will be read from stdin.  Options are:
      -S: size in bytes of package, required for stdin

  install-commit SESSION_ID
    Commit the given active install session, installing the app.

  install-abandon SESSION_ID
    Delete the given active install session.

  set-install-location LOCATION
    Changes the default install location.  NOTE this is only intended for debugging;
    using this can cause applications to break and other undersireable behavior.
    LOCATION is one of:
    0 [auto]: Let system decide the best location
    1 [internal]: Install on internal device storage
    2 [external]: Install on external media

  get-install-location
    Returns the current install location: 0, 1 or 2 as per set-install-location.

  move-package PACKAGE [internal|UUID]

  move-primary-storage [internal|UUID]

  pm uninstall [-k] [--user USER_ID] [--versionCode VERSION_CODE] PACKAGE [SPLIT]
    Remove the given package name from the system.  May remove an entire app
    if no SPLIT name is specified, otherwise will remove only the split of the
    given app.  Options are:
      -k: keep the data and cache directories around after package removal.
      --user: remove the app from the given user.
      --versionCode: only uninstall if the app has the given version code.

  clear [--user USER_ID] PACKAGE
    Deletes all data associated with a package.

  enable [--user USER_ID] PACKAGE_OR_COMPONENT
  disable [--user USER_ID] PACKAGE_OR_COMPONENT
  disable-user [--user USER_ID] PACKAGE_OR_COMPONENT
  disable-until-used [--user USER_ID] PACKAGE_OR_COMPONENT
  default-state [--user USER_ID] PACKAGE_OR_COMPONENT
    These commands change the enabled state of a given package or
    component (written as &quot;package/class&quot;).

  hide [--user USER_ID] PACKAGE_OR_COMPONENT
  unhide [--user USER_ID] PACKAGE_OR_COMPONENT

  suspend [--user USER_ID] TARGET-PACKAGE
    Suspends the specified package (as user).

  unsuspend [--user USER_ID] TARGET-PACKAGE
    Unsuspends the specified package (as user).

  grant [--user USER_ID] PACKAGE PERMISSION
  revoke [--user USER_ID] PACKAGE PERMISSION
    These commands either grant or revoke permissions to apps.  The permissions
    must be declared as used in the app's manifest, be runtime permissions
    (protection level dangerous), and the app targeting SDK greater than Lollipop MR1.

  reset-permissions
    Revert all runtime permissions to their default state.

  set-permission-enforced PERMISSION [true|false]

  get-privapp-permissions TARGET-PACKAGE
    Prints all privileged permissions for a package.

  get-privapp-deny-permissions TARGET-PACKAGE
    Prints all privileged permissions that are denied for a package.

  get-oem-permissions TARGET-PACKAGE
    Prints all OEM permissions for a package.

  set-app-link [--user USER_ID] PACKAGE {always|ask|never|undefined}
  get-app-link [--user USER_ID] PACKAGE

  trim-caches DESIRED_FREE_SPACE [internal|UUID]
    Trim cache files to reach the given free space.

  create-user [--profileOf USER_ID] [--managed] [--restricted] [--ephemeral]
      [--guest] USER_NAME
    Create a new user with the given USER_NAME, printing the new user identifier
    of the user.

  remove-user USER_ID
    Remove the user with the given USER_IDENTIFIER, deleting all data
    associated with that user

  set-user-restriction [--user USER_ID] RESTRICTION VALUE

  get-max-users

  get-max-running-users

  compile [-m MODE | -r REASON] [-f] [-c] [--split SPLIT_NAME]
          [--reset] [--check-prof (true | false)] (-a | TARGET-PACKAGE)
    Trigger compilation of TARGET-PACKAGE or all packages if &quot;-a&quot;.  Options are:
      -a: compile all packages
      -c: clear profile data before compiling
      -f: force compilation even if not needed
      -m: select compilation mode
          MODE is one of the dex2oat compiler filters:
            assume-verified
            extract
            verify
            quicken
            space-profile
            space
            speed-profile
            speed
            everything
      -r: select compilation reason
          REASON is one of:
            first-boot
            boot
            install
            bg-dexopt
            ab-ota
            inactive
            shared
      --reset: restore package to its post-install state
      --check-prof (true | false): look at profiles when doing dexopt?
      --secondary-dex: compile app secondary dex files
      --split SPLIT: compile only the given split name

  force-dex-opt PACKAGE
    Force immediate execution of dex opt for the given PACKAGE.

  bg-dexopt-job
    Execute the background optimizations immediately.
    Note that the command only runs the background optimizer logic. It may
    overlap with the actual job but the job scheduler will not be able to
    cancel it. It will also run even if the device is not in the idle
    maintenance mode.

  reconcile-secondary-dex-files TARGET-PACKAGE
    Reconciles the package secondary dex files with the generated oat files.

  dump-profiles TARGET-PACKAGE
    Dumps method/class profile files to
    /data/misc/profman/TARGET-PACKAGE.txt

  snapshot-profile TARGET-PACKAGE [--code-path path]
    Take a snapshot of the package profiles to
    /data/misc/profman/TARGET-PACKAGE[-code-path].prof
    If TARGET-PACKAGE=android it will take a snapshot of the boot image

  set-home-activity [--user USER_ID] TARGET-COMPONENT
    Set the default home activity (aka launcher).

  set-installer PACKAGE INSTALLER
    Set installer package name

  get-instantapp-resolver
    Return the name of the component that is the current instant app installer.

  set-harmful-app-warning [--user ]  []
    Mark the app as harmful with the given warning message.

  get-harmful-app-warning [--user ] 
    Return the harmful app warning message for the given app, if present

  uninstall-system-updates
    Remove updates to all system applications and fall back to their /system version.

 specifications include these flags and arguments:
    [-a ] [-d ] [-t ]
    [-c  [-c ] ...]
    [-n ]
    [-e|--es   ...]
    [--esn  ...]
    [--ez   ...]
    [--ei   ...]
    [--el   ...]
    [--ef   ...]
    [--eu   ...]
    [--ecn  ]
    [--eia  [, [,)
    [--ela  [, [,)
    [--efa  [, [,)
    [--esa  [, [,; to embed a comma into a string,
         escape it using &quot;\,&quot;)
    [-f ]
    [--grant-read-uri-permission] [--grant-write-uri-permission]
    [--grant-persistable-uri-permission] [--grant-prefix-uri-permission]
    [--debug-log-resolution] [--exclude-stopped-packages]
    [--include-stopped-packages]
    [--activity-brought-to-front] [--activity-clear-top]
    [--activity-clear-when-task-reset] [--activity-exclude-from-recents]
    [--activity-launched-from-history] [--activity-multiple-task]
    [--activity-no-animation] [--activity-no-history]
    [--activity-no-user-action] [--activity-previous-is-top]
    [--activity-reorder-to-front] [--activity-reset-task-if-needed]
    [--activity-single-top] [--activity-clear-task]
    [--activity-task-on-home] [--activity-match-external]
    [--receiver-registered-only] [--receiver-replace-pending]
    [--receiver-foreground] [--receiver-no-abort]
    [--receiver-include-background]
    [--selector]
    [ |  | ]
yfve_8q:/ # 
</code></pre>

<p>pm意思是PackageManager，可以获取到Android系统中的应用信息。<br />
pm list package：获取所有安装在设备上的应用包名。</p>

<table>
<thead>
<tr>
<th>参数</th>
<th>意义</th>
</tr>
</thead>

<tbody>
<tr>
<td>-s</td>
<td>列出所有系统应用包名</td>
</tr>

<tr>
<td>-3</td>
<td>列出第三方的应用包名</td>
</tr>

<tr>
<td>-f</td>
<td>列出应用包名、apk名、存放位置</td>
</tr>

<tr>
<td>-i</td>
<td>列出应用包名、安装来源</td>
</tr>
</tbody>
</table>

<p>命令最后可以加上FILTER过滤关键字，查找关键字代表的应用。<br />
pm path [PACKAGE_NAME]：列出对应包名应用的.apk文件路径。<br />
pm list instrumentation： 列出含有单元测试 case 的应用，后面可跟参数 -f （与 pm list package
中一样），以及 [TARGET-PACKAGE]。<br />
pm dump [PACKAGE_NAME]：列出指定包名应用的 dump 信息，里面有各种信息，自行查看。<br />
pm install [APK_PAHT]：安装APK。<br />
pm uninstall [PACKAGE_NAME]：卸载包名APP。<br />
pm clear：清除应用信息。<br />
pm set-install-location，pm get-install-location：设置应用安装位置，获取应用安装位置。<br />
[0/auto]：默认为自动。<br />
[1/internal]：默认为安装在手机内部。<br />
[2/external]：默认安装在外部存储。</p>

<h1 id="am">am</h1>

<pre><code>yfve_8q:/ # am -h
Activity manager (activity) commands:
  help
      Print this help text.
  start-activity [-D] [-N] [-W] [-P ] [--start-profiler ]
          [--sampling INTERVAL] [--streaming] [-R COUNT] [-S]
          [--track-allocation] [--user  | current] 
      Start an Activity.  Options are:
      -D: enable debugging
      -N: enable native debugging
      -W: wait for launch to complete
      --start-profiler : start profiler and send results to 
      --sampling INTERVAL: use sample profiling with INTERVAL microseconds
          between samples (use with --start-profiler)
      --streaming: stream the profiling output to the specified file
          (use with --start-profiler)
      -P : like above, but profiling stops when app goes idle
      --attach-agent : attach the given agent before binding
      --attach-agent-bind : attach the given agent during binding
      -R: repeat the activity launch  times.  Prior to each repeat,
          the top activity will be finished.
      -S: force stop the target app before starting the activity
      --track-allocation: enable tracking of object allocations
      --user  | current: Specify which user to run as; if not
          specified then run as the current user.
      --windowingMode : The windowing mode to launch the activity into.
      --activityType : The activity type to launch the activity as.
  start-service [--user  | current] 
      Start a Service.  Options are:
      --user  | current: Specify which user to run as; if not
          specified then run as the current user.
  start-foreground-service [--user  | current] 
      Start a foreground Service.  Options are:
      --user  | current: Specify which user to run as; if not
          specified then run as the current user.
  stop-service [--user  | current] 
      Stop a Service.  Options are:
      --user  | current: Specify which user to run as; if not
          specified then run as the current user.
  broadcast [--user  | all | current] 
      Send a broadcast Intent.  Options are:
      --user  | all | current: Specify which user to send to; if not
          specified then send to all users.
      --receiver-permission : Require receiver to hold permission.
  instrument [-r] [-e  ] [-p ] [-w]
          [--user  | current] [--no-hidden-api-checks]
          [--no-window-animation] [--abi ] 
      Start an Instrumentation.  Typically this target  is in the
      form / or only  if there
      is only one instrumentation.  Options are:
      -r: print raw results (otherwise decode REPORT_KEY_STREAMRESULT).  Use with
          [-e perf true] to generate raw output for performance measurements.
      -e  : set argument  to .  For test runners a
          common form is [-e  [,...]].
      -p : write profiling data to 
      -m: Write output as protobuf to stdout (machine readable)
      -f : Write output as protobuf to a file (machine
          readable). If path is not specified, default directory and file name will
          be used: /sdcard/instrument-logs/log-yyyyMMdd-hhmmss-SSS.instrumentation_data_proto
      -w: wait for instrumentation to finish before returning.  Required for
          test runners.
      --user  | current: Specify user instrumentation runs in;
          current user if not specified.
      --no-hidden-api-checks: disable restrictions on use of hidden API.
      --no-window-animation: turn off window animations while running.
      --abi : Launch the instrumented process with the selected ABI.
          This assumes that the process supports the selected ABI.
  trace-ipc [start|stop] [--dump-file ]
      Trace IPC transactions.
      start: start tracing IPC transactions.
      stop: stop tracing IPC transactions and dump the results to file.
      --dump-file : Specify the file the trace should be dumped to.
  profile [start|stop] [--user  current] [--sampling INTERVAL]
          [--streaming]  
      Start and stop profiler on a process.  The given  argument
        may be either a process name or pid.  Options are:
      --user  | current: When supplying a process name,
          specify user of process to profile; uses current user if not specified.
      --sampling INTERVAL: use sample profiling with INTERVAL microseconds
          between samples
      --streaming: stream the profiling output to the specified file
  dumpheap [--user  current] [-n] [-g]  
      Dump the heap of a process.  The given  argument may
        be either a process name or pid.  Options are:
      -n: dump native heap instead of managed heap
      -g: force GC before dumping the heap
      --user  | current: When supplying a process name,
          specify user of process to dump; uses current user if not specified.
  set-debug-app [-w] [--persistent] 
      Set application  to debug.  Options are:
      -w: wait for debugger when application starts
      --persistent: retain this value
  clear-debug-app
      Clear the previously set-debug-app.
  set-watch-heap  
      Start monitoring pss size of , if it is at or
      above  then a heap dump is collected for the user to report.
  clear-watch-heap
      Clear the previously set-watch-heap.
  bug-report [--progress | --telephony]
      Request bug report generation; will launch a notification
        when done to select where it should be delivered. Options are:
     --progress: will launch a notification right away to show its progress.
     --telephony: will dump only telephony sections.
  force-stop [--user  | all | current] 
      Completely stop the given application package.
  crash [--user ] 
      Induce a VM crash in the specified package or process
  kill [--user  | all | current] 
      Kill all background processes associated with the given application.
  kill-all
      Kill all processes that are safe to kill (cached, etc).
  make-uid-idle [--user  | all | current] 
      If the given application's uid is in the background and waiting to
      become idle (not allowing background services), do that now.
  monitor [--gdb ]
      Start monitoring for crashes or ANRs.
      --gdb: start gdbserv on the given port at crash/ANR
  watch-uids [--oom ]
      Start watching for and reporting uid state changes.
      --oom: specify a uid for which to report detailed change messages.
  hang [--allow-restart]
      Hang the system.
      --allow-restart: allow watchdog to perform normal system restart
  restart
      Restart the user-space system.
  idle-maintenance
      Perform idle maintenance now.
  screen-compat [on|off] 
      Control screen compatibility mode of .
  package-importance 
      Print current importance of .
  to-uri [INTENT]
      Print the given Intent specification as a URI.
  to-intent-uri [INTENT]
      Print the given Intent specification as an intent: URI.
  to-app-uri [INTENT]
      Print the given Intent specification as an android-app: URI.
  switch-user 
      Switch to put USER_ID in the foreground, starting
      execution of that user if it is currently stopped.
  get-current-user
      Returns id of the current foreground user.
  start-user 
      Start USER_ID in background if it is currently stopped;
      use switch-user if you want to start the user in foreground
  unlock-user  [TOKEN_HEX]
      Attempt to unlock the given user using the given authorization token.
  stop-user [-w] [-f] 
      Stop execution of USER_ID, not allowing it to run any
      code until a later explicit start or switch to it.
      -w: wait for stop-user to complete.
      -f: force stop even if there are related users that cannot be stopped.
  is-user-stopped 
      Returns whether  has been stopped or not.
  get-started-user-state 
      Gets the current state of the given started user.
  track-associations
      Enable association tracking.
  untrack-associations
      Disable and clear association tracking.
  get-uid-state 
      Gets the process state of an app given its .
  attach-agent  
    Attach an agent to the specified , which may be either a process name or a PID.
  get-config [--days N] [--device] [--proto]
      Retrieve the configuration and any recent configurations of the device.
      --days: also return last N days of configurations that have been seen.
      --device: also output global device configuration info.
      --proto: return result as a proto; does not include --days info.
  supports-multiwindow
      Returns true if the device supports multiwindow.
  supports-split-screen-multi-window
      Returns true if the device supports split screen multiwindow.
  suppress-resize-config-changes 
      Suppresses configuration changes due to user resizing an activity/task.
  set-inactive [--user ]  true|false
      Sets the inactive state of an app.
  get-inactive [--user ] 
      Returns the inactive state of an app.
  set-standby-bucket [--user ]  active|working_set|frequent|rare
      Puts an app in the standby bucket.
  get-standby-bucket [--user ] 
      Returns the standby bucket of an app.
  send-trim-memory [--user ] 
          [HIDDEN|RUNNING_MODERATE|BACKGROUND|RUNNING_LOW|MODERATE|RUNNING_CRITICAL|COMPLETE]
      Send a memory trim event to a .  May also supply a raw trim int level.
  display [COMMAND] [...]: sub-commands for operating on displays.
       move-stack  
           Move  from its current display to .
  stack [COMMAND] [...]: sub-commands for operating on activity stacks.
       start  
           Start a new activity on  using 
       move-task   [true|false]
           Move  from its current stack to the top (true) or
           bottom (false) of .
       resize  
           Change  size and position to .
       resize-animated  
           Same as resize, but allow animation.
       resize-docked-stack  []
           Change docked stack to 
           and supplying temporary different task bounds indicated by

       move-top-activity-to-pinned-stack:  
           Moves the top activity from
            to the pinned stack using  for the
           bounds of the pinned stack.
       positiontask   
           Place  in  at 
       list
           List all of the activity stacks and their sizes.
       info  
           Display the information about activity stack in  and .
       remove 
           Remove stack .
  task [COMMAND] [...]: sub-commands for operating on activity tasks.
       lock 
           Bring  to the front and don't allow other tasks to run.
       lock stop
           End the current task lock.
       resizeable  [0|1|2|3]
           Change resizeable mode of  to one of the following:
           0: unresizeable
           1: crop_windows
           2: resizeable
           3: resizeable_and_pipable
       resize  
           Makes sure  is in a stack with the specified bounds.
           Forces the task to be resizeable and creates a stack if no existing stack
           has the specified bounds.
  update-appinfo   [...]
      Update the ApplicationInfo objects of the listed packages for 
      without restarting any processes.
  write
      Write all pending state to storage.

 specifications include these flags and arguments:
    [-a ] [-d ] [-t ]
    [-c  [-c ] ...]
    [-n ]
    [-e|--es   ...]
    [--esn  ...]
    [--ez   ...]
    [--ei   ...]
    [--el   ...]
    [--ef   ...]
    [--eu   ...]
    [--ecn  ]
    [--eia  [, [,)
    [--ela  [, [,)
    [--efa  [, [,)
    [--esa  [, [,; to embed a comma into a string,
         escape it using &quot;\,&quot;)
    [-f ]
    [--grant-read-uri-permission] [--grant-write-uri-permission]
    [--grant-persistable-uri-permission] [--grant-prefix-uri-permission]
    [--debug-log-resolution] [--exclude-stopped-packages]
    [--include-stopped-packages]
    [--activity-brought-to-front] [--activity-clear-top]
    [--activity-clear-when-task-reset] [--activity-exclude-from-recents]
    [--activity-launched-from-history] [--activity-multiple-task]
    [--activity-no-animation] [--activity-no-history]
    [--activity-no-user-action] [--activity-previous-is-top]
    [--activity-reorder-to-front] [--activity-reset-task-if-needed]
    [--activity-single-top] [--activity-clear-task]
    [--activity-task-on-home] [--activity-match-external]
    [--receiver-registered-only] [--receiver-replace-pending]
    [--receiver-foreground] [--receiver-no-abort]
    [--receiver-include-background]
    [--selector]
    [ |  | ]
yfve_8q:/ # 
</code></pre>

<p>am start：启动一个Activity。<br />
例如：<br />
启动相机：<br />
am start -n com.android.camera/.Camera<br />
先停止目标应用，再启动：<br />
am start -S com.android.camera/.Camera<br />
等待应用完成启动：<br />
am start -W com.android.camera/.Camera<br />
启动默认浏览器打开一个网页：<br />
am start -a android.intent.action.VIEW -d <a href="http://www.baidu.com">http://www.baidu.com</a><br />
启动拨号器拨打 10086：<br />
am start -a android.intent.action.CALL -d tel:10086</p>

<p>am instrument , 启动一个 instrumentation , 单元测试或者 Robotium 会用到。</p>

<p>am monitor , 监控 crash 与 ANR。</p>

<p>am force-stop , 后跟包名，结束应用。</p>

<p>am startservice , 启动一个服务。</p>

<p>am broadcast , 发送一个广播。<br />
后面的参数有：<br />
[-a ]<br />
[-d ]<br />
[-t ]<br />
[-c [-c ] …]<br />
[-e|–es  …]<br />
[–ez  …]<br />
[-e|–ei  …]<br />
[-n ]<br />
[-f ] []<br />
例如：<br />
adb shell am broadcast -a com.android.test &ndash;es test_string “this is test
string” &ndash;ei test_int 100 &ndash;ez test_boolean true</p>

<h1 id="input">input</h1>

<pre><code>yfve_8q:/ # input
Usage: input []  [...]

The sources are: 
      dpad
      keyboard
      mouse
      touchpad
      gamepad
      touchnavigation
      joystick
      touchscreen
      stylus
      trackball

The commands and default sources are:
      text  (Default: touchscreen)
      keyevent [--longpress]  ... (Default: keyboard)
      tap   (Default: touchscreen)
      swipe     [duration(ms)] (Default: touchscreen)
      draganddrop     [duration(ms)] (Default: touchscreen)
      press (Default: trackball)
      roll   (Default: trackball)
yfve_8q:/ # 
</code></pre>

<p>这个命令可以向 Android 设备发送按键事件，其源码 Input.java</p>

<p>input text , 发送文本内容，不能发送中文：<br />
input text test123456<br />
前提先将键盘设置为英文键盘</p>

<p>input keyevent , 发送按键事件，KeyEvent.java：<br />
input keyevent KEYCODE_HOME<br />
模拟按下 Home 键</p>

<p>input tap , 对屏幕发送一个触摸事件：<br />
input tap 500 500<br />
点击屏幕上坐标为 500 500 的位置</p>

<p>input swipe , 滑动事件：<br />
input swipe 900 500 100 500<br />
从右往左滑动屏幕</p>

<p>如果版本不低于 4.4 , 可以模拟长按事件：<br />
input swipe 500 500 501 501 2000<br />
其实就是在小的距离内，在较长的持续时间内进行滑动，最后表现出来的结果就是长按动作</p>

<h1 id="screencap">screencap</h1>

<p>截屏命令，格式：screencap [-hp] [-d display-id] [FILENAME]</p>

<pre><code>yfve_8q:/ # screencap -h
usage: screencap [-hp] [-d display-id] [FILENAME]
   -h: this message
   -p: save the file as a png.
   -d: specify the display id to capture, default 0.
If FILENAME ends with .png it will be saved as a png.
If FILENAME is not given, the results will be printed to stdout.
yfve_8q:/ # 
</code></pre>

<p>例</p>

<pre><code># 截0号屏，保存至 /sdcard/screencap0.png
screencap -p /sdcard/screencap0.png
# 截1号屏，保存至 /sdcard/screencap1.png
screencap -p -d 1 /sdcard/screencap1.png
</code></pre>

<h1 id="screenrecord">screenrecord</h1>

<p>4.4 新增的录制命令，格式：screenrecord [options] [filename]</p>

<pre><code>yfve_8q:/ # screenrecord --h                                           
Usage: screenrecord [options] 

Android screenrecord v1.2.  Records the device's display to a .mp4 file.

Options:
--size WIDTHxHEIGHT
    Set the video size, e.g. &quot;1280x720&quot;.  Default is the device's main
    display resolution (if supported), 1280x720 if not.  For best results,
    use a size supported by the AVC encoder.
--bit-rate RATE
    Set the video bit rate, in bits per second.  Value may be specified as
    bits or megabits, e.g. '4000000' is equivalent to '4M'.  Default 20Mbps.
--bugreport
    Add additional information, such as a timestamp overlay, that is helpful
    in videos captured to illustrate bugs.
--time-limit TIME
    Set the maximum recording time, in seconds.  Default / maximum is 180.
--verbose
    Display interesting information on stdout.
--help
    Show this message.

Recording continues until Ctrl-C is hit or the time limit is reached.

yfve_8q:/ # 
</code></pre>

<p>录屏默认最大时长为180s，可以用–time-limit TIME修改，也可以通过Ctrl-C提前结束。<br />
例</p>

<pre><code># 执行命令后操作手机，ctrl + c 结束录制，录制结果保存至 sdcard
screenrecord /sdcard/record.mp4
</code></pre>

<h1 id="uiautomator">uiautomator</h1>

<p>执行 UI automation tests ， 获取当前界面的控件信息</p>

<pre><code>yfve_8q:/ # uiautomator -h                                                     
Usage: uiautomator  [options]

Available subcommands:

help: displays help message

runtest: executes UI automation tests
    runtest  [options]
    :  &lt; -c  | -e class  &gt;
      : a list of jar files containing test classes and dependencies. If
        the path is relative, it's assumed to be under /data/local/tmp. Use
        absolute path if the file is elsewhere. Multiple files can be
        specified, separated by space.
      : a list of test class names to run, separated by comma. To
        a single method, use TestClass#testMethod format. The -e or -c option
        may be repeated. This option is not required and if not provided then
        all the tests in provided jars will be run automatically.
    options:
      --nohup: trap SIG_HUP, so test won't terminate even if parent process
               is terminated, e.g. USB is disconnected.
      -e debug [true|false]: wait for debugger to connect before starting.
      -e runner [CLASS]: use specified test runner class instead. If
        unspecified, framework default runner will be used.
      -e  : other name-value pairs to be passed to test classes.
        May be repeated.
      -e outputFormat simple | -s: enabled less verbose JUnit style output.

dump: creates an XML dump of current UI hierarchy
    dump [--verbose][file]
      [--compressed]: dumps compressed layout information.
      [file]: the location where the dumped XML should be stored, default is
      /sdcard/window_dump.xml

events: prints out accessibility events until terminated

yfve_8q:/ # 
</code></pre>

<p>runtest：executes UI automation tests RunTestCommand.java<br />
dump：获取控件信息，DumpCommand.java<br />
shell uiautomator dump<br />
UI hierchary dumped to: /storage/emulated/legacy/window_dump.xml<br />
不加 [file] 选项时，默认存放在 sdcard 下</p>

<h1 id="ime">ime</h1>

<p>输入法，Ime.java</p>

<pre><code>yfve_8q:/ # ime -h
ime :
  list [-a] [-s]
    prints all enabled input methods.
      -a: see all input methods
      -s: only a single summary line of each
  enable 
    allows the given input method ID to be used.
  disable 
    disallows the given input method ID to be used.
  set 
    switches to the given input method ID.
  reset
    reset currently selected/enabled IMEs to the default ones as if the device is initially booted w
    ith the current locale.
yfve_8q:/ # 
</code></pre>

<p>ime list -s<br />
com.google.android.inputmethod.pinyin/.PinyinIME<br />
com.baidu.input_mi/.ImeService<br />
列出设备上的输入法</p>

<p>adb shell ime set com.baidu.input_mi/.ImeService<br />
Input method com.baidu.input_mi/.ImeService selected<br />
选择输入法</p>

<h1 id="wm">wm</h1>

<p>WindowManager.java</p>

<pre><code>yfve_8q:/ # wm -h
Window manager (window) commands:
  help
      Print this help text.
  size [reset|WxH|WdpxHdp]
    Return or override display size.
    width and height in pixels unless suffixed with 'dp'.
  density [reset|DENSITY]
    Return or override display density.
  overscan [reset|LEFT,TOP,RIGHT,BOTTOM]
    Set overscan area for display.
  scaling [off|auto]
    Set display scaling mode.
  dismiss-keyguard
    Dismiss the keyguard, prompting user for auth if necessary.
yfve_8q:/ # 
</code></pre>

<p>wm size<br />
Physical size: 1080x1920<br />
获取设备分辨率</p>

<h1 id="monkey">monkey</h1>

<p>请参考 Android Monkey 的用法。</p>

<h1 id="settings">settings</h1>

<p>Settings.java，请参考 探究下 Android4.2 中新增的 settings 命令。</p>

<pre><code>yfve_8q:/ # settings
Settings provider (settings) commands:
  help
      Print this help text.
  get [--user  | current] NAMESPACE KEY
      Retrieve the current value of KEY.
  put [--user  | current] NAMESPACE KEY VALUE [TAG] [default]
      Change the contents of KEY to VALUE.
      TAG to associate with the setting.
      {default} to set as the default, case-insensitive only for global/secure namespace
  delete NAMESPACE KEY
      Delete the entry for KEY.
  reset [--user  | current] NAMESPACE {PACKAGE_NAME | RESET_MODE}
      Reset the global/secure table for a package with mode.
      RESET_MODE is one of {untrusted_defaults, untrusted_clear, trusted_defaults}, case-insensitive
  list NAMESPACE
      Print all defined keys.
      NAMESPACE is one of {system, secure, global}, case-insensitive
yfve_8q:/ #
</code></pre>

<h1 id="dumpsys">dumpsys</h1>

<pre><code>yfve_8q:/ # dumpsys --help                                                 
usage: dumpsys
         To dump all services.
or:
       dumpsys [-t TIMEOUT] [--priority LEVEL] [--help | -l | --skip SERVICES | SERVICE [ARGS]]
         --help: shows this help
         -l: only list services, do not dump them
         -t TIMEOUT_SEC: TIMEOUT to use in seconds instead of default 10 seconds
         -T TIMEOUT_MS: TIMEOUT to use in milliseconds instead of default 10 seconds
         --proto: filter services that support dumping data in proto format. Dumps               will be in proto format.
         --priority LEVEL: filter services based on specified priority
               LEVEL must be one of CRITICAL | HIGH | NORMAL
         --skip SERVICES: dumps all services but SERVICES (comma-separated list)
         SERVICE [ARGS]: dumps only service SERVICE, optionally passing ARGS to it
yfve_8q:/ # 
</code></pre>

<p>可通过dumpsys命令查询系统服务的运行状态(对象的成员变量属性值)。<br />
命令格式：dumpsys 服务名</p>

<table>
<thead>
<tr>
<th>服务名</th>
<th>类名</th>
<th>功能</th>
</tr>
</thead>

<tbody>
<tr>
<td>activity</td>
<td>ActivityManagerService</td>
<td>AMS相关信息</td>
</tr>

<tr>
<td>package</td>
<td>PackageManagerService</td>
<td>PMS相关信息</td>
</tr>

<tr>
<td>window</td>
<td>WindowManagerService</td>
<td>WMS相关信息</td>
</tr>

<tr>
<td>input</td>
<td>InputManagerService</td>
<td>IMS相关信息</td>
</tr>

<tr>
<td>power</td>
<td>PowerManagerService</td>
<td>PMS相关信息</td>
</tr>

<tr>
<td>batterystats</td>
<td>BatterystatsService</td>
<td>电池统计信息</td>
</tr>

<tr>
<td>battery</td>
<td>BatteryService</td>
<td>电池信息</td>
</tr>

<tr>
<td>alarm</td>
<td>AlarmManagerService</td>
<td>闹钟信息</td>
</tr>

<tr>
<td>dropbox</td>
<td>DropboxManagerService</td>
<td>调试相关</td>
</tr>

<tr>
<td>procstats</td>
<td>ProcessStatsService</td>
<td>进程统计</td>
</tr>

<tr>
<td>cpuinfo</td>
<td>CpuBinder</td>
<td>CPU</td>
</tr>

<tr>
<td>meminfo</td>
<td>MemBinder</td>
<td>内存</td>
</tr>

<tr>
<td>gfxinfo</td>
<td>GraphicsBinder</td>
<td>图像</td>
</tr>

<tr>
<td>dbinfo</td>
<td>DbBinder</td>
<td>数据库</td>
</tr>

<tr>
<td>服务名</td>
<td>功能</td>
<td></td>
</tr>

<tr>
<td>&mdash;</td>
<td>&mdash;</td>
<td></td>
</tr>

<tr>
<td>SurfaceFlinger</td>
<td>图像相关</td>
<td></td>
</tr>

<tr>
<td>appops</td>
<td>app使用情况</td>
<td></td>
</tr>

<tr>
<td>permission</td>
<td>权限</td>
<td></td>
</tr>

<tr>
<td>processinfo</td>
<td>进程服务</td>
<td></td>
</tr>

<tr>
<td>batteryproperties</td>
<td>电池相关</td>
<td></td>
</tr>

<tr>
<td>audio</td>
<td>查看声音信息</td>
<td></td>
</tr>

<tr>
<td>netstats</td>
<td>查看网络统计信息</td>
<td></td>
</tr>

<tr>
<td>diskstats</td>
<td>查看空间free状态</td>
<td></td>
</tr>

<tr>
<td>jobscheduler</td>
<td>查看任务计划</td>
<td></td>
</tr>

<tr>
<td>wifi</td>
<td>wifi信息</td>
<td></td>
</tr>

<tr>
<td>diskstats</td>
<td>磁盘情况</td>
<td></td>
</tr>

<tr>
<td>usagestats</td>
<td>用户使用情况</td>
<td></td>
</tr>

<tr>
<td>devicestoragemonitor</td>
<td>设备信息</td>
<td></td>
</tr>

<tr>
<td>…</td>
<td>…</td>
<td></td>
</tr>
</tbody>
</table>

<p>dumpsys package [PackageName]<br />
会输出这个[PackageName]的activity、service、broadcastreceiver、permission等信息，等于直观的看这个[PackageName]的manifest.xml文件。</p>

<h1 id="getprop">getprop</h1>

<p>查看 Android 设备的参数信息，只运行getprop，结果以 key : value 键值对的形式显示，如要获取某个 key 的值：<br />
adb shell getprop ro.build.version.sdk<br />
获取设备的 sdk 版本</p>

<h1 id="logcat">logcat</h1>

<pre><code>yfve_8q:/ # logcat -h
Usage: logcat [options] [filterspecs]
options include:
  -s              Set default filter to silent. Equivalent to filterspec '*:S'
  -f , --file=               Log to file. Default is stdout
  -r , --rotate-kbytes=
                  Rotate log every kbytes. Requires -f option
  -n , --rotate-count=
                  Sets max number of rotated logs to , default 4
  --id=       If the signature id for logging to file changes, then clear
                  the fileset and continue
  -v , --format=
                  Sets log print format verb and adverbs, where  is:
                    brief help long process raw tag thread threadtime time
                  and individually flagged modifying adverbs can be added:
                    color descriptive epoch monotonic printable uid
                    usec UTC year zone
                  Multiple -v parameters or comma separated list of format and
                  format modifiers are allowed.
  -D, --dividers  Print dividers between each log buffer
  -c, --clear     Clear (flush) the entire log and exit
                  if Log to File specified, clear fileset instead
  -d              Dump the log and then exit (don't block)
  -e , --regex=
                  Only print lines where the log message matches 
                  where  is a Perl-compatible regular expression
  -m , --max-count=
                  Quit after printing  lines. This is meant to be
                  paired with --regex, but will work on its own.
  --print         Paired with --regex and --max-count to let content bypass
                  regex filter but still stop at number of matches.
  -t       Print only the most recent  lines (implies -d)
  -t ''     Print most recent lines since specified time (implies -d)
  -T       Print only the most recent  lines (does not imply -d)
  -T ''     Print most recent lines since specified time (not imply -d)
                  count is pure numerical, time is 'MM-DD hh:mm:ss.mmm...'
                  'YYYY-MM-DD hh:mm:ss.mmm...' or 'sssss.mmm...' format
  -g, --buffer-size                      Get the size of the ring buffer.
  -G , --buffer-size=
                  Set size of log ring buffer, may suffix with K or M.
  -L, --last      Dump logs from prior to last reboot
  -b , --buffer=         Request alternate ring buffer, 'main',
                  'system', 'radio', 'events', 'crash', 'default' or 'all'.
                  Multiple -b parameters or comma separated list of buffers are
                  allowed. Buffers interleaved. Default -b main,system,crash.
  -B, --binary    Output the log in binary.
  -S, --statistics                       Output statistics.
  -p, --prune     Print prune white and ~black list. Service is specified as
                  UID, UID/PID or /PID. Weighed for quicker pruning if prefix
                  with ~, otherwise weighed for longevity if unadorned. All
                  other pruning activity is oldest first. Special case ~!
                  represents an automatic quicker pruning for the noisiest
                  UID as determined by the current statistics.
  -P ' ...', --prune=' ...'
                  Set prune white and ~black list, using same format as
                  listed above. Must be quoted.
  --pid=     Only prints logs from the given pid.
  --wrap          Sleep for 2 hours or when buffer about to wrap whichever
                  comes first. Improves efficiency of polling by providing
                  an about-to-wrap wakeup.

filterspecs are a series of 
  [:priority]

where  is a log component tag (or * for all) and priority is:
  V    Verbose (default for )
  D    Debug (default for '*')
  I    Info
  W    Warn
  E    Error
  F    Fatal
  S    Silent (suppress all output)

'*' by itself means '*:D' and  by itself means :V.
If no '*' filterspec or -s on command line, all filter defaults to '*:V'.
eg: '*:S ' prints only , ':S' suppresses all  log messages.

If not specified on the command line, filterspec is set from ANDROID_LOG_TAGS.

If not specified with -v on command line, format is set from ANDROID_PRINTF_LOG
or defaults to &quot;threadtime&quot;

-v , --format= options:
  Sets log print format verb and adverbs, where  is:
    brief long process raw tag thread threadtime time
  and individually flagged modifying adverbs can be added:
    color descriptive epoch monotonic printable uid usec UTC year zone

Single format verbs:
  brief      — Display priority/tag and PID of the process issuing the message.
  long       — Display all metadata fields, separate messages with blank lines.
  process    — Display PID only.
  raw        — Display the raw log message, with no other metadata fields.
  tag        — Display the priority/tag only.
  thread     — Display priority, PID and TID of process issuing the message.
  threadtime — Display the date, invocation time, priority, tag, and the PID
               and TID of the thread issuing the message. (the default format).
  time       — Display the date, invocation time, priority/tag, and PID of the
             process issuing the message.

Adverb modifiers can be used in combination:
  color       — Display in highlighted color to match priority. i.e. VERBOSE
                DEBUG INFO WARNING ERROR FATAL
  descriptive — events logs only, descriptions from event-log-tags database.
  epoch       — Display time as seconds since Jan 1 1970.
  monotonic   — Display time as cpu seconds since last boot.
  printable   — Ensure that any binary logging content is escaped.
  uid         — If permitted, display the UID or Android ID of logged process.
  usec        — Display time down the microsecond precision.
  UTC         — Display time as UTC.
  year        — Add the year to the displayed time.
  zone        — Add the local timezone to the displayed time.
  &quot;&quot;    — Print using this public named timezone (experimental).

yfve_8q:/ # 
</code></pre>

<p><strong>1. 缓冲区简介</strong><br />
android log输出量巨大，特别是通信系统的log，因此，android把log输出到不同的缓冲区中，目前定义了四个log缓冲区：</p>

<ol>
<li>Radio：输出通信系统的log</li>
<li>System：输出系统组件的log</li>
<li>Event：输出event模块的log</li>
<li>Main：所有java层的log，遗迹不属于上面3层的log</li>
</ol>

<p>缓冲区主要给系统组件使用，一般的应用不需要关心，应用的log都输出到main缓冲区中。</p>

<p>默认log输出（不指定缓冲区的情况下）是输出System和Main缓冲区的log。<br />
<a href="https://img.it610.com/image/info8/eee0d958b0fe4ac1983843dafe32854f.jpg"><img src="https://img.it610.com/image/info8/eee0d958b0fe4ac1983843dafe32854f.jpg" alt="【Android】adb命令和adb
shell命令_第1张图片" /></a></p>

<p><strong>2. Logcat参数和过滤项</strong><br />
日志输出命令，格式：logcat [参数] [过滤项], 其中 选项 和 过滤项 在 中括号 [] 中, 说明这是可选的。</p>

<table>
<thead>
<tr>
<th>参数</th>
<th>意义</th>
</tr>
</thead>

<tbody>
<tr>
<td>-s</td>
<td>设置输出日志的标签, 只显示该标签的日志</td>
</tr>

<tr>
<td>-f [filename]</td>
<td>将日志输出到文件[filename]中，才用默认输出格式</td>
</tr>

<tr>
<td>-r [kbyte]</td>
<td>按照[kbyte]千字节输出日志，默认是16， 需要和 -f 参数一起使用</td>
</tr>

<tr>
<td>-n [count]</td>
<td>设置日志输出的最大数目为[count]，默认是4， 需要和-r 参数一起使用</td>
</tr>

<tr>
<td>-v [format]</td>
<td>设置日志的输出格式为[format]</td>
</tr>

<tr>
<td>-c</td>
<td>清空所有的日志缓存信息</td>
</tr>

<tr>
<td>-d</td>
<td>将缓存的日志输出到屏幕上, 并且不会阻塞</td>
</tr>

<tr>
<td>-t</td>
<td>输出最近的几行日志, 输出完退出, 不阻塞</td>
</tr>

<tr>
<td>-g</td>
<td>查看日志缓冲区信息</td>
</tr>

<tr>
<td>-b [buffer]</td>
<td>加载可以使用的一个日志缓冲区供查看，默认是 main</td>
</tr>

<tr>
<td>-B</td>
<td>以二进制形式输出日志</td>
</tr>
</tbody>
</table>

<p>一般长时间输出log的话建议-f，-n，-r三个参数连用，这样当一个文件日志输出满了之后可以马上在另一个中进行输出。</p>

<p><strong>3. 过滤格式</strong><br />
过滤项格式 : [:priority] , 标签:日志等级, 默认的日志过滤项是 &ldquo; *:I &ldquo; ;</p>

<table>
<thead>
<tr>
<th>过滤项</th>
<th>意义</th>
</tr>
</thead>

<tbody>
<tr>
<td>V</td>
<td>Verbose (明细);</td>
</tr>

<tr>
<td>D</td>
<td>Debug (调试);</td>
</tr>

<tr>
<td>I</td>
<td>Info (信息);</td>
</tr>

<tr>
<td>W</td>
<td>Warn (警告);</td>
</tr>

<tr>
<td>E</td>
<td>Error (错误);</td>
</tr>

<tr>
<td>F</td>
<td>Fatal (严重错误);</td>
</tr>

<tr>
<td>S</td>
<td>Silent(Super all output) (最高的优先级, 可能不会记载东西);</td>
</tr>
</tbody>
</table>

<p><strong>-s参数</strong><br />
用来过滤日志文件的标签。如logcat -s System.out。<br />
和grep命令相似，不过grep过滤标签和日志内容在内的所有内容，而-s只过滤标签。<br />
<strong>-f参数</strong><br />
将日志输出到指定文件中。<br />
和重定向符&rdquo;&gt;&ldquo;功能差不多。<br />
<strong>-v参数</strong><br />
指定日志输出格式。logcat -v [格式]</p>

<table>
<thead>
<tr>
<th>格式</th>
<th>意义</th>
</tr>
</thead>

<tbody>
<tr>
<td>time</td>
<td>日志格式：日期 时间 优先级 / 标签 (进程ID) : 进程名称 : 日志信息</td>
</tr>

<tr>
<td>threadtime</td>
<td>日志的输出时间和线程信息</td>
</tr>

<tr>
<td>prief</td>
<td>默认的日志格式：优先级 / 标签 （进程ID）: 日志信息</td>
</tr>

<tr>
<td>progress</td>
<td>日志格式：优先级 （进程ID） : 日志信息</td>
</tr>

<tr>
<td>tag</td>
<td>日志格式：优先级 / 标签 : 日志信息</td>
</tr>

<tr>
<td>thread</td>
<td>日志格式：优先级 ( 进程ID : 线程ID) 标签 : 日志内容</td>
</tr>

<tr>
<td>raw</td>
<td>只输出日志信息, 不附加任何其他信息, 如 优先级 标签等</td>
</tr>

<tr>
<td>long</td>
<td>日志格式：[ 日期 时间 进程ID : 线程ID 优先级 / 标签] 日志信息</td>
</tr>
</tbody>
</table>

<h1 id="grep">grep</h1>

<pre><code>yfve_8q:/ # grep
usage: grep [-abcDEFGHhIiJLlmnOoPqRSsUVvwxZz] [-A num] [-B num] [-C[num]]
        [-e pattern] [-f file] [--binary-files=value] [--color=when]
        [--context[=num]] [--directories=action] [--label] [--line-buffered]
        [pattern] [file ...]
yfve_8q:/ # 
</code></pre>

<p>grep是查找字符串命令。grep支持正则表达式。格式是：grep [参数] [pattern]</p>

<table>
<thead>
<tr>
<th>参数</th>
<th>意义</th>
</tr>
</thead>

<tbody>
<tr>
<td>-a或–text</td>
<td>不要忽略二进制的数据。</td>
</tr>

<tr>
<td>-A或–after-context=</td>
<td>除了显示符合范本样式的那一列之外，并显示该列之后的内容。</td>
</tr>

<tr>
<td>-b或–byte-offset</td>
<td>在显示符合范本样式的那一列之前，标示出该列第一个字符的位编号。</td>
</tr>

<tr>
<td>-B或–before-context=</td>
<td>除了显示符合范本样式的那一列之外，并显示该列之前的内容。</td>
</tr>

<tr>
<td>-c或–count</td>
<td>计算符合范本样式的列数。</td>
</tr>

<tr>
<td>-C或–context=或-</td>
<td>除了显示符合范本样式的那一列之外，并显示该列之前后的内容。</td>
</tr>

<tr>
<td>-d或–directories=</td>
<td>当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。</td>
</tr>

<tr>
<td>-e或–regexp=</td>
<td>指定字符串做为查找文件内容的范本样式。</td>
</tr>

<tr>
<td>-E或–extended-regexp</td>
<td>将范本样式为延伸的普通表示法来使用。</td>
</tr>

<tr>
<td>-f或–file=</td>
<td>指定范本文件，其内容含有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每列一个范本样式。</td>
</tr>

<tr>
<td>-F或–fixed-regexp</td>
<td>将范本样式视为固定字符串的列表。</td>
</tr>

<tr>
<td>-G或–basic-regexp</td>
<td>将范本样式视为普通的表示法来使用。</td>
</tr>

<tr>
<td>-h或–no-filename</td>
<td>在显示符合范本样式的那一列之前，不标示该列所属的文件名称。</td>
</tr>

<tr>
<td>-H或–with-filename</td>
<td>在显示符合范本样式的那一列之前，表示该列所属的文件名称。</td>
</tr>

<tr>
<td>-i或–ignore-case</td>
<td>忽略字符大小写的差别。</td>
</tr>

<tr>
<td>-l或–file-with-matches</td>
<td>列出文件内容符合指定的范本样式的文件名称。</td>
</tr>

<tr>
<td>-L或–files-without-match</td>
<td>列出文件内容不符合指定的范本样式的文件名称。</td>
</tr>

<tr>
<td>-n或–line-number</td>
<td>在显示符合范本样式的那一列之前，标示出该列的列数编号。</td>
</tr>

<tr>
<td>-q或–quiet或–silent</td>
<td>不显示任何信息。</td>
</tr>

<tr>
<td>-r或–recursive</td>
<td>此参数的效果和指定&rdquo;-d recurse&rdquo;参数相同。</td>
</tr>

<tr>
<td>-s或–no-messages</td>
<td>不显示错误信息。</td>
</tr>

<tr>
<td>-v或–revert-match</td>
<td>反转查找。</td>
</tr>

<tr>
<td>-V或–version</td>
<td>显示版本信息。</td>
</tr>

<tr>
<td>-w或–word-regexp</td>
<td>只显示全字符合的列。</td>
</tr>

<tr>
<td>-x或–line-regexp</td>
<td>只显示全列符合的列。</td>
</tr>

<tr>
<td>-y</td>
<td>此参数的效果和指定&rdquo;-i&rdquo;参数相同。</td>
</tr>

<tr>
<td>–help</td>
<td>在线帮助。</td>
</tr>
</tbody>
</table>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>