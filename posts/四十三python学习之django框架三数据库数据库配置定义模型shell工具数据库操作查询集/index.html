<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>四十三python学习之Django框架三数据库数据库配置定义模型shell工具数据库操作查询集 | 开发者问答集锦</title>
    <meta property="og:title" content="四十三python学习之Django框架三数据库数据库配置定义模型shell工具数据库操作查询集 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="四十三python学习之Django框架三数据库数据库配置定义模型shell工具数据库操作查询集">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/%E5%9B%9B%E5%8D%81%E4%B8%89python%E5%AD%A6%E4%B9%A0%E4%B9%8Bdjango%E6%A1%86%E6%9E%B6%E4%B8%89%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9E%8Bshell%E5%B7%A5%E5%85%B7%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E6%9F%A5%E8%AF%A2%E9%9B%86/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">四十三python学习之Django框架三数据库数据库配置定义模型shell工具数据库操作查询集</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<h1 id="一-数据库">一、数据库:</h1>

<h2 id="1-orm框架">1. ORM框架:</h2>

<blockquote>
<p>object relation mapping:
对象关系映射,在ORM框架中,它帮我们把类和数据表进行了一个映射,可以让我们通过类和类对象就能够操作它所对应的表格中的数据.ORM框架还有一个功能,它可以根据我们设计的类自动帮我们生成数据库中的表格,省去了自己建表的过程.</p>
</blockquote>

<p>django中内嵌了ORM框架,不需要直接面向数据库编程,而是定义模型类,通过模型类和对象完成数据表的增删改查操作.</p>

<p>使用django进行数据库开发的步骤如下:</p>

<ul>
<li>配置数据库连接信息;</li>
<li>在models.py中定义模型类;</li>
<li>数据库迁移;</li>
<li>通过类和对象完成数据增删改查</li>
</ul>

<h3 id="orm的作用">ORM的作用:</h3>

<p><a href="https://img.it610.com/image/info8/bfcf3a0a4dc94916b28b1587ce0e8bb7.jpg"><img src="https://img.it610.com/image/info8/bfcf3a0a4dc94916b28b1587ce0e8bb7.jpg" alt="四十三、python学习之Django框架\(三\):数据库,数据库配置,定义模型,shell工具,数据库操作,查询集_第1张图片" /></a></p>

<h3 id="说明">说明:</h3>

<ul>
<li>我们这里可以看到ORM可以帮助我们将模型类的操作转换为sql语句,也可以讲MySQL数据库的返回结果转换成模型类对象.</li>

<li><p>因为ORM可以帮助我们科数据米行嘞转换成sql语句,我们在程序中看到的是模型类,不关心数据库的类型,那么可以操作的数据库就可能不是一种数据库.可是是SQLLite,也可以是Mysql,甚至是Orcle都是可行的.<br />
<a href="https://img.it610.com/image/info8/fb9c216b56384ad28a4be6721ad6b6b8.jpg"><img src="https://img.it610.com/image/info8/fb9c216b56384ad28a4be6721ad6b6b8.jpg" alt="四十三、python学习之Django框架\(三\):数据库,数据库配置,定义模型,shell工具,数据库操作,查询集_第2张图片" /></a></p></li>

<li><p>第二个就是我们还需要在使用MySQL数据库的时候配置一个PyMySQL的数据库驱动,这个驱动的主要作用是链接django和数据. django程序和MySQL之间的链接是通过网络链接的,这就意味着我们对数据库进行操作的时候需要先连接上数据库才能进行对应的操作,那么这个是句酷驱动就是连接django和数据库之间的一种方式.</p></li>

<li><p>ORM是把模型类转换成sql语句,但是这个语句仍然停留在django中,没有到达数据库,需要数据库驱动发送给数据库,</p></li>
</ul>

<h3 id="注意">注意:</h3>

<ul>
<li>我们使用django和MySQL的时候, 会有问题:</li>
<li>* django中的ORM框架,在和MySQL对接的时候, ORM只认MySQL官方的MySQL-Python这个包.但是这个安装包安装完成之后, 它的扩展名字叫做mysqldb.</li>
<li>* 但是mysqldb这个库只支持python2的版本, 它不支持python3的版本. 如果我们想要在python3中使用, 那么我们使用的不是MySQL-Python, 而是PyMySQL. 但是ORM又只认mysqldb这个扩展名, 所以我们会把PyMySQL的扩展名改为mysqldb.</li>
<li>ORM &mdash;&ndash;只认可&mdash;&ndash;&gt;mysqldb这个扩展名.</li>
<li>MySQL-Python&mdash;&mdash;安装完成后生成的扩展名为:mysqldb&mdash;&mdash;-只支持python2</li>
<li>PyMySQL&mdash;&mdash;-支持python3 &mdash;&mdash;&mdash;扩展名不是:mysqldb</li>
<li>PyMySQL&mdash;&mdash;安装完后,转化为: mysqldb</li>
</ul>

<h1 id="二-配置数据库">二、配置数据库:</h1>

<h2 id="1-django项目中的配置">1. django项目中的配置:</h2>

<p>在django项目创建成功之后,setting.py文件中自动配置了数据的内容, 配置的是sqlite3数据库:</p>

<pre><code>DATABASES = {
    'default': {
        # 默认的配置, 使用的是sqlite3数据库.
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}
</code></pre>

<p><strong>这里使用的是MySQL数据库,所以在进行以下修改修改:</strong></p>

<h2 id="2-为django项目配置mysql数据库">2.为django项目配置mysql数据库:</h2>

<h3 id="2-1-使用mysql数据库首先安装驱动程序">2.1 使用MySQL数据库首先安装驱动程序:</h3>

<blockquote>
<p>第一步: 安装MySQl数据库驱动</p>
</blockquote>

<pre><code>pip install PyMySQL
</code></pre>

<h3 id="2-2-在django的工程同名子目录的init-py文件中添加如下语句">2.2 在Django的工程同名子目录的init.py文件中添加如下语句:</h3>

<blockquote>
<p>第二步:进行转换,让pymysql的内容转换为mysqldb,以便于ORM能够匹配</p>
</blockquote>

<pre><code># 复制下面的内容,拷贝到django工程同名子目录的init.py文件中

from pymysql import install_as_MySQLdb
install_as_MySQLdb() 
</code></pre>

<p>作用:让Django的Orm能以mysqldb的方式来调用PyMySQL</p>

<h3 id="2-3-修改databases配置信息">2.3 修改DATABASES配置信息:</h3>

<blockquote>
<p>第三步:对数据库进行配置:修改数据库的ip地址,端口号,用户名等内容</p>
</blockquote>

<pre><code># 将以下内容覆盖到原来setting.py文件中
DATEBASES = {
    'default': {
         # 我们这里需要把sqlite3修改为mysql
         'ENGINE': 'django.db.backends.mysql',
         'HOST': '127.0.0.1',  # 数据库主机
         'PORT': 3306,  # 数据库端口
         'USER': 'root',  # 数据库用户名
         'PASSWORD': 'mysql',  # 数据库用户密码
         'NAME': 'django_demo'  # 数据库名字
     }
}
</code></pre>

<h3 id="2-4-在mysql中创建数据库">2.4 在mysql中创建数据库:</h3>

<blockquote>
<p>第四步:修改完成后,就可以创建数据库定义模型类了</p>
</blockquote>

<ul>
<li><p>打开命令行:打开mysql数据库</p>

<p>mysql -u root -p</p></li>

<li><p>-创建数据库:</p>

<p>create database django_demo charset=utf8;</p></li>

<li><p>查看数据库是否创建成功:</p>

<p>show databases;</p></li>
</ul>

<p><a href="https://img.it610.com/image/info8/a166123006314afaa7118cc36ed90946.jpg"><img src="https://img.it610.com/image/info8/a166123006314afaa7118cc36ed90946.jpg" alt="四十三、python学习之Django框架\(三\):数据库,数据库配置,定义模型,shell工具,数据库操作,查询集_第3张图片" /></a></p>

<h1 id="三-定义模型类">三、定义模型类:</h1>

<p>这里定义模型类和Flask类似,但是需要注意:</p>

<ul>
<li>模型类被定义在&rdquo;子应用/modeles.py&rdquo;文件中;</li>

<li><p>模型类必须继承子django.db.models类;</p>

<p>from django.db import models</p></li>
</ul>

<h2 id="1-定义">1.定义</h2>

<blockquote>
<p>接下来首先以&rdquo;图书-英雄&rdquo;管理为例进行演示</p>

<ul>
<li>创建子应用koobset</li>
<li>在子应用的models.py文件中定义模型类</li>
</ul>
</blockquote>

<p>第一张表:</p>

<pre><code># 从django,db中导入models
from django.db import models

# 定义图书模型BookInfo
# 注意:一定要继承自model.Model
class BookInfo(model.Models):
&quot;&quot;&quot;
定义图书模型类
这里定义的属性对应的都是数据库中的字段 
&quot;&quot;&quot;
btitle = models.CharField(max_length=20, verbose_name='名称')
    bpub_date = models.DateField(verbose_name='发布日期')
    bread = models.IntegerField(default=0, verbose_name='阅读量')
    bcomment = models.IntegerField(default=0, verbose_name='评论量')
    is_delete = models.BooleanField(default=False, verbose_name='逻辑删除')

    # 该类用于指定数据库中的表名.
    class Meta:
        db_table = 'tb_books'  # 指明数据库表名
        verbose_name = '图书'  # 在admin站点中显示的名称
        verbose_name_plural = verbose_name  # 显示的复数名称

    def __str__(self):
        &quot;&quot;&quot;定义每个数据对象的显示信息&quot;&quot;&quot;
        return self.btitle
</code></pre>

<p><em><strong>说明：</strong></em></p>

<ul>
<li>django中定义的属性（对应数据库中的字段），不需要声明是否存在，只需要写在这里的都是默认存在的，即写在上面的btitle等属性，等程序运行起来的时候都会在表中被创建出来;</li>
<li>我们可以在属性的小括号中声明当前字段的修饰符，例如：做大长度，默认值等等;</li>
<li>django中定义模型类的时候，我们不需要创建主键，djang会帮助我们创建一个主键（整型，自增）;</li>
<li>除非我们自己想要指定一个主键，这个时候，我们可以在这个属性后边添加primary_key=true;</li>
<li>默认情况下声明字段都是不能为空的;</li>
</ul>

<p>第二张表:</p>

<pre><code>from django.db import models

#定义英雄模型类HeroInfo
class HeroInfo(models.Model):
    # 这个是元组是一个可选项,元组中也是元组, 其中: 

    # 0, 1: 是在数据库中真实存在的值
    # 意味着hgender这个字段在数据库中存储的要么是0,要么是1

    # male, female: 用于显示在admin站点中
    # 类似于: verbose_name
    GENDER_CHOICES = (
        (0, 'male'),
        (1, 'female')
    )
    hname = models.CharField(max_length=20, verbose_name='名称') 
    # 性别我们使用的是类似于枚举类型来做的:
    # choices: 可选范围,传入的是个元组类型,在上面定义的.
    hgender = models.SmallIntegerField(choices=GENDER_CHOICES, default=0, verbose_name='性别')  
    hcomment = models.CharField(max_length=200, null=True, verbose_name='描述信息') 
    # 利用ForeignKey这个属性指定hbook这个字段为外键.
    # 第一个参数: 表示外键关联到书籍表
    # 注意: 如果调用外键hbook的话: 返回的是book这个模型对象.
    hbook = models.ForeignKey(BookInfo, on_delete=models.CASCADE, verbose_name='图书')  # 外键
    is_delete = models.BooleanField(default=False, verbose_name='逻辑删除')

    class Meta:
        db_table = 'tb_heros'
        verbose_name = '英雄'
        verbose_name_plural = verbose_name

    def __str__(self):
        return self.hname
</code></pre>

<p><em><strong>说明:</strong></em></p>

<ul>
<li>CharField: 字符串类型</li>
<li>SmallInteger: 小整形,存储的数据量比较小</li>
</ul>

<h3 id="1-1-数据库名">1.1 数据库名:</h3>

<p>模型类如果未指明表名，Django默认以 <strong>小写app应用名_小写模型类名</strong> 为数据库表名。</p>

<p>可通过 <strong>db_table</strong> 指明数据库表名。</p>

<h3 id="1-2-关于主键">1.2 关于主键:</h3>

<p>django会为表创建自动增长的主键列，每个模型只能有一个主键列，如果使用选项设置某属性为主键列后django不会再创建自动增长的主键列。</p>

<p>默认创建的主键列属性为id，可以使用pk代替，pk全拼为primary key。</p>

<h3 id="1-3-属性命名限制">1.3 属性命名限制:</h3>

<ul>
<li><p>不能是python的保留关键字。</p></li>

<li><p>不允许使用连续的下划线，这是由django的查询方式决定的。</p></li>

<li><p>定义属性时需要指定字段类型，通过字段类型的参数指定选项，语法如下：</p></li>
</ul>

<blockquote>
<p>属性名=models.字段类型(选项)</p>
</blockquote>

<h3 id="1-4-字段类型">1.4 字段类型：</h3>

<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>

<tbody>
<tr>
<td>AutoField</td>
<td>自动增长的IntegerField，通常不用指定，不指定时Django会自动创建属性名为id的自动增长属性</td>
</tr>

<tr>
<td>BooleanField</td>
<td>布尔字段，值为True或False</td>
</tr>

<tr>
<td>NullBooleanField</td>
<td>支持Null、True、False三种值</td>
</tr>

<tr>
<td>CharField</td>
<td>字符串，参数max_length表示最大字符个数</td>
</tr>

<tr>
<td>TextField</td>
<td>大文本字段，一般超过4000个字符时使用</td>
</tr>

<tr>
<td>IntegerField</td>
<td>整数</td>
</tr>

<tr>
<td>DecimalField</td>
<td>十进制浮点数， 参数max_digits表示总位数， 参数decimal_places表示小数位数</td>
</tr>

<tr>
<td>FloatField</td>
<td>浮点数</td>
</tr>

<tr>
<td>DateField</td>
<td>日期，</td>
</tr>
</tbody>
</table>

<p>参数auto_now表示每次保存对象时，自动设置该字段为当前时间，用于&rdquo;最后一次修改&rdquo;的时间戳，它总是使用当前日期，默认为False；
参数auto_now_add表示当对象第一次被创建时自动设置当前时间，用于创建的时间戳，它总是使用当前日期，默认为False;
参数auto_now_add和auto_now是相互排斥的，组合将会发生错误<br />
TimeField | 时间，参数同DateField<br />
DateTimeField | 日期时间，参数同DateField<br />
FileField | 上传文件字段<br />
ImageField | 继承于FileField，对上传的内容进行校验，确保是有效的图片</p>

<h3 id="1-5-选项">1.5 选项：</h3>

<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>

<tbody>
<tr>
<td>null</td>
<td>如果为True，表示允许为空，默认值是False (判断是否允许在数据库系统中字段为空)</td>
</tr>

<tr>
<td>blank</td>
<td>如果为True，则该字段允许为空白，默认值是False,</td>
</tr>
</tbody>
</table>

<p>这个和django中的表无关,和表单有关,django自带有表单系统,有时候用户提交的<br />
db_column | 字段的名称，如果未指定，则使用属性的名称<br />
db_index | 若值为True, 则在表中会为此字段创建索引，默认值是False<br />
default | 默认<br />
primary_key | 若为True，则该字段会成为模型的主键字段，默认值是False，一般作为AutoField的选项使用<br />
unique | 如果为True, 这个字段在表中必须有唯一值，默认值是False</p>

<p><em><strong>null是数据库范畴的概念，blank是表单验证范畴的</strong></em></p>

<h3 id="1-6-外键">1.6 外键：</h3>

<blockquote>
<p>在设置外键时,需要通过on_delete选项指明主表删除数据时,对于外键引用表数据如何处理,在django.db.models中包含了可选项:</p>
</blockquote>

<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>

<tbody>
<tr>
<td>CASCADE</td>
<td>级联，删除主表数据时同时一起删除外键表中数据, 级联删除。</td>
</tr>

<tr>
<td>PROTECT</td>
<td>保护模式，如果采用该选项，删除的时候，会抛出ProtectedError错误。阻止用户的删除.</td>
</tr>

<tr>
<td>SET_NULL</td>
<td>置空模式，删除的时候，外键字段被设置为空，仅在该字段null=True: 允许为null时可用.</td>
</tr>

<tr>
<td>SET_DEFAULT</td>
<td>置默认值，删除的时候，外键字段设置为默认值，所以定义外键的时候注意加上一个默认值。</td>
</tr>

<tr>
<td>DO_NOTHING</td>
<td>不做任何操作，如果数据库前置指明级联性，此选项会抛出IntegrityError异常</td>
</tr>

<tr>
<td>SET()</td>
<td>自定义一个值，该值只能是对应的实体</td>
</tr>
</tbody>
</table>

<p>例如:SET()选项</p>

<pre><code># 当删除mymodel对应的user的时候，mymodel不会删除掉，而是找到一个名叫 deleted的user，与之重建关联
from django.conf import settings
  from django.contrib.auth import get_user_model
  from django.db import models

  def get_sentinel_user():
      return get_user_model().objects.get_or_create(username='deleted')[0]

  class MyModel(models.Model):
      user = models.ForeignKey(
          settings.AUTH_USER_MODEL,
          on_delete=models.SET(get_sentinel_user),
      )
</code></pre>

<h2 id="2-数据库迁移">2. 数据库迁移:</h2>

<blockquote>
<p>将模型类同步到数据库中.</p>
</blockquote>

<h3 id="2-1-生成迁移文件">2.1 生成迁移文件:</h3>

<pre><code>python manage.py makemigrations
</code></pre>

<h3 id="2-2-同步到数据库">2.2 同步到数据库</h3>

<pre><code>python manage.py migrate
</code></pre>

<h3 id="2-3-使用数据库">2.3 使用数据库:</h3>

<h4 id="添加测试数据">添加测试数据</h4>

<pre><code>insert into tb_books(btitle,bpub_date,bread,bcomment,is_delete) values
('射雕英雄传','1980-5-1',12,34,0),
('天龙八部','1986-7-24',36,40,0),
('笑傲江湖','1995-12-24',20,80,0),
('雪山飞狐','1987-11-11',58,24,0);
insert into tb_heros(hname,hgender,hbook_id,hcomment,is_delete) values
('郭靖',1,1,'降龙十八掌',0),
('黄蓉',0,1,'打狗棍法',0),
('黄药师',1,1,'弹指神通',0),
('欧阳锋',1,1,'蛤蟆功',0),
('梅超风',0,1,'九阴白骨爪',0),
('乔峰',1,2,'降龙十八掌',0),
('段誉',1,2,'六脉神剑',0),
('虚竹',1,2,'天山六阳掌',0),
('王语嫣',0,2,'神仙姐姐',0),
('令狐冲',1,3,'独孤九剑',0),
('任盈盈',0,3,'弹琴',0),
('岳不群',1,3,'华山剑法',0),
('东方不败',0,3,'葵花宝典',0),
('胡斐',1,4,'胡家刀法',0),
('苗若兰',0,4,'黄衣',0),
('程灵素',0,4,'医术',0),
('袁紫衣',0,4,'六合拳',0);
</code></pre>

<h1 id="四-演示工具使用">四、演示工具使用:</h1>

<h2 id="1-shell工具">1.shell工具:</h2>

<p>Django的manage提供了sheel命令工具,帮助我们配置好当前工程的运行环境(如连接数据库等),以便可以直接在终端中执行测试python语句。<br />
通过如下命令进入shell:</p>

<pre><code>python manage.py shell
</code></pre>

<p><a href="https://img.it610.com/image/info8/1710f01ec9d74052937eb28fc13c3020.jpg"><img src="https://img.it610.com/image/info8/1710f01ec9d74052937eb28fc13c3020.jpg" alt="在这里插入图片描述" /></a><br />
导入两个模型类，以便后续使用:</p>

<pre><code>from booktest.models import BookInfo, HeroInfo
</code></pre>

<h2 id="2-查看mysql数据库日志">2 查看MySQL数据库日志</h2>

<p>查看mysql数据库日志可以查看对数据库的操作记录。 mysql日志文件默认没有产生，需要做如下配置：</p>

<pre><code>sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf
</code></pre>

<p><a href="https://img.it610.com/image/info8/28c5f950c31c49e394d90c7243fff2e0.jpg"><img src="https://img.it610.com/image/info8/28c5f950c31c49e394d90c7243fff2e0.jpg" alt="四十三、python学习之Django框架\(三\):数据库,数据库配置,定义模型,shell工具,数据库操作,查询集_第4张图片" /></a></p>

<p>把68，69行前面的#去除，然后保存并使用如下命令重启mysql服务。</p>

<pre><code>sudo service mysql restart
</code></pre>

<p>使用如下命令打开mysql日志文件。</p>

<pre><code># 可以实时查看数据库的日志
tail -f /var/log/mysql/mysql.log
</code></pre>

<p>日志文件路径的查看可以参考:<br />
链接</p>

<h1 id="五-数据库的操作">五、数据库的操作:</h1>

<h2 id="1-增加">1. 增加:</h2>

<blockquote>
<p>增加数据有两种方法:<br />
 1.创建对象添加数据,然后嗲用save()保存<br />
 2.通过模型类的create()函数保存</p>
</blockquote>

<h3 id="sava">sava()</h3>

<p>通过创建模型类对象,执行对象的save()方法保存到数据中.</p>

<pre><code>&gt; from datetime import date
&gt; book = BookInfo(
    btitle=&quot;西游记&quot;,
    bpub_date = date(1988,1,1),
    bread = 10,
    bcomment=10
)
&gt; book.save()
&gt; hero = HeroInfo(
    hname = &quot;孙悟空&quot;,
    hgender = 0,
    hbook = book
)
&gt; hero.save()
&gt; hero2 = HeroInfo(
    hname='猪八戒',
    hgender=0,
    hbook_id=book.id
)
&gt; hero2.save()
</code></pre>

<h4 id="create">create</h4>

<p>通过模型类.objects.create()保存</p>

<pre><code>&gt; HeroInfo.objects.create(
    hname = &quot;沙悟净&quot;,
    hgender = 0,
    hbook = book
)
&lt;HeroInfo:沙悟净&gt;
</code></pre>

<h2 id="2-查询">2.查询:</h2>

<h3 id="2-1-基本查询">2.1 基本查询:</h3>

<blockquote>
<p>基本查询有三种形式:</p>

<ul>
<li>get: 查询单一结果,如果不存在会抛出 <strong>模型类.DoesNotExist</strong> 异常。</li>
<li>all: 查询多个结果。</li>
<li>count: 查询结果数量。</li>
</ul>
</blockquote>

<p>例如:</p>

<pre><code>&gt; BookInfo.objects.all()
&lt;QuerySet [&lt;BookInfo: 射雕英雄传&gt;, &lt;BookInfo: 天龙八部&gt;, &lt;BookInfo: 笑傲江湖&gt;, &lt;BookInfo: 雪山飞狐&gt;, &lt;BookInfo: 西游记&gt;]&gt;

&gt; book = BookInfo.objects.get(btitle='西游记')
&gt; book.id
5

&gt; BookInfo.objects.get(id=3)
&lt;BookInfo: 笑傲江湖&gt;
&gt; BookInfo.objects.get(pk=3)
&lt;BookInfo: 雪山飞狐&gt;
&gt; BookInfo.objects.get(id=100)
Traceback (most recent call last):
  File &quot;&quot;, line 1, in &lt;module&gt;
  File &quot;/Users/delron/.virtualenv/dj/lib/python3.6/site-packages/django/db/models/manager.py&quot;, line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File &quot;/Users/delron/.virtualenv/dj/lib/python3.6/site-packages/django/db/models/query.py&quot;, line 380, in get
    self.model._meta.object_name
db.models.DoesNotExist: BookInfo matching query does not exist.

&gt; BookInfo.objects.count()
</code></pre>

<h3 id="2-2-过滤查询">2.2 过滤查询:</h3>

<p>实现SQL中的where功能,包括:</p>

<ul>
<li>filter: 过滤出多个结果;</li>
<li>exclude: 排除掉符合条件剩下的结果</li>
<li>get: 过滤单一结果<br />
对于过滤条件的使用,上述三个方法相同, 故仅以filter进行解释:<br />
过滤条件的表达与法如下:</li>
</ul>

<blockquote>
<p>属性名称和比较运算符间使用两个下划线,所以属性名不能包括多个下划线<br />
 属性名__比较运算符=值</p>
</blockquote>

<h4 id="1-相等">1) 相等:</h4>

<p><em><strong>exact:表示判等</strong></em><br />
例: 查询编号为1的图书</p>

<pre><code>BookInfo.objects.filter(id__exact=1)
# 也可以简写为:
BookInfi.objects.filter(id=1)
</code></pre>

<h4 id="2-模胡查询">2) 模胡查询:</h4>

<p><em><strong>contains:是否包含</strong></em></p>

<blockquote>
<p>说明:如果要包含%无需转义, 直接写即可<br />
 例: 查询书名中包含&rdquo;传&rdquo;的图书:</p>
</blockquote>

<pre><code>BookInfo.objects.filter(btitle__contains = &quot;传&quot;)
</code></pre>

<p><em><strong>startswith、endswith: 以指定值开头或结尾</strong></em><br />
例: 查询书名以&rdquo;部&rdquo;结尾的图书</p>

<pre><code>BookInfo.objects.filter(btitle__endswith = &quot;部&quot;)
</code></pre>

<blockquote>
<p>以上运算符都区分大小写,在这些运算符前加上i表示不区分大小写,如iexact、icontains、istartswith、iendswith.</p>
</blockquote>

<h4 id="3-空查询">3) 空查询:</h4>

<p><em><strong>isnull: 是否为null</strong></em><br />
例: 查询书名不为空的图书</p>

<pre><code>BookInfo.objects.filter(btitle__isnull = False)
</code></pre>

<h4 id="4-范围查询">4) 范围查询:</h4>

<p><em><strong>in: 是否包含在范围内.</strong></em><br />
例:查询编号为1或3或5的图书</p>

<pre><code>BookInfo.objects.filter(id__in = [1,3,5])
</code></pre>

<h4 id="5-比较查">5) 比较查:</h4>

<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>

<tbody>
<tr>
<td>gt</td>
<td>大于 (greater then)</td>
</tr>

<tr>
<td>gte</td>
<td>大于等于 (greater then equal)</td>
</tr>

<tr>
<td>lt</td>
<td>小于 (less then)</td>
</tr>

<tr>
<td>lte</td>
<td>小于等于 (less then equal)</td>
</tr>
</tbody>
</table>

<p>例: 查询编号大于3的图书</p>

<pre><code>BookInfo.objectsfilter(id__gt=3)
</code></pre>

<p><em><strong>不等于的运算符,使用exclude()过滤器</strong></em><br />
例：查询编号不等于3的图书</p>

<pre><code>BookInfo.objects.exclude(id=3)
</code></pre>

<h4 id="6-日期查询">6) 日期查询:</h4>

<p>_<strong>year、month、day、week_day、hour、minute、second：对日期时间类型的属性进行运算。</strong>_<br />
例：查询1980年发表的图书。</p>

<pre><code>BookInfo.objects.filter(bpub_date__year=1980)
</code></pre>

<p>例：查询1980年1月1日后发表的图书。</p>

<pre><code>BookInfo.objects.filter(bpub_date__gt=date(1990, 1, 1))
</code></pre>

<h4 id="f对象">F对象:</h4>

<p>比较两个属性的值使用F对象。F对象被定义在django.db.models中<br />
语法如下:</p>

<blockquote>
<p>F(属性名)</p>
</blockquote>

<p>例如: 查询阅读量大于等于评论量的图书</p>

<pre><code>from django.db.models import F

BookInfo.objects.filter(bread__gte = F('bcomment'))
``
可以在F对象上使用算术运算.
例: 查询阅读量大于2倍的评论量的图书
```python
BookInfo.objects.filter(bread__gt=F('bcomment')*2)
</code></pre>

<p><em><strong>Q对象:</strong></em></p>

<blockquote>
<p>一般我们在Django程序中查询数据库操作都是在QuerySe中进行的, 例如下代码:</p>
</blockquote>

<pre><code>&gt;&gt;&gt; q1 = BookInfo.objects.filter(headline__startswith=&quot;What&quot;)
&gt;&gt;&gt; q2 = q1.exclude(pub_date__gte=datetime.date.today())
&gt;&gt;&gt; q3 = q1.filter(pub_date__gte=datetime.date.today())
</code></pre>

<blockquote>
<p>或者将其组合起来 ,如下:</p>
</blockquote>

<pre><code>&gt;&gt;&gt;q1 = BookInfo.objects.filter(headline_startswith=&quot;What&quot;).exclude(pub_date_gte=datetime.date.today())
</code></pre>

<blockquote>
<p>随着我们的程序越来越复杂，查询的条件也跟着复杂起来，这样简单的通过一个filter()来进行查询的条件将导致我们的查询越来越长。<br />
 Q( )对象就是为了将这些条件组合起来。</p>
</blockquote>

<p>我们在查询的条件中需要组合条件时(例如两个条件“且”或者“或”)时。我们可以使用Q( )查询对象。</p>

<p>例如下面的代码:</p>

<pre><code># 导入Q对象
from django.db.models imports Q

# 使用Q对象查询: 
q=Q(question_startswith=&quot;What&quot;)
</code></pre>

<p>这样就生成了一个Q()对象<br />
我们可以使用符号 &amp; 或者 | 将多个Q( )对象组合起来传递给filter()，exclude()，get()等函数。</p>

<p>当多个Q( )对象组合起来时，Django会自动生成一个新的Q( )。</p>

<p>例如下面代码就将两个条件组合成了一个</p>

<pre><code>Q(question__startswith = 'Who') | Q(question__startswith = 'What')
</code></pre>

<p>使用上述代码可以使用SQL语句这么理解:</p>

<pre><code>WHERE question LIKE 'Who%' OR question LIKE 'What%'
</code></pre>

<p><em><strong>另外:</strong></em><br />
我们可以在Q()对象的前边使用字符&rdquo;~“来代表&rdquo;非”, 例如:</p>

<pre><code>Q(question__startswith=&quot;Who&quot;) | ~Q(pub_date__year=2005)
</code></pre>

<p>对应的SQL语句理解为:</p>

<pre><code>WHERE question like &quot;Who%&quot; OR year(pub_date) !=2005
</code></pre>

<p><em><strong>总结</strong></em></p>

<blockquote>
<p>Q对象被义在django.db.models中<br />
 使用时,需要导入:<br />
 from django.db.models import Q</p>

<p>语法如下:<br />
 Q(属性名__运算符=值)</p>
</blockquote>

<p>Q对象可以使用 &amp;、| 连接</p>

<blockquote>
<p>&amp; 表示逻辑与<br />
 | 表示逻辑或。</p>
</blockquote>

<p>例1：查询阅读量大于20，或编号小于3的图书:</p>

<pre><code>BookInfo.objects.filter(Q(bread__gt=20) | Q(pk__lt=3))
</code></pre>

<p>例2:</p>

<pre><code>BookInfo.objects.get(
    Q(question__startswith='Who'),
    Q(pub_date=date(2005, 5, 2)) | Q(pub_date=date(2005, 5, 6))
)
</code></pre>

<p>上面的代码可以理解为:</p>

<pre><code>SELECT * from BookInfo WHERE question LIKE 'Who%'  AND (pub_date = '2005-05-02' OR pub_date = '2005-05-06')
</code></pre>

<p>Q对象前可以使用~操作符，表示非not。</p>

<p>例：查询编号不等于3的图书。</p>

<pre><code>BookInfo.objects.filter(~Q(pk=3))
</code></pre>

<p><em><strong>聚合函数</strong></em><br />
使用 aggregate( ) 过滤器调用聚合函数。</p>

<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>

<tbody>
<tr>
<td>Avg</td>
<td>平均</td>
</tr>

<tr>
<td>Count</td>
<td>数量</td>
</tr>

<tr>
<td>Max</td>
<td>最大</td>
</tr>

<tr>
<td>Min</td>
<td>最小</td>
</tr>

<tr>
<td>Sum</td>
<td>求和</td>
</tr>
</tbody>
</table>

<p>被定义在django.db.models中,引入:</p>

<pre><code>from django.db.models import Sum, Avg, Count, Max, Min
</code></pre>

<p>例:<br />
查询图书的总阅读量:</p>

<pre><code># 导入: 
from django.db.models import Sum

# 查询图书的阅读总量
BookInfo.objects.aggregate(Sum('bread'))
</code></pre>

<p><strong>注意:aggregate的返回值是一个字典类型</strong><br />
格式如下:</p>

<pre><code>{'属性名':值}
# 如:
{'bread__sum':30}
</code></pre>

<p><strong>使用count时一般不适用aggregate()过滤器</strong><br />
例: 查询图书的行书</p>

<pre><code># 使用count时直接调用即可
BookInfo.objects.count()
</code></pre>

<p>注意count函数的返回值是一个数字。</p>

<h3 id="2-3-排序">2.3 排序:</h3>

<p>使用order_by对结果进行排序</p>

<pre><code># 依照阅读量的个数: 从少到多依次排序
# 升序
BookInfo.objects.all().order_by('bread')  

 # 降序
BookInfo.objects.all().order_by('-bread')
</code></pre>

<h3 id="2-4-关联查询">2.4 关联查询</h3>

<p><strong>一对多</strong> 的访问方式:</p>

<blockquote>
<p>一对应的是: 模型类对象.<br />
 多对应的是: 模型类名小写_set</p>
</blockquote>

<p>使用方式:</p>

<pre><code>变量 = 模型类.objects.get(属性=某一个)
变量.关联类_set.条件
</code></pre>

<p>例如:</p>

<pre><code># 获取id=1的书(射雕英雄传)所对应的英雄人物: 

b = BookInfo.objects.get(id=1)
b.heroinfo_set.all()
</code></pre>

<p>结果:</p>

<pre><code>&lt;QuerySet [&lt;HeroInfo: 郭靖&gt;, &lt;HeroInfo: 黄蓉&gt;, &lt;HeroInfo: 黄药师&gt;, &lt;HeroInfo: 欧阳锋&gt;, &lt;HeroInfo: 梅超风&gt;]&gt;
</code></pre>

<p><strong>由多到一</strong> 的访问方式:</p>

<blockquote>
<p>多对应的是: 模型类对象<br />
 一对应的是: 模型类中的关系类属性名</p>
</blockquote>

<pre><code># 获取id=1的英雄们(射雕英雄传中的), 所在的书籍名称: 

h = HeroInfo.objects.get(id=1)
h.hbook
</code></pre>

<p>结果:</p>

<pre><code>&lt;BookInfo: 射雕英雄传&gt;
</code></pre>

<p>获取: <strong>一个对象对应的模型类所关联对象的id语法:</strong></p>

<p>多对应的模型类对象.关联类属性_id<br />
例：</p>

<pre><code># 获取id=1的英雄人物(郭靖), 所对应书籍的id值(主键):

h = HeroInfo.objects.get(id=1)
h.hbook_id
</code></pre>

<p>结果:</p>

<pre><code>1
</code></pre>

<p><strong>关联过滤查询</strong><br />
<strong>第一种:</strong></p>

<blockquote>
<p>由多模型类条件查询一模型类数据:<br />
 多模型 =====&gt; 一模型</p>
</blockquote>

<p>语法如下：</p>

<blockquote>
<p>关联模型类名小写<strong>属性名</strong>条件运算符=值</p>
</blockquote>

<p><strong>注意：</strong></p>

<blockquote>
<p>其中: __条件运算符 部分,可以没有.<br />
 如果: __条件运算符 部分没有，则表示等于( = )。<br />
 这里的都是双下划线, 而不是单下划线, 否则报错.</p>
</blockquote>

<p>例如 :<br />
查询图书，要求图书英雄为&rdquo;孙悟空&rdquo;</p>

<pre><code># 查询图书，要求图书英雄为&quot;孙悟空&quot;

BookInfo.objects.filter(heroinfo__hname='孙悟空')
</code></pre>

<p>结果:</p>

<pre><code>&lt;QuerySet [&lt;BookInfo: 西游记&gt;]&gt;
</code></pre>

<p>查询图书，要求图书中英雄的描述包含&rdquo;八&rdquo;</p>

<pre><code># 查询图书，要求图书中英雄的描述包含&quot;八&quot;

BookInfo.objects.filter(heroinfo__hcomment__contains='八')
</code></pre>

<p>结果:</p>

<pre><code>&lt;QuerySet [&lt;BookInfo: 射雕英雄传&gt;, &lt;BookInfo: 天龙八部&gt;]&gt;
</code></pre>

<p><strong>第二种:</strong><br />
<strong>由一模型类条件查询多模型类数据:</strong></p>

<p>语法如下：</p>

<blockquote>
<p>一模型类关联属性名<strong>一模型类属性名</strong>条件运算符=值</p>
</blockquote>

<p><strong>注意：如果没有&rdquo;__运算符&rdquo;部分，表示等于</strong> 。</p>

<p>例如 ：<br />
查询书名为“天龙八部”的所有英雄。</p>

<pre><code># 查询书名为“天龙八部”的所有英雄

HeroInfo.objects.filter(hbook__btitle='天龙八部')
</code></pre>

<p>结果:</p>

<pre><code>&lt;QuerySet [&lt;HeroInfo: 乔峰&gt;, &lt;HeroInfo: 段誉&gt;, &lt;HeroInfo: 虚竹&gt;, &lt;HeroInfo: 王语嫣&gt;]&gt;
</code></pre>

<p>查询图书阅读量大于30的所有英雄</p>

<pre><code># 查询图书阅读量大于30的所有英雄

HeroInfo.objects.filter(hbook__bread__gt=30)
</code></pre>

<p>结果:</p>

<pre><code>&lt;QuerySet [&lt;HeroInfo: 乔峰&gt;, &lt;HeroInfo: 段誉&gt;, &lt;HeroInfo: 虚竹&gt;, &lt;HeroInfo: 王语嫣&gt;, &lt;HeroInfo: 胡斐&gt;, &lt;HeroInfo: 苗若兰&gt;, &lt;HeroInfo: 程灵素&gt;, &lt;HeroInfo: 袁紫衣&gt;]&gt;
</code></pre>

<h2 id="3-修改">3 修改</h2>

<blockquote>
<p>修改更新有两种方法:<br />
 save<br />
 update</p>
</blockquote>

<h3 id="3-1-save">3.1 save</h3>

<p>修改模型类对象的属性，然后执行save()方法</p>

<pre><code>hero = HeroInfo.objects.get(hname='猪八戒')
hero.hname = '猪悟能'
hero.save()
</code></pre>

<h3 id="3-2-update">3.2 update</h3>

<p>使用模型类.objects.filter().update()，会返回受影响的行数</p>

<pre><code>HeroInfo.objects.filter(hname='沙悟净').update(hname='沙僧')
</code></pre>

<h2 id="4-删除">4 删除</h2>

<blockquote>
<p>删除有两种方法</p>
</blockquote>

<h3 id="4-1-模型类对象delete">4.1 模型类对象delete</h3>

<pre><code>hero = HeroInfo.objects.get(id=13)
hero.delete()
</code></pre>

<h3 id="4-2-模型类-objects-filter-delete">4.2 模型类.objects.filter().delete()</h3>

<pre><code>HeroInfo.objects.filter(id=14).delete()
</code></pre>

<h1 id="六-查询集">六、查询集:</h1>

<h2 id="1-概念">1 概念</h2>

<p>Django的ORM中存在查询集的概念。</p>

<p>查询集，也称查询结果集、QuerySet，表示从数据库中获取的对象集合。</p>

<p>当调用如下过滤器方法时，Django会返回查询集（而不是简单的列表）：</p>

<ul>
<li>all()：返回所有数据。</li>
<li>filter()：返回满足条件的数据。</li>
<li>exclude()：返回满足条件之外的数据。</li>

<li><p>order_by()：对结果进行排序。<br />
对查询集可以再次调用过滤器进行过滤，如</p>

<p>BookInfo.objects.filter(bread__gt=30).order_by(&lsquo;bpub_date&rsquo;)</p></li>
</ul>

<p>也就意味着查询集可以含有零个、一个或多个过滤器。过滤器基于所给的参数限制查询的结果。</p>

<p><strong>从SQL的角度讲，查询集与select语句等价，过滤器像where、limit、order by子句。<br />
判断某一个查询集中是否有数据：</strong></p>

<ul>
<li>exists()：判断查询集中是否有数据，如果有则返回True，没有则返回False。</li>
</ul>

<h2 id="2-两大特性">2 两大特性</h2>

<h3 id="2-1惰性执行">2.1惰性执行</h3>

<p>创建查询集不会访问数据库，直到调用数据时，才会访问数据库，调用数据的情况包括迭代、序列化、与if合用</p>

<p>例如，当执行如下语句时，并未进行数据库查询，只是创建了一个查询集qs</p>

<pre><code>qs = BookInfo.objects.all()
</code></pre>

<p>继续执行遍历迭代操作后，才真正的进行了数据库的查询</p>

<pre><code>for book in qs:
    print(book.btitle)
    ```
### 2.2 缓存
使用同一个查询集，第一次使用时会发生数据库的查询，然后Django会把结果缓存下来，再次使用这个查询集时会使用缓存的数据，减少了数据库的查询次数。

**情况一**：如下是两个查询集，无法重用缓存，每次查询都会与数据库进行一次交互，增加了数据库的负载。
```python
from booktest.models import BookInfo
[book.id for book in BookInfo.objects.all()]
[book.id for book in BookInfo.objects.all()]
</code></pre>

<p><a href="https://img.it610.com/image/info8/1c85eb7d3b0f443eae3509d1741a5456.jpg"><img src="https://img.it610.com/image/info8/1c85eb7d3b0f443eae3509d1741a5456.jpg" alt="四十三、python学习之Django框架\(三\):数据库,数据库配置,定义模型,shell工具,数据库操作,查询集_第5张图片" /></a><br />
<a href="https://img.it610.com/image/info8/2d26ce974d9644e9932493570efe0ad9.jpg"><img src="https://img.it610.com/image/info8/2d26ce974d9644e9932493570efe0ad9.jpg" alt="四十三、python学习之Django框架\(三\):数据库,数据库配置,定义模型,shell工具,数据库操作,查询集_第6张图片" /></a><br />
<strong>情况二</strong> ：经过存储后，可以重用查询集，第二次使用缓存中的数据。</p>

<pre><code>qs=BookInfo.objects.all()
[book.id for book in qs]
[book.id for book in qs]
</code></pre>

<p><a href="https://img.it610.com/image/info8/bf9049b93b454cb1955cd0139071875d.jpg"><img src="https://img.it610.com/image/info8/bf9049b93b454cb1955cd0139071875d.jpg" alt="在这里插入图片描述" /></a><br />
<a href="https://img.it610.com/image/info8/233035bb57984f91a26ddbceb24523ad.jpg"><img src="https://img.it610.com/image/info8/233035bb57984f91a26ddbceb24523ad.jpg" alt="在这里插入图片描述" /></a></p>

<h2 id="3-限制查询集">3 限制查询集:</h2>

<p>可以对查询集进行取下标或切片操作，等同于sql中的limit和offset子句。</p>

<blockquote>
<p>注意：不支持负数索引。</p>
</blockquote>

<p>对查询集进行切片后返回一个新的查询集，不会立即执行查询。</p>

<p>如果获取一个对象，直接使用[0]，等同于[0:1].get()，但是如果没有数据，[0]引发IndexError异常，[0:1].get()如果没有数据引发DoesNotExist异常。</p>

<p>示例：获取第1、2项，运行查看。</p>

<pre><code>qs = BookInfo.objects.all()[0:2]
</code></pre>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>