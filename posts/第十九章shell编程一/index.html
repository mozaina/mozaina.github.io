<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>第十九章Shell编程一 | 开发者问答集锦</title>
    <meta property="og:title" content="第十九章Shell编程一 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="第十九章Shell编程一">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/%E7%AC%AC%E5%8D%81%E4%B9%9D%E7%AB%A0shell%E7%BC%96%E7%A8%8B%E4%B8%80/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">第十九章Shell编程一</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            

<p>一、shell脚本介绍<br />
二、shell脚本结构和执行<br />
三、date命令用法<br />
四、shell脚本中的变量<br />
五、hell脚本中的逻辑判断<br />
六、文件目录属性判断<br />
七、if特殊用法<br />
八、case判断<br />
九、for循环<br />
十、while循环<br />
十一、break跳出循环<br />
十二、continue结束本次循环<br />
十三、exit退出整个脚本<br />
十四、扩展</p>

<p>一、shell脚本介绍</p>

<p>shell是一种脚本语言, 是用户与内核进行交互的一种接口。</p>

<p>shell可以使用逻辑判断、循环等语法，也可以自定义函数。</p>

<p>shell是系统命令的集合</p>

<p>shell脚本可以实现自动化运维，能大大增加我们的运维效率。</p>

<p>二、shell脚本结构和执行</p>

<p>shell脚本通常在编辑器中编写，由命令及其注释组成，注释是跟在#号后的内容，用来对脚本进行解释。</p>

<p>第一行 位于脚本左上角的第一行会指出由哪个程序来执行脚本中的行。这一行通常称为shbang，写作#!/bin/bash</p>

<p>一个bash shell程序由一组unix/linux命令、bash命令、程序结构控制语句和注释组成，为便于区分，一般以.sh结尾。</p>

<p><strong>1. Shell脚本内容的第一行需要加：#!/bin/bash</strong></p>

<p>意思是指定命令解释器，由什么解释器来执行这个脚本。例如：</p>

<p>[root@Linux01 ~]# cat 1.sh<br />
#!/bin/bash<br />
echo 123<br />
w<br />
ls<br />
 <strong>2. 以#开头的行作为解释说明，解释器不会去执行它。</strong></p>

<p><strong>3. 脚本的文件名通常以 .sh 结尾，用于区分这个文件是一个 shell 脚本。</strong></p>

<p><strong>4. 执行方法有两种：</strong></p>

<p>①一种方法是使用 bash 或者 sh 命令 来执行指定的脚本</p>

<p>[root@Linux01 ~]# bash 1.sh<br />
或[root@Linux01 ~]# sh 1.sh</p>

<p>②另一种方法是使用相对路径或者绝对路径去执行，脚本执行前需要给脚本加上可执行权限</p>

<p><a href="https://img.it610.com/image/info8/c6f3d31bf7c145e3bb0700ea29e15060.jpg"><img src="https://img.it610.com/image/info8/c6f3d31bf7c145e3bb0700ea29e15060.jpg" alt="第十九章
Shell编程（一）_第1张图片" /></a></p>

<p>5. 查看脚本执行过程</p>

<p>[root@Linux01 ~]# sh <strong>-x</strong> 1.sh</p>

<p><a href="https://img.it610.com/image/info8/2415be40a2bc42ab8e6fc543b3fee961.jpg"><img src="https://img.it610.com/image/info8/2415be40a2bc42ab8e6fc543b3fee961.jpg" alt="第十九章
Shell编程（一）_第2张图片" /></a></p>

<p>6. 查看脚本是否有语法错误（ <strong>只能查看语法问题，命令有错误不检查</strong> ）</p>

<p>[root@Linux01 ~]# bash <strong>-n</strong> 1.sh</p>

<p>没有错误不输出；有错误就会输出错误位置。</p>

<p>三、date命令用法</p>

<p>date命令用于设置或者显示日期。</p>

<p>默认为显示系统当前时间：</p>

<p>[root@Linux01 ~]# date<br />
2019年 01月 12日 星期六 22:37:35 CST</p>

<h1 id="固定格式-date">固定格式： date &ldquo;+&rdquo;</h1>

<h1 id="后面跟指定的时间变量">+ 后面跟指定的时间变量</h1>

<h1 id="常用的时间变量如下">常用的时间变量如下：</h1>

<p>输出指定时间，要加-d选项</p>

<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>

<tbody>
<tr>
<td>date +%Y</td>
<td>年（4位）</td>
</tr>

<tr>
<td>date +%y</td>
<td>年（2位）</td>
</tr>

<tr>
<td>date +%m</td>
<td>月</td>
</tr>

<tr>
<td>date +%d</td>
<td>日</td>
</tr>

<tr>
<td>date +%D</td>
<td>以月/日/年格式显示日期</td>
</tr>

<tr>
<td>date +%F</td>
<td>以年-月-日格式显示日期</td>
</tr>

<tr>
<td>date +%H</td>
<td>小时</td>
</tr>

<tr>
<td>date +%M</td>
<td>分钟</td>
</tr>

<tr>
<td>date +%S</td>
<td>秒</td>
</tr>

<tr>
<td>date +%T</td>
<td>以时：分：秒格式显示时间，等于date +%H:%M:%S</td>
</tr>

<tr>
<td>date +%s</td>
<td>时间戳表示距离1970年1月1日到现的秒数</td>
</tr>

<tr>
<td>date +%w</td>
<td>这个星期的第几周</td>
</tr>

<tr>
<td>date +%W</td>
<td>今年的第几周</td>
</tr>

<tr>
<td>date +%h</td>
<td>月份缩写，等于date +%b</td>
</tr>

<tr>
<td>date -d &ldquo;-1 day&rdquo;</td>
<td>一天前</td>
</tr>

<tr>
<td>date -d &ldquo;+1 day&rdquo;</td>
<td>一天后</td>
</tr>

<tr>
<td>date -d &ldquo;-1 year&rdquo;</td>
<td>一年前</td>
</tr>

<tr>
<td>date -d &ldquo;-1 month&rdquo;</td>
<td>一个月前</td>
</tr>

<tr>
<td>date -d &ldquo;-1 hour&rdquo;</td>
<td>一小时前</td>
</tr>

<tr>
<td>date -d &ldquo;-1 min&rdquo;</td>
<td>一分钟前</td>
</tr>
</tbody>
</table>

<p><strong>①</strong> 时间戳与日期相互转换：</p>

<p>[root@Linux01 ~]# date +%s<br />
1547305554<br />
[root@Linux01 ~]# date <strong>-d</strong> @1547305554<br />
2019年 01月 12日 星期六 23:05:54 CST<br />
 <strong>②</strong> 把指定时间转换为时间戳，并转回日期格式</p>

<p>[root@Linux01 ~]# date +%s <strong>-d</strong> &ldquo;2019-01-12 23:05:54&rdquo;<br />
1547305554<br />
[root@Linux01 ~]# date -d @1547305554<br />
2019年 01月 12日 星期六 23:05:54 CST</p>

<p>③显示日历</p>

<p>[root@Linux01 ~]# <strong>cal</strong><br />
一月 2019<br />
日 一 二 三 四 五 六<br />
1 2 3 4 5<br />
6 7 8 9 10 11 12<br />
13 14 15 16 17 18 19<br />
20 21 22 23 24 25 26<br />
27 28 29 30 31</p>

<p>四、shell脚本中的变量</p>

<p><strong>变量的定义方式：</strong></p>

<p>一般的变量定义方式： 变量名=值 等号两边不能有空格</p>

<p>调用变量的方式： $变量名 ，如果变量名后面还有字符最好加上{} 比如 ${a}bc</p>

<p>例：</p>

<p>[root@Linux01 ~]# vim 11.sh</p>

<p>#!/bin/bash<br />
c=123<br />
count=10<br />
echo $c<br />
echo $count<br />
echo ${c}ount<br />
[root@Linux01 ~]# sh 11.sh<br />
123<br />
10<br />
123ount</p>

<p>哪些情况会使用到变量：</p>

<p>• 当脚本中使用某个字符串较频繁并且字符串长度很长时就应该使用变量代替</p>

<p>• 使用条件语句时，常使用变量 if [ $a -gt 1 ]; then &hellip; ; fi</p>

<p>• 引用某个命令的结果时，用变量替代 n=<code>wc -l 1.txt</code></p>

<p>• 写和用户交互的脚本时，变量也是必不可少的 read -p &ldquo;Input a number: &ldquo; n; echo $n
如果没写这个n，可以直接使用$REPLY</p>

<p>• 内置变量 $0, $1, $2… $0表示脚本本身，$1 第一个参数，$2 第二个 &hellip;. $#表示参数个数</p>

<p>• 数学运算a=1;b=2; c=$(($a+$b))或者$[$a+$b]</p>

<p>变量有环境变量和用户自定义变量。</p>

<p>用户自定义变量变量名可以由一个字母、数字或下划线符号组成，不能以数字开头。长度不超过20个字符。变量名区分大小写，请留意：Var1
和var1不是同一个变量。</p>

<p>shell中只能进行整数运行，如果需要进行浮点数，需要借助bc命令。</p>

<h1 id="算术运算符">算术运算符</h1>

<p>+、-、*、/、%、** # 加、减、乘、除、取余<br />
++、&ndash; # 自增，自减 ，用法$[++a] 或者 $[a++],++前置表示先运算再输出，++后置表示先输出再运算</p>

<h1 id="比较运算符">比较运算符</h1>

<p>=、&gt;、!= # 小于、小于等于、相等与、大于等于、大于、不等于</p>

<h1 id="逻辑运算符">逻辑运算符</h1>

<p>!：取反 &amp;&amp;：逻辑与 ||：逻辑或 ~：按位取反 |：按位异或 &amp;：按位与 ^：按位或</p>

<h1 id="赋值运算符">赋值运算符</h1>

<p>=、+=、-=、*=、/=、%= # a=1 、a+=1相当于a=a+1，其他的运算符类似</p>

<p>五、shell脚本中的逻辑判断</p>

<p>•格式1：if 条件 ; then 语句; fi</p>

<p>• 格式2：if 条件; then 语句1; else 语句2; fi //条件为真执行语句1，不为真就执行语句2</p>

<p>• 格式3：if 条件1; then 语句1 ;elif 条件2; then 语句2; else 语句; fi</p>

<p>//如果条件1为真，执行语句1； 如果条件1不为真，执行判断条件2 ，条件2为真就执行语句2； 条件1和条件2都不为真，则执行else语句。可以有N个
elif 条件。条件只要有一个为真就为真，不再往下执行</p>

<p>• 逻辑判断表达式：if [ $a -gt $b ]; if [ $a -lt 5 ]; if [ $b -eq 10 ]等</p>

<p><strong>特殊运算符：</strong> -gt (&gt;); -lt(=); -le(&lt;=);-eq(==); -ne(!=)</p>

<p><strong>注意：</strong> 条件需要使用方括号 [] 或者 双括号(()) 括起来 。
当使用方括号时，符号、变量两边必须有空格，需要用特殊的判断语法，不能使用比较运算符；双括号可以使用比较运算符，不能使用特殊判断语法。</p>

<p>可以使用 &amp;&amp; || 结合多个条件：</p>

<p>• if [ $a -gt 5 ] &amp;&amp; [ $a -lt 10 ]; then //[ 条件1 ] || [ 条件2 ] 条件1 和 条件2
全为真，才执行语句</p>

<p>• if [ $b -gt 5 ] || [ $b -lt 3 ]; then //[ 条件1 ] || [ 条件2 ] 条件1 和 条件2
只要有一个为真就为真</p>

<p>六、文件目录属性判断</p>

<table>
<thead>
<tr>
<th>比较</th>
<th>描述</th>
</tr>
</thead>

<tbody>
<tr>
<td>-d file</td>
<td>检查文件是否存且是一个目录</td>
</tr>

<tr>
<td>-e file</td>
<td>检查文件是否存在</td>
</tr>

<tr>
<td>-f file</td>
<td>检查文件是否存且是一个文件</td>
</tr>

<tr>
<td>-r file</td>
<td>检查文件是否存在且可读</td>
</tr>

<tr>
<td>-s file</td>
<td>检查文件是否存在且非空</td>
</tr>

<tr>
<td>-w file</td>
<td>检查文件是否存在并可写</td>
</tr>

<tr>
<td>-x file</td>
<td>检查文件是否存在并可执行</td>
</tr>

<tr>
<td>-O file</td>
<td>检查文件是否存在并属当前用户所有</td>
</tr>

<tr>
<td>-G file</td>
<td>检查文件是否存在并且默认组与当前用户相同</td>
</tr>

<tr>
<td>file1 -nt file2</td>
<td>检查file1是否比file2新</td>
</tr>

<tr>
<td>file1 -ot file2</td>
<td>检查file1是否比file2旧</td>
</tr>
</tbody>
</table>

<p>例：</p>

<p>[root@Linux01 ~]# if [ -f ./11.sh ];then echo &lsquo;YES&rsquo;;fi //判断是否是普通文件，且存在<br />
YES<br />
[root@Linux01 ~]# if [ -d ./11.sh ];then echo &lsquo;YES&rsquo;;fi //是一个文件，不是目录，所以没有输出<br />
[root@Linux01 ~]# if [ -e ./11.sh ];then echo &lsquo;YES&rsquo;;fi<br />
YES</p>

<p>[root@Linux01 ~]# if [ -r ./11.sh ];then echo &lsquo;YES&rsquo;;fi<br />
YES<br />
[root@Linux01 ~]# if [ -w ./11.sh ];then echo &lsquo;YES&rsquo;;fi<br />
YES<br />
[root@Linux01 ~]# if [ -x ./11.sh ];then echo &lsquo;YES&rsquo;;fi<br />
[root@Linux01 ~]# ll 11.sh<br />
-rw-r&ndash;r&ndash; 1 root root 81 1月 13 00:04 11.sh //不可执行，因为没有加x权限，不能使用相对路径执行<br />
[root@Linux01 ~]# if [ -G ./11.sh ];then echo &lsquo;YES&rsquo;;fi<br />
YES<br />
[root@Linux01 ~]# if [ -O ./11.sh ];then echo &lsquo;YES&rsquo;;fi<br />
YES<br />
[root@Linux01 ~]# if [ ./11.sh -nt ./1.sh ];then echo &lsquo;YES&rsquo;;fi<br />
YES<br />
[root@Linux01 ~]# if [ ./11.sh -ot ./1.sh ];then echo &lsquo;YES&rsquo;;fi
//11.sh比1.sh新，所以没有输出</p>

<p>七、if特殊用法</p>

<p>if [ -z &ldquo;$a&rdquo; ] 判断变量a是否为空，变量为空时表达式为真</p>

<p>if [ -n &ldquo;$a&rdquo; ] 表示当变量a的值不为空，不为空时表达式为真</p>

<p>if grep -q &lsquo;123&rsquo; 1.txt; 判断文件中是否包含指定的字符串，有包含为真（ <strong>使用命令作为判断条件</strong> ）</p>

<p>if [ ! -e file ]; 判断文件或目录是否存在， 不存在为真。 <strong>使用! 在参数前 表示取反</strong></p>

<p>[root@Linux01 ~]# echo $b</p>

<p>[root@Linux01 ~]# if [ -z &ldquo;$b&rdquo; ];then echo ok;fi //变量值为空，所以表达式为真<br />
ok<br />
[root@Linux01 ~]# if [ -n &ldquo;$b&rdquo; ];then echo ok;fi<br />
[root@Linux01 ~]# if [ -n &ldquo;$b&rdquo; ];then echo ok;else echo error;fi<br />
error<br />
[root@Linux01 ~]# echo &lsquo;abc&rsquo; &gt; 1.txt<br />
[root@Linux01 ~]# if grep &rsquo;d&rsquo; 1.txt ;then echo YES;else echo &ldquo;NO&rdquo;; fi
//判断文件中不包含指定字符，表达式不为真<br />
NO<br />
[root@Linux01 ~]# if [ ! -e ./11.sh ];then echo yes;else echo no; fi
//文件不存在时，表达式才为真；文件是存在的<br />
no<br />
 <strong>注意：</strong> 无论是-n还是-z，都不能作用在文件上。只能作用于变量。</p>

<p>八、case判断</p>

<p>1. 格式：<br />
case $变量名 in<br />
value1) # 当变量的值是value1时，执行command_1<br />
command1<br />
;; # ;; 两个分号表示一个条件所执行语句的结尾<br />
value2) # 当变量的值是value2时，执行command_2<br />
command2<br />
;;<br />
*) # 当变量的值不满足前面任何一个条件时，执行command_3<br />
commond3<br />
;;<br />
esac</p>

<p>2. 在case程序中，可以在条件中使用|，表示或的意思， 比如</p>

<p>a|b)</p>

<p>command</p>

<p>;;</p>

<p><strong>案例</strong> ：配合if使用。编辑脚本</p>

<p>[root@Linux01 ~]# vim 11.sh</p>

<p>#!/bin/bash<br />
read -p &ldquo;Please input number: &ldquo; n #让用户输入数字,并赋值给n<br />
if [ -z &ldquo;$n&rdquo; ] #判断n是否为空，为空时表达式成立。提示用户输入数字<br />
then<br />
echo &ldquo;Please input number！！！&rdquo;<br />
exit 1<br />
fi<br />
n1=<code>echo $n|sed 's/[0-9]//g'</code> #把n的值显示出来并且把数字部分替换为空，赋值给n1<br />
if [ -n &ldquo;$n1&rdquo; ] #如果n1不为空，说明填写内容包含数字外的内容，提示输入 <strong>数字</strong> 。判断输入是否为纯数字<br />
then<br />
echo &ldquo;Please input number&rdquo; #提示输入数字<br />
exit 1<br />
fi<br />
if [ $n -ge 0 ] &amp;&amp; [ $n -lt 60 ]<br />
then<br />
tag=1<br />
elif [ $n -ge 60 ] &amp;&amp; [ $n -lt 80 ]<br />
then<br />
tag=2<br />
elif [ $n -ge 80 ] &amp;&amp; [ $n -lt 90 ]<br />
then<br />
tag=3<br />
elif [ $n -ge 90 ] &amp;&amp; [ $n -le 100 ]<br />
then<br />
tag=4<br />
else<br />
tag=0<br />
fi<br />
#分数满足哪个条件赋值给tag<br />
case $tag in<br />
1)<br />
echo &ldquo;不及格&rdquo;<br />
;;<br />
2)<br />
echo &ldquo;良好&rdquo;<br />
;;<br />
3)<br />
echo &ldquo;优秀&rdquo;<br />
;;<br />
4)<br />
echo &ldquo;接近完美&rdquo;<br />
;;<br />
*)<br />
echo &ldquo;The number range is 0-100&rdquo; #不在这个范围时，提示输入数字要在这个范围内<br />
;;<br />
esac</p>

<p>[root@Linux01 ~]# sh -x 11.sh #查看执行过程<br />
+ read -p &lsquo;Please input number: &lsquo; n<br />
Please input number: 10<br />
+ &lsquo;[&rsquo; -z 10 &lsquo;]&rsquo;<br />
++ echo 10<br />
++ sed &rsquo;s/[0-9]//g&rsquo;<br />
+ n1=<br />
+ &lsquo;[&rsquo; -n &ldquo; &lsquo;]&rsquo;<br />
+ &lsquo;[&rsquo; 10 -ge 0 &lsquo;]&rsquo;<br />
+ &lsquo;[&rsquo; 10 -lt 60 &lsquo;]&rsquo;<br />
+ tag=1<br />
+ case $tag in<br />
+ echo 不及格<br />
不及格</p>

<p>九、for循环</p>

<p>语法格式：for 变量名 in 条件; do …; done</p>

<p>会默认以空格或回车作为分隔符。</p>

<p>案例：</p>

<p>1. 计算1到100的和</p>

<p>[root@Linux01 ~]# vim 11.sh</p>

<p>#/bin/bash<br />
sum=0<br />
for i in <code>seq 1 100</code><br />
do<br />
sum=$(($sum + $i))<br />
done<br />
echo $sum<br />
[root@Linux01 ~]# sh 11.sh<br />
5050</p>

<p>2. 遍历/etc目录并把目录列出来</p>

<p>[root@Linux01 ~]# vim 11.sh</p>

<p>#!/bin/bash<br />
for a in <code>ls /etc/</code><br />
do<br />
cd /etc/<br />
if [ -d $a ]<br />
then<br />
echo $a<br />
fi<br />
done</p>

<p>[root@Linux01 ~]# sh 11.sh<br />
alternatives<br />
audisp<br />
audit</p>

<p>&hellip;&hellip;.</p>

<p>十、while循环</p>

<p>语法格式： while 条件; do … ; done</p>

<p>while后跟 : ture 1 都是代表为真 因此while : 就是无限循环</p>

<p>案例①：每隔30秒查看系统负载，当大于10时发邮件</p>

<p>[root@Linux01 ~]# vim 1.sh</p>

<p>#!/bin/bash<br />
while :<br />
do<br />
load=<code>w|head -1|awk -F 'load average: ' '{print $2}'|cut -d . -f1</code>
#过滤出负载的整数位，赋值到load变量<br />
if [ $load -gt 10 ]<br />
then<br />
/usr/local/sbin/mail.py 1*******5@163.com &ldquo;load high&rdquo; &ldquo;$load&rdquo;<br />
fi<br />
sleep 30<br />
done<br />
执行脚本时，直接执行不能显示，最好查看执行过程</p>

<p>[root@Linux01 ~]# sh -x 1.sh<br />
+ :<br />
++ w<br />
++ head -1<br />
++ cut -d . -f1<br />
++ awk -F &lsquo;load average: &lsquo; &lsquo;{print $2}&rsquo;<br />
+ load=0<br />
+ &lsquo;[&rsquo; 0 -gt 10 &lsquo;]&rsquo;<br />
+ sleep 30<br />
+ : #30s后又执行了一遍<br />
++ w<br />
++ head -1<br />
++ awk -F &lsquo;load average: &lsquo; &lsquo;{print $2}&rsquo;<br />
++ cut -d . -f1<br />
+ load=0<br />
+ &lsquo;[&rsquo; 0 -gt 10 &lsquo;]&rsquo;<br />
+ sleep 30</p>

<p>案例②：提示让用户只能输入数字</p>

<p>[root@Linux01 ~]# vim 11.sh</p>

<p>#!/bin/bash<br />
while :<br />
do<br />
read -p &ldquo;Please input a number: &ldquo; n #输入内容赋值给n<br />
if [ -z &ldquo;$n&rdquo; ] #判断用户输入内容是否为空。为空，提示需要输入一些内容；不为空，跳过<br />
then<br />
echo &ldquo;Please input sth!&rdquo;<br />
<strong>continue #返回循环</strong><br />
fi<br />
n1=<code>echo $n|sed 's/[0-9]//g'</code> #把输入内容中的数字替换成空<br />
if [ -n &ldquo;$n1&rdquo; ] #通过查看n1是否为空来判断用户输入的是不是纯数字<br />
then<br />
echo &ldquo;Please input number!&rdquo; #不为空，说明输入的不是纯数字，提示输入纯数字<br />
<strong>continue #返回循环</strong><br />
fi</p>

<p>break #n1为空时，说明输入的是纯数字，表达式为假，不执行，跳出循环<br />
echo $n<br />
done</p>

<p><a href="https://img.it610.com/image/info8/f5a2b657668f43fa981195fab2d75376.jpg"><img src="https://img.it610.com/image/info8/f5a2b657668f43fa981195fab2d75376.jpg" alt="第十九章
Shell编程（一）_第3张图片" /></a></p>

<p>十一、break跳出循环</p>

<p>break 当达到某个条件时使用break可以跳出这个循环，但是循环语句后面的语句还会继续执行</p>

<p>案例：</p>

<p>[root@Linux01 ~]# vim 11.sh</p>

<p>#!/bin/bash<br />
for i in $(seq 1 5)<br />
do<br />
echo $i<br />
if [ $i -eq 3 ]<br />
then<br />
break<br />
fi<br />
echo $i<br />
done<br />
echo aaaa</p>

<p>[root@Linux01 ~]# sh 11.sh<br />
1<br />
1<br />
2<br />
2<br />
3<br />
aaaa<br />
可以看出，在i为1、2，不等于3时，还在进行for循环；在为3时，执行break语句，跳出for循环，不再执行i为4、5时的循环，但是会执行循环外的语句。</p>

<p>十二、continue结束本次循环</p>

<p>continue的作用是达到某个条件时，跳过本次循环，继续执行下一个循环及后面的语句</p>

<p>案例：</p>

<p>[root@Linux01 ~]# vim 11.sh</p>

<p>#!/bin/bash<br />
for i in $(seq 1 5)<br />
do<br />
echo $i<br />
if [ $i -eq 3 ]<br />
then<br />
continue<br />
fi<br />
echo $i<br />
done<br />
echo aaaa<br />
[root@Linux01 ~]# sh 11.sh<br />
1<br />
1<br />
2<br />
2<br />
3<br />
4<br />
4<br />
5<br />
5<br />
aaaa</p>

<p>十三、exit退出整个脚本</p>

<p>exit是达到某个条件时，退出整个脚本，后面的循环和语句都不再去执行。</p>

<p>案例：</p>

<p>[root@Linux01 ~]# vim 11.sh</p>

<p>#!/bin/bash<br />
for i in $(seq 1 5)<br />
do<br />
echo $i<br />
if [ $i -eq 3 ]<br />
then<br />
exit<br />
fi<br />
echo $i<br />
done<br />
echo aaaa<br />
[root@Linux01 ~]# sh 11.sh<br />
1<br />
1<br />
2<br />
2<br />
3</p>

<p><strong>总结:</strong></p>

<p>break,continue都是在for、 while循环中使用的</p>

<p>break：会跳出循环，不再进行循环语句，但会进行循环外的语句；</p>

<p>continue：结束本次循环，继续后面的循环和循环外的语句；</p>

<p>exit：直接跳出脚本，后面的循环和循环外的语句都不再执行。 一般exit 后面会跟一个数字，给用户返回该值，执行脚本后使用echo $?查看</p>

<p>十四、扩展</p>

<p>select用法 <a href="http://ask.apelearn.com/question/7950">http://ask.apelearn.com/question/7950</a></p>

<p>selet 变量名 in 命令1 命令2 命令3<br />
do<br />
case $变量名 in<br />
1)<br />
语句1</p>

<p>;;<br />
&hellip;..<br />
*)</p>

<p>语句<br />
;;<br />
esac<br />
done</p>

<p>命令的顺序 与case 的顺序对应起来.</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>