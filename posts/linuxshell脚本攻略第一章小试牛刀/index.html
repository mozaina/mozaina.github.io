<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Linuxshell脚本攻略第一章小试牛刀 | 开发者问答集锦</title>
    <meta property="og:title" content="Linuxshell脚本攻略第一章小试牛刀 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Linuxshell脚本攻略第一章小试牛刀">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/linuxshell%E8%84%9A%E6%9C%AC%E6%94%BB%E7%95%A5%E7%AC%AC%E4%B8%80%E7%AB%A0%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Linuxshell脚本攻略第一章小试牛刀</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <p>1.1 简介</p>

<p>1 打开终端后，就会出现一个提示符，形式通常如下</p>

<p>username@hostname$ 或者root@hostname#</p>

<p>2 $表示的是普通用户，#表示的是超级用户。超级用户是Linux中权限最高的用户</p>

<p>3 有两种运行脚本的方式</p>

<p>sh script.sh 或者是 path script （path是脚本所在的目录）</p>

<p>4 在bash中每个命令是通过分号&rdquo;;&ldquo;来分开的</p>

<p>1.2 终端打印</p>

<p>1 echo是用于终端打印的基本命令，在默认情况下echo在每次调用后都会添加一个换行符</p>

<p>2 另一个可以用来终端打印的命令是printf，printf的参数和C语言中的printf函数一样</p>

<p>3 在默认情况下，echo会将一个换行符追加到输出文本的尾部，可以使用-n来忽略结尾的换行符</p>

<p>4 如果需要使用转义序列，则采用echo -e ”包含转义序列的字符串&rdquo;这种形式</p>

<p>1.3 玩转变量和环境变量</p>

<p>1 我们可以使用pgrep来快速找到一个进程的pid，假如有一个gedti正在运行，那么我们通过pgrep gedit就可以快速知道这个gedit的进程id</p>

<p>2 一个变量可以通过以下方式来进行赋值
var=value，var是变量名，value是变量值，如果value不包含任何空白字符，那么他不需要使用引号来进行引用，否则就需要使用引号进行引用</p>

<p>3 环境是未在当前进程中定义，而从父进程中继承来的变量</p>

<p>4 export命令用来设置环境变量</p>

<p>5 获得字符串的长度 length=${#var}，可以用来求变量var的长度</p>

<p>1.4 通过shell进行数学运算</p>

<p>1 在bash环境中，我们可以使用let (()) 和[]来进行基本的算数操作，在进行高级的运算中，可以使用expr和bc</p>

<p>2 当使用let的时候，变量名之前是不需要再添加$，例如let res=num1+num2</p>

<p>3 let支持++和&ndash;等各种操作</p>

<p>4 操作符[]的使用方法和let命令类似，例如res=$[ num1 + num2 ]</p>

<p>5 也可以使用(())，但是使用(())时，变量名之前要加上$，例如res=$(( num1 + num2 ））</p>

<p>6 我们可以使用scale=2来将小数点位数设置为2</p>

<p>1.5 玩转文件描述符和重定向</p>

<p>1 文件描述符是于文件输入，输出相关联的整数，他们用来跟踪与打开的文件，最常见的文件描述符是stdin,stdout,stderr。</p>

<p>2 文件描述符是与一个打开的文件或数据流相关联的整数，文件描述符0，1和2是系统预留的</p>

<p>0 - stdin标准输入，1 - stdout标准输出，2 - stderr标准错误</p>

<p>3 用下面的方法可以把输出文本重定向到一个文件中</p>

<p>echo &ldquo;this &hellip;.&rdquo; &gt; out , 这样便可以把输出的字符串重定向到out文件中</p>

<p>4 &gt;和&gt;&gt;并不相同，前者是会先清空文件再写入内容，而后者是会将内容追加到现有的文件的尾部</p>

<p>5 当使用重定向操作符的时候，重定向的内容不会出现在终端，而是直接被导入文件。重定向操作默认使用标准输出</p>

<p>6 &gt;等同于1&gt;；对于&gt;&gt;来说，等同于1&gt;&gt;</p>

<p>7 借助重定向，我们可以使用stdin那样从文件中读取数据 cmd &lt; file</p>

<p>8 我们可以使用exec命令创建自定义的文件描述符</p>

<p>1.6 数组和关联数组</p>

<p>1 bash同时支持数组和关联数组，普通数组只能使用整数做为数组索引，而关联数组可以使用字符串做为数组索引</p>

<p>2 定义数组的方法有很多种</p>

<p>第一种：array_var=(1 2 3 4 5)，这些值会存储在以0为起始索引的连续位置上</p>

<p>第二种：array_var[0]=1</p>

<p>array_var[1]=2</p>

<p>&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;.</p>

<p>3 打印特定元素的数组内容，${array_var[index]}，将会打印处索引为index的内容</p>

<p>4 以清单形式打印处数组中的所有值，${array_var[*]}</p>

<p>5 打印数组的长度${#array_var[*]}</p>

<p>6 在关联数组中，我们可以使用任意的文本做为数组索引，在普通数组中，只能用整数做为索引</p>

<p>7 首先我们需要单独的声明语句将一个变量名声明为关联数组declare -A ass_array</p>

<p>1.7 使用别名</p>

<p>1 别名有多种实现方式，可以使用函数，也可以使用alias命令</p>

<p>2 可以按照以下方式来创建一个别名 alias new_command=&lsquo;command&rsquo;</p>

<p>3 alias命令的作用只是暂时的，我们要写在~/.bashrc中，然后用source ~/.bashrc这样就可以长久的使用别名</p>

<p>4 如果要删除别名，我们可以使用unalias或者直接删除~/.bashrc</p>

<p>1.8 获取终端信息</p>

<p>1 获取终端的行数和列数 tput cols 和 tput lines</p>

<p>2 打印当前的终端名 tput longname</p>

<p>3 删除当前光标位置到行尾的所有内容 tput ed</p>

<p>1.9 获取/设置日期和延时</p>

<p>1 我们使用date来打印处日期</p>

<p>2 打印纪远时 date +%s，纪远时被定义为从世界标准时间1970年1月1号0时0分0秒至当前时刻的总秒数</p>

<p>3 用格式串结合+作为date命令的参数，可以按照你的选择打印出对应的格式和日期</p>

<p>4 我们可以使用sleep time来延时time秒</p>

<p>5 tput sc是用来存储光标位置，tput rc是恢复光标位置，tput ed是清除从当前光标位置到行末的内容</p>

<p>1.10</p>

<p>1 使用-x，启动跟踪调试shell脚本，运行带有-x标志的脚本能够打出所执行的每一行命令及当前状态</p>

<p>2 针对每一种情况，我们可以在脚本中设置启用或是禁止调试打印</p>

<p>set -x 在执行时显示参数和命令</p>

<p>set +x 禁止调试</p>

<p>set -v 当命令进行读取时显示输入</p>

<p>set +v 禁止打印输入</p>

<p>3 我们可以直接使用shebang #!/bin/bash改成#!/bin/bash -xv不用其它显项直接进行调试</p>

<p>1.11</p>

<p>1 函数定义</p>

<p>function fname(){</p>

<p>statements</p>

<p>}</p>

<p>或者是</p>

<p>fname(){</p>

<p>statements</p>

<p>}</p>

<p>2 只要使用函数名就可以调用某个函数 fname，就会执行fname函数</p>

<p>3 参数可以传递给函数 fname arg1 arg2</p>

<p>4 类似地，参数可以传递给脚本并通过script来访问</p>

<p>$1 是第一个参数</p>

<p>$2 是第二个参数</p>

<p>$n 是第n个参数</p>

<p>$@ 被扩展成&rdquo;$1&rdquo; “$2&rdquo; &ldquo;$3&rdquo;</p>

<p>$* 被扩展成&rdquo;$1c$2c$3&rdquo;,其中c是IFS的第一个字符</p>

<p>$@ 用的比较多，由于$*把所有的参数都当作单个字符串，因此很少被利用</p>

<p>5 在bash中每一条命令执行之后都会返回一个值，如果是0表示执行成功，其它表示执行失败</p>

<p>1.12</p>

<p>1 我们使用管道pipe来连接每一个过滤器，例如$cmd1 | cmd2 |
cmd3，这里组合了三个命令，cmd1输出传递给cmd2，而cmd2传递给cmd3，最终输出将会被打印或导入某个文件</p>

<p>2 我们有两种方法取得命令序列的输出</p>

<p>第一种：output=$(cmd)，这样就会把cmd命令的结果输出到output上</p>

<p>第二种：output=<code>cmd</code>，这样就会把cmd命令的结果输出到output上</p>

<p>3 假设我们使用子shll或反引用的方法将命令的输出读入一个变量中，可以将它放入双引号中，以保留空格和换行符</p>

<p>1.13 字段分割符和迭代器</p>

<p>1 内部字段分割符IFS是shell脚本中一个重要的概念，默认的IFS是空白字符（换行符，制表符或者空格）</p>

<p>2 我们可以轻松的生成不同序列</p>

<p>echo {1..50} 这样能够生成一个从1到50的序列</p>

<p>echo {a..z} 这样能够生成a到z的序列</p>

<p>3 for循环</p>

<p>for i in list</p>

<p>do</p>

<p>statements</p>

<p>done</p>

<p>4 while循环</p>

<p>while condition</p>

<p>do</p>

<p>statements</p>

<p>done</p>

<p>1.14 比较和测试</p>

<p>1 if条件</p>

<p>if condition</p>

<p>then</p>

<p>statements</p>

<p>elif condition</p>

<p>statements</p>

<p>else</p>

<p>statements</p>

<p>fi</p>

<p>2 我们可以使用逻辑运算符来减少if else的使用</p>

<p>[ condition ] &amp;&amp; action 如果condition条件为真，那么执行action</p>

<p>[ condition ] || action 如果condition条件为假，那么执行action</p>

<p>3 算术比较</p>

<p>-eq: 相等</p>

<p>-ne： 不相等</p>

<p>-gt： 大于</p>

<p>-lt： 小于</p>

<p>-ge： 大于等于</p>

<p>-le： 小于或等于</p>

<p>4 文件系统相关测试</p>

<p>[ -f $file ] 如果给定的文件是普通文件则返回真</p>

<p>[ -x $file ] 如果给点的文件具有执行权限则返回真</p>

<p>[ -d $file ] 如果给点的文件是目录则返回真</p>

<p>[ -e $file ] 如果文件file存在则返回真</p>

<p>[ -c $file ] 如果给定的文件是字符设备文件则返回真</p>

<p>[ -b $file ] 如果给点的文件是块设备文件则返回真</p>

<p>[ -w $file ] 如果给点的文件具有可些权限则返回真</p>

<p>[ -r $file ] 如果文件file具有可读权限则返回真</p>

<p>[ -L $file ] 如果给点的文件file是一个符号链接文件则返回真</p>

<p>5 字符串比较</p>

<p>1 使用字符串比较的时候，最好使用双中括号，因为有时候采用单个中括号会产生错误</p>

<p>2 [[ $str1 = $str2 ]]，当str1等于str2的时候，返回真</p>

<p>[[ $str1 ！= $str2 ]]，当str1不等于str2的时候，返回真</p>

<p>[[ $str1 &gt; $str2 ]]，当str1大于str2的时候，返回真</p>

<p>[[ $str1 &lt; $str2 ]]，当str1小于str2的时候，返回真</p>

<p>[[ -z $str ]]如果str是空字符串返回真</p>

<p>[[ -n $str ]]如果str是非空字符串则返回真</p>

<p>6 test命令同样可以用来执行条件检测，有助于避免过多的括号</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>