<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>kaliLinuxshell编程基础到进阶 | 开发者问答集锦</title>
    <meta property="og:title" content="kaliLinuxshell编程基础到进阶 - 开发者问答集锦">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-09-02T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-09-02T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="kaliLinuxshell编程基础到进阶">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://zaina.newban.cn/posts/kalilinuxshell%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://zaina.newban.cn">
                        开发者问答集锦
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">kaliLinuxshell编程基础到进阶</h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <p>前几天在群里听他们说不会shell编程就不算会linux，嘿，就我这暴脾气，学！干！嘿嘿！行了，不扯犊子了，犊子要生气了，最近学习了shell，感触颇多，我也参考了其他大佬的经验，看着视频课，学了些许基础，其实也就是那回事，认认真真踏踏实实的学，是能学到东西的，还有，要是自学的话，一定要能坐得住啊！</p>

<p><strong>shell介绍</strong></p>

<p>shell（外壳）是C语言编写的程序，是用户使用linux的桥梁，shell既是一种命令也是一种程序设计语言，即就是脚本语言。常见的脚本语言有JavaScript、VBScript、ASP、JSP、PHP、SQL、Perl、shell、python、Ruby、JavaFX、Lua等，shell其实是一种应用程序，这个应用程序提供了一个用户界面。linux中有很多类型的shell，不同的shell具备不同的功能shell还决定了脚本中函数的语法，linux中默认的shell是
/bin/bash，流行的shell有ash、bash、ksh、csh、zsh等，（知道就行了，别问为啥，因为我也不知道）不同的shell都有自己的特点以及用途。</p>

<p><strong>bash：</strong> 大多数linux系统默认使用的shell都是这个，bash shell是 bourne shell的一个免费版本，是最早的Unix
shell，bash还有一个特点就是通过help可以查看帮助，它包含的功能几乎涵盖了shell所有的功能，所以一般的shell脚本都会指定它为执行路径。</p>

<p><strong>一、shell入门</strong></p>

<p>入门很简单，如果你学过其他的编程语言就更容易上手，还有linux的vim最好能会用，就是基本的操作就可以了，进度就会很快的。</p>

<p>先给大伙说一下，我使用的系统是kali linux，权限在root用户下。</p>

<p><strong>代码规范</strong></p>

<pre><code>#!/bin/bash        指定告知系统当前这个脚本要使用的shell解释器，这行一般都写在首部
</code></pre>

<p><strong>shell相关指令</strong></p>

<p>文件命名规范：</p>

<p><strong>文件名.sh</strong> <strong>.sh</strong> 是linux下的bash shell的默认后缀</p>

<p>使用流程：</p>

<p>(1)创建 <strong>.sh</strong> 文件</p>

<p>|</p>

<p>touch test.sh</p>

<p>&mdash;|&mdash;</p>

<p>(2)编写shell代码</p>

<p>|</p>

<p>(3)执行</p>

<p>|</p>

<p>脚本必须得有执行权限 chmod u+x 文件名.sh</p>

<p><strong>练习：</strong> 创建一个test.sh 文件脚本程序，输出属于我们的 hello world</p>

<p>注意：输出的内容如果包含字母和符号，则需要用引号包括起来，如果是纯数字，可以包也可以不包。</p>

<pre><code>(1)先创建文件 touch test.sh
(2) vim test.sh  进入编辑，
  1 #!/bin/bash
  2 echo &quot;hello,world&quot;
(3)完成后按一下 ESC 再shift + ： 再输入wq进行保存退出
</code></pre>

<p>echo是bash的输出语句相当于C语言的printf，C++的cout，java的print</p>

<p>前面的我尽可能的把细节说一下，后面就不提了，这些基本的操作一定要熟练才是。</p>

<p><a href="https://img.it610.com/image/info8/21caddac6f6640b1a2c3a473cdc1e86c.jpg"><img src="https://img.it610.com/image/info8/21caddac6f6640b1a2c3a473cdc1e86c.jpg" alt="kali Linux
shell编程基础到进阶_第1张图片" /></a></p>

<p>加上执行权限：chmod ugo+x test.sh
为所有用户加上此文件的可执行权限，你可能就注意到刚写的test.sh绿了，咳咳，别多想，它就表示整个文件是可执行文件</p>

<p><a href="https://img.it610.com/image/info8/0625b48d360a4ca0bdc5b656915dd285.png"><img src="https://img.it610.com/image/info8/0625b48d360a4ca0bdc5b656915dd285.png" alt="kali Linux
shell编程基础到进阶_第2张图片" /></a></p>

<p>执行：./test.sh 一定要写成 ./test.sh ./ 就相当于告诉系统就在当前目录找。</p>

<p><a href="https://img.it610.com/image/info8/e3a5128ad6dc44cb9450c4bd710697fb.png"><img src="https://img.it610.com/image/info8/e3a5128ad6dc44cb9450c4bd710697fb.png" alt="" /></a></p>

<p>这种执行方式最常用 注意了，test.sh此时在Desktop下，能直接执行，若是没有在直接路径，就得加上路径名比如：</p>

<p><img src="https://img.it610.com/image/info8/4465f78d88a74bb38f208392534ecd71.png" alt="" /></p>

<p><strong>练习</strong> ：使用root账户创建并执行test2.sh <strong>实现创建一个</strong> <strong>shelltest</strong> 用户并在其家目录创建新的文件try.html</p>

<p>两步走：（1）添加用户（2）创建文件如下：</p>

<pre><code>  1 #!/bin/bash
  2 useradd -m -g xk shelltest
  3 touch /home/shelltest/try.html
</code></pre>

<p>-g 是指定用户所在的组，-m是参数，这个解释起来较麻烦，你可以自己查一查</p>

<p>在bash里面，写入的Linux命令没有什么特别的地方，不需要语法，就和平常键入命令一样，脚本一旦执行命令也就执行了</p>

<p>然后给这个脚本添加可执行权限并且执行：</p>

<p>运行查看：家目录下用户创建成功，对应的文件也创建了</p>

<p><a href="https://img.it610.com/image/info8/732bbee967404db78cded212e41dd9a5.png"><img src="https://img.it610.com/image/info8/732bbee967404db78cded212e41dd9a5.png" alt="" /></a></p>

<p><strong>二、进阶</strong></p>

<p>恭喜你通过了入门?纳尼？太快了？基础其实很easy，了解一些基本的手法足矣，来继续吧</p>

<p><strong>1.变量的定义与使用</strong></p>

<p>语言都是相通的，这里的变量和其他语言的变量含义一样。先定义后使用</p>

<p>定义：class_name=&ldquo;new class&rdquo; <strong>后面不用分号，最好就是一行一条命令</strong></p>

<p>使用：echo  $ class_name 这是个美元 $ 符号，一旦要使用变量，这个符号必须要用</p>

<p><strong>以下几点：</strong></p>

<p>（1）在bash里面变量不需要声明，直接写出来直接用$调用。</p>

<p>（2）左边是变量名，右边是变量值</p>

<p>（3）变量名和变量值是使用和被使用的关系；用变量名来使用变量值</p>

<p>（4）使用变量的时候一定要在变量名前面加 $ 符号，这个在其他语言中也是存在的（php）</p>

<p><strong>变量名的规范</strong></p>

<p><strong>注意，变量名后面的等号左右不能有空格，这可能和你熟悉的所有编程语言都不一样，同时命名须遵守以下规则：</strong></p>

<p><strong>（1）命名只能用英文字母，数字和下划线，首字母不能用数字</strong></p>

<p><strong>（2）中间不能有空格，可以使用下划线</strong></p>

<p><strong>（3）不能使用标点符号。</strong></p>

<p><strong>（4）不能使用bash的关键字，使用help可以查看相关的关键字</strong></p>

<p>练习:使用变量输出hello world</p>

<pre><code>  1 #!/bin/bash
  2 str=&quot;hello world&quot;
  3 echo $str
</code></pre>

<p>如下：</p>

<p><a href="https://img.it610.com/image/info8/13917a22f0864f0190e00d8a2cd015b5.jpg"><img src="https://img.it610.com/image/info8/13917a22f0864f0190e00d8a2cd015b5.jpg" alt="kali Linux
shell编程基础到进阶_第3张图片" /></a></p>

<p><strong>关于单引号和双引号：</strong></p>

<p><strong>在这里双引号和单引号是有差异的，shell</strong> <strong>命令执行时会将双引号的内容进行解析，它能认识里面的变量，若是而单引号就不行了，若是写成</strong>
<strong>echo &lsquo;$str&rsquo;</strong> <strong>则会输出</strong> <strong>$str</strong> <strong>，改成</strong> <strong>&rdquo;$str&rdquo;</strong> <strong>则会输出</strong> <strong>hello
world，此外双引号还能实现转义</strong></p>

<p>练习：</p>

<p>给定一个变量，输出现在的时间</p>

<pre><code>  1 #!/bin/bash
  2 Time=`date &quot;+%Y-%m-%d %H:%M:%S&quot;`
  3 echo $Time
</code></pre>

<p>注意 <strong>反引号</strong> （esc下面的那个键）， <strong>当在脚本中需要执行一些指令，并且将其赋给执行结果时需要用到</strong></p>

<p><a href="https://img.it610.com/image/info8/b6d748029076407ca1f6b6a627722dd0.png"><img src="https://img.it610.com/image/info8/b6d748029076407ca1f6b6a627722dd0.png" alt="" /></a></p>

<p><strong>2.只读变量（了解）</strong></p>

<p>语法：readonly 变量名</p>

<p>只读变量不能进行更改，只可以读取，就像C的宏定义C++的const一样严谨。</p>

<p>练习：定义变量a 并且其值为10 ，随后设置其值为只读变量，再尝试更改</p>

<pre><code>  1 #!/bin/bash
  2 a=10
  3 readonly a
  4 a=20
  5 echo $a     
</code></pre>

<p><a href="https://img.it610.com/image/info8/ff1348365c7c4b9e8edc021b34ef13ef.png"><img src="https://img.it610.com/image/info8/ff1348365c7c4b9e8edc021b34ef13ef.png" alt="" /></a></p>

<p>代码第4行想要对a进行更改被它的本身禁止了，大家有没有发现，即使第四行出现了错误，但是第五行依然执行了，所指在shell中如果程序不是相互的依赖关系（比如循环和条件判断），只是单行的命令，它们之间的执行是不会相互影响的，不像其他语言，一个地方出错整个程序就会终止，这也是bash的灵活之处。</p>

<p><strong>3.接收用户输入（重点）</strong></p>

<p>学习了输出，来看看输入吧。</p>

<p>语法：read -p 提示信息 变量名</p>

<p>你可以理解为：bash会将你输入的信息 <strong>读取</strong> 到内存中进行执行</p>

<p>-p prompt ： 提示信息</p>

<p>变量名：你所输入的信息会存入到你指定的这个变量中，后面的使用会调用变量达到对输入的信息进行操作</p>

<p>练习：编写脚本test.6，要求执行之后提示用户输入文件的名称(可指定路径),然后自动为用户创建该文件并提示创建成功</p>

<pre><code>  1 #!/bin/bash
  2 read -p '请输入需要创建文件的路径：' filepath
  3 touch $filepath
  4 echo '创建成功'
  5 ls -l $filepath                    
</code></pre>

<p><a href="https://img.it610.com/image/info8/b87a488337b248f2a0daaf6496f025a7.jpg"><img src="https://img.it610.com/image/info8/b87a488337b248f2a0daaf6496f025a7.jpg" alt="kali Linux
shell编程基础到进阶_第4张图片" /></a></p>

<p>执行：</p>

<p><a href="https://img.it610.com/image/info8/b0072b23717a43568ff031ebcda47c52.jpg"><img src="https://img.it610.com/image/info8/b0072b23717a43568ff031ebcda47c52.jpg" alt="kali Linux
shell编程基础到进阶_第5张图片" /></a></p>

<p><strong>4.删除变量（用的不多，了解）</strong></p>

<p>语法 unset 变量名</p>

<p>练习： 定义变量b=20,在输出b的值，然后删除b，最后输出b</p>

<pre><code>  1 #!/bin/bash
  2 b=20
  3 echo $b
  4 unset b
  5 echo $b   
</code></pre>

<p><a href="https://img.it610.com/image/info8/a09cdd861018422bacda79d0adf796a7.jpg"><img src="https://img.it610.com/image/info8/a09cdd861018422bacda79d0adf796a7.jpg" alt="kali Linux
shell编程基础到进阶_第6张图片" /></a></p>

<p><a href="https://img.it610.com/image/info8/4d1702d0683d49fbacf3a5c37b19fb01.jpg"><img src="https://img.it610.com/image/info8/4d1702d0683d49fbacf3a5c37b19fb01.jpg" alt="" /></a></p>

<p>在这里虽然不输出数据但是会有一个换行，别忽略了这个小细节</p>

<p><strong>5.条件判断语句</strong></p>

<pre><code>语法1：(一个条件)

if condition

then

command1

command2

…

fi              //记住了：if的条件判断中命令结束后一定要使用 fi 来关闭

单行写法（一般在命令行中执行的写法）：if [condition];then command;fi

fi表示闭合

语法2：（两个条件）

if condition

then

command1

command2

…

else

command

fi



语法3：（多个条件）

if condition

then

command1

elif condition2

then

command2

else

commandN

fi
</code></pre>

<p><strong>6.运算符</strong></p>

<p><a href="https://img.it610.com/image/info8/ce37b8e4d04a41d2a1b689bdc584070b.jpg"><img src="https://img.it610.com/image/info8/ce37b8e4d04a41d2a1b689bdc584070b.jpg" alt="kali Linux
shell编程基础到进阶_第7张图片" /></a></p>

<p>原生bash不支持简单的数学运算，但是可以通过其他命令来实现，awk和expr，</p>

<p>expr最常用，是一款表达式计算工具，使用它能完成表达式的求值操作。如下：</p>

<p><a href="https://img.it610.com/image/info8/d57d00d6615e4688aab8e1ee5a016273.jpg"><img src="https://img.it610.com/image/info8/d57d00d6615e4688aab8e1ee5a016273.jpg" alt="" /></a></p>

<p>例如：两个数相加(注意使用的是反引号` 而不是单引号)</p>

<p>#!/bin/bash</p>

<p>val= <strong><code>** expr 2 + 2 **</code></strong></p>

<p>echo &ldquo;两个数的和为：$val&rdquo;</p>

<p><strong>两点注意：</strong></p>

<p>（1） <strong>表达式和运算符之间要有空格</strong> ，2+2就是不对的，必须写成2 + 2，这与我们熟悉的大多数语言不一样</p>

<p>（2）完整的表达式要被 ****`` ** ** 包含</p>

<p>练习：两数的四则运算 以及是否相等：</p>

<pre><code>1 #!/bin/bash
  2 a=4
  3 b=3
  4 echo 'a =' $a
  5 echo 'b =' $b
  6 c=`expr $a + $b`
  7 echo 'a + b =' $c
  8 echo 'a - b =' `expr $a - $b`
  9 echo 'a * b =' `expr $a \* $b`    # 这里注意：乘法要用 \*
 10 echo 'a / b =' `expr $a / $b`
 11 echo 'a % b =' `expr $a % $b`
 12 #判断是否相等
 13 if [ $a == $b ]
 14 then
 15     echo 'a等于b'
 16 else
 17     echo 'a不等于b'
 18 fi
 19 #判断不相等
 20 if [ $a != $b ]
 21 then
 22     echo 'a不等于b'
 23 else
 24     echo 'a等于b'
 25 fi
</code></pre>

<p>要注意表达式格式和if判断[ ] 前面和后面都要有空格</p>

<p><a href="https://img.it610.com/image/info8/549476456db242578c95092b140262f1.jpg"><img src="https://img.it610.com/image/info8/549476456db242578c95092b140262f1.jpg" alt="kali Linux
shell编程基础到进阶_第8张图片" /></a></p>

<p>运行：</p>

<p><a href="https://img.it610.com/image/info8/6257e90d23304672943708b1f210e2c8.jpg"><img src="https://img.it610.com/image/info8/6257e90d23304672943708b1f210e2c8.jpg" alt="kali Linux
shell编程基础到进阶_第9张图片" /></a></p>

<p><strong>7.关系运算符</strong></p>

<p>关系运算符只支持数字，不支持字符串， <strong>除非字符串的值是数字</strong></p>

<p><strong>&lsquo;123&rsquo; 1233</strong> 就可以 &lsquo;abc&rsquo;就不行了</p>

<p><a href="https://img.it610.com/image/info8/7de68464da6645348e91aeeb5c556084.jpg"><img src="https://img.it610.com/image/info8/7de68464da6645348e91aeeb5c556084.jpg" alt="kali Linux
shell编程基础到进阶_第10张图片" /></a></p>

<p><strong>记英文比记简写容易的多</strong></p>

<p>-eq</p>

<p>|</p>

<p>equal</p>

<p>&mdash;|&mdash;</p>

<p>-neq</p>

<p>|</p>

<p>not equal</p>

<p>-gt</p>

<p>|</p>

<p>great than</p>

<p>-lt</p>

<p>|</p>

<p>less than</p>

<p>-ge</p>

<p>|</p>

<p>great equal</p>

<p>-le</p>

<p>|</p>

<p>less equal</p>

<p>练习：进行两数的判断</p>

<p>代码比较多，别慌，都很简单，只是把多个关系运算放在了一个里面</p>

<pre><code>  1 #!/bin/bash
  2 a=10
  3 b=20
  4 echo &quot;a = $a&quot;
  5 echo &quot;b = $b&quot;
  6 if [ $a -eq $b ]
  7 then
  8     echo 'a = b'
  9 else
 10     echo 'a ≠ b'
 11 fi
 12 if [ $a -ne $b ]
 13 then
 14     echo 'a ≠ b'
 15 else
 16     echo 'a = b'
 17 fi
 18 if [ $a -ge $b ]
 19 then
 20     echo 'a &gt; b'
 21 else
 22     echo 'a &lt; b'   
 23 fi
 24 if [ $a -lt $b ]
 25 then
 26     echo 'a &lt; b'
 27 else
 28     echo 'a &gt; b'
 29 fi
 30 if [ $a -le $b ]
 31 then
 32     echo 'a ≤ b'
 33 else
 34     echo 'a ≥ b'
 35 fi
 36 if [ $a -ge $b ]
 37 then
 38     echo 'a ≥ b'
 39 else
 40     echo 'a ≤ b'
 41 fi
</code></pre>

<p><a href="https://img.it610.com/image/info8/38bec2ff772f483ea592670a052f4d35.jpg"><img src="https://img.it610.com/image/info8/38bec2ff772f483ea592670a052f4d35.jpg" alt="kali Linux
shell编程基础到进阶_第11张图片" /></a></p>

<p>执行：</p>

<p><a href="https://img.it610.com/image/info8/93ea1ac6229e41bf86585c9b0b94b8fb.jpg"><img src="https://img.it610.com/image/info8/93ea1ac6229e41bf86585c9b0b94b8fb.jpg" alt="kali Linux
shell编程基础到进阶_第12张图片" /></a></p>

<p>练习：编写脚本，输入任意用户，判断用户是否存在。</p>

<p>费了点时间，刚开始不知道咋搞，一步步试下来的。</p>

<p>首先用read -p 接收输入的用户名。这一点是肯定有的，接下来就是进行怎样的判断，两种方法：</p>

<p>cat /etc/passwd 文件和 id user。因为创建的用户都在这里可以查到，这里的选择在于进行怎样的转换，</p>

<p>是用用户id以数字显示，还是用户名，其实两个都行，后者可读性能高些，</p>

<p><strong>记得把查找到过滤好的信息一定要将它变成变量的形式：$(</strong> <strong>过滤信息</strong> <strong>)</strong> 。然后进行字符串的判断 用 &ldquo; &rdquo; 包起来。</p>

<p>（1）cat /etc/passwd |grep inputuser 先看看格式，再决定怎么过滤和截取</p>

<p><a href="https://img.it610.com/image/info8/760c58deb757423988a0582fd1ffda57.png"><img src="https://img.it610.com/image/info8/760c58deb757423988a0582fd1ffda57.png" alt="" /></a></p>

<p><strong>cut -d &ldquo;:&ldquo;-f 1 :</strong> 以冒号为截取关键字，-f 是取截取后的第几个，1就是截取的第一个： xk</p>

<p>如下代码：</p>

<pre><code>#!/bin/bash
read -p '请输入要查找的用户：' inputuser
finduser=$( cat /etc/passwd |grep $inputuser |cut -d &quot;:&quot; -f 1)
if [ &quot;$finduser&quot; == &quot;$inputuser&quot; ]
then
    echo '用户存在，如下：'
   cat /etc/passwd |grep $inputuser
else
    echo '用户不存在'
fi
</code></pre>

<p><a href="https://img.it610.com/image/info8/a9483acdd141472fa6ef8004bb96ffeb.jpg"><img src="https://img.it610.com/image/info8/a9483acdd141472fa6ef8004bb96ffeb.jpg" alt="kali Linux
shell编程基础到进阶_第13张图片" /></a></p>

<p>运行如下：</p>

<p><a href="https://img.it610.com/image/info8/2c732e4456994a24bff9a5415efe8622.jpg"><img src="https://img.it610.com/image/info8/2c732e4456994a24bff9a5415efe8622.jpg" alt="kali Linux
shell编程基础到进阶_第14张图片" /></a></p>

<p>（2）id user，先看看效果</p>

<p><a href="https://img.it610.com/image/info8/b73340d0ee994a83b0d819845eeb50e0.png"><img src="https://img.it610.com/image/info8/b73340d0ee994a83b0d819845eeb50e0.png" alt="" /></a></p>

<p>这里我的意思是， <strong>如果用户存在的话，他肯定有对应的</strong> <strong>&lsquo;uid&rsquo;</strong> <strong>关键字。以</strong> <strong>uid</strong> <strong>作为中间参数。</strong></p>

<p><strong>如下代码：</strong></p>

<pre><code>#!/bin/bash
read -p '请输入要查找的用户：' inputuser
finduser=$( id $inputuser |cut -d &quot;=&quot; -f 1)
if [ &quot;$finduser&quot; == &quot;uid&quot; ]
then
    echo '用户存在，如下：'
   id $inputuser
else
    echo '用户不存在'
fi
</code></pre>

<p><a href="https://img.it610.com/image/info8/20279586e7d5481c9e965edfb03b76f0.jpg"><img src="https://img.it610.com/image/info8/20279586e7d5481c9e965edfb03b76f0.jpg" alt="kali Linux
shell编程基础到进阶_第15张图片" /></a></p>

<p>执行查询如下</p>

<p><a href="https://img.it610.com/image/info8/9563f7d994a849d4b839b6db4ad602c2.jpg"><img src="https://img.it610.com/image/info8/9563f7d994a849d4b839b6db4ad602c2.jpg" alt="kali Linux
shell编程基础到进阶_第16张图片" /></a></p>

<p><strong>8.逻辑运算符</strong></p>

<p><a href="https://img.it610.com/image/info8/dd7ba592272c4a2cb790683152e15900.jpg"><img src="https://img.it610.com/image/info8/dd7ba592272c4a2cb790683152e15900.jpg" alt="kali Linux
shell编程基础到进阶_第17张图片" /></a></p>

<p>练习以上几个运算符：</p>

<pre><code>#!/bin/bash
a=10
b=20
if [ !false  ]
then
    echo '真'
else
    echo '假'
fi
if [ $a -le $b -o $a -gt $b ]
then
    echo &quot;真&quot;
else
    echo &quot;假&quot;
fi
if [ $a -lt $b -a $b -ge 30  ]
then
    echo '真'
else
    echo '假'
fi
</code></pre>

<p><a href="https://img.it610.com/image/info8/b2d2ae1845004ad4a27a065c7bb04806.jpg"><img src="https://img.it610.com/image/info8/b2d2ae1845004ad4a27a065c7bb04806.jpg" alt="kali Linux
shell编程基础到进阶_第18张图片" /></a></p>

<p><a href="https://img.it610.com/image/info8/01cc066b50a249aeb4fbaa1305e369dc.png"><img src="https://img.it610.com/image/info8/01cc066b50a249aeb4fbaa1305e369dc.png" alt="" /></a></p>

<p><strong>9.字符串运算符</strong></p>

<p><a href="https://img.it610.com/image/info8/22553b5181e04dd988249c0c8d0c29ae.jpg"><img src="https://img.it610.com/image/info8/22553b5181e04dd988249c0c8d0c29ae.jpg" alt="kali Linux
shell编程基础到进阶_第19张图片" /></a></p>

<p><a href="https://img.it610.com/image/info8/f372b9a9fa2445f39f2ef7aa848c101a.jpg"><img src="https://img.it610.com/image/info8/f372b9a9fa2445f39f2ef7aa848c101a.jpg" alt="" /></a></p>

<p><a href="https://img.it610.com/image/info8/c30d077cf84d45b491544f393ec0c643.jpg"><img src="https://img.it610.com/image/info8/c30d077cf84d45b491544f393ec0c643.jpg" alt="kali Linux
shell编程基础到进阶_第20张图片" /></a></p>

<p><a href="https://img.it610.com/image/info8/70f4e12bb32d44e9b957ffc9f4f3b62f.png"><img src="https://img.it610.com/image/info8/70f4e12bb32d44e9b957ffc9f4f3b62f.png" alt="kali Linux
shell编程基础到进阶_第21张图片" /></a></p>

<p><strong>10.文件测试运算符</strong></p>

<p><a href="https://img.it610.com/image/info8/467136e1f5d7453d963ae24005f7a622.jpg"><img src="https://img.it610.com/image/info8/467136e1f5d7453d963ae24005f7a622.jpg" alt="kali Linux
shell编程基础到进阶_第22张图片" /></a></p>

<p><a href="https://img.it610.com/image/info8/a6827c1e8e894b23a159976482c111af.jpg"><img src="https://img.it610.com/image/info8/a6827c1e8e894b23a159976482c111af.jpg" alt="kali Linux
shell编程基础到进阶_第23张图片" /></a></p>

<p>测试：</p>

<p><a href="https://img.it610.com/image/info8/52684007a7414a5095d9481095026270.jpg"><img src="https://img.it610.com/image/info8/52684007a7414a5095d9481095026270.jpg" alt="kali Linux
shell编程基础到进阶_第24张图片" /></a><a href="https://img.it610.com/image/info8/d67ae0c3ae554babaf802e3350965ae2.jpg"><img src="https://img.it610.com/image/info8/d67ae0c3ae554babaf802e3350965ae2.jpg" alt="kali
Linux
shell编程基础到进阶_第25张图片" /></a></p>

<p>执行脚本</p>

<p><a href="https://img.it610.com/image/info8/d91313ee82d741f8bf57bb85154c0181.jpg"><img src="https://img.it610.com/image/info8/d91313ee82d741f8bf57bb85154c0181.jpg" alt="kali Linux
shell编程基础到进阶_第26张图片" /></a></p>

<p>可执行和不可执行:有一个用户有执行权限则为脚本认为这个文件就有可执行权限</p>

<p><strong>11.shell脚本附带选项</strong></p>

<p>自己编写一些命令。</p>

<p>传递：</p>

<p>./ test.sh a b c</p>

<p>接收：在脚本中可以用$1 表示 a，$2 表示b $3 表示c。注意 $0表示脚本文件本身</p>

<p>编写test13.sh 传递 a b c</p>

<p><a href="https://img.it610.com/image/info8/bed39d1f073e4992a0bd289e20e32074.jpg"><img src="https://img.it610.com/image/info8/bed39d1f073e4992a0bd289e20e32074.jpg" alt="" /></a></p>

<p><a href="https://img.it610.com/image/info8/80b4b4c3ce664310a6f54ce8b5d7c2f0.png"><img src="https://img.it610.com/image/info8/80b4b4c3ce664310a6f54ce8b5d7c2f0.png" alt="" /></a></p>

<p>可以看得出来，bash的输入不需要其他什么input、scanf之类的语法以及声明，而是直接输入，参数也就传递进去了</p>

<p>练习：创建自定义 <strong>指令</strong> &ldquo;user&rdquo;，可以直接执行，要求如下：</p>

<p>a.user-add 用户名</p>

<p>|</p>

<p>添加用户</p>

<p>&mdash;|&mdash;</p>

<p>b.user-del 用户名</p>

<p>|</p>

<p>删除用户及其家目录</p>

<pre><code>#!/bin/bash
if [ $1 == '-add' ]
then
 useradd -m -g xk  -G sudo,root,adm $2
else
        userdel -r $2
fi
</code></pre>

<p><a href="https://img.it610.com/image/info8/dcd55eca88624ce18c82579767edd3a0.png"><img src="https://img.it610.com/image/info8/dcd55eca88624ce18c82579767edd3a0.png" alt="kali Linux
shell编程基础到进阶_第27张图片" /></a></p>

<p>-g是用户组</p>

<p>-G是附加权限组</p>

<p>这个脚本的执行方式就是一旦发现关键字&rsquo;-add user&rsquo; 就开始执行下面的添加用户命令。</p>

<p>进行执行和查看，最后删除这个测试的用户</p>

<p><a href="https://img.it610.com/image/info8/6167962b1a5248229ce0e44517001b21.png"><img src="https://img.it610.com/image/info8/6167962b1a5248229ce0e44517001b21.png" alt="kali Linux
shell编程基础到进阶_第28张图片" /></a></p>

<p>然后将脚本用别名机制写成指令: vim ~/.bashrc</p>

<p>找到下面的alias关键字，仿照语法添加别名&rsquo;user&rsquo;</p>

<p><a href="https://img.it610.com/image/info8/4f27c094eb2d4f95819face2ce5f3538.png"><img src="https://img.it610.com/image/info8/4f27c094eb2d4f95819face2ce5f3538.png" alt="kali Linux
shell编程基础到进阶_第29张图片" /></a></p>

<p>也就是说，这个别名机制成功创建后你在命令行键入user就相当于执行写的脚本命令，</p>

<p>可以理解为映射，注意脚本路径一定要写对。</p>

<p>然后执行，我这将添加和删除命令全执行了一次，如下：</p>

<p><a href="https://img.it610.com/image/info8/56b903ccee2b4e18b18d68cdf9e9ccc5.png"><img src="https://img.it610.com/image/info8/56b903ccee2b4e18b18d68cdf9e9ccc5.png" alt="kali Linux
shell编程基础到进阶_第30张图片" /></a></p>

<p><strong>扩展：</strong></p>

<p>1.创建bash文件的时候自动添加可执行权限，什么意思呢？每次你创建一个.sh文件次序基本是</p>

<p>（1）touch test.sh</p>

<p>（2）写代码</p>

<p>（3）chmod u+x test.sh</p>

<p>是不是很麻烦？能不能在创建的同时就给文件可执行权限呢？答案是肯定的！</p>

<p>如下：如何实现将两个命令衔接起来实现同时执行呢？我也只是试了一下，没想到还真行！</p>

<p>用 <strong>&amp; &amp;</strong> 进行连接！实现两个或者多个命令同时执行，多个我没试过，只是我的猜测，你可以试试哈！</p>

<p>我在这里命令是给其他用户权限，你也可以自己给别的用户权限</p>

<pre><code>#/bin/bash
touch $1 &amp;&amp; chmod o+x $1
</code></pre>

<p>执行一下：</p>

<p><a href="https://img.it610.com/image/info8/ff10edb800b64af4a722be273477e4db.png"><img src="https://img.it610.com/image/info8/ff10edb800b64af4a722be273477e4db.png" alt="kali Linux
shell编程基础到进阶_第31张图片" /></a></p>

<p>是不是很舒服呢？</p>

<p>脚本写好后使用别名机制写一个属于自己的脚本命令我这里起的名字是mkfile,如果你对别名感兴趣也可以多写几条自己常用的.</p>

<p><a href="https://img.it610.com/image/info8/230ce55094c047fab79ec611af79afba.jpg"><img src="https://img.it610.com/image/info8/230ce55094c047fab79ec611af79afba.jpg" alt="kali Linux
shell编程基础到进阶_第32张图片" /></a></p>

<p>然后再次执行一下：</p>

<p><a href="https://img.it610.com/image/info8/f619a804ab5a442fa547b8e5f3e6985b.jpg"><img src="https://img.it610.com/image/info8/f619a804ab5a442fa547b8e5f3e6985b.jpg" alt="kali Linux
shell编程基础到进阶_第33张图片" /></a></p>

<p>是不是更爽了呢？就是这么好玩！</p>

<p>好了，到这里差不多就结束了，shell的路途还得好好走一阵子，各位同学加油哈！命令和脚本语言一定要多使用，慢慢的也就精通了，一定不能过于着急，要稳得住，坐得下，咳咳，话有点多了哈！总之，努力吧</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a></li>
        
        <li><a href="/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/">009Shell脚本下条件测试eqne</a></li>
        
        <li><a href="/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/">00Pythonmanagepyshell和Python的分析</a></li>
        
        <li><a href="/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a></li>
        
        <li><a href="/posts/018dockerfileshell/">018DockerfileSHELL</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://zaina.newban.cn/tags/shell'>shell</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>