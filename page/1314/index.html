<!doctype html>
<html lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.59.1" />

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>开发者问答集锦 | </title>
    <meta property="og:title" content="开发者问答集锦 | ">
    <meta property="og:type" content="website">
    <meta name="Keywords" content="">
    <meta name="description" content="">
    <meta property="og:url" content="https://zaina.newban.cn/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+xml" href="https://zaina.newban.cn/index.xml" title="开发者问答集锦" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <h1>
                        <a id="logo" href="https://zaina.newban.cn">
                            开发者问答集锦
                        </a>
                    </h1>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%92%8C%E8%AF%AD%E5%8F%A5/" title="Shell脚本和语句">Shell脚本和语句</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            shell脚本与其他编程语言所编写的程序不同，脚本运行时需要调用相应的解释器来翻译脚本中的内容，根据我们编写的脚本格式不同，需要的解释器也不同。
一、脚本格式范例
每一个完善的脚本都要遵循一些既定的规则，下面来看一个完整的脚本：

在上述例子里，我们给出了一个相对完善的脚本所应该具有的基本框架。
第一行#！的作用时指定该脚本程序的命令解释器，例子中时/bin/bash。也就是说，脚本执行后，系统内核读取#！后面的路径查找解释器，最终使用该解释器翻译脚本代码并运行。
#后面为注释，在脚本执行时，该部分会被忽略。
接下来就是脚本的代码部分，这些代码会按顺序依次执行，但通过控制语句控制执行顺序除外。
二、运行脚本的方式
脚本编写完成后，我们需要运行并实现脚本程序的功能，下面时运行脚本的方法：
1.赋予权限，直接运行脚本

2.没有权限，通过bash或sh运行脚本

三、判断语句应用
1.if 语句
   语法格式1 语法格式2 语法格式3     if 条件 if 条件 if 条件   then then then   命令序列 命令序列 命令序列   fi else elif 条件   命令序列 then    fi 命令序列     else     命令序列     fi     命令序列代表命令集合，可以是一条命令，也可以是多条命令。……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%92%8C%E8%AF%AD%E5%8F%A5/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%9B/" title="shell脚本四">shell脚本四</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%9B/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%9Bcase%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8Cexit%E5%91%BD%E4%BB%A4/" title="shell脚本四case流程控制和exit命令">shell脚本四case流程控制和exit命令</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            exit 命令
exit 用来控制程序和表达式的流程,一般的编程语言中都会有一个exit函数,在Linuxshell中也属存在的.
exit 0
exit status
status 用0-255之间的数字表示,返回状态值的同时伴随着脚本的退出(其实就是退出).
就是$? 的值可以使用echo 进行查询
exit 命令 在脚本中和在终端上是不一样的.
实验1-判断从键盘输入的值是否为空
**
**
1, 进入一个子shell,编辑一个文件.（预防执行exit的时候退出终端，所以先执行一个子shell）
[root@Cent65 ~]# bash
[root@Cent65 ~]# vim exit.sh
#!/bin/bash
echo &ldquo;please enter a string :&rdquo;
read str1
if [ -z $str1 ]
then
echo &ldquo;what you enter is null&rdquo;
exit 1
fi
验证脚本
**我们先输入一个值,可以看到我的退出状态为0 (脚本的变量值输入不为空)， 不会执行then中的语句**
输入一个空的字符串 则执行then后面的命令 同时退出 状态为1
继续验证:
将exit.sh脚本中的值改成255
在编写脚本时可以自己设置退出的状态值,不过特定的值都是有特定的意义的,不要乱用.
**
**
case 语句结构
**case语句为多选择语句。可以用case语句匹配一个值与一个模式， 如果匹配成功，执行相匹配的命令。**
case语句主要适用于,某个变量存在多种取值，需要对其中的每一种取值分别执行不同的命令序列……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%9Bcase%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8Cexit%E5%91%BD%E4%BB%A4/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%9B%E6%95%B0%E7%BB%84/" title="Shell脚本四数组">Shell脚本四数组</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            平时写脚本还没有用到过数组，暂时先记录下用法。
#!/bin/bash array1=(1 2 3 4 5) array1_length=${#array1[@]} echo &quot;array1 length: ${array1_length}&quot; for item in ${array1[@]} do echo &quot;current item of array1: ${item}&quot; done array2[0]=&quot;test0&quot; array2[1]=&quot;test1&quot; array2[2]=&quot;test2&quot; array2[3]=&quot;test3&quot; for((i=0; i &lt; ${#array2[@]}; i++)) do echo &quot;current_index: $i, current_value: ${array2[$i]}&quot; done # 关联数组 declare -A dictArray dictArray=([key3]=value3 [key1]=value1 [key2]=value2) dictArray_length=${#dictArray[@]} echo &quot;dictArray length: ${dictArray_length}&quot; for key in ${!dictArray[@]} do echo &quot;current key of dictArray: ${key}&quot; done for value in ${dictArray[@]} do echo &quot;current value of dictArray: ${value}&quot; done for key in ${!……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%9B%E6%95%B0%E7%BB%84/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%9B%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fgrepsedawk%E5%B7%A5%E5%85%B7/" title="Shell脚本四正则表达式grepsedawk工具">Shell脚本四正则表达式grepsedawk工具</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%9B%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fgrepsedawk%E5%B7%A5%E5%85%B7/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2/" title="Shell脚本图形界面">Shell脚本图形界面</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            当你在终端环境下安装新的软件时，你可以经常看到信息对话框弹出，需要你的输入，比如：RHEL/CentOS自带的setup，对话框的类型有密码箱、检查表、菜单等等。他们可以引导你以一种直观的方式输入必要的信息，使用这样的用户友好的对话框的好处是显而易见的。如下图所示：

当你写一个交互式shell脚本，你可以使用这样的对话框来接受用户的输入。whiptail可以在shell脚本中创建基于终端的对话框，消息框的过程，类似于Zenity或xdialog GUI脚本代码。whiptail预先安装在所有的Linux发布版本中。
创建一个消息框
一个消息框中显示一个确认按钮继续任意的文本消息。
语法：
whiptail &ndash;title &ldquo;&rdquo; &ndash;msgbox &ldquo;&rdquo;
实例：
#!/bin/bash
whiptail &ndash;title &ldquo;Test Message Box&rdquo; &ndash;msgbox &ldquo;Create a message box with whiptail. Choose Ok to continue.&rdquo; 10 60

创建一个yes/no对话框
用户输入yes或no的对话框。
语法：
whiptail &ndash;title &ldquo;&rdquo; &ndash;yesno &ldquo;&rdquo;
实例：
#!/bin/bash
if (whiptail &ndash;title &ldquo;Test Yes/No Box&rdquo; &ndash;yesno &ldquo;Choose between Yes and No.&rdquo; 10 60) then
echo &ldquo;You chose Yes. Exit status was $?.&rdquo;
else
echo &ldquo;You chose No.……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9C%A8centos7%E9%87%8C%E9%9D%A2%E7%9A%84mysql%E4%B8%BB%E4%BB%8E/" title="Shell脚本在centos7里面的mysql主从">Shell脚本在centos7里面的mysql主从</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            执行之前配好ssh免密
和关闭防火墙
注意改成自己的IP
创建mysql脚本
vim mysql.sh

执行脚本的时候要这样 sh mysql-MS.sh 主参数IP 从参数IP
#!/bin/bash
yum -y install mariadb mariadb-server
sed -i ‘/0/a\server_id=1’ /etc/my.cnf
sed -i ‘/1/a\log-bin=mysql-bin’ /etc/my.cnf
#启动mysql
systemctl restart mariadb
#设置授权用户
mysql -e “grant all on . to mysql@’%’ identified by ‘mysql’;”
#刷新权限
mysql -e “flush privileges;”
#截取mysql二进制日志数据
file=mysql -e &quot;show master status&quot; | awk '/mysql/{print $1}'
pos=mysql -e &quot;show master status&quot; | awk '/mysql/{print $2}'
#安装免交互
yum -y install expect……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9C%A8centos7%E9%87%8C%E9%9D%A2%E7%9A%84mysql%E4%B8%BB%E4%BB%8E/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9C%A8crontab%E4%B8%AD%E4%B8%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E8%BF%90%E8%A1%8C/" title="SHELL脚本在crontab中不能正确运行">SHELL脚本在crontab中不能正确运行</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9C%A8crontab%E4%B8%AD%E4%B8%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E8%BF%90%E8%A1%8C/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9C%A8n%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%AD%E6%A3%80%E7%B4%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%84%B6%E5%90%8E%E7%AE%97%E6%80%BB%E6%95%B0/" title="shell脚本在n个文件中检索字符串然后算总数">shell脚本在n个文件中检索字符串然后算总数</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9C%A8n%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%AD%E6%A3%80%E7%B4%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%84%B6%E5%90%8E%E7%AE%97%E6%80%BB%E6%95%B0/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%BA%91%E4%B8%AD%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E4%B8%80/" title="shell脚本在容器云中搭建hadoop集群一">shell脚本在容器云中搭建hadoop集群一</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            哎，今天还是没有完成任务
总结一下今天的学习
1，利用Dockerfile搭建hadoop基础镜像成功。
包含sshd服务、用于格式化HDFS的which命令、用于交互的expect命令、JDK、hadoop
2，尝试使用一个脚本配置hadoop集群中的各个hadoop的ssh免密登录、hosts、5个xml文件、集群停止与启动、scp hadoop&mdash;&mdash;- 失败
原因：不能进去在宿主主机上运行的容器中再执行宿主主机运行的脚本命令
3，去QQ的Docker中文交流群2寻求帮助，在这感谢 杭州-ali-龙魂 与 北京-MD-蜗牛的帮助
根据帮助整理了流程图，也不知自己是否理解准确，上传留作纪念吧

4，根据自己想的流程图，写好了脚本，可惜只是编译镜像成功，但是还不能运行完整、报错，所以今天就不上传代码了
5，哎，伤脑的一天，明天加油，希望能完成……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E8%84%9A%E6%9C%AC%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%BA%91%E4%B8%AD%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E4%B8%80/">阅读全文</a></p>
    </article>
    
    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://zaina.newban.cn/page/1313/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://zaina.newban.cn/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/1312/">1312</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/1313/">1313</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://zaina.newban.cn/page/1314/">1314</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/1315/">1315</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/1316/">1316</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/1960/">1960</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://zaina.newban.cn/page/1315/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>