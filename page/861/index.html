<!doctype html>
<html lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.59.1" />

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>开发者问答集锦 | </title>
    <meta property="og:title" content="开发者问答集锦 | ">
    <meta property="og:type" content="website">
    <meta name="Keywords" content="">
    <meta name="description" content="">
    <meta property="og:url" content="https://zaina.newban.cn/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml+xml" href="https://zaina.newban.cn/index.xml" title="开发者问答集锦" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <h1>
                        <a id="logo" href="https://zaina.newban.cn">
                            开发者问答集锦
                        </a>
                    </h1>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://zaina.newban.cn">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8devnull21%E4%B8%A2%E5%BC%83%E4%BF%A1%E6%81%AF/" title="shell中使用devnull21丢弃信息">shell中使用devnull21丢弃信息</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8devnull21%E4%B8%A2%E5%BC%83%E4%BF%A1%E6%81%AF/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8eof%E8%B5%8B%E5%80%BC%E5%8F%98%E9%87%8F/" title="shell中使用EOF赋值变量">shell中使用EOF赋值变量</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            看事容易做事难，事非经过不知难。  平时看博客的时候以为”EOF”这就是可以多行输入，确实是这样！
因 sql 语句都较长，且有换行，直接放命令行运行出错，于是想到用EOF，先把sql语句写好赋值给一个变量，然后通过变量引用。
想法很好，做的时候却遇到问题了，怎么也无法把这个sql语句赋值到变量上，折腾了好久也没搞懂为什么，于是放弃了，虽然用其他方法也完成了需求，但这个简单的问题却一直扰着我，百思不得其解。
直到第二个星期，还是想试试为什么用不了，试了好一会，也是无解，最后想放弃了，不知道为啥，就在最后偶然一试，却成功了！
于是记下这个简单的用法：
#!/bin/bash sql=$(cat&lt;1. 2. 3 hello world EOF //4 ) //5 echo $sql 说明： 1. 注意这个括号 2. cat后面使用 &lt;3. 若接文件可空格后在后面写 cat&lt;4. 单独一行结束内容输入 5. 匹配之前的括号） 完成 退出到命令行  ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8eof%E8%B5%8B%E5%80%BC%E5%8F%98%E9%87%8F/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8expectheredocument/" title="Shell中使用ExpectHereDocument">Shell中使用ExpectHereDocument</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            在使用Shell写程序时，有时不得不面对交互的问题——可惜shell往往无法自动完成交互。如果交互的内容很多，自然是直接应用Expect脚本比较方便；如果交互的内容很少，而且考虑到Shell的易用性，在Shell脚本中创建一个Expect 的Here Document更加方便灵活。
如下例所示，Expect Here Document可以直接运行并将运行结果赋给KSH变量rcs_stat。
#!/bin/ksh autoload formatAPnum # Set the lab name, COOLLAB . $COOLXDIR/.netlabs # Get the RCS cell list set -A RCSs typeset -i nx=0 cat $COOLXDIR/.coolcell2dcs | while read cell do if [[ &quot;$cell&quot; = c* ]] then rcs=${cell%%$COOLLAB*} RCSs[$nx]=${rcs#c} nx=$nx+1 fi done # Check RCS status typeset -i loopCount=0 rcs_cnt=${#RCSs[*]} B_server=$(formatAPnum $BserverAP) while [ &quot;${#RCSs[*]}&quot; != 0 -a $loopCount -lt 720 ] # wait at most 2 hours do loopCount=${loopCount}+1 nx=0 while [ $nx -lt $rcs_cnt ] do rcs_stat=&quot;OOS&quot; rcs_stat=$( expect - &lt;  ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8expectheredocument/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8expect%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8C%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%84%9A%E6%9C%AC/" title="shell中使用expect命令进行远程执行命令脚本">shell中使用expect命令进行远程执行命令脚本</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            expect是用来实现自动交互功能的工具之一，使用expect-send来实现交互过程。
注意：
1、脚本的执行方法与bash shell不一样，比如：expect example.sh
2、向一个脚本传递参数时，bash shell是使用$1, 2&hellip; 来 接 收 参 数 的 ； 而 e x p e c t 则 将 脚 本 的 执 行 参 数 保 存 在 数 组 2&hellip;来接收参数的；而expect则将脚本的执行参数保存在数组 2&hellip;来接收参数的；而expect则将脚本的执行参数保存在数组argv中，在脚本中一般将其赋值给变量：set 变量名 [lindex $argv 参数]
#!/usr/bin/expect set ip [lindex $argv 0] set password [lindex $argv 1] set timeout 2 spawn telnet $ip expect &quot;*femto login:&quot; send &quot;root\r&quot; expect &quot;*Password:&quot; send &quot;$password\r&quot; # 进入指定的机器后，就可执行相应的命令或者脚本 interact #expect eof  注意：若登陆后便退出远程终端，则写expect eof即可。……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8expect%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8C%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%84%9A%E6%9C%AC/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8firefox/" title="shell中使用firefox">shell中使用firefox</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8firefox/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8grepsed%E6%AD%A3%E5%88%99%E6%8F%90%E5%8F%96%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="Shell中使用grepsed正则提取替换字符串">Shell中使用grepsed正则提取替换字符串</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
             Linux中使用grep正则提取字符串 echo office365 | grep -P '\d+' -o find . -name &quot;*.txt&quot; | xargs grep -P 'regex' -o  xargs会将find结果作为grep的输入，防止find结果过多无法处理
-P参数表明要应用正则表达式
-o表示只输出匹配的字符串，这样我们就可以把正则匹配到的结果拿到了。
Linux、Mac OS中使用sed正则提取字符串 Mac OS上用正则的话要用e参数取代P参数，也可以用sed命令：
sed命令格式：
sed 's/oldValue/newValue/g'  提取字符串 echo here365test | sed 's/.*ere\([0-9]*\).*/\1/g'  输出：
365  s表示替换，\1表示用第一个括号里面的内容替换整个字符串，sed支持*，不支持?、+，不能用\d之类，正则支持有限。
替换字符串 echo here365test | sed &quot;s/365/789/g&quot; # 注意，必须是双引号，不然引用变量会有问题！没错，就是这么严苛奇葩！ newid=996 echo here365test | sed &quot;s/365/$newid/g&quot;  输出：
here789test here996test  ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8grepsed%E6%AD%A3%E5%88%99%E6%8F%90%E5%8F%96%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8grep%E6%9D%A5%E5%88%A4%E6%96%AD/" title="shell中使用grep来判断">shell中使用grep来判断</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            在shell中，经常会用到grep 检索某个文件，查询是否有字符匹配， 用来判断流程：
如：查询打印出来的log中，是否有想要的字符串：
[cpp] view plain copy
 /usr/app/startup &gt; /usr/config.log grep &ldquo;NETMASK&rdquo; /usr/config.log if [ $? -ne 0 ]; then sleep 70 echo &ldquo;sleep 70s&rdquo; /usr/app/startup &gt; /usr/config.log insmod /mnt/syslib/modules/fecdev.ko /usr/app/slm &amp; /usr/app/softupdate slm &amp; else echo &ldquo;ipconfig succeed&rdquo; insmod /mnt/syslib/modules/fecdev.ko /usr/app/slm &amp; /usr/app/softupdate slm &amp; fi  这里用到了grep操作的返回值：
如果有匹配的字符串，返回值是0， 还会打印出匹配字符串的行。
如果没有匹配， 会返回1。
busybox的 grep和 ubuntu PC 的grep 参数还不一样：
**这里列了busybox中的grep的使用规则：
**
grep
1.作用
grep命令可以指定文件中搜索特定的内容，并将含有这些内容的行标准输出。grep全称是Global Regular ExpressionPrint，表示全局正则表达式版本，它的使用权限是所有用户。
2.格式
grep [options]……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8grep%E6%9D%A5%E5%88%A4%E6%96%AD/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8if%E5%88%A4%E6%96%AD%E6%97%B6%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%82%E6%95%B0/" title="shell中使用if判断时用到的一些参数">shell中使用if判断时用到的一些参数</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8if%E5%88%A4%E6%96%AD%E6%97%B6%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%82%E6%95%B0/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8read%E5%A6%82%E4%BD%95%E6%8D%A2%E8%A1%8C/" title="shell中使用read如何换行">shell中使用read如何换行</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            例如：
read -p $'Please Enter the percent [30 between 100]\x0a The value is Default = 80 :' scale_percent  we use above syntax to insert hex values, we insert \x0a which is the hexadecimal value of the newline character (LF). You can use same syntax above with echo to produce new lines, eg:
echo $'One line\x0asecond line'  This is a feature of BASH 2, it is documented here, the $'' is used to translate all escape sequences inside it for its ascii transcription.……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8read%E5%A6%82%E4%BD%95%E6%8D%A2%E8%A1%8C/">阅读全文</a></p>
    </article>
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8sort%E5%92%8Cuniq%E5%AE%9E%E7%8E%B0%E4%B8%A4%E6%96%87%E4%BB%B6%E7%9A%84%E5%B9%B6%E9%9B%86%E4%BA%A4%E9%9B%86%E5%92%8C%E5%B7%AE%E9%9B%86/" title="shell中使用sort和uniq实现两文件的并集交集和差集">shell中使用sort和uniq实现两文件的并集交集和差集</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2020年9月2日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://zaina.newban.cn/posts/shell%E4%B8%AD%E4%BD%BF%E7%94%A8sort%E5%92%8Cuniq%E5%AE%9E%E7%8E%B0%E4%B8%A4%E6%96%87%E4%BB%B6%E7%9A%84%E5%B9%B6%E9%9B%86%E4%BA%A4%E9%9B%86%E5%92%8C%E5%B7%AE%E9%9B%86/">阅读全文</a></p>
    </article>
    
    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://zaina.newban.cn/page/860/">上一页</a>
    </li>
    

    

    
        
        
    
    

    
        
        
        <li >
            <a href="https://zaina.newban.cn/">1</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/859/">859</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/860/">860</a>
        </li>
        
    
        
        
        <li  class="current">
            <a href="https://zaina.newban.cn/page/861/">861</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/862/">862</a>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/863/">863</a>
        </li>
        
    
        
        <li>
            <span>...</span>
        </li>
        
    
        
        
        <li >
            <a href="https://zaina.newban.cn/page/1960/">1960</a>
        </li>
        
    

    
    

    <li class="next">
        <a href="https://zaina.newban.cn/page/862/">下一页</a>
    </li>
    
</ol>




</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://zaina.newban.cn">开发者问答集锦 By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://zaina.newban.cn/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://zaina.newban.cn">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://zaina.newban.cn/posts/001rubyruby%E4%B8%AD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%8F%98%E9%87%8Fsymbol%E5%AF%B9%E6%AF%94/" title="001rubyRuby中全局变量实例变量局部变量类变量Symbol对比">001rubyRuby中全局变量实例变量局部变量类变量Symbol对比</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/007hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEhadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B5%8B%E8%AF%95ssh%E5%85%8D%E7%99%BB%E9%99%86%E9%85%8D%E7%BD%AEstartallshhdfs%E5%B8%B8%E7%94%A8%E7%9A%84shell/" title="007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell">007Hadoop集群配置Hadoop集群的启动和测试SSH免登陆配置startallshhdfs常用的shell</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/009shell%E8%84%9A%E6%9C%AC%E4%B8%8B%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95eqne/" title="009Shell脚本下条件测试eqne">009Shell脚本下条件测试eqne</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/00pythonmanagepyshell%E5%92%8Cpython%E7%9A%84%E5%88%86%E6%9E%90/" title="00Pythonmanagepyshell和Python的分析">00Pythonmanagepyshell和Python的分析</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/010zookeeper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5zookeeper%E7%9A%84%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BAzookeeper%E7%9A%84shell%E5%91%BD%E4%BB%A4/" title="010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令">010Zookeeper的基本概念Zookeeper的集群搭建Zookeeper的shell命令</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/018dockerfileshell/" title="018DockerfileSHELL">018DockerfileSHELL</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%85%A5%E9%97%A801bashshell%E7%89%B9%E6%80%A7/" title="01Shell入门01bashShell特性">01Shell入门01bashShell特性</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%8F%98%E9%87%8F/" title="01Shell变量">01Shell变量</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8Fbash%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/" title="01Shell基础概述脚本执行方式Bash基本功能">01Shell基础概述脚本执行方式Bash基本功能</a>
    </li>
    
    <li>
        <a href="https://zaina.newban.cn/posts/01shell%E7%BC%96%E7%A8%8Bhelloworld/" title="01shell编程helloworld">01shell编程helloworld</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href="/tags">标签</a></h3>
<div class="tagcloud">
    
    <a href="https://zaina.newban.cn/tags/ruby/">ruby</a>
    
    <a href="https://zaina.newban.cn/tags/shell/">shell</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://zaina.newban.cn/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>